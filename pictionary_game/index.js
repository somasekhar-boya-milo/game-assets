System.register("chunks:///_virtual/PicitionaryGameState.ts",["cc"],(function(t){var N;return{setters:[function(t){N=t.cclegacy}],execute:function(){N._RF.push({},"eaf5ch2INJC5ZpHH/uBoUZh","PicitionaryGameState",void 0);t("PictionaryGameState",function(t){return t[t.NONE=0]="NONE",t[t.START_ROUND=1]="START_ROUND",t[t.WORD_SELECTION=2]="WORD_SELECTION",t[t.DRAWING=3]="DRAWING",t[t.DRAWING_RESULTS=4]="DRAWING_RESULTS",t[t.END_ROUND=5]="END_ROUND",t[t.END_GAME=6]="END_GAME",t}({}));N._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,o,t,n,a,u,r,l,s,c,d,p,h,f,y,b;return{setters:[function(i){e=i.applyDecoratedDescriptor,o=i.inheritsLoose,t=i.initializerDefineProperty,n=i.assertThisInitialized,a=i.createClass},function(i){u=i.cclegacy,r=i._decorator,l=i.CCString,s=i.AudioClip,c=i.CCFloat,d=i.CCBoolean,p=i.AudioSource,h=i.Prefab,f=i.sys,y=i.instantiate,b=i.Component}],execute:function(){var g,A,S,C,m,E,P,v,w,I,L,D,z,_,M,k,B,T,x,F,R,K,G;u._RF.push({},"f9e81/u9dpJo6M46HQM5h+S","Pictionary_AudioManager",void 0);var H=r.ccclass,U=r.property,W=(g=H("PictionaryAudioClipData"),A=U({type:l}),S=U({type:s}),C=U({type:c}),m=U({type:c}),E=U({type:d}),g((w=e((v=function(){function i(){t(this,"name",w,this),t(this,"audioClips",I,this),t(this,"delayBetweenClips",L,this),t(this,"volume",D,this),t(this,"loop",z,this),this.isLoopPlaying=void 0,this.lastPlayedTime=0,this.clipIndex=0}var e=i.prototype;return e.GetClip=function(){var i=this.audioClips[this.clipIndex];if(this.clipIndex=(this.clipIndex+1)%this.audioClips.length,this.CanPlay())return this.lastPlayedTime=Date.now(),i},e.CanPlay=function(){return Date.now()-this.lastPlayedTime>1e3*this.delayBetweenClips},i}()).prototype,"name",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(v.prototype,"audioClips",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(v.prototype,"delayBetweenClips",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(v.prototype,"volume",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=e(v.prototype,"loop",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=v))||P);i("PictionaryAudioManager",(_=H("PictionaryAudioManager"),M=U({type:W}),k=U({type:p}),B=U({type:h}),_(((G=function(i){function e(){for(var e,o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return e=i.call.apply(i,[this].concat(a))||this,t(e,"audioClipData",F,n(e)),t(e,"backgroundAudioSource",R,n(e)),e.localStorageAudioEnabledKey="SNLAudioEnabled",t(e,"audioSourcePrefab",K,n(e)),e.audioSources=[],e._isAudioEnabled="true",e}o(e,i);var u=e.prototype;return u.onLoad=function(){e.instance=this,this.ReadAudioEnabledFromLocalStorage()},u.onDestroy=function(){e.instance===this&&(e.instance=null)},u.start=function(){this.SetAudioEnabled(this.IsAudioEnabled)},u.playSound=function(i){if("false"!=this.IsAudioEnabled){var e=this.audioClipData.find((function(e){return e.name==i}));if(null!=e){var o=e.GetClip();if(o){if(e.isLoopPlaying)return;var t=this.getEmptyAudioSource();t.loop=e.loop,e.isLoopPlaying=e.loop,t.volume=e.volume,t.clip=o,e.loop?t.play():t.playOneShot(o)}else console.warn("Audio Clip is in use ",i)}}},u.stopSound=function(i){var e=this.audioClipData.find((function(e){return e.name==i}));e?this.audioSources.forEach((function(i){i.clip==e.audioClips[e.clipIndex]&&(e.isLoopPlaying=!1,i.stop())})):console.warn("Audio Clip not found for ",i)},u.stopAllSounds=function(){this.audioSources.forEach((function(i){i.stop()})),this.audioClipData.forEach((function(i){i.isLoopPlaying=!1}))},u.ToggleAudio=function(){"true"==this.IsAudioEnabled?this.SetAudioEnabled("false"):this.SetAudioEnabled("true")},u.SetAudioEnabled=function(i){this._isAudioEnabled=i,this.UpdateBackgroundMusic(),this.WriteAudioEnabledToLocalStorage()},u.WriteAudioEnabledToLocalStorage=function(){f.localStorage.setItem(this.localStorageAudioEnabledKey,this.IsAudioEnabled)},u.ReadAudioEnabledFromLocalStorage=function(){var i=f.localStorage.getItem(this.localStorageAudioEnabledKey);this._isAudioEnabled=null==i?"true":i},u.UpdateBackgroundMusic=function(){var i,e;"true"==this.IsAudioEnabled?null==(i=this.backgroundAudioSource)||i.play():null==(e=this.backgroundAudioSource)||e.stop()},u.printAllPlayingAudioSources=function(){this.audioSources.forEach((function(i){i.playing&&console.log("Playing audio source: ",i.playing,i.clip.name,i.uuid)}))},u.getEmptyAudioSource=function(){var i=this.audioSources.find((function(i){return!i.playing}));return null==i&&(i=this.createAudioSource()),i},u.createAudioSource=function(){var i=y(this.audioSourcePrefab).getComponent(p);return i.node.setParent(this.node),this.audioSources.push(i),console.log("==== Created new audio source: ",this.audioSources.length),i},a(e,[{key:"IsAudioEnabled",get:function(){return this._isAudioEnabled}}]),e}(b)).instance=null,F=e((x=G).prototype,"audioClipData",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(x.prototype,"backgroundAudioSource",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(x.prototype,"audioSourcePrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T));u._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_BasePlayerData.ts",["cc"],(function(i){var s;return{setters:[function(i){s=i.cclegacy}],execute:function(){s._RF.push({},"a3808xoBh1EaJyFTRy3wBHQ","Pictionary_BasePlayerData",void 0);i("PictionaryBasePlayerData",function(){function i(){this.userId=void 0,this.name=void 0,this.avatar=void 0,this.sessionId=void 0,this.type=void 0,this.isOnline=void 0,this.isConnected=void 0,this.isReplacedByBot=void 0,this.isKickedOut=void 0,this.isReady=void 0,this.score=void 0}return i.prototype.copyFrom=function(i){this.userId=i.userId,this.name=i.name,this.avatar=i.avatar,this.sessionId=i.sessionId,this.type=i.type,this.isOnline=i.isOnline,this.isConnected=i.isConnected,this.isReplacedByBot=i.isReplacedByBot,this.isKickedOut=i.isKickedOut,this.isReady=i.isReady,this.score=i.score},i}());s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_BaseRoomSettings.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ed712fU8zJCB63GFLhIhcqf","Pictionary_BaseRoomSettings",void 0);t("DefaultRoomSettings",{maxPlayers:8,minPlayers:2,maxClients:8,countdownTimeInSeconds:3,allowLateJoin:!0,maxReconnectionAttempts:3,reconnectionAttemptInterval:1e3,reconnectionTime:1e4,gameFPS:30,serverFPS:30,patchRate:1e3}),t("PictionaryBaseRoomSettings",function(){function t(){this.maxPlayers=void 0,this.minPlayers=void 0,this.maxClients=void 0,this.countdownTimeInSeconds=void 0,this.allowLateJoin=void 0,this.maxReconnectionAttempts=void 0,this.reconnectionAttemptInterval=void 0,this.reconnectionTime=void 0,this.gameFPS=void 0,this.serverFPS=void 0,this.patchRate=void 0}return t.prototype.copyFrom=function(t){this.maxPlayers=t.maxPlayers,this.minPlayers=t.minPlayers,this.maxClients=t.maxClients,this.countdownTimeInSeconds=t.countdownTimeInSeconds,this.allowLateJoin=t.allowLateJoin,this.reconnectionTime=t.reconnectionTime,this.gameFPS=t.gameFPS,this.serverFPS=t.serverFPS,this.patchRate=t.patchRate},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_BaseRoomState.ts",["cc","./Pictionary_RoomTypes.ts"],(function(t){var o,s;return{setters:[function(t){o=t.cclegacy},function(t){s=t.PictionaryRoomStatus}],execute:function(){o._RF.push({},"ed32dyxApRGmrQtfwC1xZQi","Pictionary_BaseRoomState",void 0);t("PictionaryBaseRoomState",function(){function t(t,o){this.currentRoomStatus=s.WAITING_FOR_PLAYERS,this.previousRoomStatus=s.NONE,this.roomSettings=void 0,this.playersData=void 0,this.spectatorsData=void 0,this.roomSettings=t,this.playersData=o,this.spectatorsData=[]}return t.prototype.copyFrom=function(t){this.currentRoomStatus=t.currentRoomStatus,this.previousRoomStatus=t.previousRoomStatus,this.roomSettings.copyFrom(t.roomSettings)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Brush.ts","./Pictionary_Utils.ts","./Pictionary_PBLogger.ts"],(function(t){var i,o,n,r,e,s,a,h,c,u,l,p,d,f,g,_,T,y,w,P;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,e=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,h=t.EventTarget,c=t.Node,u=t.Label,l=t.Graphics,p=t.UITransform,d=t.Input,f=t.Vec3,g=t.Vec2,_=t.Color,T=t.Component},function(t){y=t.PictionaryBrush},function(t){w=t.PictionaryUtils},function(t){P=t.PictionaryPBLogger}],execute:function(){var m,v,E,D,S,b,B,O,k;s._RF.push({},"1d8b39tO65Bf7sCMOk5RYYY","Pictionary_Board",void 0);var C=a.ccclass,U=a.property,L=t("BoardEvents",new h),N=t("STROKE_COMPLETED_EVENT","stroke-completed");t("PictionaryBoard",(m=C("PictionaryBoard"),v=U({type:c,tooltip:"The toolbar containing drawing tools"}),E=U({type:u,tooltip:"Label displaying the current drawer name"}),D=U({type:y,tooltip:"The current brush settings"}),m((B=i((b=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return i=t.call.apply(t,[this].concat(e))||this,n(i,"toolBar",B,r(i)),n(i,"drawerNameLabel",O,r(i)),n(i,"brush",k,r(i)),i._isDrawing=!1,i._lastPos=null,i._strokePoints=[],i._graphics=null,i._uiTransform=null,i}o(i,t);var s=i.prototype;return s.onLoad=function(){this._graphics=this.getComponent(l),this._uiTransform=this.getComponent(p),this._graphics||P.error("Board requires a Graphics component"),this._uiTransform||P.error("Board requires a UITransform component")},s.enableDrawing=function(t){this.toolBar?(this.toolBar.active=t,t?this.registerTouchEvents():this.unregisterTouchEvents()):P.error("Toolbar not assigned to Board")},s.setDrawerName=function(t){this.drawerNameLabel?this.drawerNameLabel.string=t:P.error("Drawer name label not assigned to Board")},s.registerTouchEvents=function(){this.node.on(c.EventType.MOUSE_DOWN,this.onStartDrawing,this),this.node.on(c.EventType.MOUSE_MOVE,this.onDrawing,this),this.node.on(c.EventType.MOUSE_UP,this.onStopDrawing,this),this.node.on(c.EventType.TOUCH_START,this.onStartDrawing,this),this.node.on(c.EventType.TOUCH_MOVE,this.onDrawing,this),this.node.on(c.EventType.TOUCH_END,this.onStopDrawing,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onStopDrawing,this),this.node.on(d.EventType.KEY_DOWN,this.onKeyDown,this)},s.unregisterTouchEvents=function(){this.node.off(c.EventType.MOUSE_DOWN,this.onStartDrawing,this),this.node.off(c.EventType.MOUSE_MOVE,this.onDrawing,this),this.node.off(c.EventType.MOUSE_UP,this.onStopDrawing,this),this.node.off(c.EventType.TOUCH_START,this.onStartDrawing,this),this.node.off(c.EventType.TOUCH_MOVE,this.onDrawing,this),this.node.off(c.EventType.TOUCH_END,this.onStopDrawing,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onStopDrawing,this),this.node.off(d.EventType.KEY_DOWN,this.onKeyDown,this)},s.onStartDrawing=function(t){if(this._uiTransform){this._isDrawing=!0;var i=t.getUILocation(),o=this._uiTransform.convertToNodeSpaceAR(new f(i.x,i.y,0)),n=new g(o.x,o.y),r=this.normalizePositionWithBoard(n);this.isPointWithinBounds(r)&&(this._lastPos=n,this.addPointToStroke(r),this.setupGraphicsForDrawing())}},s.onDrawing=function(t){if(this._isDrawing&&this._lastPos&&this._uiTransform){var i=t.getUILocation(),o=this._uiTransform.convertToNodeSpaceAR(new f(i.x,i.y,0)),n=new g(o.x,o.y),r=this.normalizePositionWithBoard(n);this.isPointWithinBounds(r)&&(this.drawLine(this._lastPos,n),this._lastPos=n,this.addPointToStroke(r))}},s.onStopDrawing=function(){this._strokePoints.length>0&&L.emit(N,{strokePoints:this._strokePoints,brush:this.brush}),this._strokePoints=[],this._isDrawing=!1,this._lastPos=null},s.drawLine=function(t,i){this._graphics&&(this._graphics.moveTo(t.x,t.y),this._graphics.lineTo(i.x,i.y),this._graphics.stroke())},s.setupGraphicsForDrawing=function(){this._graphics&&(this._graphics.lineWidth=this.brush.width,this._graphics.strokeColor=this.brush.color)},s.normalizeAndAddPointToStroke=function(t){var i=this.normalizePositionWithBoard(t);this.isPointWithinBounds(i)?this.addPointToStroke(i):P.info("Discarding point outside bounds:",i)},s.addPointToStroke=function(t){this._strokePoints.push(w.roundNumber(t.x,6)),this._strokePoints.push(w.roundNumber(t.y,6))},s.isPointWithinBounds=function(t){return t.x>=0&&t.x<=1&&t.y>=0&&t.y<=1},s.onKeyDown=function(t){67===t.keyCode&&this.clear()},s.clear=function(){this._graphics&&this._graphics.clear()},s.getBrush=function(){return this.brush},s.setBrush=function(t){this.brush=t},s.setCurrentSketch=function(t){if(this.clear(),this._graphics){P.info("Setting current sketch with data:",t);for(var i,o=e(t);!(i=o()).done;){var n=i.value;P.info("Rendering stroke:",n),this.renderStroke(n)}}else P.error("Graphics component not found on the node.")},s.renderStroke=function(t){if(this._graphics){var i=null,o=t.strokePoints;this._graphics.strokeColor=new _(t.color),this._graphics.lineWidth=t.width;for(var n=0;n<o.length;n+=2){var r=o[n],e=o[n+1],s=new g(r,e),a=this.denormalizePositionWithBoard(s);P.info("Denormalized point:",a),i&&(this._graphics.moveTo(i.x,i.y),this._graphics.lineTo(a.x,a.y),this._graphics.stroke()),i=a}}},s.normalizePositionWithBoard=function(t){if(!this._uiTransform)return t;var i=this._uiTransform.contentSize;return 0===i.width||0===i.height?(P.error("Board size is zero. Cannot normalize positions."),t):new g(t.x/i.width,t.y/i.height)},s.denormalizePositionWithBoard=function(t){if(!this._uiTransform)return t;var i=this._uiTransform.contentSize;return new g(t.x*i.width,t.y*i.height)},i}(T)).prototype,"toolBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(b.prototype,"drawerNameLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(b.prototype,"brush",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),S=b))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Brush.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var t,i,e,o,n,c;return{setters:[function(r){t=r.applyDecoratedDescriptor,i=r.initializerDefineProperty},function(r){e=r.cclegacy,o=r._decorator,n=r.CCFloat,c=r.Color}],execute:function(){var a,u,l,s,p,h;e._RF.push({},"da8bfTaMHpEJ6w6Jfuutkdj","Pictionary_Brush",void 0);var f=o.ccclass,y=o.property;r("PictionaryBrush",(a=f("PictionaryBrush"),u=y({type:n}),a((p=t((s=function(r,t){i(this,"width",p,this),i(this,"color",h,this),r&&(this.width=r),t&&(this.color=t)}).prototype,"width",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=t(s.prototype,"color",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,0,0,255)}}),l=s))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_CameraManger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,o,h,s,c,d,u,l,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,h=e.UITransform,s=e.Camera,c=e.screen,d=e.sys,u=e.view,l=e.math,g=e.Component}],execute:function(){var p,f,w,m,H,b,y,z,S,v,O,A;a._RF.push({},"84ce1NZ9adOp5zuzoVQGk2o","Pictionary_CameraManger",void 0);var C=o.ccclass,R=o.property;(0,o.executionOrder)(-1);e("PictionaryCameraManger",(p=C("PictionaryCameraManger"),f=R({type:h}),p(((A=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"canvasUITransform",H,n(t)),r(t,"designHeight",b,n(t)),r(t,"designWidth",y,n(t)),r(t,"defaultOrthoHeight",z,n(t)),r(t,"minOrthoHeight",S,n(t)),r(t,"maxOrthoHeight",v,n(t)),r(t,"safeAreaPadding",O,n(t)),t.designAspectRatio=void 0,t.currentAspectRatio=void 0,t.camera=null,t.windowWidth=1080,t.windowHeight=1920,t}i(t,e);var a=t.prototype;return a.onLoad=function(){t.instance=this,this.designAspectRatio=this.designWidth/this.designHeight,this.camera=this.node.getComponent(s)},a.start=function(){var e=this;this.updateScreenSize(),this.adaptCameraToScreen(),window.addEventListener("resize",(function(){e.updateScreenSize(),e.adaptCameraToScreen()}))},a.updateScreenSize=function(){this.windowWidth=c.windowSize.width||window.innerWidth,this.windowHeight=c.windowSize.height||window.innerHeight,this.currentAspectRatio=this.windowWidth/this.windowHeight,console.log("Window Size: "+this.windowWidth+"x"+this.windowHeight+", Aspect Ratio: "+this.currentAspectRatio.toFixed(2))},a.adaptCameraToScreen=function(){if(this.camera){var e=0,t=0,i=0,r=0;if(d.os===d.OS.IOS||d.os===d.OS.ANDROID){var n=u.getVisibleSize(),a=u.getVisibleOrigin();n&&(e=a.y,t=this.windowHeight-(a.y+n.height),i=a.x,r=this.windowWidth-(a.x+n.width))}var o=this.windowHeight-e-t-2*this.safeAreaPadding,h=this.windowWidth-i-r-2*this.safeAreaPadding,s=h/o;console.log("Effective Size: "+h+"x"+o+", Aspect Ratio: "+s.toFixed(2));var c=this.currentAspectRatio>=1,g=this.defaultOrthoHeight;if(c)console.log("=== Landscape Mode ==="),g=this.defaultOrthoHeight*(1/this.currentAspectRatio)*1.5;else{console.log("=== Portrait Mode ===");var p=.6/Math.min(this.currentAspectRatio,.6);g=this.defaultOrthoHeight*p}g=l.clamp(g,this.minOrthoHeight,this.maxOrthoHeight),this.camera.orthoHeight=g,console.log("Camera Ortho Height: "+g.toFixed(2))}},a.getWidth=function(){return 2*this.camera.orthoHeight*this.currentAspectRatio},a.getCurrentOrthoHeight=function(){return this.camera.orthoHeight},a.refreshCameraAdaptation=function(){this.updateScreenSize(),this.adaptCameraToScreen()},t}(g)).instance=null,H=t((m=A).prototype,"canvasUITransform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(m.prototype,"designHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1920}}),y=t(m.prototype,"designWidth",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),z=t(m.prototype,"defaultOrthoHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 820}}),S=t(m.prototype,"minOrthoHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 750}}),v=t(m.prototype,"maxOrthoHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),O=t(m.prototype,"safeAreaPadding",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),w=m))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_ChatManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PictionaryGameHandler.ts","./Pictionary_GameManager.ts"],(function(t){var e,n,i,o,a,s,r,h,d,u,g,c,l,p,m,f,b,y,C,x,B,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Node,h=t.Prefab,d=t.EditBox,u=t.Button,g=t.Vec3,c=t.Widget,l=t.UITransform,p=t.instantiate,m=t.UIOpacity,f=t.Layout,b=t.RichText,y=t.Sprite,C=t.tween,x=t.Component},function(t){B=t.PictionaryGameHandler},function(t){v=t.KeyboardHeightChangeEvent}],execute:function(){var T,P,M,w,_,E,H,I,z,k,S,L,R,K,O,D;a._RF.push({},"c0d9aZCLaxBHYPIaeyY7pDo","Pictionary_ChatManager",void 0);var W=s.ccclass,A=s.property;t("PictionaryChatManager",(T=W("PictionaryChatManager"),P=A({type:r}),M=A({type:h}),w=A({type:d}),_=A({type:r}),E=A({type:h}),H=A({type:u}),T(((D=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"messagesContainer",k,o(e)),i(e,"messageTextPrefab",S,o(e)),i(e,"inputEditBox",L,o(e)),i(e,"boardMessagesContainer",R,o(e)),i(e,"boardMessageTextPrefab",K,o(e)),i(e,"sendButton",O,o(e)),e._messages=[],e._containerHeightPercentage=.65,e._currentInputText="",e._keyboardHeight=0,e._inputContainerOriginalPosition=null,e}n(e,t);var a=e.prototype;return a.onLoad=function(){e.Instance=this,this.sendButton&&this.sendButton.node.on("click",this.onSendButtonClicked,this),this.inputEditBox&&(this.inputEditBox.tabIndex=0,this.inputEditBox.node.on("editing-return",this.onSendButtonClicked,this),this.inputEditBox.node.on("text-changed",this.onTextChanged,this)),this.inputEditBox&&(this._inputContainerOriginalPosition=new g(this.inputEditBox.node.position.x,this.inputEditBox.node.position.y,this.inputEditBox.node.position.z)),v.on("keyboardHeight",this.onKeyboardHeightChanged,this)},a.onDestroy=function(){v.off("keyboardHeight",this.onKeyboardHeightChanged,this)},a.onKeyboardHeightChanged=function(t){this.setKeyboardHeight(t.height)},a.setKeyboardHeight=function(t){this._keyboardHeight=t,this.updateInputContainerPosition()},a.updateInputContainerPosition=function(){if(this.inputEditBox){var t=this.inputEditBox.node.getComponent(c);if(t||(t=this.inputEditBox.node.addComponent(c)),this._keyboardHeight>0){var e,n=((null==(e=this.inputEditBox.node.getComponent(l))?void 0:e.height)||0)/2;t.bottom=this._keyboardHeight+n-30,console.log("Setting widget bottom to: ",this._keyboardHeight+n," (keyboard height: ",this._keyboardHeight," + half container height: ",n,")")}else t.bottom=0}},a.getKeyboardHeight=function(){return this._keyboardHeight},a.onTextChanged=function(){this._currentInputText=this.inputEditBox.string},a.showBoardToast=function(t,e,n){var i=this,o=p(this.boardMessageTextPrefab),a=this.resolveBoardRichText(o);a?this.configureBoardRichText(a,e,n,t.message):console.warn("RichText component not found on board message prefab."),this.boardMessagesContainer.addChild(o),o.setSiblingIndex(0);var s=o.getComponent(m)||o.addComponent(m);s.opacity=0;var r=this.boardMessagesContainer.getComponent(f);r&&r.updateLayout(),this.scheduleOnce((function(){i.sizeBoardMessageToText(o)?i.playBoardToastAnimation(o,s):i.scheduleOnce((function(){i.sizeBoardMessageToText(o),i.playBoardToastAnimation(o,s)}),0)}),0)},a.resolveBoardRichText=function(t){var e=t.getChildByName("Message");return e?e.getComponent(b)||null:t.getComponent(b)||null},a.configureBoardRichText=function(t,e,n,i){t.maxWidth=0,t.string=e?"<color=#4bb543><b>"+n+" guessed the word!</b></color>":"<color=#000000><b>"+n+": </b></color><color=#000000>"+i+"</color>"},a.sizeBoardMessageToText=function(t){var e=t.getComponent(l),n=t.getComponent(y),i=t.getChildByName("Message"),o=i?i.getComponent(l):null,a=this.resolveBoardRichText(t);if(!(e&&n&&o&&a))return!0;var s=t.getPosition().y;if(400!==a.maxWidth&&o.width>400)return a.maxWidth=400,!1;var r=Math.min(o.width,400),h=e.height,d=o.height+12;n.sizeMode=y.SizeMode.CUSTOM,n.type=y.Type.SLICED,e.setContentSize(r,d);var u=n.node.getComponent(l);u&&u.setContentSize(r,d);var c=this.boardMessagesContainer.getComponent(f);c&&c.updateLayout();var p=d-h;if(0!==p){var m,b=null!=(m=e.anchorY)?m:.5;t.setPosition(new g(t.getPosition().x,s+p*b,t.getPosition().z))}return!0},a.playBoardToastAnimation=function(t,e){var n=this.boardMessagesContainer.getComponent(l),i=t.getComponent(l),o=n?n.width:800,a=i?i.width:400,s=t.getPosition(),r=s.x,h=s.y,d=o/2+a/2+10,u=r-14;t.setPosition(new g(d,h,0)),e.opacity=255,C(t).to(.3,{position:new g(u,h,0)},{easing:"quadOut"}).to(.12,{position:new g(r,h,0)},{easing:"sineIn"}).delay(3).call((function(){C(e).to(.4,{opacity:0}).call((function(){t.parent&&t.removeFromParent(),t.destroy()})).start()})).start()},a.calculateMessageLimit=function(){var t=this.messagesContainer.getComponent(l);if(!t)return 5;var e=t.height*this._containerHeightPercentage,n=p(this.messageTextPrefab),i=n.getComponent(l),o=i?i.height:30;n.destroy();var a=Math.floor(e/o);return Math.max(a,3)},a.addChatMessage=function(t,e){void 0===e&&(e=!1);var n=p(this.messageTextPrefab),i=B.Instance.getPlayerName(t.playerId),o=n.getComponent(b);if(o){var a=this.messagesContainer.getComponent(l);a&&(o.maxWidth=a.width),o.string=e?"<color=#4bb543>"+i+" guessed the word!</color>":"<color=#afafaf>"+i+"</color> :  "+t.message}else console.warn("RichText component not found on the message prefab.");this.messagesContainer.addChild(n),this.boardMessagesContainer&&this.boardMessageTextPrefab&&this.showBoardToast(t,e,i),this._messages.push(t.message);for(var s=this.calculateMessageLimit();this._messages.length>s;){this._messages.shift();var r=this.messagesContainer.children[0];r&&(this.messagesContainer.removeChild(r),r.destroy())}},a.onSendButtonClicked=function(){if(this.inputEditBox){var t=this._currentInputText.trim();t.length>0&&(this.inputEditBox.string="",console.log("sending message to server: ",t),this._currentInputText="",B.Instance.sendChatMessageToServer(t),this.inputEditBox.blur())}else console.warn("Input EditBox is not assigned.")},e}(x)).Instance=null,k=e((z=D).prototype,"messagesContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(z.prototype,"messageTextPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(z.prototype,"inputEditBox",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"boardMessagesContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(z.prototype,"boardMessageTextPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(z.prototype,"sendButton",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=z))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_ContentFitter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var i;e._RF.push({},"201e7hS4U9OjbMxWSKPWjZl","Pictionary_ContentFitter",void 0);var c=r.ccclass;r.property,t("PictionaryContentFitter",c("PictionaryContentFitter")(i=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.start=function(){},r.update=function(t){},e}(o))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_CountdownScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts"],(function(n){var t,o,e,i,c,r,a,u,l,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,r=n._decorator,a=n.Label,u=n.tween,l=n.Vec3},function(n){s=n.PictionaryMenu}],execute:function(){var d,w,p,f,h;c._RF.push({},"39b9fpmUm1AJacKr6QJYEfG","Pictionary_CountdownScreen",void 0);var y=r.ccclass,T=r.property;n("PictionaryCountdownScreen",(d=y("PictionaryCountdownScreen"),w=T({type:a}),d((h=t((f=function(n){function t(){for(var t,o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=n.call.apply(n,[this].concat(c))||this)._countdownTween=null,e(t,"countdownText",h,i(t)),t}o(t,n);var c=t.prototype;return c.onLoad=function(){n.prototype.onLoad.call(this)},c.onDestroy=function(){},c.Open=function(){n.prototype.Open.call(this),this.initialization()},c.Close=function(){n.prototype.Close.call(this),null!=this._countdownTween&&this._countdownTween.stop()},c.initCountdownTween=function(){var n=this;this.countdownText.node.active=!0,this._countdownTween=u(this.countdownText.node);for(var t=function(t){n._countdownTween.call((function(){n.countdownText.string=t.toString(),n.countdownText.node.scale=l.ONE.clone().multiplyScalar(2)})).to(1,{scale:l.ONE.clone().multiplyScalar(1)},{easing:"sineIn"})},o=3;o>=1;o--)t(o);this._countdownTween.call((function(){n.deactivateScreen()}))},c.deactivateScreen=function(){this.countdownText.string="",this.countdownText.node.active=!1},c.initialization=function(){this.initCountdownTween(),this._countdownTween.start()},t}(s)).prototype,"countdownText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_DrawingResultsMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./PictionaryGameHandler.ts"],(function(e){var r,t,n,a,o,i,l,c,s,u,p,y,f,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,l=e._decorator,c=e.Label,s=e.Node,u=e.Prefab,p=e.instantiate,y=e.Color},function(e){f=e.PictionaryMenu},function(e){g=e.PictionaryGameHandler}],execute:function(){var d,C,h,P,b,S,m,v,M;i._RF.push({},"42596SsAthH0pQ+LlT+NvpT","Pictionary_DrawingResultsMenu",void 0);var w=l.ccclass,L=l.property;e("PictionaryDrawingResultsMenu",(d=w("PictionaryDrawingResultsMenu"),C=L({type:c}),h=L({type:s}),P=L({type:u}),d((m=r((S=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o))||this,n(r,"correctWordMessageLabel",m,a(r)),n(r,"playerScoreCardsContainer",v,a(r)),n(r,"playerScoreCardPrefab",M,a(r)),r}t(r,e);var i=r.prototype;return i.Open=function(){e.prototype.Open.call(this)},i.Close=function(){this.clearPlayerScores(),e.prototype.Close.call(this)},i.initialize=function(){e.prototype.initialize.call(this)},i.setCorrectWordMessage=function(e){this.correctWordMessageLabel.string=""+e.toUpperCase()},i.setPlayerScores=function(e){for(var r,t=o(e);!(r=t()).done;){var n=r.value,a=p(this.playerScoreCardPrefab);a.parent=this.playerScoreCardsContainer,a.getChildByName("PlayerName").getComponent(c).string=g.Instance.getPlayerName(n.userId);var i=a.getChildByName("PlayerScore").getComponent(c);i.string=n.score>0?"+"+n.score:n.score.toString(),i.color=n.score>0?new y(0,255,0):new y(255,0,0)}},i.clearPlayerScores=function(){this.playerScoreCardsContainer.removeAllChildren(),this.correctWordMessageLabel.string=""},r}(f)).prototype,"correctWordMessageLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(S.prototype,"playerScoreCardsContainer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(S.prototype,"playerScoreCardPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_EndGameMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_PlayerProfile.ts","./PictionaryGameHandler.ts","./Pictionary_NetworkManager.ts"],(function(e){var r,i,n,a,t,o,l,s,c,u,f,d,P;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){t=e.cclegacy,o=e._decorator,l=e.Prefab,s=e.Node,c=e.instantiate},function(e){u=e.PictionaryMenu},function(e){f=e.PictionaryPlayerProfile},function(e){d=e.PictionaryGameHandler},function(e){P=e.PictionaryNetworkManager}],execute:function(){var y,p,b,h,v,g,m,I,M;t._RF.push({},"c61fcs77v9O2IIeRcvWGEy0","Pictionary_EndGameMenu",void 0);var C=o.ccclass,z=o.property;e("PictionaryEndGameMenu",(y=C("PictionaryEndGameMenu"),p=z({type:l}),b=z({type:s}),h=z({type:[f]}),y((m=r((g=function(e){function r(){for(var r,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return r=e.call.apply(e,[this].concat(t))||this,n(r,"leaderboardPlayerProfilePrefab",m,a(r)),n(r,"leaderboardPlayerProfilesContainer",I,a(r)),n(r,"leaderboardPlayerProfiles",M,a(r)),r}i(r,e);var t=r.prototype;return t.Open=function(){e.prototype.Open.call(this),this.populateLeaderboard()},t.Close=function(){e.prototype.Close.call(this),this.clearAdditionalProfiles()},t.initialize=function(){e.prototype.initialize.call(this)},t.populateLeaderboard=function(){var e=d.Instance.getRoomState();if(e&&e.playersData){var r=d.Instance.getPlayerTotalScores().sort((function(e,r){return r.score-e.score}));this.populateTopProfiles(r,e.playersData),this.createAdditionalProfiles(r,e.playersData)}},t.populateTopProfiles=function(e,r){for(var i=this,n=function(){if(a>=e.length)return 0;var n=i.leaderboardPlayerProfiles[a];if(!n)return i.logError("Profile is null"),1;var t=e[a],o=r.find((function(e){return e.userId===t.userId}));if(!o)return i.logError("Player data is null"),1;n.node.active=!0;var l=P.Instance.CurrentRoom.sessionId,s=o.sessionId===l;n.initialize(o,s),n.setRank(a+1),n.setScore(t.score)},a=0;a<Math.min(this.leaderboardPlayerProfiles.length,3)&&0!==n();a++);},t.createAdditionalProfiles=function(e,r){for(var i=this,n=function(){var n=e[a],t=r.find((function(e){return e.userId===n.userId}));if(!t)return 0;var o=c(i.leaderboardPlayerProfilePrefab);o.setParent(i.leaderboardPlayerProfilesContainer);var l=o.getComponent(f);if(!l)return 0;var s=P.Instance.CurrentRoom.sessionId,u=t.sessionId===s;l.initialize(t,u),l.setRank(a+1)},a=Math.min(3,this.leaderboardPlayerProfiles.length);a<e.length;a++)n()},t.clearAdditionalProfiles=function(){for(var e=this,r=function(){var r=e.leaderboardPlayerProfilesContainer.children[i];if(e.leaderboardPlayerProfiles.some((function(e){return e.node===r})))return 1},i=this.leaderboardPlayerProfilesContainer.children.length-1;i>=0;i--)r()},r}(u)).prototype,"leaderboardPlayerProfilePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(g.prototype,"leaderboardPlayerProfilesContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(g.prototype,"leaderboardPlayerProfiles",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=g))||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Eraser.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Brush.ts","./Pictionary_Tool.ts"],(function(i){var r,t,e,o,n,a,c,l,s,u,p;return{setters:[function(i){r=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){n=i.cclegacy,a=i._decorator,c=i.Sprite,l=i.Node,s=i.Color},function(i){u=i.PictionaryBrush},function(i){p=i.PictionaryTool}],execute:function(){var b,y,h,f,v,d,g,P,_;n._RF.push({},"97438WKb25MaK0d5cM2jck/","Pictionary_Eraser",void 0);var w=a.ccclass,C=a.property;i("PictionaryEraser",(b=w("PictionaryEraser"),y=C({type:c}),h=C({type:u}),b((d=r((v=function(i){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(r=i.call.apply(i,[this].concat(n))||this).board=void 0,e(r,"bg",d,o(r)),e(r,"activeColor",g,o(r)),e(r,"inactiveColor",P,o(r)),e(r,"brush",_,o(r)),r}t(r,i);var n=r.prototype;return n.initialize=function(i,r){var t=this;this.board=i,this.bg.node.on(l.EventType.TOUCH_START,(function(){return r(t)}))},n.select=function(){this.bg.color=this.activeColor,this.board.setBrush(this.brush)},n.deselect=function(){this.bg.color=this.inactiveColor},r}(p)).prototype,"bg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=r(v.prototype,"activeColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(1,0,0,1)}}),P=r(v.prototype,"inactiveColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(1,1,1,1)}}),_=r(v.prototype,"brush",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),f=v))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_FitToScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_CameraManger.ts"],(function(e){var t,i,n,r,o,a,c,s,d,u,h,l,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.CCBoolean,s=e.director,d=e.Director,u=e.UITransform,h=e.screen,l=e.Widget,p=e.Component},function(e){g=e.PictionaryCameraManger}],execute:function(){var f,y,w,v,T;o._RF.push({},"c1bffwXCPVJn4y4/4eqlj4P","Pictionary_FitToScreen",void 0);var S=a.ccclass,m=a.property;e("PictionaryFitToScreen",(f=S("PictionaryFitToScreen"),y=m({type:c}),f((T=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"updateWidgetsRecursively",T,r(t)),t}i(t,e);var o=t.prototype;return o.onEnable=function(){var e=this;s.once(d.EVENT_AFTER_UPDATE,(function(){e.refresh()}))},o.setUiTransformToScreenSize=function(){var e=this.node.getComponent(u),t=g.instance.getCurrentOrthoHeight()/g.instance.defaultOrthoHeight,i=h.windowSize.width||window.innerWidth,n=h.windowSize.height||window.innerHeight,r=g.instance.designHeight*t,o=r*i/n;console.log("windowWidth",i,"windowHeight",n),e.setContentSize(o,r)},o.refresh=function(){this.setUiTransformToScreenSize(),this.updateWidgetsRecursively&&this.updateWidgetsInHierarchy()},o.updateWidgetsInHierarchy=function(){this.updateWidgetAndDescendants(this.node)},o.updateWidgetAndDescendants=function(e){var t=this,i=e.getComponent(l);i&&this.node.uuid!=e.uuid&&i.updateAlignment(),e.children.forEach((function(e){t.updateWidgetAndDescendants(e)}))},t}(p)).prototype,"updateWidgetsRecursively",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=v))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/pictionary_game",["./Pictionary_MiloKeyboard.ts","./Pictionary_CameraManger.ts","./Pictionary_ContentFitter.ts","./Pictionary_FitToScreen.ts","./Pictionary_MiloLayout.ts","./Pictionary_PBLogger.ts","./Pictionary_PbExtensions.ts","./Pictionary_PbSaveSystem.ts","./Pictionary_ScaleUICanvas.ts","./Pictionary_Utils.ts","./Pictionary_NetworkConfig.ts","./Pictionary_NetworkManager.ts","./Pictionary_BasePlayerData.ts","./Pictionary_BaseRoomSettings.ts","./Pictionary_BaseRoomState.ts","./Pictionary_NetworkTypes.ts","./Pictionary_PlayerTypes.ts","./Pictionary_RoomTypes.ts","./PictionaryGameHandler.ts","./Pictionary_AudioManager.ts","./Pictionary_Board.ts","./Pictionary_Brush.ts","./Pictionary_ChatManager.ts","./Pictionary_Player.ts","./Pictionary_PlayerProfile.ts","./Pictionary_Timer.ts","./Pictionary_Toolbar.ts","./Pictionary_WordManager.ts","./Pictionary_GameManager.ts","./Pictionary_Logger.ts","./Pictionary_LoggerInitializer.ts","./PictionaryRoomState.ts","./Pictionary_Eraser.ts","./Pictionary_Pencil.ts","./Pictionary_Tool.ts","./PicitionaryGameState.ts","./Pictionary_GameMessageType.ts","./Pictionary_IChatMessageContent.ts","./Pictionary_IGuessedWordContent.ts","./Pictionary_CountdownScreen.ts","./Pictionary_DrawingResultsMenu.ts","./Pictionary_EndGameMenu.ts","./Pictionary_LobbyMenu.ts","./Pictionary_Menu.ts","./Pictionary_PlayerAvatar.ts","./Pictionary_StartRoundMenu.ts","./Pictionary_UIManager.ts","./Pictionary_WaitingScreen.ts","./Pictionary_WordSelectionMenu.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Pictionary_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_RoomTypes.ts","./Pictionary_NetworkManager.ts","./Pictionary_NetworkTypes.ts","./PictionaryRoomState.ts","./MiloGameSDK.ts"],(function(e){var t,n,o,a,i,r,s,c,l,u,h,m,d,S,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,a=e._decorator,i=e.EventTarget,r=e.sys,s=e.Component},function(e){c=e.PictionaryRoomStatus},function(e){l=e.ConnectionStateChangeEvent,u=e.ServerRoomStateChangeEvent,h=e.PictionaryNetworkManager},function(e){m=e.PictionaryNetworkEvents,d=e.PictionaryConnectionState},function(e){S=e.PictionaryRoomState},function(e){g=e.MiloGameSDK}],execute:function(){var _,y;o._RF.push({},"2536623fwZLFalSUSVpGnE4","Pictionary_GameManager",void 0);var C=a.ccclass,f=a.executionOrder,v=e("RoomStatusChangeEvent",new i),E=e("KeyboardHeightChangeEvent",new i);e("PictionaryGameManager",C("PictionaryGameManager")(_=f(-2)(((y=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._roomStatus=c.NONE,t._won=!1,t._handledGameOverCallbacks=!1,t._serverStateCopy=null,t.miloSDK=new g,t._gameStartTime=0,t}t(o,e);var a=o.prototype;return a.onLoad=function(){if(o._instance)this.node.destroy();else{if(o._instance=this,this.registerEvents(),r.isBrowser){var e=document;null!=e&&e.body&&(e.body.style.backgroundColor="#ffffff",console.log("[PictionaryGameManager] Set document.body background to white"))}this.miloSDK.init({gameId:"Pictionary",debug:!0}),window.onKeyboardHeight=function(e){console.log("Keyboard height changed to:",e),E.emit("keyboardHeight",{height:e})},this.sendGameLoaded()}},a.onDestroy=function(){this.cleanup()},a.cleanup=function(){if(this.unregisterEvents(),r.isBrowser){var e=document;null!=e&&e.body&&(e.body.style.backgroundColor="",console.log("[PictionaryGameManager] Cleared document.body background to default"))}o._instance===this&&(o._instance=null)},a.registerEvents=function(){l.on(m.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),u.on(m.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},a.unregisterEvents=function(){l.off(m.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),u.off(m.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},a.sendGameLoaded=function(){var e={timestamp:Date.now()};console.log("Sending game loaded event"),this.miloSDK.gameLoaded(e)},a.sendGameStarted=function(){this._gameStartTime=Date.now();var e={timestamp:this._gameStartTime};console.log("Sending game started event"),this.miloSDK.gameStarted(e)},a.sendGameEnded=function(){var e={duration:this._gameStartTime>0?Date.now()-this._gameStartTime:0,hasWinningScreen:!1};console.log("Sending game ended event"),this.miloSDK.gameEnded(e)},a.onConnectionStateChange=function(e,t){switch(t){case d.DISCONNECTED:this._roomStatus!==c.END_GAME&&h.Instance.reconnect();break;case d.KICKED_OUT:}},a.onServerRoomStateChange=function(e){this.log("ServerRoomStateChange",e),this._serverStateCopy||(this._serverStateCopy=new S,this._serverStateCopy.copyFrom(e)),this.setRoomStatus(e.currentRoomStatus)},a.resetServerState=function(e){this._serverStateCopy||(this._serverStateCopy=new S),this._serverStateCopy.copyFrom(e)},a.setRoomStatus=function(e){if(this._roomStatus!==e){var t=this._roomStatus;this._roomStatus=e,this.OnRemoteRoomStatusChange(e),v.emit(m.ROOM_STATUS_CHANGE,t,e)}},a.GetMyPlayerData=function(){var e,t=h.Instance.CurrentRoom.sessionId;return null==(e=this._serverStateCopy)?void 0:e.playersData.find((function(e){return e.sessionId===t}))},a.GetWinnerPlayerData=function(){return null},a.OnRemoteRoomStatusChange=function(e){var t=this;switch(this.log("ServerRoomStatusChange to: "+c[e]),e){case c.NONE:case c.WAITING_FOR_PLAYERS:case c.COUNTDOWN:break;case c.GAME_SIMULATION:this.sendGameStarted();break;case c.END_GAME:this.scheduleOnce((function(){t.sendGameEnded()}),5),this.HandleGameOverCallbacks();break;default:console.warn("Unhandled room status: "+e)}},a.HandleGameOverCallbacks=function(){this._handledGameOverCallbacks?console.log("Already handled game over callbacks"):this._handledGameOverCallbacks=!0},n(o,null,[{key:"Instance",get:function(){return this._instance}}]),o}(s))._instance=null,_=y))||_)||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_GameMessageType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"72207hGM6tF940M784xRiKG","Pictionary_GameMessageType",void 0);e("PictionaryGameMessageType",function(e){return e.NONE="none",e.SET_STATE="set_state",e.DRAW_STROKE="draw_stroke",e.WORDS_LIST="words_list",e.SELECTED_WORD="selected_word",e.GUESSED_WORD="guessed_word",e.CHAT_MESSAGE="chat_message",e.REVEAL_LETTER="reveal_letter",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_IChatMessageContent.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f6f5e9lEA1DN6GCcucaQxn4","Pictionary_IChatMessageContent",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_IGuessedWordContent.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8f624C7siBPBakdBH+gUeux","Pictionary_IGuessedWordContent",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_LobbyMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_NetworkManager.ts"],(function(t){var e,n,o,r,i,a,c,u,s,l,p,m,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,s=t.Label,l=t.EditBox,p=t.Button,m=t.Node},function(t){h=t.PictionaryMenu},function(t){y=t.PictionaryNetworkManager}],execute:function(){var d,b,f,v,R,g,B,k,I,L,N,C,w;c._RF.push({},"dd85cwkfzdAepNQV5YdxkzD","Pictionary_LobbyMenu",void 0);var j=u.ccclass,P=u.property;t("PictionaryLobbyMenu",(d=j("PictionaryLobbyMenu"),b=P({type:s}),f=P({type:l}),v=P({type:l}),R=P({type:p}),g=P({type:p}),d((I=e((k=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"errorLabel",I,r(e)),o(e,"playerNameInput",L,r(e)),o(e,"roomNameInput",N,r(e)),o(e,"createRoomButton",C,r(e)),o(e,"joinRoomButton",w,r(e)),e}n(e,t);var c=e.prototype;return c.Open=function(){t.prototype.Open.call(this)},c.Close=function(){t.prototype.Close.call(this)},c.initialize=function(){t.prototype.initialize.call(this)},c.onLoad=function(){this.joinRoomButton.node.on(m.EventType.TOUCH_END,this.onJoinRoomButtonClicked,this),this.createRoomButton.node.on(m.EventType.TOUCH_END,this.onCreateRoomButtonClicked,this)},c.onJoinRoomButtonClicked=function(){var t=i(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkInputValidity()){t.next=2;break}return t.abrupt("return");case 2:return e=this.roomNameInput.string.trim(),n=this.playerNameInput.string.trim(),this.joinRoomButton.node.active=!1,this.createRoomButton.node.active=!1,t.prev=6,t.next=9,y.Instance.connect(e,n);case 9:this.joinRoomButton.node.active=!0,this.createRoomButton.node.active=!0,this.Close(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(6),this.errorLabel.string="Failed to join the room. Please try again.",this.errorLabel.node.active=!0,this.joinRoomButton.node.active=!0,this.createRoomButton.node.active=!0,console.error("Connection error:",t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),c.onCreateRoomButtonClicked=function(){var t=i(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkInputValidity()){t.next=2;break}return t.abrupt("return");case 2:return e=this.roomNameInput.string.trim(),n=this.playerNameInput.string.trim(),this.createRoomButton.node.active=!1,this.joinRoomButton.node.active=!1,t.prev=6,t.next=9,y.Instance.createAndJoinRoom(e,n);case 9:this.createRoomButton.node.active=!0,this.joinRoomButton.node.active=!0,this.Close(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(6),this.errorLabel.string="Failed to create and join the room. Please try again.",this.errorLabel.node.active=!0,this.createRoomButton.node.active=!0,this.joinRoomButton.node.active=!0,console.error("Create Room error:",t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),c.checkInputValidity=function(){var t=this.roomNameInput.string.trim(),e=this.playerNameInput.string.trim();return 0!==t.length&&0!==e.length||(this.errorLabel.string="Room name and player name cannot be empty",this.errorLabel.node.active=!0,!1)},e}(h)).prototype,"errorLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(k.prototype,"playerNameInput",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(k.prototype,"roomNameInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(k.prototype,"createRoomButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(k.prototype,"joinRoomButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=k))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Logger.ts",["cc"],(function(){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"c3d26wnPGZC0qXO4+GKN77y","Pictionary_Logger",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_LoggerInitializer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PbExtensions.ts","./Pictionary_PBLogger.ts"],(function(e){var i,o,t,n,r,c,s;return{setters:[function(e){i=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,n=e.sys,r=e.Component},null,function(e){c=e.PictionaryPBLogger,s=e.LogLevel}],execute:function(){var a;o._RF.push({},"6d5cflyQaJNIZBlVSNxUZHz","Pictionary_LoggerInitializer",void 0);var g=t.ccclass,u=t.executionOrder;e("PictionaryLoggerInitializer",g("PictionaryLoggerInitializer")(a=u(-1e3)(a=function(e){function o(){return e.apply(this,arguments)||this}return i(o,e),o.prototype.onLoad=function(){n.isNative?(c.setLevel(s.Info),c.setProductionMode(!0)):(c.setLevel(s.Debug),c.setProductionMode(!1)),this.log("LoggerInitializer: Logging extensions are ready to use!")},o}(r))||a)||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PBLogger.ts"],(function(n){var e,t,i,o,r,c,a,u,l,s;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,c=n._decorator,a=n.Node,u=n.CCString,l=n.Component},function(n){s=n.PictionaryPBLogger}],execute:function(){var p,y,f,h,d,g,P;r._RF.push({},"70acfH8+KZLKILGN50TNq2E","Pictionary_Menu",void 0);var m=c.ccclass,v=c.property;n("PictionaryMenu",(p=m("PictionaryMenu"),y=v({type:a}),f=v({type:u}),p((g=e((d=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return e=n.call.apply(n,[this].concat(r))||this,i(e,"content",g,o(e)),i(e,"menuName",P,o(e)),e.isOpened=!1,e}t(e,n);var r=e.prototype;return r.onLoad=function(){null==this.content&&(this.content=this.node.getChildByName("Content"))},r.Open=function(){this.content.active=!0,this.isOpened=!0},r.Close=function(){this.content.active=!1,this.isOpened=!1},r.initialize=function(){s.info("Menu initialize called")},e}(l)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(d.prototype,"menuName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=d))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_MiloKeyboard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,u,l,c,h,p,b,d,y,_,f,g,C,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,u=t.Prefab,l=t.Label,c=t.EditBox,h=t.Vec3,p=t.UIOpacity,b=t.UITransform,d=t.instantiate,y=t.Button,_=t.EventHandler,f=t.Sprite,g=t.tween,C=t.Component,k=t.Color}],execute:function(){var T,m,w,v,L,K,x,P,z,E,O,I,S,B,D,N,V,A,U,H,M,R,j,F,q,G;r._RF.push({},"bfd893E4+5Doq0mGo6HUwSj","Pictionary_MiloKeyboard",void 0);var J=s.ccclass,Q=s.property;t("PictionaryMiloKeyboard",(T=J("PictionaryMiloKeyboard"),m=Q({type:a}),w=Q({type:a}),v=Q({type:u}),L=Q({type:l}),K=Q({type:a}),x=Q({type:c}),P=Q({type:a}),z=Q({type:a}),T(((G=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"content",I,o(e)),n(e,"keyboardContent",S,o(e)),n(e,"keyPrefab",B,o(e)),n(e,"inputLabel",D,o(e)),n(e,"keyboardLayout",N,o(e)),n(e,"linkedEditBox",V,o(e)),n(e,"cursorBlinkRate",A,o(e)),n(e,"cursorNode",U,o(e)),n(e,"outSideArea",H,o(e)),n(e,"keyboardTopPadding",M,o(e)),n(e,"animationDuration",R,o(e)),n(e,"slideDistance",j,o(e)),n(e,"darkKeysColor",F,o(e)),n(e,"lightKeysColor",q,o(e)),e._currentTween=null,e._contentOriginalPos=null,e._lowerCaseLayout=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["123",",","space",".","return"]],e._upperCaseLayout=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["123",",","space",".","return"]],e._symbolsLayout=[["1","2","3","4","5","6","7","8","9","0"],["-","/",":",";","(",")","$","&","@",'"'],["#=",".",",","?","!","'","backspace"],["ABC",",","space",".","return"]],e._currentLayout=void 0,e._isUpperCase=!1,e._isSymbols=!1,e._inputText="",e._onSendCallback=null,e._isVisible=!0,e._cursorVisible=!0,e._cursorTimer=0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){e.Instance=this,this.content&&(this._contentOriginalPos=new h(this.content.position.x,this.content.position.y,this.content.position.z),this.content.getComponent(p)||this.content.addComponent(p)),this.hideKeyboard(),this.outSideArea&&this.outSideArea.on(a.EventType.TOUCH_END,this.onOutsideAreaClicked,this),this.keyboardContent&&(this.keyboardContent.on(a.EventType.TOUCH_START,this.onKeyboardContentTouched,this),this.keyboardContent.on(a.EventType.TOUCH_MOVE,this.onKeyboardContentTouched,this),this.keyboardContent.on(a.EventType.TOUCH_END,this.onKeyboardContentTouched,this),this.keyboardContent.on(a.EventType.TOUCH_CANCEL,this.onKeyboardContentTouched,this))},r.start=function(){var t=this;this._inputText="",this._currentLayout=this._lowerCaseLayout,setTimeout((function(){t.createKeyboard(),t.updateInputLabel()}),10)},r.createKeyboard=function(){this.keyboardLayout.removeAllChildren();var t=this.node.getComponent(b).width;console.log("widthOfTheKeyboard",t);for(var e=(t-100)/11,i=0;i<this._currentLayout.length;i++){var n=this._currentLayout[i],o=10*e+90,r=-(i===this._currentLayout.length-1?o:n.length*e+10*(n.length-1))/2,s=85*(this._currentLayout.length/2-i-.5)-this.keyboardTopPadding,a=[];if(i===this._currentLayout.length-1){var u=o-10*(n.length-1);a.push(1.5*e),a.push(e);var c=u-(a[0]+2*a[1]),h=.75*c,p=.25*c;a.push(h),a.push(e),a.push(p)}for(var g=r,C=0;C<n.length;C++){var k=n[C],T=d(this.keyPrefab);T.active=!0,this.keyboardLayout.addChild(T);var m=T.getComponent(b);i===this._currentLayout.length-1?m.width=a[C]:m.width="shift"===k||"backspace"===k||"#+="===k?1.25*e:e,m.height=75,g+=m.width/2,T.position.set(g,s,0),g+=m.width/2+10;var w=k;"space"===k&&(w=" "),"backspace"===k&&(w=""),"return"===k&&(w="Enter"),"shift"===k&&(w=""),T.getComponentInChildren(l).string=w;var v=T.getComponent(y),L=new _;if(L.target=this.node,L.component="MiloKeyboard",L.handler="onKeyPressed",L.customEventData=k,v.clickEvents=[],v.clickEvents.push(L),"shift"===k||"backspace"===k||"return"===k||"123"===k||"ABC"===k){var K=T.getComponent(f);K&&(K.color=this.darkKeysColor),v&&(v.normalColor=this.darkKeysColor)}else{var x=T.getComponent(f);x&&(x.color=this.lightKeysColor),v&&(v.normalColor=this.lightKeysColor)}}}},r.onKeyPressed=function(t,e){var i=e;switch(i){case"backspace":this._inputText.length>0&&(this._inputText=this._inputText.substring(0,this._inputText.length-1));break;case"space":this._inputText+=" ";break;case",":this._inputText+=",";break;case".":this._inputText+=".";break;case"return":if(this._onSendCallback){var n=this._inputText;this.clearInput(),this.hideKeyboard(),this._onSendCallback(n)}else this.clearInput(),this.hideKeyboard();break;case"shift":this._isUpperCase=!this._isUpperCase,this._currentLayout=this._isUpperCase?this._upperCaseLayout:this._lowerCaseLayout,this.createKeyboard();break;case"123":this._isSymbols=!0,this._isUpperCase=!1,this._currentLayout=this._symbolsLayout,this.createKeyboard();break;case"ABC":this._isSymbols=!1,this._currentLayout=this._lowerCaseLayout,this.createKeyboard();break;case"#+=":break;default:this._inputText+=i}this.updateInputLabel()},r.updateInputLabel=function(){if(this.inputLabel&&(this.inputLabel.string=this._inputText,this.cursorNode)){this.cursorNode.active=this._cursorVisible;var t=this.inputLabel.string,e=this.inputLabel.getComponent(b).contentSize.width;if(0===t.length){var i=-e/2+5;this.cursorNode.position=new h(i,this.cursorNode.position.y,this.cursorNode.position.z)}else{var n=e/2+(this.inputLabel.getComponent(b).width-e)/2;this.cursorNode.position=new h(n,this.cursorNode.position.y,this.cursorNode.position.z)}}this.linkedEditBox&&(this.linkedEditBox.string=this._inputText)},r.update=function(t){this._cursorTimer+=t,this._cursorTimer>=this.cursorBlinkRate&&(this._cursorTimer=0,this._cursorVisible=!this._cursorVisible,this.updateInputLabel())},r.getInputText=function(){return this._inputText},r.clearInput=function(){this._inputText="",this.updateInputLabel()},r.setInputText=function(t){this._inputText=t,this.updateInputLabel()},r.setSendCallback=function(t){this._onSendCallback=t},r.showKeyboard=function(){this._currentTween&&(this._currentTween.stop(),this._currentTween=null),this._isVisible=!0,this.content.active=!0,this._cursorVisible=!0,this._cursorTimer=0,this._contentOriginalPos&&(this.content.position=new h(this._contentOriginalPos.x,this._contentOriginalPos.y-this.slideDistance,this._contentOriginalPos.z),this._currentTween=g(this.content).to(this.animationDuration,{position:this._contentOriginalPos},{easing:"cubicOut"}).start())},r.hideKeyboard=function(){var t=this;if(this._currentTween&&(this._currentTween.stop(),this._currentTween=null),this._isVisible)if(this._isVisible=!1,this._contentOriginalPos){var e=new h(this._contentOriginalPos.x,this._contentOriginalPos.y-this.slideDistance,this._contentOriginalPos.z);this._currentTween=g(this.content).to(this.animationDuration,{position:e},{easing:"cubicIn"}).call((function(){t.content.active=!1})).start()}else this.content.active=!1},r.toggleKeyboard=function(){this._isVisible=!this._isVisible,this.content.active=this._isVisible},r.setLinkedEditBox=function(t){this.linkedEditBox=t},r.onOutsideAreaClicked=function(){this.hideKeyboard(),this.clearInput()},r.onKeyboardContentTouched=function(t){t.propagationStopped=!0},e}(C)).Instance=null,I=e((O=G).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(O.prototype,"keyboardContent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(O.prototype,"keyPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(O.prototype,"inputLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(O.prototype,"keyboardLayout",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(O.prototype,"linkedEditBox",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(O.prototype,"cursorBlinkRate",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),U=e(O.prototype,"cursorNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(O.prototype,"outSideArea",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(O.prototype,"keyboardTopPadding",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),R=e(O.prototype,"animationDuration",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),j=e(O.prototype,"slideDistance",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),F=e(O.prototype,"darkKeysColor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k(0,0,0,1)}}),q=e(O.prototype,"lightKeysColor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k(255,255,255,1)}}),E=O))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_MiloLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,a,s,r,h,c,u,l,p,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,h=t.Enum,c=t.Size,u=t.Node,l=t.Vec3,p=t.UITransform,_=t.Component}],execute:function(){var T,d,y,f,g,E,O,R,C,L,m,v,M,b,I;s._RF.push({},"2306bazD3FGnq2pvU/G1blw","Pictionary_MiloLayout",void 0);var H=r.ccclass,w=r.property,N=t("MiloLayoutType",function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.GRID=2]="GRID",t}({})),A=t("MiloLayoutAlign",function(t){return t[t.LEFT_TOP=0]="LEFT_TOP",t[t.CENTER_TOP=1]="CENTER_TOP",t[t.RIGHT_TOP=2]="RIGHT_TOP",t[t.LEFT_CENTER=3]="LEFT_CENTER",t[t.CENTER=4]="CENTER",t[t.RIGHT_CENTER=5]="RIGHT_CENTER",t[t.LEFT_BOTTOM=6]="LEFT_BOTTOM",t[t.CENTER_BOTTOM=7]="CENTER_BOTTOM",t[t.RIGHT_BOTTOM=8]="RIGHT_BOTTOM",t}({}));t("PictionaryMiloLayout",(T=H("PictionaryMiloLayout"),d=w({type:h(N)}),y=w({type:h(N)}),f=w({type:h(A)}),g=w({type:h(A)}),E=w({visible:function(){return this._layoutType===N.GRID}}),T((C=e((R=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"_layoutType",C,o(e)),n(e,"_alignment",L,o(e)),n(e,"_spacingX",m,o(e)),n(e,"_spacingY",v,o(e)),n(e,"_columns",M,o(e)),n(e,"_padding",b,o(e)),n(e,"_autoResize",I,o(e)),e._layoutSize=new c(0,0),e._lastChildActiveState=[],e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.on(u.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(u.EventType.CHILD_REMOVED,this.onChildRemoved,this)},s.onDestroy=function(){this.node.off(u.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(u.EventType.CHILD_REMOVED,this.onChildRemoved,this),this.removeAllChildListeners()},s.onChildRemoved=function(t){this.removeChildListener(t),this.updateLayout()},s.removeAllChildListeners=function(){var t=this;this.node.children.forEach((function(e){return t.removeChildListener(e)}))},s.removeChildListener=function(t){t.__miloLayoutActiveHandler&&(t.off(u.EventType.ACTIVE_IN_HIERARCHY_CHANGED,t.__miloLayoutActiveHandler),delete t.__miloLayoutActiveHandler)},s.start=function(){this.updateActiveChildListeners(),this.updateLayout()},s.onEnable=function(){this.updateLayout()},s.updateActiveChildListeners=function(){var t=this;this.removeAllChildListeners(),this.node.children.forEach((function(e){return t.addChildActiveListener(e)}))},s.addChildActiveListener=function(t){var e=this;if(!t.__miloLayoutActiveHandler){var i=function(){e.scheduleOnce(e.updateLayout.bind(e),0)};t.__miloLayoutActiveHandler=i,t.on(u.EventType.ACTIVE_IN_HIERARCHY_CHANGED,i)}},s.getAlignmentOffset=function(t){var e=new l,i=this.node.getComponent(p);if(!i)return e;var n,o,a=i.contentSize,s=i.anchorPoint;switch(n=-a.width*s.x,o=a.height*s.y,this._alignment%3){case A.LEFT_TOP%3:case A.LEFT_CENTER%3:case A.LEFT_BOTTOM%3:e.x=n+this._padding;break;case A.CENTER_TOP%3:case A.CENTER%3:case A.CENTER_BOTTOM%3:e.x=n+(a.width-t.width)/2;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:e.x=n+a.width-t.width-this._padding;break;default:e.x=n}switch(Math.floor(this._alignment/3)){case Math.floor(A.LEFT_TOP/3):case Math.floor(A.CENTER_TOP/3):case Math.floor(A.RIGHT_TOP/3):e.y=o-this._padding;break;case Math.floor(A.LEFT_CENTER/3):case Math.floor(A.CENTER/3):case Math.floor(A.RIGHT_CENTER/3):e.y=o-(a.height+t.height)/2;break;case Math.floor(A.LEFT_BOTTOM/3):case Math.floor(A.CENTER_BOTTOM/3):case Math.floor(A.RIGHT_BOTTOM/3):e.y=o-a.height+t.height+this._padding;break;default:e.y=o}return e},s.updateLayout=function(){if(this.node&&this.node.isValid){var t=this.node.children.filter((function(t){return t.active&&t.isValid}));if(0!==t.length){switch(this._layoutType){case N.HORIZONTAL:this.updateHorizontalLayout(t);break;case N.VERTICAL:this.updateVerticalLayout(t);break;case N.GRID:this.updateGridLayout(t)}if(this._autoResize){var e=this.node.getComponent(p);e&&this._layoutSize.width>0&&this._layoutSize.height>0&&e.setContentSize(this._layoutSize)}}else this._layoutSize=new c(2*this._padding,2*this._padding)}},s.updateHorizontalLayout=function(t){var e=this,i=-this._spacingX,n=0;t.forEach((function(o,a){var s=o.getComponent(p);s&&s.contentSize.width&&s.contentSize.height&&(i+=s.width,a<t.length-1&&(i+=e._spacingX),n=Math.max(n,s.height))})),i+=2*this._padding,n+=2*this._padding,this._layoutSize=new c(i,n);var o=this.getAlignmentOffset(this._layoutSize),a=o.x;t.forEach((function(t){var i=t.getComponent(p);if(i){var n=i.width,s=i.height,r=i.anchorPoint,h=a-n*r.x,c=o.y+s*r.y;t.position=new l(h+n/2,c-s/2,0),a+=n+e._spacingX}}))},s.updateVerticalLayout=function(t){var e=this,i=-this._spacingY,n=0;t.forEach((function(o,a){var s=o.getComponent(p);s&&(i+=s.height,a<t.length-1&&(i+=e._spacingY),n=Math.max(n,s.width))})),i+=2*this._padding,n+=2*this._padding,this._layoutSize=new c(n,i);var o=this.getAlignmentOffset(this._layoutSize),a=o.y;t.forEach((function(t){var i=t.getComponent(p);if(i){var s=i.width,r=i.height,h=i.anchorPoint,c=o.x+(n-s)/2-s*h.x;switch(e._alignment%3){case A.LEFT_TOP%3:case A.LEFT_CENTER%3:case A.LEFT_BOTTOM%3:c=o.x+e._padding-s*h.x;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:c=o.x+n-s-e._padding-s*h.x}var u=a+r*h.y;t.position=new l(c+s/2,u-r/2,0),a-=r+e._spacingY}}))},s.updateGridLayout=function(t){this._columns<=0&&(this._columns=1);var e=Math.ceil(t.length/this._columns),i=0,n=0;if(t.forEach((function(t){var e=t.getComponent(p);e&&(i=Math.max(i,e.width),n=Math.max(n,e.height))})),0!==i&&0!==n){var o=2*this._padding+i*this._columns+this._spacingX*(this._columns-1),a=2*this._padding+n*e+this._spacingY*(e-1);this._layoutSize=new c(o,a);for(var s=this.getAlignmentOffset(this._layoutSize),r=0;r<e;r++){var h=Math.min(this._columns,t.length-r*this._columns),u=0;switch(this._alignment%3){case A.CENTER_TOP%3:case A.CENTER%3:case A.CENTER_BOTTOM%3:u=(this._columns*i+(this._columns-1)*this._spacingX-h*i-(h-1)*this._spacingX)/2;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:u=this._columns*i+(this._columns-1)*this._spacingX-(h*i+(h-1)*this._spacingX)}for(var _=0;_<h;_++){var T=r*this._columns+_;if(T>=t.length)break;var d=t[T],y=d.getComponent(p);if(y){var f=y.width,g=y.height,E=y.anchorPoint,O=s.x+this._padding+_*(i+this._spacingX)+u,R=s.y-this._padding-r*(n+this._spacingY),C=O-f*E.x,L=R+g*E.y;switch(this._alignment%3){case A.LEFT_TOP%3:case A.LEFT_CENTER%3:case A.LEFT_BOTTOM%3:C=O-f*E.x;break;case A.CENTER_TOP%3:case A.CENTER%3:case A.CENTER_BOTTOM%3:C=O+(i-f)/2-f*E.x;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:C=O+i-f-f*E.x}switch(Math.floor(this._alignment/3)){case Math.floor(A.LEFT_TOP/3):case Math.floor(A.CENTER_TOP/3):case Math.floor(A.RIGHT_TOP/3):L=R+g*E.y;break;case Math.floor(A.LEFT_CENTER/3):case Math.floor(A.CENTER/3):case Math.floor(A.RIGHT_CENTER/3):L=R-(n-g)/2+g*E.y;break;case Math.floor(A.LEFT_BOTTOM/3):case Math.floor(A.CENTER_BOTTOM/3):case Math.floor(A.RIGHT_BOTTOM/3):L=R-n+g+g*E.y}d.position=new l(C+f/2,L-g/2,0)}}}}},s.update=function(t){var e=this;if(this.node&&this.node.isValid){var i=this.node.children.map((function(t){return t.active&&t.isValid}));i.length===this._lastChildActiveState.length&&i.every((function(t,i){return t===e._lastChildActiveState[i]}))||(this._lastChildActiveState=i,this.updateLayout())}},s.onChildAdded=function(t){this.addChildActiveListener(t),this.updateLayout(),this._lastChildActiveState=this.node.children.map((function(t){return t.active&&t.isValid}))},s.onRestore=function(){this.updateLayout()},s.resetInEditor=function(){this.updateLayout()},a(e,[{key:"layoutType",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this.updateLayout()}},{key:"alignment",get:function(){return this._alignment},set:function(t){this._alignment=t,this.updateLayout()}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX=t,this.updateLayout()}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY=t,this.updateLayout()}},{key:"columns",get:function(){return this._columns},set:function(t){this._columns=Math.max(1,t),this.updateLayout()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=Math.max(0,t),this.updateLayout()}},{key:"autoResize",get:function(){return this._autoResize},set:function(t){this._autoResize=t,this.updateLayout()}}]),e}(_)).prototype,"_layoutType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.HORIZONTAL}}),e(R.prototype,"layoutType",[y],Object.getOwnPropertyDescriptor(R.prototype,"layoutType"),R.prototype),L=e(R.prototype,"_alignment",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.LEFT_TOP}}),e(R.prototype,"alignment",[g],Object.getOwnPropertyDescriptor(R.prototype,"alignment"),R.prototype),m=e(R.prototype,"_spacingX",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(R.prototype,"spacingX",[w],Object.getOwnPropertyDescriptor(R.prototype,"spacingX"),R.prototype),v=e(R.prototype,"_spacingY",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(R.prototype,"spacingY",[w],Object.getOwnPropertyDescriptor(R.prototype,"spacingY"),R.prototype),M=e(R.prototype,"_columns",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),e(R.prototype,"columns",[E],Object.getOwnPropertyDescriptor(R.prototype,"columns"),R.prototype),b=e(R.prototype,"_padding",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(R.prototype,"padding",[w],Object.getOwnPropertyDescriptor(R.prototype,"padding"),R.prototype),I=e(R.prototype,"_autoResize",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(R.prototype,"autoResize",[w],Object.getOwnPropertyDescriptor(R.prototype,"autoResize"),R.prototype),O=R))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_NetworkConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PBLogger.ts"],(function(r){var e,t,i,o,n,a,s,u,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){n=r.cclegacy,a=r._decorator,s=r.sys,u=r.Component},function(r){c=r.PictionaryPBLogger}],execute:function(){var l,f,p,g,m,d,h,y,v,P,b,S,I,w,C;n._RF.push({},"86a7bJv0rFMmaesJAWA06MD","Pictionary_NetworkConfig",void 0);var L=a.ccclass,N=a.property;r("PictionaryNetworkConfig",(l=L("PictionaryNetworkConfig"),f=N({tooltip:"Server host address"}),p=N({tooltip:"Server port number"}),g=N({tooltip:"Use SSL for connections"}),m=N({tooltip:"Player identifier"}),d=N({tooltip:"Room identifier"}),h=N({tooltip:"Name of the game"}),l((P=e((v=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n))||this,i(e,"serverHost",P,o(e)),i(e,"serverPort",b,o(e)),i(e,"useSSL",S,o(e)),i(e,"userId",I,o(e)),i(e,"roomId",w,o(e)),i(e,"gameName",C,o(e)),e}t(e,r);var n=e.prototype;return n.initNetworkConfig=function(){if(s.isBrowser){var r=new URLSearchParams(window.location.search),e="true"===r.get("debug");c.debug("Initializing network config (debug="+e+")"),e?this.parseQueryParams(r):this.parseInjectedConfig(),c.debug("Final network config:",{serverHost:this.serverHost,serverPort:this.serverPort,useSSL:this.useSSL,userId:this.userId,roomId:this.roomId,gameName:this.gameName})}},n.parseQueryParams=function(r){var e=this;c.debug("Parsing config from query parameters"),this.updateConfigFromQueryParam(r,"userId",(function(r){return e.userId=r})),this.updateConfigFromQueryParam(r,"roomId",(function(r){return e.roomId=r})),this.updateConfigFromQueryParam(r,"apiUrl",(function(r){return e.serverHost=r})),this.updateConfigFromQueryParam(r,"apiPort",(function(r){var t=parseInt(r);isNaN(t)||(e.serverPort=t)})),this.updateConfigFromQueryParam(r,"useSSL",(function(r){return e.useSSL="true"===r}))},n.parseInjectedConfig=function(){c.debug("Parsing config from injected GameConfig");try{var r=window.GameConfig;if(!r)return void c.debug("No injected GameConfig found");var e="string"==typeof r?JSON.parse(r):r;this.applyConfig(e)}catch(r){c.debug("Failed to parse injected GameConfig:",r)}},n.applyConfig=function(r){var e,t,i,o,n;r&&(this.userId=null!=(e=r.userId)?e:this.userId,this.roomId=null!=(t=r.roomId)?t:this.roomId,this.serverHost=null!=(i=r.apiUrl)?i:this.serverHost,this.serverPort=Number(null!=(o=r.apiPort)?o:this.serverPort),this.useSSL=null!=(n=r.useSSL)?n:this.useSSL)},n.updateConfigFromQueryParam=function(r,e,t){var i=r.get(e);null!=i&&t(i)},e}(u)).prototype,"serverHost",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localhost"}}),b=e(v.prototype,"serverPort",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),S=e(v.prototype,"useSSL",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=e(v.prototype,"userId",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(v.prototype,"roomId",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"testroom1"}}),C=e(v.prototype,"gameName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pictionary"}}),y=v))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./Pictionary_NetworkTypes.ts","./Pictionary_PlayerTypes.ts","./Pictionary_PbSaveSystem.ts","./Pictionary_NetworkConfig.ts","./Pictionary_PBLogger.ts","./colyseus.js"],(function(t){var n,e,o,i,r,a,c,s,h,u,l,f,g,d,m,p,C,v,_,y,k;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.extends,a=t.createClass,c=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){h=t.cclegacy,u=t._decorator,l=t.EventTarget,f=t.CCBoolean,g=t.Component},null,function(t){d=t.PictionaryConnectionState,m=t.PictionaryNetworkEvents,p=t.PictionaryServerMessageType},function(t){C=t.PictionaryPlayerType},function(t){v=t.PictionaryPbSaveSystem},function(t){_=t.PictionaryNetworkConfig},function(t){y=t.PictionaryPBLogger},function(t){k=t.default}],execute:function(){var w,S,N,E,D,R,I,T;h._RF.push({},"1704cfz1vNFWqd+wOT8pQ0Z","Pictionary_NetworkManager",void 0);var P=u.ccclass,b=u.property,M={roomId:"testroom1",reconnectionToken:"eyJ"},x=t("ConnectionStateChangeEvent",new l),O=t("ServerRoomStateChangeEvent",new l),A=t("ServerMessageEvent",new l);t("PictionaryNetworkManager",(w=P("PictionaryNetworkManager"),S=b({type:f,tooltip:"Enable development mode for additional logging"}),N=b({type:_,tooltip:"Network configuration settings"}),w(((T=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return n=t.call.apply(t,[this].concat(a))||this,o(n,"isDevMode",R,i(n)),o(n,"networkConfig",I,i(n)),n._client=void 0,n._room=void 0,n._currentConnectionState=d.INITIALIZING,n._reconnectionData=r({},M),n}e(n,t);var h=n.prototype;return h.onLoad=function(){if(n._instance)return this.log("NetworkManager instance already exists. Destroying duplicate."),void this.node.destroy();n._instance=this,this.networkConfig.initNetworkConfig(),this.isDevMode||y.setProductionMode(!0)},h.start=function(){this.initializeClient(),this.log("============ Initializing client ========="),this.log("============ Connecting to room ========="),this.connect(this.networkConfig.roomId,this.networkConfig.userId)},h.onDestroy=function(){this.cleanup()},h.cleanup=function(){this._room&&(this.leaveRoom(),this._room=null),this._client&&(this._client=null),this._currentConnectionState=d.INITIALIZING,this._reconnectionData=r({},M),n._instance===this&&(n._instance=null)},h.initializeClient=function(){var t=this.networkConfig.useSSL?"wss":"ws",n="";n=0==this.networkConfig.serverPort?t+"://"+this.networkConfig.serverHost:t+"://"+this.networkConfig.serverHost+":"+this.networkConfig.serverPort,this.log("Initializing client with endpoint: "+n),this._client=new k.Client(n)},h.shouldRejoin=function(){return!this.isDevMode&&(this._reconnectionData=v.LoadData(this.networkConfig.gameName),!!(this._reconnectionData&&this._reconnectionData.roomId&&this._reconnectionData.reconnectionToken)&&this._reconnectionData.roomId===this.networkConfig.roomId)},h.connect=function(){var t=c(s().mark((function t(n,e){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.log("============ Connecting to room from connect function ========="),this.updateConnectionState(d.CONNECTING),!this.shouldRejoin()){t.next=7;break}return this.log("Rejoining room",n),t.next=6,this.rejoin();case 6:return t.abrupt("return");case 7:return t.prev=7,o=this.createPlayerData(e),this.log("Joining with options ",{player:o}),t.next=12,this._client.joinById(n,{player:o});case 12:this._room=t.sent,this.initAfterJoin(n),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(7),this.handleConnectionError(t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[7,16]])})));return function(n,e){return t.apply(this,arguments)}}(),h.initAfterJoin=function(t){this.updateConnectionState(d.JOINED_ROOM),this.log("Joined room "+t+" with sessionId: "+this._room.sessionId),this.initializeRoomCallbacks(),this.saveReconnectionData()},h.createAndJoinRoom=function(){var t=c(s().mark((function t(n,e){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.log("Creating room",n),this.updateConnectionState(d.CONNECTING),t.prev=2,o=this.createPlayerData(e),t.next=6,this._client.create("PictionaryRoom",{roomId:n,player:o,roomSettings:{maxClients:10}});case 6:this._room=t.sent,this.initAfterJoin(n),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),this.handleConnectionError(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(n,e){return t.apply(this,arguments)}}(),h.createPlayerData=function(t){return{userId:t,name:t,avatar:"randomProfilePicture",type:C.HUMAN}},h.initializeRoomCallbacks=function(){var t=this;this._room?(this._room.onStateChange((function(t){O.emit(m.SERVER_ROOM_STATE_CHANGE,t)})),this._room.onLeave((function(n){4001===n?t.updateConnectionState(d.KICKED_OUT):t.updateConnectionState(d.DISCONNECTED)})),this._room.onMessage(p.KICKED_OUT,(function(){t.updateConnectionState(d.KICKED_OUT)})),this._room.onMessage("*",(function(t,n){A.emit(m.SERVER_MESSAGE,t,n)}))):this.log("Cannot initialize callbacks: Room is not defined")},h.updateConnectionState=function(t){if(this._currentConnectionState!==t){var n=this._currentConnectionState;this._currentConnectionState=t,this.log("Connection state changed: "+d[n]+" -> "+d[t]),x.emit(m.CONNECTION_STATE_CHANGE,n,t)}},h.reconnect=function(){var t=c(s().mark((function t(n,e,o){var i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=1),void 0===e&&(e=10),void 0===o&&(o=2e3),this._currentConnectionState===d.DISCONNECTED||this._currentConnectionState===d.RECONNECTING){t.next=6;break}return this.log("Cannot reconnect: Current state is "+d[this._currentConnectionState]),t.abrupt("return");case 6:return this._room&&this._room.state&&(i=this._room.state).roomSettings&&i.roomSettings.maxReconnectionAttempts&&(e=i.roomSettings.maxReconnectionAttempts),this.updateConnectionState(d.RECONNECTING),this.log("Reconnect attempt "+n+"/"+e),t.prev=9,t.next=12,this.delay(o);case 12:if(this._room&&this._room.reconnectionToken){t.next=14;break}throw new Error("Reconnection token not available");case 14:return t.next=16,this._client.reconnect(this._room.reconnectionToken);case 16:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(d.JOINED_ROOM),this.log("Reconnected successfully."),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(9),this.handleReconnectionError(t.t0,n,e,o);case 27:case"end":return t.stop()}}),t,this,[[9,24]])})));return function(n,e,o){return t.apply(this,arguments)}}(),h.rejoin=function(){var t=c(s().mark((function t(n,e,o){var i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),void 0===e&&(e=10),void 0===o&&(o=2e3),this.log("Rejoin attempt "+n+"/"+e),t.prev=4,t.next=7,this.delay(o);case 7:if(this._reconnectionData&&this._reconnectionData.reconnectionToken){t.next=9;break}throw new Error("Reconnection data not available");case 9:return i=this._reconnectionData.roomId+":"+this._reconnectionData.reconnectionToken,y.info("Using formatted reconnection token: ",i),t.next=13,this._client.reconnect(i);case 13:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(d.JOINED_ROOM),this.log("Rejoined successfully."),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(4),this.handleReconnectionError(t.t0,n,e,o,"reJoin");case 24:case"end":return t.stop()}}),t,this,[[4,21]])})));return function(n,e,o){return t.apply(this,arguments)}}(),h.delay=function(){var t=c(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,n)})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),h.handleConnectionError=function(t){var n=(null==t?void 0:t.message)||"Unknown error";this.log("Error connecting to room:",n),this.updateConnectionState(d.DISCONNECTED)},h.handleReconnectionError=function(t,n,e,o,i){void 0===i&&(i="reconnect");var r=(null==t?void 0:t.message)||"Unknown error";this.log(i+" attempt "+n+" failed:",r),n<e||-1===e?"reconnect"===i?this.reconnect(n+1,e,o):this.rejoin(n+1,e,o):(this.log("Max reconnection attempts reached. Please check your network or contact support."),this.updateConnectionState(d.DISCONNECTED))},h.saveReconnectionData=function(){if(y.info("============ Saving reconnection data ========="),this._room&&this._room.reconnectionToken){var t=this._room.reconnectionToken;t.includes(":")&&(t=t.split(":")[1]),y.info("saving Reconnection token: ",t),this._reconnectionData={roomId:this.networkConfig.roomId,reconnectionToken:t},v.SaveData(this.networkConfig.gameName,this._reconnectionData),y.info("Reconnection data saved")}else this.log("Cannot save reconnection data: Room or reconnection token not available")},h.leaveRoom=function(){var t=this;this._room?(this.log("Leaving room"),this._room.leave(!0).then((function(){return t.log("Left room successfully")})).catch((function(n){return t.log("Error leaving room:",(null==n?void 0:n.message)||"Unknown error")}))):this.log("Cannot leave room: Room is not defined")},h.sendMessage=function(t,n){this._room?(this.isDevMode&&this.log("Sending message:",t,n),this._room.send(t,n)):this.log("Cannot send message: Room is not defined")},h.log=function(t){if(this.isDevMode){for(var n=arguments.length,e=new Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];e.length>0?y.info.apply(y,["[NetworkManager] "+t].concat(e)):y.info("[NetworkManager] "+t)}},a(n,[{key:"CurrentRoom",get:function(){return this._room}},{key:"CurrentConnectionState",get:function(){return this._currentConnectionState}}],[{key:"Instance",get:function(){if(!this._instance)throw new Error("NetworkManager instance is not initialized.");return this._instance}}]),n}(g))._instance=null,R=n((D=T).prototype,"isDevMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=n(D.prototype,"networkConfig",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=D))||E));h._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_NetworkTypes.ts",["cc"],(function(E){var N;return{setters:[function(E){N=E.cclegacy}],execute:function(){N._RF.push({},"9b6adMqVv9Fw5Gma0CGZzf5","Pictionary_NetworkTypes",void 0);E("PictionaryNetworkEvents",function(E){return E[E.SERVER_ROOM_STATE_CHANGE=0]="SERVER_ROOM_STATE_CHANGE",E[E.CONNECTION_STATE_CHANGE=1]="CONNECTION_STATE_CHANGE",E[E.ROOM_STATUS_CHANGE=2]="ROOM_STATUS_CHANGE",E[E.GAME_STATE_CHANGE=3]="GAME_STATE_CHANGE",E[E.SERVER_MESSAGE=4]="SERVER_MESSAGE",E}({})),E("PictionaryConnectionState",function(E){return E[E.INITIALIZING=0]="INITIALIZING",E[E.CONNECTING=1]="CONNECTING",E[E.CONNECTED=2]="CONNECTED",E[E.LOBBY=3]="LOBBY",E[E.JOINED_ROOM=4]="JOINED_ROOM",E[E.DISCONNECTED=5]="DISCONNECTED",E[E.RECONNECTING=6]="RECONNECTING",E[E.KICKED_OUT=7]="KICKED_OUT",E}({})),E("PictionaryServerMessageType",function(E){return E.NONE="none",E.KICKED_OUT="kicked_out",E.PLAYER_COMEBACK="player_comeback",E.PLAYER_JOINED="player_joined",E}({}));N._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PbExtensions.ts",["cc","./Pictionary_PBLogger.ts"],(function(t){var n,o,r,e;return{setters:[function(t){n=t.cclegacy,o=t.Vec3,r=t.Component},function(t){e=t.PictionaryPBLogger}],execute:function(){t("transformPoint",(function(){return this.worldPosition.clone()})),n._RF.push({},"ac205iMzG1JHbT0Q+N3d0VS","Pictionary_PbExtensions",void 0),o.prototype.clampMagnitude=function(t,n){if(!(t>n)){var o=this.length();return o>n?(this.normalize(),this.multiplyScalar(n)):o<t&&(this.normalize(),this.multiplyScalar(t)),this}console.error("min should be less than max")},r.prototype.log=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.info.apply(e,["["+t+"] "].concat(o))},r.prototype.logDebug=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.debug.apply(e,["["+t+"] "].concat(o))},r.prototype.logInfo=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.info.apply(e,["["+t+"] "].concat(o))},r.prototype.logWarning=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.warning.apply(e,["["+t+"] "].concat(o))},r.prototype.logError=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.error.apply(e,["["+t+"] "].concat(o))},n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PBLogger.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"94cc01d1A1Oap9CLldjHriR","Pictionary_PBLogger",void 0);var n=e("LogLevel",function(e){return e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e}({})),o=e("PictionaryPBLogger",function(){function e(){}return e.debug=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Debug,e,o)},e.info=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Info,e,o)},e.warning=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Warning,e,o)},e.error=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Error,e,o)},e.log=function(e,r,o){if(e>=this.currentLevel){var t,i=n[e]+": "+r;if((t=console).log.apply(t,[i].concat(o)),this.isProduction&&window.ReactNativeWebView)try{var c={type:"log",level:n[e],message:i,params:o};window.ReactNativeWebView.postMessage(JSON.stringify(c))}catch(e){console.error("Failed to send log to ReactNativeWebView:",e)}}},e.setLevel=function(e){this.currentLevel=e},e.setProductionMode=function(e){this.isProduction=e},e}());o.currentLevel=n.Debug,o.isProduction=!1,r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PbSaveSystem.ts",["cc","./Pictionary_PBLogger.ts"],(function(t){var a,e,n,o;return{setters:[function(t){a=t.cclegacy,e=t._decorator,n=t.sys},function(t){o=t.PictionaryPBLogger}],execute:function(){var c;a._RF.push({},"1fd44qyYhlBaL8ZGl3clvlf","Pictionary_PbSaveSystem",void 0);var r=e.ccclass;t("PictionaryPbSaveSystem",r("PictionaryPbSaveSystem")(c=function(){function t(){}return t.SaveData=function(t,a){o.info("============ Saving data in pb save system ========="),n.localStorage.setItem(t,JSON.stringify(a))},t.LoadData=function(t){return JSON.parse(n.localStorage.getItem(t))},t.RemoveData=function(t){n.localStorage.removeItem(t)},t.ClearAllData=function(){n.localStorage.clear()},t}())||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Pencil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Brush.ts","./Pictionary_Tool.ts"],(function(i){var t,e,r,n,o,c,a,l,u,s,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,c=i._decorator,a=i.Sprite,l=i.Node,u=i.Color},function(i){s=i.PictionaryBrush},function(i){p=i.PictionaryTool}],execute:function(){var b,h,y,f,v,d,g,P,C;o._RF.push({},"3316dgZ+RhCdqCfhiQk2ir0","Pictionary_Pencil",void 0);var _=c.ccclass,w=c.property;i("PictionaryPencil",(b=_("PictionaryPencil"),h=w({type:a}),y=w({type:s}),b((d=t((v=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return(t=i.call.apply(i,[this].concat(o))||this).board=void 0,r(t,"bg",d,n(t)),r(t,"activeColor",g,n(t)),r(t,"inactiveColor",P,n(t)),r(t,"brush",C,n(t)),t}e(t,i);var o=t.prototype;return o.initialize=function(i,t){var e=this;this.board=i,this.bg.node.on(l.EventType.TOUCH_START,(function(){return t(e)}))},o.select=function(){this.bg.color=this.activeColor,this.board.setBrush(this.brush)},o.deselect=function(){this.bg.color=this.inactiveColor},t}(p)).prototype,"bg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(v.prototype,"activeColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(1,0,0,1)}}),P=t(v.prototype,"inactiveColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(1,1,1,1)}}),C=t(v.prototype,"brush",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),f=v))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_NetworkManager.ts","./Pictionary_GameMessageType.ts","./PicitionaryGameState.ts","./Pictionary_PlayerProfile.ts","./PictionaryGameHandler.ts"],(function(e){var t,i,r,o,n,a,s,l,c,u,p,f,h,d,y,g,S,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,c=e.CCInteger,u=e.Sprite,p=e.Color,f=e.tween,h=e.Component},function(e){d=e.PictionaryNetworkManager},function(e){y=e.PictionaryGameMessageType},function(e){g=e.PictionaryGameState},function(e){S=e.PictionaryPlayerProfile},function(e){m=e.PictionaryGameHandler}],execute:function(){var I,P,b,w,C,N,L,v,E,G,T,R,A,D,z,x,_;n._RF.push({},"8cf4cp74hlLO4Am8q00N9IX","Pictionary_Player",void 0);var M=a.ccclass,O=a.property,k=e("PlayerState",function(e){return e[e.IDLE=0]="IDLE",e[e.WORD_SELECTION=1]="WORD_SELECTION",e[e.DRAWING=2]="DRAWING",e[e.GUESSING=3]="GUESSING",e[e.EVALUATION=4]="EVALUATION",e}({}));e("PictionaryPlayer",(I=M("PictionaryPlayer"),P=O({type:s,tooltip:"Player's drawing icon"}),b=O({type:s}),w=O({type:s,tooltip:"Container node for message notification"}),C=O({type:l,tooltip:"Label to show the chat message"}),N=O({type:c,tooltip:"Player's index in the game"}),L=O({type:u,tooltip:"Background sprite for player UI"}),v=O({type:S,tooltip:"Player profile component"}),I((T=t((G=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"drawingIcon",T,o(t)),r(t,"crownImage",R,o(t)),r(t,"messageContainer",A,o(t)),r(t,"messageLabel",D,o(t)),t.userId="",t.playerName="",r(t,"index",z,o(t)),r(t,"bgSprite",x,o(t)),r(t,"profile",_,o(t)),t.board=null,t.hasGuessedAnswer=!1,t.playerState=k.IDLE,t.isLocal=!1,t.isInitialized=!1,t.roomSettings=null,t.oddColor=new p(15,43,77,255),t.evenColor=new p(0,0,0,0),t.correctGuessColor=new p(0,255,0,125),t}i(t,e);var n=t.prototype;return n.onEnable=function(){this.updateBgColor(),this.initializeMessageContainer()},n.initializeMessageContainer=function(){if(this.messageContainer){var e=this.messageContainer.getComponent(u);e&&(e.color=new p(e.color.r,e.color.g,e.color.b,0))}},n.initialize=function(e,i){if(e&&i){console.log("Initializing Player: "+this.index),this.board=i;var r=e.getPlayerByIndex(this.index);if(r){if(this.profile){var o=r.sessionId===d.Instance.CurrentRoom.sessionId;this.profile.initialize(r,o),this.isLocal=o}this.userId=r.userId;var n=m.Instance.getContactName(this.userId)||r.name;console.log("displayName of userId",this.userId," is ",n),this.playerName=t.getTruncatedName(n),this.roomSettings=e.roomSettings,this.isInitialized=!0,this.updatePlayerState(e)}else console.error("[Player] No profile data found for player index "+this.index)}else console.error("[Player] Failed to initialize: Invalid room state or board")},t.getTruncatedName=function(e,t){void 0===t&&(t=8);var i=e.split(" ")[0],r=i.charAt(0).toUpperCase()+i.slice(1);return r.length<=t?r:r.slice(0,t)+".."},n.setScore=function(e){this.profile&&this.profile.setScore(e)},n.resetState=function(){this.hasGuessedAnswer=!1,this.playerState=k.IDLE,this.updateBgColor()},n.onServerRoomStateChange=function(e){if(e){var t=e.getPlayerByIndex(this.index);t&&this.profile&&this.profile.setScore(t.score),this.updatePlayerState(e),this.isMyTurn(e.drawingPlayerIndex)&&this.handleTurnSpecificMessages(e)}else console.error("[Player] Invalid room state")},n.updatePlayerState=function(e){var t=this.isMyTurn(e.drawingPlayerIndex);switch(e.currentGameState){case g.WORD_SELECTION:this.playerState=t?k.WORD_SELECTION:k.IDLE;break;case g.DRAWING:this.playerState=t?k.DRAWING:k.GUESSING;break;case g.DRAWING_RESULTS:this.playerState=k.EVALUATION;break;default:this.playerState=k.IDLE}},n.handleTurnSpecificMessages=function(e){if(e.inputPayload.inputType!==y.NONE)switch(e.inputPayload.inputType){case y.SET_STATE:this.onSetState(e);break;case y.WORDS_LIST:this.handleWordsList(e)}},n.onSetState=function(e){this.updatePlayerState(e)},n.handleWordsList=function(e){console.log("[Player] Received words list ",e.inputPayload)},n.onReconnection=function(e){if(e){var t=e.getPlayerByIndex(this.index);if(t&&this.profile){var i=t.sessionId===d.Instance.CurrentRoom.sessionId;this.profile.initialize(t,i)}this.updatePlayerState(e),this.updateBgColor()}else console.error("[Player] Invalid room state for reconnection")},n.isMyTurn=function(e){return this.index===e},n.setRank=function(e){this.profile&&this.profile.setRank(e),this.updateBgColor()},n.setGuessedAnswer=function(e){this.hasGuessedAnswer=e,this.updateBgColor()},n.updateBgColor=function(){if(this.bgSprite&&this.profile){var e=this.profile.getRank()%2==0?this.evenColor:this.oddColor;this.hasGuessedAnswer&&(e=this.correctGuessColor),this.bgSprite.color=e}},n.setPlayerNumber=function(e){this.index=e},n.getScore=function(){return this.profile?this.profile.getScore():0},n.getRank=function(){return this.profile?this.profile.getRank():0},n.getProfileSpriteFrame=function(){return this.profile?this.profile.getProfileSpriteFrame():null},n.showMessageNotification=function(e){if(this.messageContainer&&this.messageLabel){var t=e.length>15?e.substring(0,15)+"...":e;this.messageLabel.string=t;var i=this.messageContainer.getComponent(u);i?(f(i).stop(),i.color=new p(i.color.r,i.color.g,i.color.b,0),f(i).to(.3,{color:new p(i.color.r,i.color.g,i.color.b,255)}).delay(1).to(.3,{color:new p(i.color.r,i.color.g,i.color.b,0)}).start()):console.warn("[Player] Sprite component not found on messageContainer")}else console.warn("[Player] Message container or label not assigned")},t}(h)).prototype,"drawingIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(G.prototype,"crownImage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(G.prototype,"messageContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(G.prototype,"messageLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(G.prototype,"index",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=t(G.prototype,"bgSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(G.prototype,"profile",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=G))||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PlayerAvatar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,n,o,l,s,c,u,p,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.Node,c=e.assetManager,u=e.Texture2D,p=e.SpriteFrame,y=e.Component}],execute:function(){var v,f,h,d,m,g,A;n._RF.push({},"622a1WKnbZO64xNdsO5XAfe","Pictionary_PlayerAvatar",void 0);var P=o.ccclass,w=o.property;e("PictionaryPlayerAvatar",(v=P("PictionaryPlayerAvatar"),f=w({type:l,tooltip:"Player Avatar"}),h=w({type:l,tooltip:"Player Avatar Outline"}),v((g=t((m=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"playerAvatar",g,i(t)),a(t,"outline",A,i(t)),t.enableOnClick=!1,t.userId="",t}r(t,e);var n=t.prototype;return n.initialize=function(e,t){this.enableOnClick=e,this.userId=t},n.onEnable=function(){this.registerTouchEvents()},n.onDisable=function(){this.unregisterTouchEvents()},n.start=function(){},n.update=function(e){},n.registerTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.on(s.EventType.TOUCH_START,this.handleTouchStart,this)},n.unregisterTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.off(s.EventType.TOUCH_START,this.handleTouchStart,this)},n.handleTouchStart=function(){this.enableOnClick},n.setOutline=function(e){this.outline&&(this.outline.enabled=e)},n.setOutlineColor=function(e){this.outline&&(this.outline.color=e)},n.setAvatarFromUrl=function(e){console.log("Setting avatar from url: ",e);var t=this.getFromCache(e);t?this.createSpriteFrameFromTexture(t):this.loadRemoteImage(e)},n.setAvatarFromSpriteFrame=function(e){this.playerAvatar&&(this.playerAvatar.spriteFrame=e)},n.getFromCache=function(e){var t=c.assets.get(e);if(t){var r=new u;if(r.image=t,r.isValid&&"function"==typeof r.getHash)return r}return null},n.createSpriteFrameFromTexture=function(e){if(e&&e.isValid&&"function"==typeof e.getHash)if(this.playerAvatar){console.log("creating sprteframe from texture",this.playerAvatar);var t=new p;t.texture=e,this.playerAvatar.spriteFrame=t}else console.warn("[PictionaryPlayerAvatar] PlayerAvatar component is null");else console.warn("[PictionaryPlayerAvatar] Invalid texture provided")},n.loadRemoteImage=function(e){var t=this;c.loadRemote(e,{ext:".png"},(function(r,a){if(r)return console.error("[Player] Failed to load profile image: "+JSON.stringify(r)),void(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_avatar_load_failed",data:{userId:t.userId,url:e,errorName:r.name,errorMessage:r.message,errorStack:r.stack}})));try{var i=new p,n=new u;n.image=a,n.isValid&&"function"==typeof n.getHash?(i.texture=n,t.playerAvatar?t.playerAvatar.spriteFrame=i:console.warn("[PictionaryPlayerAvatar] PlayerAvatar component is null")):console.warn("[PictionaryPlayerAvatar] Invalid texture created from imageAsset")}catch(r){console.error("[Player] Error creating sprite frame: "+r),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_sprite_frame_creation_failed",data:{userId:t.userId,url:e,error:r}}))}}))},t}(y)).prototype,"playerAvatar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(m.prototype,"outline",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PlayerProfile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Player.ts","./Pictionary_PlayerAvatar.ts"],(function(e){var i,r,t,o,a,l,n,s,c,p,f,u,y,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,n=e.Label,s=e.Sprite,c=e.Widget,p=e.Color,f=e.Node,u=e.Component},function(e){y=e.PictionaryPlayer},function(e){h=e.PictionaryPlayerAvatar}],execute:function(){var g,b,P,d,m,L,I,v,z,k,w,S,T,N,U,_,A;a._RF.push({},"1b08d3QQdJCrIUPzM0rfjKq","Pictionary_PlayerProfile",void 0);var C=l.ccclass,R=l.property;e("PictionaryPlayerProfile",(g=C("PictionaryPlayerProfile"),b=R({type:n,tooltip:"Label to display player's name"}),P=R({type:s,tooltip:"Sprite for player's profile image"}),d=R({type:n,tooltip:"Label to display player's score"}),m=R({type:n,tooltip:"Label to display player's rank"}),L=R({type:s}),I=R({type:c}),v=R({type:h}),g((w=i((k=function(e){function i(){for(var i,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a))||this,t(i,"nameLabel",w,o(i)),t(i,"profileImage",S,o(i)),t(i,"scoreLabel",T,o(i)),t(i,"rankLabel",N,o(i)),t(i,"profilePicHolder",U,o(i)),t(i,"profilePicWidget",_,o(i)),t(i,"playerAvatar",A,o(i)),i.userId="",i.playerName="",i.profileImageUrl="",i.isProfileInitialized=!1,i.isLocal=!1,i.score=0,i.rank=0,i.goldColor=new p(255,215,0,255),i}r(i,e);var a=i.prototype;return a.onEnable=function(){this.scoreLabel&&(this.scoreLabel.string="0"),this.rankLabel&&(this.rankLabel.string="0")},a.onDisable=function(){this.profileImage&&this.profileImage.node&&this.profileImage.node.off(f.EventType.TOUCH_START,this.openProfile,this)},a.initialize=function(e,i){void 0===i&&(i=!1),e?(this.userId=e.userId,this.playerName=y.getTruncatedName(e.name),this.isLocal=i,this.loadProfile(e),i&&this.highlightLocalPlayer(),this.setScore(e.score||0)):console.error("[PlayerProfile] No profile data provided for initialization")},a.loadProfile=function(e){!this.isProfileInitialized&&e&&(this.nameLabel.string=y.getTruncatedName(e.name,8),this.profileImageUrl=e.avatar,this.loadProfileImage(),this.profileImage.node.on(f.EventType.TOUCH_START,this.openProfile,this),this.isProfileInitialized=!0)},a.loadProfileImage=function(){this.profileImageUrl?this.playerAvatar.setAvatarFromUrl(this.profileImageUrl):console.warn("[PlayerProfile] No profile image URL provided")},a.highlightLocalPlayer=function(){this.nameLabel&&(this.nameLabel.color=this.goldColor)},a.openProfile=function(){this.userId?console.log("Opening profile for user: "+this.userId):console.warn("[PlayerProfile] Cannot open profile: No user ID available")},a.getProfileSpriteFrame=function(){return this.profileImage?this.profileImage.spriteFrame:null},a.getName=function(){return this.playerName},a.getUserId=function(){return this.userId},a.setScore=function(e){this.score=e,this.scoreLabel&&(this.scoreLabel.string=e.toString())},a.getScore=function(){return this.score},a.setRank=function(e){this.rank=e,this.rankLabel&&(this.rankLabel.string=e.toString())},a.getRank=function(){return this.rank},i}(u)).prototype,"nameLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(k.prototype,"profileImage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(k.prototype,"scoreLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(k.prototype,"rankLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(k.prototype,"profilePicHolder",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(k.prototype,"profilePicWidget",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(k.prototype,"playerAvatar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=k))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PlayerTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a9b91j0/fxDRabIDQyFtkyU","Pictionary_PlayerTypes",void 0);e("PictionaryPlayerType",function(e){return e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.SPECTATOR=2]="SPECTATOR",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_RoomTypes.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"bfb0bBayqpG84uxWw6OMfj+","Pictionary_RoomTypes",void 0);t("PictionaryRoomStatus",function(t){return t[t.NONE=0]="NONE",t[t.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",t[t.COUNTDOWN=2]="COUNTDOWN",t[t.GAME_SIMULATION=3]="GAME_SIMULATION",t[t.END_GAME=4]="END_GAME",t}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_ScaleUICanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_CameraManger.ts"],(function(t){var a,i,e,n,r,o,c,s,l,u,h,d,f;return{setters:[function(t){a=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.UITransform,s=t.view,l=t.log,u=t.sys,h=t.screen,d=t.Component},function(t){f=t.PictionaryCameraManger}],execute:function(){var p,S,v,g,m;r._RF.push({},"7d339PcApZAeKE0NdMIqMnW","Pictionary_ScaleUICanvas",void 0);var C=o.ccclass,y=o.property;t("PictionaryScaleUICanvas",C("PictionaryScaleUICanvas")((v=a((S=function(t){function a(){for(var a,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return a=t.call.apply(t,[this].concat(r))||this,e(a,"fitToCamera",v,n(a)),e(a,"maintainAspectRatio",g,n(a)),e(a,"additionalScaleFactor",m,n(a)),a}i(a,t);var r=a.prototype;return r.onLoad=function(){this.adjustCanvasScale()},r.start=function(){var t=this;window.addEventListener("resize",(function(){t.scheduleOnce((function(){t.adjustCanvasScale()}),.1)}))},r.update=function(){},r.adjustCanvasScale=function(){var t=this.node;if(t.getComponent(c))if(this.fitToCamera&&f.instance){var a=f.instance.getWidth(),i=2*f.instance.getCurrentOrthoHeight(),e=1;if(this.maintainAspectRatio){var n=s.getDesignResolutionSize(),r=a/n.width,o=i/n.height;e=Math.min(r,o)}e*=this.additionalScaleFactor,t.setScale(e,e,1),l("Canvas Scale with Camera: "+e.toFixed(2))}else{var d=s.getVisibleSize(),p=s.getDesignResolutionSize(),S=d.width/p.width,v=d.height/p.height;if(u.os===u.OS.IOS||u.os===u.OS.ANDROID){var g=h.windowSize.width/h.windowSize.height;(u.os===u.OS.IOS&&g>2||u.os===u.OS.ANDROID&&g>2.1)&&(S*=.95,v*=.95)}var m=this.maintainAspectRatio?Math.min(S,v):Math.max(S,v);m*=this.additionalScaleFactor,t.setScale(m,m,1),l("Canvas Scale: "+m.toFixed(2))}},r.refreshCanvasScale=function(){this.adjustCanvasScale()},a}(d)).prototype,"fitToCamera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=a(S.prototype,"maintainAspectRatio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=a(S.prototype,"additionalScaleFactor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=S))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_StartRoundMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_AudioManager.ts"],(function(o){var n,t,i,e,r,a,u,s,c,l,d,p,y,h,g,f,R,b;return{setters:[function(o){n=o.applyDecoratedDescriptor,t=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){r=o.cclegacy,a=o._decorator,u=o.EventTarget,s=o.Node,c=o.Label,l=o.input,d=o.Input,p=o.KeyCode,y=o.view,h=o.UITransform,g=o.UIOpacity,f=o.tween},function(o){R=o.PictionaryMenu},function(o){b=o.PictionaryAudioManager}],execute:function(){var N,v,P,m,S,w,M;r._RF.push({},"1f16aNIkc9LwLDrZ+niqacc","Pictionary_StartRoundMenu",void 0);var L=a.ccclass,_=a.property;o("WordSelectedEvent",new u),o("PictionaryStartRoundMenu",(N=L("PictionaryStartRoundMenu"),v=_({type:s}),P=_({type:c}),N((w=n((S=function(o){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=o.call.apply(o,[this].concat(r))||this,i(n,"roundRootNode",w,e(n)),i(n,"roundNumberLabel",M,e(n)),n.originalPosition=null,n}t(n,o);var r=n.prototype;return r.onLoad=function(){this.originalPosition=this.roundRootNode.position.clone()},r.Open=function(){console.log("[WordSelectionMenu] Opening"),o.prototype.Open.call(this),this.animateRoundRoot()},r.Close=function(){console.log("[WordSelectionMenu] Closing"),this.roundNumberLabel.node.active=!1,o.prototype.Close.call(this)},r.initialize=function(){o.prototype.initialize.call(this),this.originalPosition=this.roundRootNode.position.clone(),l.on(d.EventType.KEY_DOWN,this.onKeyDown,this)},r.onDestroy=function(){l.off(d.EventType.KEY_DOWN,this.onKeyDown,this)},r.onKeyDown=function(o){o.keyCode===p.KEY_S&&(console.log("S key pressed, playing animation"),this.animateRoundRoot())},r.animateRoundRoot=function(){var o=y.getVisibleSize().width+.75*this.roundRootNode.getComponent(h).width;this.roundRootNode.setPosition(o,this.originalPosition.y,this.originalPosition.z);var n=this.roundRootNode.getComponent(g);n||(n=this.roundRootNode.addComponent(g)),n.opacity=0;var t=f(this.roundRootNode).to(.8,{position:this.originalPosition},{easing:"cubicOut"}),i=f(n).to(.6,{opacity:255},{easing:"cubicIn"});t.start(),i.start(),b.instance.playSound("RoundStart")},r.setRoundMessage=function(o){this.roundNumberLabel.node.active=!0,this.roundNumberLabel.string="Round "+o},n}(R)).prototype,"roundRootNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(S.prototype,"roundNumberLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,r,n,l,s,a,o,m,u;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){l=i.cclegacy,s=i._decorator,a=i.Label,o=i.Node,m=i.Sprite,u=i.Component}],execute:function(){var p,c,h,T,f,d,g;l._RF.push({},"131cbWGU49GDYCzKfjrgrwQ","Pictionary_Timer",void 0);var F=s.ccclass,b=s.property;i("PictionaryTimer",(p=F("PictionaryTimer"),c=b(a),h=b(o),p((d=t((f=function(i){function t(){for(var t,e=arguments.length,l=new Array(e),s=0;s<e;s++)l[s]=arguments[s];return t=i.call.apply(i,[this].concat(l))||this,r(t,"timeUiLabel",d,n(t)),r(t,"timerFill",g,n(t)),t.elapsedTime=0,t.totalTime=0,t.isRunning=!1,t.timerFillSprite=null,t}e(t,i);var l=t.prototype;return l.start=function(){this.reset(),this.timerFill&&(console.log("timerFill",this.timerFill),this.timerFillSprite=this.timerFill.getComponent(m),console.log("timerFillSprite",this.timerFillSprite))},l.update=function(i){this.isRunning&&(this.elapsedTime-=i,this.elapsedTime<=0&&(this.elapsedTime=0,this.stopTimer()),this.updateTimeLabel(),this.updateTimerFill())},l.startTimer=function(){this.isRunning||(this.isRunning=!0)},l.stopTimer=function(){this.isRunning&&(this.isRunning=!1)},l.reset=function(){this.elapsedTime=0,this.totalTime=0,this.updateTimeLabel(),this.updateTimerFill()},l.setStartTime=function(i){this.elapsedTime=i,this.totalTime=i,this.updateTimeLabel(),this.updateTimerFill()},l.updateTimeLabel=function(){var i=Math.floor(this.elapsedTime);this.timeUiLabel.string=""+i},l.updateTimerFill=function(){if(this.timerFillSprite){var i=this.elapsedTime/this.totalTime;this.timerFillSprite.fillRange=Math.max(0,Math.min(1,i))}},l.formatTime=function(i){return i<10?"0"+i:""+i},l.formatMilliseconds=function(i){return i<10?"00"+i:i<100?"0"+i:""+i},t}(u)).prototype,"timeUiLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(f.prototype,"timerFill",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=f))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Tool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i,o;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t.Component}],execute:function(){i._RF.push({},"9c2aaP87iNEH5uaEgVOjEiH","Pictionary_Tool",void 0);t("PictionaryTool",function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var o=i.prototype;return o.initialize=function(t,n){},o.select=function(){},o.deselect=function(){},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Toolbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Board.ts","./Pictionary_Tool.ts","./Pictionary_PBLogger.ts"],(function(o){var t,e,i,r,n,l,c,a,s,u,p;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,i=o.initializerDefineProperty,r=o.assertThisInitialized},function(o){n=o.cclegacy,l=o._decorator,c=o.Node,a=o.Component},function(o){s=o.PictionaryBoard},function(o){u=o.PictionaryTool},function(o){p=o.PictionaryPBLogger}],execute:function(){var y,b,f,h,d,T,g;n._RF.push({},"7f913t8CX1NarPOh/R463ER","Pictionary_Toolbar",void 0);var P=l.ccclass,v=l.property;o("PictionaryToolbar",(y=P("PictionaryToolbar"),b=v({type:s}),f=v({type:[c]}),y((T=t((d=function(o){function t(){for(var t,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return t=o.call.apply(o,[this].concat(n))||this,i(t,"board",T,r(t)),i(t,"tools",g,r(t)),t.currentTool=null,t}e(t,o);var n=t.prototype;return n.initialize=function(o){var t=this;this.board=o,this.tools.forEach((function(e){e.getComponent(u).initialize(o,t.onSelectTool.bind(t))})),this.currentTool=this.tools[0].getComponent(u),this.currentTool.select()},n.onSelectTool=function(o){var t;p.debug("-----------onSelectTool"),p.debug("Selected tool:",o),p.debug("Toolbar instance:",this),null==(t=this.currentTool)||t.deselect(),this.currentTool=o,this.currentTool.select()},t}(a)).prototype,"board",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(d.prototype,"tools",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=d))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_RoomTypes.ts","./Pictionary_NetworkTypes.ts","./PicitionaryGameState.ts","./Pictionary_GameMessageType.ts","./Pictionary_GameManager.ts","./PictionaryGameHandler.ts","./Pictionary_NetworkManager.ts"],(function(e){var n,t,o,a,s,i,r,u,c,l,h,g,M,S,d,f,m,C,p,y,E,R,G;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,i=e._decorator,r=e.Camera,u=e.Node,c=e.Color,l=e.Sprite,h=e.tween,g=e.Component},function(e){M=e.PictionaryMenu},function(e){S=e.PictionaryRoomStatus},function(e){d=e.PictionaryNetworkEvents,f=e.PictionaryConnectionState},function(e){m=e.PictionaryGameState},function(e){C=e.PictionaryGameMessageType},function(e){p=e.RoomStatusChangeEvent},function(e){y=e.GameStateChangeEvent,E=e.PictionaryGameHandler},function(e){R=e.ConnectionStateChangeEvent,G=e.ServerMessageEvent}],execute:function(){var N,w,I,O,_,T,A,v,P,D;s._RF.push({},"88ce2PWVEdG678AWRX5tJ0D","Pictionary_UIManager",void 0);var U=i.ccclass,b=i.property;e("PictionaryUIManager",(N=U("PictionaryUIManager"),w=b({type:r}),I=b({type:[M]}),O=b({type:u}),N(((D=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return n=e.call.apply(e,[this].concat(s))||this,o(n,"uiCamera",A,a(n)),o(n,"menus",v,a(n)),o(n,"flashNode",P,a(n)),n.showMuteButton=!0,n.showResultScreen=!0,n.showFAQ=!0,n}t(n,e);var s=n.prototype;return s.onLoad=function(){n.instance=this,R.on(d.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),p.on(d.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),G.on(d.SERVER_MESSAGE,this.onServerMessage,this),y.on(d.GAME_STATE_CHANGE,this.onGameStateChange,this)},s.onDestroy=function(){this.cleanup()},s.cleanup=function(){R.off(d.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),p.off(d.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),G.off(d.SERVER_MESSAGE,this.onServerMessage,this),y.off(d.GAME_STATE_CHANGE,this.onGameStateChange,this),n.instance===this&&(n.instance=null)},s.start=function(){},s.OpenHowToPlay=function(){this.OpenMenu("HowToPlay")},s.OpenMenu=function(e){for(var n=0;n<this.menus.length;n++)this.menus[n].menuName==e&&this.menus[n].Open()},s.CloseMenu=function(e){for(var n=0;n<this.menus.length;n++)this.menus[n].menuName==e&&this.menus[n].Close()},s.GetMenu=function(e){for(var n=0;n<this.menus.length;n++)if(this.menus[n].menuName==e)return this.menus[n];return null},s.CloseAllMenus=function(){for(var e=0;e<this.menus.length;e++)this.menus[e].Close()},s.onConnectionStateChange=function(e,n){switch(console.log("[UIManager] Connection state changed: ",n),n){case f.CONNECTING:this.CloseAllMenus(),this.OpenMenu("InGameMenu")}},s.onGameStateChange=function(e){switch(e){case m.START_ROUND:this.handleStartRoundState();break;case m.DRAWING:this.handleDrawingState();break;case m.WORD_SELECTION:this.handleWordSelectionState();break;case m.DRAWING_RESULTS:this.handleDrawingResultsState();break;case m.END_GAME:this.handleEndGameState()}},s.handleStartRoundState=function(){console.log("[UIManager] Handling start round state"),this.CloseMenu("DrawingResultsMenu");var e=this.GetMenu("StartRoundMenu"),n=E.Instance.getRoomState().currentRound;e.setRoundMessage(n),this.OpenMenu("StartRoundMenu")},s.handleDrawingState=function(){console.log("[UIManager] Handling drawing state"),this.CloseMenu("WordSelectionMenu")},s.handleWordSelectionState=function(){console.log("[UIManager] Handling word selection state"),this.CloseMenu("StartRoundMenu"),this.CloseMenu("DrawingResultsMenu");var e=this.GetMenu("WordSelectionMenu"),n=E.Instance.isMyTurn();e.setMyTurn(n),this.OpenMenu("WordSelectionMenu")},s.handleDrawingResultsState=function(){console.log("[UIManager] Handling drawing results state");var e=this.GetMenu("DrawingResultsMenu");e.setCorrectWordMessage(E.Instance.getCorrectWord()),console.log("Player scores: ",E.Instance.getPlayerScores()),e.setPlayerScores(E.Instance.getPlayerScores()),this.OpenMenu("DrawingResultsMenu")},s.handleEndGameState=function(){console.log("[UIManager] Handling end game state"),console.log("[UIManager] End Game State handling in UI Manager"),this.CloseAllMenus(),console.log("[UIManager] Opening end game menu"),this.OpenMenu("EndGameMenu")},s.onServerMessage=function(e,n){switch(e){case C.WORDS_LIST:var t=this.GetMenu("WordSelectionMenu"),o=JSON.parse(n);this.log("word choices",o),t.setWordList(o)}},s.onRoomStatusChange=function(e,n){var t=this;switch(console.log("[UIManager] Room status changed: ",n),n){case S.WAITING_FOR_PLAYERS:console.log("Opening waiting screen"),this.OpenMenu("WaitingScreen");break;case S.COUNTDOWN:console.log("Opening countdown screen"),this.CloseAllMenus(),this.OpenMenu("CountDownScreen");break;case S.GAME_SIMULATION:this.CloseMenu("CountDownScreen"),this.scheduleOnce((function(){t.OpenMenu("InGameMenu")}),1);break;default:console.warn("[UIManager] Unhandled RoomStatus: "+n)}},s.playFlashEffect=function(e){var n=this;void 0===e&&(e=new c(197,8,8)),this.flashNode.active=!0;var t=this.flashNode.getComponent(l);t?(t.color=new c(e.r,e.g,e.b,0),h(t).to(.2,{color:new c(e.r,e.g,e.b,255)}).delay(.05).to(.3,{color:new c(e.r,e.g,e.b,0)}).call((function(){n.flashNode.active=!1})).start()):console.error("No Sprite component found on flashNode")},n}(g)).instance=null,A=n((T=D).prototype,"uiCamera",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(T.prototype,"menus",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=n(T.prototype,"flashNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=T))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"7bd30nbuzxA4a6y7O6awusZ","Pictionary_Utils",void 0);t("PictionaryUtils",function(){function t(){}return t.roundNumber=function(t,n){void 0===n&&(n=2);var i=Math.pow(10,n);return Math.round((t+Number.EPSILON)*i)/i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_WaitingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts"],(function(t){var n,i,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator},function(t){e=t.PictionaryMenu}],execute:function(){var c;i._RF.push({},"eef8f8Yde5N8oqgCvczfHwE","Pictionary_WaitingScreen",void 0);var r=o.ccclass;o.property,t("PictionaryWaitingScreen",r("PictionaryWaitingScreen")(c=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var o=i.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.onDestroy=function(){},o.Open=function(){t.prototype.Open.call(this)},o.Close=function(){t.prototype.Close.call(this)},o.initialize=function(){t.prototype.initialize.call(this)},i}(e))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_WordManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,s,l,c,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,l=e.Node,c=e.tween,d=e.Vec3,u=e.Component}],execute:function(){var p,h,y,w,f,b,W,g,L;o._RF.push({},"19d4a1iKXdCv7Cy0oq7pZ3h","Pictionary_WordManager",void 0);var v=a.ccclass,C=a.property;e("PictionaryWordManager",(p=v("PictionaryWordManager"),h=C(s),y=C(l),w=C(s),p((W=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"wordLabel",W,n(t)),i(t,"wordContainer",g,n(t)),i(t,"wordLengthLabel",L,n(t)),t.currentWord="",t.isWordVisible=!1,t.revealedLetters=new Set,t}r(t,e);var o=t.prototype;return o.setWordVisible=function(e){this.isWordVisible=e,this.updateWordDisplay()},o.setWord=function(e){this.currentWord=e.toUpperCase(),this.currentWord.length>0&&(this.wordLengthLabel.string=this.currentWord.length.toString()),this.revealedLetters.clear(),this.updateWordDisplay()},o.clearWord=function(){this.setWord("")},o.revealLetter=function(e){e>=0&&e<this.currentWord.length&&(this.revealedLetters.add(e),this.updateWordDisplay(),this.playShakeAnimation())},o.playShakeAnimation=function(){if(this.wordContainer){var e=this.wordContainer.position.clone(),t=this.wordContainer.scale.clone(),r=.5;c(this.wordContainer).sequence(c().sequence(c().to(r/6,{position:new d(e.x+10,e.y,e.z)}),c().to(r/6,{position:new d(e.x-10,e.y,e.z)}),c().to(r/6,{position:new d(e.x+10,e.y,e.z)}),c().to(r/6,{position:new d(e.x-10,e.y,e.z)}),c().to(r/6,{position:e})),c().to(.125,{scale:new d(1.2,1.2,1)}),c().to(.125,{scale:t})).start()}},o.updateWordDisplay=function(){var e=this;if(this.isWordVisible)this.wordLabel.string=this.currentWord;else{var t=this.currentWord.split("").map((function(t,r){return e.revealedLetters.has(r)?t:"-"}));this.wordLabel.string=t.join("")}},t}(u)).prototype,"wordLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"wordContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(b.prototype,"wordLengthLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_WordSelectionMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_PBLogger.ts","./PictionaryGameHandler.ts","./Pictionary_AudioManager.ts"],(function(o){var t,i,e,n,r,s,a,l,c,h,u,g,d,p,y,f,C,b,P;return{setters:[function(o){t=o.applyDecoratedDescriptor,i=o.inheritsLoose,e=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){r=o.cclegacy,s=o._decorator,a=o.EventTarget,l=o.Prefab,c=o.Node,h=o.Label,u=o.instantiate,g=o.view,d=o.UITransform,p=o.UIOpacity,y=o.tween},function(o){f=o.PictionaryMenu},function(o){C=o.PictionaryPBLogger},function(o){b=o.PictionaryGameHandler},function(o){P=o.PictionaryAudioManager}],execute:function(){var S,v,w,R,m,_,L,M,O,W,z,T,N;r._RF.push({},"0dbc7fn9N1BfbY/g9u3z50t","Pictionary_WordSelectionMenu",void 0);var B=s.ccclass,D=s.property,E=o("WordSelectedEvent",new a);o("PictionaryWordSelectionMenu",(S=B("PictionaryWordSelectionMenu"),v=D({type:l}),w=D({type:c}),R=D({type:c}),m=D({type:c}),_=D({type:h}),S((O=t((M=function(o){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=o.call.apply(o,[this].concat(r))||this,e(t,"uiWordSelectBoxPrefab",O,n(t)),e(t,"wordSelectionRoot",W,n(t)),e(t,"wordsListNode",z,n(t)),e(t,"othersChoosingRoot",T,n(t)),e(t,"otherChoosingLabel",N,n(t)),t._isSelected=!1,t._isMyTurn=!1,t.originalOthersChoosingPosition=null,t}i(t,o);var r=t.prototype;return r.onLoad=function(){this.originalOthersChoosingPosition=this.othersChoosingRoot.position.clone()},r.Open=function(){C.info("[WordSelectionMenu] Opening"),this._isSelected=!1,o.prototype.Open.call(this)},r.Close=function(){C.info("[WordSelectionMenu] Closing"),this.clearWordList(),o.prototype.Close.call(this)},r.initialize=function(){o.prototype.initialize.call(this),this.originalOthersChoosingPosition=this.othersChoosingRoot.position.clone()},r.setWordList=function(o){for(var t=0;t<o.length;t++){var i=o[t],e=u(this.uiWordSelectBoxPrefab);e.getComponentInChildren(h).string=i,e.setParent(this.wordsListNode),e.on(c.EventType.TOUCH_END,this.onWordSelected.bind(this,i))}},r.onWordSelected=function(o){this._isSelected||(this._isSelected=!0,C.info("Selected word:",o),E.emit("WORD_SELECTED",o),this.Close())},r.clearWordList=function(){this.wordsListNode.removeAllChildren()},r.setOpponentSelectingMessage=function(o){this.otherChoosingLabel.string=o+" is picking a word...",this.animateOthersChoosingRoot()},r.animateOthersChoosingRoot=function(){var o=g.getVisibleSize().width+.75*this.othersChoosingRoot.getComponent(d).width;this.othersChoosingRoot.setPosition(o,this.originalOthersChoosingPosition.y,this.originalOthersChoosingPosition.z);var t=this.othersChoosingRoot.getComponent(p);t||(t=this.othersChoosingRoot.addComponent(p)),t.opacity=0;var i=y(this.othersChoosingRoot).to(.8,{position:this.originalOthersChoosingPosition},{easing:"cubicOut"}),e=y(t).to(.6,{opacity:255},{easing:"cubicIn"}).call((function(){P.instance.playSound("RoundStart")}));i.start(),e.start()},r.setMyTurn=function(o){this._isMyTurn=o;var t=b.Instance.getCurrentDrawingPlayer();this._isMyTurn?(this.othersChoosingRoot.active=!1,this.wordSelectionRoot.active=!0):(this.othersChoosingRoot.active=!0,this.setOpponentSelectingMessage(t.playerName),this.wordSelectionRoot.active=!1)},t}(f)).prototype,"uiWordSelectBoxPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(M.prototype,"wordSelectionRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"wordsListNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"othersChoosingRoot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(M.prototype,"otherChoosingLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=M))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/PictionaryGameHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Timer.ts","./PictionaryRoomState.ts","./Pictionary_RoomTypes.ts","./Pictionary_NetworkManager.ts","./Pictionary_GameMessageType.ts","./PicitionaryGameState.ts","./Pictionary_Player.ts","./Pictionary_Board.ts","./Pictionary_ChatManager.ts","./Pictionary_WordManager.ts","./Pictionary_WordSelectionMenu.ts","./Pictionary_Toolbar.ts","./Pictionary_NetworkTypes.ts","./Pictionary_PBLogger.ts","./Pictionary_AudioManager.ts","./Pictionary_UIManager.ts","./Pictionary_GameManager.ts"],(function(e){var t,n,r,a,o,i,s,c,l,u,h,d,m,f,y,S,g,E,p,R,P,_,v,C,T,w,G,b,N,I,M,D,A,O,k,L,W,H,z,V,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){i=e.cclegacy,s=e._decorator,c=e.EventTarget,l=e.Prefab,u=e.Node,h=e.Label,d=e.game,m=e.Game,f=e.Color,y=e.instantiate,S=e.Tween,g=e.Component},function(e){E=e.PictionaryTimer},function(e){p=e.PictionaryRoomState,R=e.PlayerScore},function(e){P=e.PictionaryRoomStatus},function(e){_=e.ConnectionStateChangeEvent,v=e.ServerRoomStateChangeEvent,C=e.ServerMessageEvent,T=e.PictionaryNetworkManager},function(e){w=e.PictionaryGameMessageType},function(e){G=e.PictionaryGameState},function(e){b=e.PictionaryPlayer},function(e){N=e.PictionaryBoard,I=e.BoardEvents,M=e.STROKE_COMPLETED_EVENT},function(e){D=e.PictionaryChatManager},function(e){A=e.PictionaryWordManager},function(e){O=e.WordSelectedEvent},function(e){k=e.PictionaryToolbar},function(e){L=e.PictionaryNetworkEvents,W=e.PictionaryConnectionState},function(e){H=e.PictionaryPBLogger},function(e){z=e.PictionaryAudioManager},function(e){V=e.PictionaryUIManager},function(e){B=e.PictionaryGameManager}],execute:function(){var U,F,J,x,K,j,X,Y,Z,q,Q,$,ee,te,ne,re,ae,oe,ie,se,ce;i._RF.push({},"6529e0uf6BOEL7N9DSBjlZu","PictionaryGameHandler",void 0);var le=s.ccclass,ue=s.property,he=s.executionOrder,de=e("GameStateChangeEvent",new c);e("PictionaryGameHandler",(U=le("PictionaryGameHandler"),F=he(-1),J=ue({type:l}),x=ue({type:u}),K=ue({type:[b]}),j=ue({type:N}),X=ue({type:A}),Y=ue({type:k}),Z=ue({type:E}),q=ue({type:h}),U(Q=F(((ce=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"playerPrefab",ee,a(t)),r(t,"playersContainer",te,a(t)),r(t,"players",ne,a(t)),r(t,"board",re,a(t)),r(t,"wordManager",ae,a(t)),r(t,"toolBar",oe,a(t)),r(t,"timer",ie,a(t)),r(t,"currentRoundsLabel",se,a(t)),t._currentRoomState=void 0,t.roomSettings=void 0,t.myPlayerNumber=-1,t.hasReconnected=!1,t.localPlayerId="",t}n(t,e);var i=t.prototype;return i.onLoad=function(){t._instance=this,this.registerNetworkEvents(),this.registerGameEvents(),this.handleBrowserClose(),this.toolBar.initialize(this.board)},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){this.unregisterNetworkEvents(),this.unregisterGameEvents(),this.unregisterBrowserClose(),t._instance===this&&(t._instance=null)},i.initialize=function(e){this.roomSettings=e},i.registerNetworkEvents=function(){_.on(L.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),v.on(L.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),C.on(L.SERVER_MESSAGE,this.onServerMessage,this),O.on("WORD_SELECTED",this.onWordSelected,this),I.on(M,this.onStrokeCompleted,this)},i.registerGameEvents=function(){d.on(m.EVENT_HIDE,this.onGameHide,this),d.on(m.EVENT_SHOW,this.onGameShow,this),d.on(m.EVENT_RESTART,this.onGameRestart,this),d.on(m.EVENT_CLOSE,this.onGameClose,this)},i.handleBrowserClose=function(){window.addEventListener("beforeunload",this.onGameClose.bind(this))},i.unregisterNetworkEvents=function(){_.off(L.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),v.off(L.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),C.off(L.SERVER_MESSAGE,this.onServerMessage,this),O.off("WORD_SELECTED",this.onWordSelected,this),I.off(M,this.onStrokeCompleted,this)},i.unregisterGameEvents=function(){d.off(m.EVENT_HIDE,this.onGameHide,this),d.off(m.EVENT_SHOW,this.onGameShow,this),d.off(m.EVENT_RESTART,this.onGameRestart,this),d.off(m.EVENT_CLOSE,this.onGameClose,this)},i.unregisterBrowserClose=function(){window.removeEventListener("beforeunload",this.onGameClose.bind(this))},i.onWordSelected=function(e){T.Instance.sendMessage(w.SELECTED_WORD,e)},i.onServerMessage=function(e,t){switch(H.info("Server message received:",e,t),e){case w.CHAT_MESSAGE:var n=JSON.parse(t);this.log("Chat message received:",n),D.Instance.addChatMessage(n);var r=this.getPlayer(n.playerId);r&&r.showMessageNotification(n.message);break;case w.GUESSED_WORD:H.info("Guessed word received:",t);var a=JSON.parse(t),o=this.getPlayer(a.playerId);o.setGuessedAnswer(!0),o.userId===this.localPlayerId&&(this.wordManager.setWordVisible(!0),V.instance.playFlashEffect(new f(0,255,0)),z.instance.playSound("CorrectAnswer")),D.Instance.addChatMessage({playerId:a.playerId,message:"guessed the word"},!0),this.log("Guessed word received:",t);break;case w.REVEAL_LETTER:H.info("Reveal letter received:",t);var i=JSON.parse(t);this.wordManager.revealLetter(i.index);break;default:this.log("Unhandled server message type:",e)}},i.onServerRoomStateChange=function(e){this._currentRoomState?(this._currentRoomState.copyFrom(e),this.handleRoomStateUpdate(this._currentRoomState),this._currentRoomState.currentRoomStatus!==P.END_GAME&&(this.hasReconnected?this.handleReconnection(this._currentRoomState):this.sendRoomStateToAllPlayers(this._currentRoomState))):this.initializeRoomState(e)},i.initializeRoomState=function(e){this._currentRoomState=new p,this._currentRoomState.copyFrom(e),this.initializePlayers(this._currentRoomState),this._currentRoomState.currentGameState!==G.NONE&&(console.log("Joined game in progress"),this.sendReconnectionStateToAllPlayers(this._currentRoomState))},i.handleEndGameState=function(){this.log("Game Over - State Change:",this._currentRoomState)},i.handleReconnection=function(e){this.log("Reconnection State Change:",e),this.sendReconnectionStateToAllPlayers(e),this.hasReconnected=!1},i.handleRoomStateUpdate=function(e){this.log("Room State Update",e.currentGameState);var t=e.inputPayload.inputType;t===w.SET_STATE?this.handleSetState(e):t!==w.DRAW_STROKE||this.isMyTurn()||this.board.setCurrentSketch(e.drawingSketchData)},i.handleSetState=function(e){if(this.log("Game State Change",G[e.currentGameState]),this.board.enableDrawing(!1),this.timer.reset(),this.timer.stopTimer(),this.players.forEach((function(e){e.drawingIcon&&(e.drawingIcon.active=!1)})),e.currentGameState===G.START_ROUND)this.updateCurrentRoundsLabel(e.currentRound,e.roomSettings.rounds);else if(e.currentGameState===G.DRAWING){H.info("Current state: DRAWING");var t=this.isMyTurn(),n=this.getCurrentDrawingPlayer(),r=n.playerName;t&&(r="You"),this.board.enableDrawing(t),this.board.setDrawerName(r),this.wordManager.setWordVisible(t),this.wordManager.setWord(e.selectedWord),n&&n.drawingIcon&&(n.drawingIcon.active=!0),this.timer.setStartTime(e.roomSettings.drawingTimeLimit),this.timer.startTimer()}else e.currentGameState===G.WORD_SELECTION?(this.board.setDrawerName(""),this.board.clear(),this.players.forEach((function(e){e.resetState()}))):e.currentGameState===G.DRAWING_RESULTS&&this.updatePlayerScores();de.emit(L.GAME_STATE_CHANGE,e.currentGameState)},i.initializePlayers=function(e){var t=this;this.log("Initializing "+e.playersData.length+" players"),this.assignMyPlayerNumber(e),e.playersData.forEach((function(n,r){t.createPlayer(r).initialize(e,t.board)}))},i.sendChatMessageToServer=function(e){if(""!==this.localPlayerId&&!this.isMyTurn()){var t={playerId:this.players[this.myPlayerNumber].userId,message:e};T.Instance.sendMessage(w.CHAT_MESSAGE,JSON.stringify(t))}},i.onConnectionStateChange=function(e,t){t===W.DISCONNECTED?this.onGameDisconnect():e===W.RECONNECTING&&t===W.JOINED_ROOM&&(this.hasReconnected=!0,this.onGameReconnect())},i.updatePlayerScores=function(){var e=this;this.players.forEach((function(e){e.crownImage&&(e.crownImage.active=!1)}));for(var t=[].concat(this._currentRoomState.playersData).sort((function(e,t){return t.score-e.score})),n=new Map,r=1,a=0;a<t.length;a++){var o=t[a];a>0&&t[a-1].score!==o.score&&(r=a+1),n.set(o.userId,r)}this._currentRoomState.playersData.forEach((function(t){var r=e.players.find((function(e){return e.userId===t.userId}));if(r&&r.node){r.setScore(t.score);var a=n.get(t.userId)||1;r.setRank(a),1===r.getRank()&&r.crownImage&&(r.crownImage.active=!0)}}))},i.sendStrokeDataToServer=function(e,t){H.info("Sending stroke data to server:",{strokePoints:e,color:t.color.toHEX(),width:t.width});var n={strokePoints:e,color:t.color.toHEX(),width:t.width},r=JSON.stringify(n);H.info("Serialized stroke data:",r),T.Instance.sendMessage(w.DRAW_STROKE,r)},i.sendRoomStateToAllPlayers=function(e){},i.sendReconnectionStateToAllPlayers=function(e){H.info("Reconnection state sent to all players")},i.createPlayer=function(e){var t=y(this.playerPrefab);t.setParent(this.playersContainer);var n=t.getComponent(b);return n.index=e,this.players.push(n),n},i.updateCurrentRoundsLabel=function(e,t){this.currentRoundsLabel.string=e+"/"+t},i.getRoomState=function(){return this._currentRoomState},i.getCorrectWord=function(){return this._currentRoomState.selectedWord},i.getPlayerScores=function(){return this._currentRoomState.currentRoundScores},i.getPlayerTotalScores=function(){return this._currentRoomState.playersData.map((function(e){var t=new R;return t.userId=e.userId,t.score=e.score,t}))},i.isMyTurn=function(){return this._currentRoomState.drawingPlayerIndex===this.myPlayerNumber},i.assignMyPlayerNumber=function(e){var t=this;e.playersData.forEach((function(e,n){e.sessionId===T.Instance.CurrentRoom.sessionId&&(t.myPlayerNumber=n,t.localPlayerId=e.userId)}))},i.getPlayer=function(e){return this.log("Retrieving Player "+e),this.players.find((function(t){return t.userId===e}))},i.getCurrentDrawingPlayer=function(){return this.players[this._currentRoomState.drawingPlayerIndex]},i.allPlayersFinished=function(){return!1},i.anyPlayerFinished=function(){return!1},i.getPlayerName=function(e){var t=this.players.find((function(t){return t.userId===e}));return t?b.getTruncatedName(t.playerName):e},i.onGameHide=function(){H.info("Game hidden"),S.stopAll()},i.onGameShow=function(){H.info("Game shown")},i.onGameRestart=function(){H.info("Game restarted")},i.onGameClose=function(){H.info("Game closed")},i.onGameDisconnect=function(){H.info("Game disconnected")},i.onGameReconnect=function(){H.info("Game reconnected")},i.onStrokeCompleted=function(e){this.sendStrokeDataToServer(e.strokePoints,e.brush)},i.getContactName=function(e){if(!e)return null;var t=B.Instance.miloSDK.getContactName(e);return t&&""!==t.trim()?t:null},o(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(g))._instance=void 0,ee=t(($=ce).prototype,"playerPrefab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t($.prototype,"playersContainer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t($.prototype,"players",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=t($.prototype,"board",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t($.prototype,"wordManager",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t($.prototype,"toolBar",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t($.prototype,"timer",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t($.prototype,"currentRoundsLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=$))||Q)||Q));i._RF.pop()}}}));

System.register("chunks:///_virtual/PictionaryRoomState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_RoomTypes.ts","./PicitionaryGameState.ts","./Pictionary_BasePlayerData.ts","./Pictionary_BaseRoomSettings.ts","./Pictionary_BaseRoomState.ts"],(function(t){var e,i,o,r,n,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){o=t.PictionaryRoomStatus},function(t){r=t.PictionaryGameState},function(t){n=t.PictionaryBasePlayerData},function(t){a=t.PictionaryBaseRoomSettings},function(t){s=t.PictionaryBaseRoomState}],execute:function(){i._RF.push({},"fa5d0U3yGhK+pTZUrjZSeKx","PictionaryRoomState",void 0);var u=t("PictionaryPlayerData",function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).playerIndex=void 0,e.consecutiveMissedTurns=0,e}return e(i,t),i.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.playerIndex=e.playerIndex,this.consecutiveMissedTurns=e.consecutiveMissedTurns,this.score=e.score},i}(n)),c=t("PictionaryRoomSettings",function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).drawingTimeLimit=void 0,e.timeBeforeRoundStarts=void 0,e.wordSelectionTimeLimit=void 0,e.rounds=void 0,e}return e(i,t),i.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.drawingTimeLimit=e.drawingTimeLimit,this.timeBeforeRoundStarts=e.timeBeforeRoundStarts,this.wordSelectionTimeLimit=e.wordSelectionTimeLimit,this.rounds=e.rounds},i}(a)),d=t("PictionaryInputPayload",function(){function t(){this.inputType=void 0,this.inputValue=void 0}return t.prototype.copyFrom=function(t){this.inputType=t.inputType,this.inputValue=t.inputValue},t}()),p=t("PlayerScore",function(){function t(){this.userId=void 0,this.score=void 0,this.guessTime=void 0}return t.prototype.copyFrom=function(t){this.userId=t.userId,this.score=t.score,this.guessTime=t.guessTime},t}()),l=t("DrawStroke",function(){function t(){this.strokePoints=void 0,this.color=void 0,this.width=void 0}return t.prototype.copyFrom=function(t){this.strokePoints=t.strokePoints.map((function(t){return t})),this.color=t.color,this.width=t.width},t}());t("PictionaryRoomState",function(t){function i(){var e;return(e=t.call(this,new c,[])||this).elapsedDrawingTime=0,e.elapsedWordSelectionTime=0,e.currentRoomStatus=o.NONE,e.previousRoomStatus=o.WAITING_FOR_PLAYERS,e.drawingPlayerIndex=0,e.drawingWord="",e.currentRoundScores=[],e.selectedWord="",e.inputPayload=new d,e.currentGameState=r.NONE,e.previousGameState=r.NONE,e.drawingSketchData=[],e.serverTick=0,e.currentRound=1,e}e(i,t);var a=i.prototype;return a.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.playersData=e.playersData.map((function(t){var e=new u;return e.copyFrom(t),e})),this.spectatorsData=e.spectatorsData.map((function(t){var e=new n;return e.copyFrom(t),e})),this.elapsedDrawingTime=e.elapsedDrawingTime,this.elapsedWordSelectionTime=e.elapsedWordSelectionTime,this.currentRoomStatus=e.currentRoomStatus,this.previousRoomStatus=e.previousRoomStatus,this.drawingPlayerIndex=e.drawingPlayerIndex,this.drawingWord=e.drawingWord,this.currentRoundScores=e.currentRoundScores.map((function(t){var e=new p;return e.copyFrom(t),e})),this.selectedWord=e.selectedWord,this.roomSettings.copyFrom(e.roomSettings),this.inputPayload.copyFrom(e.inputPayload),this.currentGameState=e.currentGameState,this.previousGameState=e.previousGameState,this.drawingSketchData=e.drawingSketchData.map((function(t){var e=new l;return e.copyFrom(t),e})),this.currentRound=e.currentRound,this.serverTick=e.serverTick},a.getPlayerByUserId=function(t){return this.playersData.find((function(e){return e.userId===t}))||null},a.getOnlinePlayersCount=function(){return this.playersData.filter((function(t){return t.isOnline})).length},a.getPlayerByIndex=function(t){return this.playersData.find((function(e){return e.playerIndex===t}))||null},a.getPlayerBySessionId=function(t){return this.playersData.find((function(e){return e.sessionId===t}))||null},i}(s));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/pictionary_game', 'chunks:///_virtual/pictionary_game'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});