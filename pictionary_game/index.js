System.register("chunks:///pictionary_game.js",["./rollupPluginModLoBabelHelpers-5eee144e.js","cc","./colyseus.mjs_cjs=&original=-07c08717.js"],(function(){var t,e,n,i,o,r,a,s,l,c,u,h,d,p,f,g,y,m,b,v,_,S,C,w,T,R,E,P,I,O,N,A,L,M,D,k,z,G,x,F,H,B,W,U,V,K,j,J,Y,Z,Q,X,q,$,tt,et,nt,it;return{setters:[function(c){t=c._,e=c.a,n=c.b,i=c.c,o=c.d,r=c.h,a=c.f,s=c.g,l=c.e},function(t){c=t.cclegacy,u=t._decorator,h=t.Node,d=t.Prefab,p=t.Label,f=t.EditBox,g=t.Vec3,y=t.UIOpacity,m=t.UITransform,b=t.instantiate,v=t.Button,_=t.EventHandler,S=t.Sprite,C=t.tween,w=t.Component,T=t.Color,R=t.Camera,E=t.screen,P=t.sys,I=t.view,O=t.math,N=t.CCBoolean,A=t.director,L=t.Director,M=t.Widget,D=t.Enum,k=t.Size,z=t.log,G=t.EventTarget,x=t.assetManager,F=t.Texture2D,H=t.SpriteFrame,B=t.CCInteger,W=t.CCFloat,U=t.Graphics,V=t.Input,K=t.Vec2,j=t.Layout,J=t.RichText,Y=t.CCString,Z=t.AudioClip,Q=t.AudioSource,X=t.game,q=t.Game,$=t.Tween,tt=t.input,et=t.KeyCode},function(t){nt=t._,it=t.M}],execute:function(){var ot,rt,at,st,lt,ct,ut,ht,dt,pt,ft,gt,yt,mt,bt,vt,_t,St,Ct,wt,Tt,Rt,Et,Pt,It,Ot;c._RF.push({},"bfd893E4+5Doq0mGo6HUwSj","Pictionary_MiloKeyboard",void 0);var Nt,At,Lt,Mt,Dt,kt,zt,Gt,xt,Ft,Ht,Bt,Wt=u.ccclass,Ut=u.property;ot=Wt("PictionaryMiloKeyboard"),rt=Ut({type:h}),at=Ut({type:h}),st=Ut({type:d}),lt=Ut({type:p}),ct=Ut({type:h}),ut=Ut({type:f}),ht=Ut({type:h}),dt=Ut({type:h}),ot(((Ot=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"content",gt,i(e)),n(e,"keyboardContent",yt,i(e)),n(e,"keyPrefab",mt,i(e)),n(e,"inputLabel",bt,i(e)),n(e,"keyboardLayout",vt,i(e)),n(e,"linkedEditBox",_t,i(e)),n(e,"cursorBlinkRate",St,i(e)),n(e,"cursorNode",Ct,i(e)),n(e,"outSideArea",wt,i(e)),n(e,"keyboardTopPadding",Tt,i(e)),n(e,"animationDuration",Rt,i(e)),n(e,"slideDistance",Et,i(e)),n(e,"darkKeysColor",Pt,i(e)),n(e,"lightKeysColor",It,i(e)),e._currentTween=null,e._contentOriginalPos=null,e._lowerCaseLayout=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["123",",","space",".","return"]],e._upperCaseLayout=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["123",",","space",".","return"]],e._symbolsLayout=[["1","2","3","4","5","6","7","8","9","0"],["-","/",":",";","(",")","$","&","@",'"'],["#=",".",",","?","!","'","backspace"],["ABC",",","space",".","return"]],e._currentLayout=void 0,e._isUpperCase=!1,e._isSymbols=!1,e._inputText="",e._onSendCallback=null,e._isVisible=!0,e._cursorVisible=!0,e._cursorTimer=0,e}e(o,t);var r=o.prototype;return r.onLoad=function(){o.Instance=this,this.content&&(this._contentOriginalPos=new g(this.content.position.x,this.content.position.y,this.content.position.z),this.content.getComponent(y)||this.content.addComponent(y)),this.hideKeyboard(),this.outSideArea&&this.outSideArea.on(h.EventType.TOUCH_END,this.onOutsideAreaClicked,this),this.keyboardContent&&(this.keyboardContent.on(h.EventType.TOUCH_START,this.onKeyboardContentTouched,this),this.keyboardContent.on(h.EventType.TOUCH_MOVE,this.onKeyboardContentTouched,this),this.keyboardContent.on(h.EventType.TOUCH_END,this.onKeyboardContentTouched,this),this.keyboardContent.on(h.EventType.TOUCH_CANCEL,this.onKeyboardContentTouched,this))},r.start=function(){var t=this;this._inputText="",this._currentLayout=this._lowerCaseLayout,setTimeout((function(){t.createKeyboard(),t.updateInputLabel()}),10)},r.createKeyboard=function(){this.keyboardLayout.removeAllChildren();var t=this.node.getComponent(m).width;console.log("widthOfTheKeyboard",t);for(var e=(t-100)/11,n=0;n<this._currentLayout.length;n++){var i=this._currentLayout[n],o=10*e+90,r=-(n===this._currentLayout.length-1?o:i.length*e+10*(i.length-1))/2,a=85*(this._currentLayout.length/2-n-.5)-this.keyboardTopPadding,s=[];if(n===this._currentLayout.length-1){var l=o-10*(i.length-1);s.push(1.5*e),s.push(e);var c=l-(s[0]+2*s[1]),u=.75*c,h=.25*c;s.push(u),s.push(e),s.push(h)}for(var d=r,f=0;f<i.length;f++){var g=i[f],y=b(this.keyPrefab);y.active=!0,this.keyboardLayout.addChild(y);var C=y.getComponent(m);n===this._currentLayout.length-1?C.width=s[f]:C.width="shift"===g||"backspace"===g||"#+="===g?1.25*e:e,C.height=75,d+=C.width/2,y.position.set(d,a,0),d+=C.width/2+10;var w=g;"space"===g&&(w=" "),"backspace"===g&&(w="←"),"return"===g&&(w="Enter"),"shift"===g&&(w="⇧"),y.getComponentInChildren(p).string=w;var T=y.getComponent(v),R=new _;if(R.target=this.node,R.component="MiloKeyboard",R.handler="onKeyPressed",R.customEventData=g,T.clickEvents=[],T.clickEvents.push(R),"shift"===g||"backspace"===g||"return"===g||"123"===g||"ABC"===g){var E=y.getComponent(S);E&&(E.color=this.darkKeysColor),T&&(T.normalColor=this.darkKeysColor)}else{var P=y.getComponent(S);P&&(P.color=this.lightKeysColor),T&&(T.normalColor=this.lightKeysColor)}}}},r.onKeyPressed=function(t,e){var n=e;switch(n){case"backspace":this._inputText.length>0&&(this._inputText=this._inputText.substring(0,this._inputText.length-1));break;case"space":this._inputText+=" ";break;case",":this._inputText+=",";break;case".":this._inputText+=".";break;case"return":if(this._onSendCallback){var i=this._inputText;this.clearInput(),this.hideKeyboard(),this._onSendCallback(i)}else this.clearInput(),this.hideKeyboard();break;case"shift":this._isUpperCase=!this._isUpperCase,this._currentLayout=this._isUpperCase?this._upperCaseLayout:this._lowerCaseLayout,this.createKeyboard();break;case"123":this._isSymbols=!0,this._isUpperCase=!1,this._currentLayout=this._symbolsLayout,this.createKeyboard();break;case"ABC":this._isSymbols=!1,this._currentLayout=this._lowerCaseLayout,this.createKeyboard();break;case"#+=":break;default:this._inputText+=n}this.updateInputLabel()},r.updateInputLabel=function(){if(this.inputLabel&&(this.inputLabel.string=this._inputText,this.cursorNode)){this.cursorNode.active=this._cursorVisible;var t=this.inputLabel.string,e=this.inputLabel.getComponent(m).contentSize.width;if(0===t.length){var n=-e/2+5;this.cursorNode.position=new g(n,this.cursorNode.position.y,this.cursorNode.position.z)}else{var i=e/2+(this.inputLabel.getComponent(m).width-e)/2;this.cursorNode.position=new g(i,this.cursorNode.position.y,this.cursorNode.position.z)}}this.linkedEditBox&&(this.linkedEditBox.string=this._inputText)},r.update=function(t){this._cursorTimer+=t,this._cursorTimer>=this.cursorBlinkRate&&(this._cursorTimer=0,this._cursorVisible=!this._cursorVisible,this.updateInputLabel())},r.getInputText=function(){return this._inputText},r.clearInput=function(){this._inputText="",this.updateInputLabel()},r.setInputText=function(t){this._inputText=t,this.updateInputLabel()},r.setSendCallback=function(t){this._onSendCallback=t},r.showKeyboard=function(){this._currentTween&&(this._currentTween.stop(),this._currentTween=null),this._isVisible=!0,this.content.active=!0,this._cursorVisible=!0,this._cursorTimer=0,this._contentOriginalPos&&(this.content.position=new g(this._contentOriginalPos.x,this._contentOriginalPos.y-this.slideDistance,this._contentOriginalPos.z),this._currentTween=C(this.content).to(this.animationDuration,{position:this._contentOriginalPos},{easing:"cubicOut"}).start())},r.hideKeyboard=function(){var t=this;if(this._currentTween&&(this._currentTween.stop(),this._currentTween=null),this._isVisible)if(this._isVisible=!1,this._contentOriginalPos){var e=new g(this._contentOriginalPos.x,this._contentOriginalPos.y-this.slideDistance,this._contentOriginalPos.z);this._currentTween=C(this.content).to(this.animationDuration,{position:e},{easing:"cubicIn"}).call((function(){t.content.active=!1})).start()}else this.content.active=!1},r.toggleKeyboard=function(){this._isVisible=!this._isVisible,this.content.active=this._isVisible},r.setLinkedEditBox=function(t){this.linkedEditBox=t},r.onOutsideAreaClicked=function(){this.hideKeyboard(),this.clearInput()},r.onKeyboardContentTouched=function(t){t.propagationStopped=!0},o}(w)).Instance=null,gt=t((ft=Ot).prototype,"content",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=t(ft.prototype,"keyboardContent",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=t(ft.prototype,"keyPrefab",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=t(ft.prototype,"inputLabel",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=t(ft.prototype,"keyboardLayout",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=t(ft.prototype,"linkedEditBox",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=t(ft.prototype,"cursorBlinkRate",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Ct=t(ft.prototype,"cursorNode",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=t(ft.prototype,"outSideArea",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=t(ft.prototype,"keyboardTopPadding",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Rt=t(ft.prototype,"animationDuration",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),Et=t(ft.prototype,"slideDistance",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),Pt=t(ft.prototype,"darkKeysColor",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(0,0,0,1)}}),It=t(ft.prototype,"lightKeysColor",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(255,255,255,1)}}),pt=ft));c._RF.pop(),c._RF.push({},"84ce1NZ9adOp5zuzoVQGk2o","Pictionary_CameraManger",void 0);var Vt=u.ccclass,Kt=u.property;(0,u.executionOrder)(-1);var jt,Jt=(Nt=Vt("PictionaryCameraManger"),At=Kt({type:m}),Nt(((Bt=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"canvasUITransform",Dt,i(e)),n(e,"designHeight",kt,i(e)),n(e,"designWidth",zt,i(e)),n(e,"defaultOrthoHeight",Gt,i(e)),n(e,"minOrthoHeight",xt,i(e)),n(e,"maxOrthoHeight",Ft,i(e)),n(e,"safeAreaPadding",Ht,i(e)),e.designAspectRatio=void 0,e.currentAspectRatio=void 0,e.camera=null,e.windowWidth=1080,e.windowHeight=1920,e}e(o,t);var r=o.prototype;return r.onLoad=function(){o.instance=this,this.designAspectRatio=this.designWidth/this.designHeight,this.camera=this.node.getComponent(R)},r.start=function(){var t=this;this.updateScreenSize(),this.adaptCameraToScreen(),window.addEventListener("resize",(function(){t.updateScreenSize(),t.adaptCameraToScreen()}))},r.updateScreenSize=function(){this.windowWidth=E.windowSize.width||window.innerWidth,this.windowHeight=E.windowSize.height||window.innerHeight,this.currentAspectRatio=this.windowWidth/this.windowHeight,console.log("Window Size: "+this.windowWidth+"x"+this.windowHeight+", Aspect Ratio: "+this.currentAspectRatio.toFixed(2))},r.adaptCameraToScreen=function(){if(this.camera){var t=0,e=0,n=0,i=0;if(P.os===P.OS.IOS||P.os===P.OS.ANDROID){var o=I.getVisibleSize(),r=I.getVisibleOrigin();o&&(t=r.y,e=this.windowHeight-(r.y+o.height),n=r.x,i=this.windowWidth-(r.x+o.width))}var a=this.windowHeight-t-e-2*this.safeAreaPadding,s=this.windowWidth-n-i-2*this.safeAreaPadding,l=s/a;console.log("Effective Size: "+s+"x"+a+", Aspect Ratio: "+l.toFixed(2));var c=this.currentAspectRatio>=1,u=this.defaultOrthoHeight;if(c)console.log("=== Landscape Mode ==="),u=this.defaultOrthoHeight*(1/this.currentAspectRatio)*1.5;else{console.log("=== Portrait Mode ===");var h=.6/Math.min(this.currentAspectRatio,.6);u=this.defaultOrthoHeight*h}u=O.clamp(u,this.minOrthoHeight,this.maxOrthoHeight),this.camera.orthoHeight=u,console.log("Camera Ortho Height: "+u.toFixed(2))}},r.getWidth=function(){return 2*this.camera.orthoHeight*this.currentAspectRatio},r.getCurrentOrthoHeight=function(){return this.camera.orthoHeight},r.refreshCameraAdaptation=function(){this.updateScreenSize(),this.adaptCameraToScreen()},o}(w)).instance=null,Dt=t((Mt=Bt).prototype,"canvasUITransform",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=t(Mt.prototype,"designHeight",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1920}}),zt=t(Mt.prototype,"designWidth",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),Gt=t(Mt.prototype,"defaultOrthoHeight",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 820}}),xt=t(Mt.prototype,"minOrthoHeight",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 750}}),Ft=t(Mt.prototype,"maxOrthoHeight",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),Ht=t(Mt.prototype,"safeAreaPadding",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Lt=Mt))||Lt);c._RF.pop(),c._RF.push({},"201e7hS4U9OjbMxWSKPWjZl","Pictionary_ContentFitter",void 0);var Yt,Zt,Qt,Xt,qt,$t=u.ccclass;u.property,$t("PictionaryContentFitter")(jt=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.start=function(){},i.update=function(t){},n}(w));c._RF.pop(),c._RF.push({},"c1bffwXCPVJn4y4/4eqlj4P","Pictionary_FitToScreen",void 0);var te,ee,ne,ie,oe,re,ae,se,le,ce,ue,he,de,pe,fe,ge=u.ccclass,ye=u.property;Yt=ge("PictionaryFitToScreen"),Zt=ye({type:N}),Yt((qt=t((Xt=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"updateWidgetsRecursively",qt,i(e)),e}e(o,t);var r=o.prototype;return r.onEnable=function(){var t=this;A.once(L.EVENT_AFTER_UPDATE,(function(){t.refresh()}))},r.setUiTransformToScreenSize=function(){var t=this.node.getComponent(m),e=Jt.instance.getCurrentOrthoHeight()/Jt.instance.defaultOrthoHeight,n=E.windowSize.width||window.innerWidth,i=E.windowSize.height||window.innerHeight,o=Jt.instance.designHeight*e,r=o*n/i;console.log("windowWidth",n,"windowHeight",i),t.setContentSize(r,o)},r.refresh=function(){this.setUiTransformToScreenSize(),this.updateWidgetsRecursively&&this.updateWidgetsInHierarchy()},r.updateWidgetsInHierarchy=function(){this.updateWidgetAndDescendants(this.node)},r.updateWidgetAndDescendants=function(t){var e=this,n=t.getComponent(M);n&&this.node.uuid!=t.uuid&&n.updateAlignment(),t.children.forEach((function(t){e.updateWidgetAndDescendants(t)}))},o}(w)).prototype,"updateWidgetsRecursively",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=Xt));c._RF.pop(),c._RF.push({},"2306bazD3FGnq2pvU/G1blw","Pictionary_MiloLayout",void 0);var me=u.ccclass,be=u.property,ve=function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.GRID=2]="GRID",t}({}),_e=function(t){return t[t.LEFT_TOP=0]="LEFT_TOP",t[t.CENTER_TOP=1]="CENTER_TOP",t[t.RIGHT_TOP=2]="RIGHT_TOP",t[t.LEFT_CENTER=3]="LEFT_CENTER",t[t.CENTER=4]="CENTER",t[t.RIGHT_CENTER=5]="RIGHT_CENTER",t[t.LEFT_BOTTOM=6]="LEFT_BOTTOM",t[t.CENTER_BOTTOM=7]="CENTER_BOTTOM",t[t.RIGHT_BOTTOM=8]="RIGHT_BOTTOM",t}({});te=me("PictionaryMiloLayout"),ee=be({type:D(ve)}),ne=be({type:D(ve)}),ie=be({type:D(_e)}),oe=be({type:D(_e)}),re=be({visible:function(){return this._layoutType===ve.GRID}}),te((le=t((se=function(t){function r(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_layoutType",le,i(e)),n(e,"_alignment",ce,i(e)),n(e,"_spacingX",ue,i(e)),n(e,"_spacingY",he,i(e)),n(e,"_columns",de,i(e)),n(e,"_padding",pe,i(e)),n(e,"_autoResize",fe,i(e)),e._layoutSize=new k(0,0),e._lastChildActiveState=[],e}e(r,t);var a=r.prototype;return a.onLoad=function(){this.node.on(h.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(h.EventType.CHILD_REMOVED,this.onChildRemoved,this)},a.onDestroy=function(){this.node.off(h.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(h.EventType.CHILD_REMOVED,this.onChildRemoved,this),this.removeAllChildListeners()},a.onChildRemoved=function(t){this.removeChildListener(t),this.updateLayout()},a.removeAllChildListeners=function(){var t=this;this.node.children.forEach((function(e){return t.removeChildListener(e)}))},a.removeChildListener=function(t){t.__miloLayoutActiveHandler&&(t.off(h.EventType.ACTIVE_IN_HIERARCHY_CHANGED,t.__miloLayoutActiveHandler),delete t.__miloLayoutActiveHandler)},a.start=function(){this.updateActiveChildListeners(),this.updateLayout()},a.onEnable=function(){this.updateLayout()},a.updateActiveChildListeners=function(){var t=this;this.removeAllChildListeners(),this.node.children.forEach((function(e){return t.addChildActiveListener(e)}))},a.addChildActiveListener=function(t){var e=this;if(!t.__miloLayoutActiveHandler){var n=function(){e.scheduleOnce(e.updateLayout.bind(e),0)};t.__miloLayoutActiveHandler=n,t.on(h.EventType.ACTIVE_IN_HIERARCHY_CHANGED,n)}},a.getAlignmentOffset=function(t){var e=new g,n=this.node.getComponent(m);if(!n)return e;var i,o,r=n.contentSize,a=n.anchorPoint;switch(i=-r.width*a.x,o=r.height*a.y,this._alignment%3){case _e.LEFT_TOP%3:case _e.LEFT_CENTER%3:case _e.LEFT_BOTTOM%3:e.x=i+this._padding;break;case _e.CENTER_TOP%3:case _e.CENTER%3:case _e.CENTER_BOTTOM%3:e.x=i+(r.width-t.width)/2;break;case _e.RIGHT_TOP%3:case _e.RIGHT_CENTER%3:case _e.RIGHT_BOTTOM%3:e.x=i+r.width-t.width-this._padding;break;default:e.x=i}switch(Math.floor(this._alignment/3)){case Math.floor(_e.LEFT_TOP/3):case Math.floor(_e.CENTER_TOP/3):case Math.floor(_e.RIGHT_TOP/3):e.y=o-this._padding;break;case Math.floor(_e.LEFT_CENTER/3):case Math.floor(_e.CENTER/3):case Math.floor(_e.RIGHT_CENTER/3):e.y=o-(r.height+t.height)/2;break;case Math.floor(_e.LEFT_BOTTOM/3):case Math.floor(_e.CENTER_BOTTOM/3):case Math.floor(_e.RIGHT_BOTTOM/3):e.y=o-r.height+t.height+this._padding;break;default:e.y=o}return e},a.updateLayout=function(){if(this.node&&this.node.isValid){var t=this.node.children.filter((function(t){return t.active&&t.isValid}));if(0!==t.length){switch(this._layoutType){case ve.HORIZONTAL:this.updateHorizontalLayout(t);break;case ve.VERTICAL:this.updateVerticalLayout(t);break;case ve.GRID:this.updateGridLayout(t)}if(this._autoResize){var e=this.node.getComponent(m);e&&this._layoutSize.width>0&&this._layoutSize.height>0&&e.setContentSize(this._layoutSize)}}else this._layoutSize=new k(2*this._padding,2*this._padding)}},a.updateHorizontalLayout=function(t){var e=this,n=-this._spacingX,i=0;t.forEach((function(o,r){var a=o.getComponent(m);a&&a.contentSize.width&&a.contentSize.height&&(n+=a.width,r<t.length-1&&(n+=e._spacingX),i=Math.max(i,a.height))})),n+=2*this._padding,i+=2*this._padding,this._layoutSize=new k(n,i);var o=this.getAlignmentOffset(this._layoutSize),r=o.x;t.forEach((function(t){var n=t.getComponent(m);if(n){var i=n.width,a=n.height,s=n.anchorPoint,l=r-i*s.x,c=o.y+a*s.y;t.position=new g(l+i/2,c-a/2,0),r+=i+e._spacingX}}))},a.updateVerticalLayout=function(t){var e=this,n=-this._spacingY,i=0;t.forEach((function(o,r){var a=o.getComponent(m);a&&(n+=a.height,r<t.length-1&&(n+=e._spacingY),i=Math.max(i,a.width))})),n+=2*this._padding,i+=2*this._padding,this._layoutSize=new k(i,n);var o=this.getAlignmentOffset(this._layoutSize),r=o.y;t.forEach((function(t){var n=t.getComponent(m);if(n){var a=n.width,s=n.height,l=n.anchorPoint,c=o.x+(i-a)/2-a*l.x;switch(e._alignment%3){case _e.LEFT_TOP%3:case _e.LEFT_CENTER%3:case _e.LEFT_BOTTOM%3:c=o.x+e._padding-a*l.x;break;case _e.RIGHT_TOP%3:case _e.RIGHT_CENTER%3:case _e.RIGHT_BOTTOM%3:c=o.x+i-a-e._padding-a*l.x}var u=r+s*l.y;t.position=new g(c+a/2,u-s/2,0),r-=s+e._spacingY}}))},a.updateGridLayout=function(t){this._columns<=0&&(this._columns=1);var e=Math.ceil(t.length/this._columns),n=0,i=0;if(t.forEach((function(t){var e=t.getComponent(m);e&&(n=Math.max(n,e.width),i=Math.max(i,e.height))})),0!==n&&0!==i){var o=2*this._padding+n*this._columns+this._spacingX*(this._columns-1),r=2*this._padding+i*e+this._spacingY*(e-1);this._layoutSize=new k(o,r);for(var a=this.getAlignmentOffset(this._layoutSize),s=0;s<e;s++){var l=Math.min(this._columns,t.length-s*this._columns),c=0;switch(this._alignment%3){case _e.CENTER_TOP%3:case _e.CENTER%3:case _e.CENTER_BOTTOM%3:c=(this._columns*n+(this._columns-1)*this._spacingX-l*n-(l-1)*this._spacingX)/2;break;case _e.RIGHT_TOP%3:case _e.RIGHT_CENTER%3:case _e.RIGHT_BOTTOM%3:c=this._columns*n+(this._columns-1)*this._spacingX-(l*n+(l-1)*this._spacingX)}for(var u=0;u<l;u++){var h=s*this._columns+u;if(h>=t.length)break;var d=t[h],p=d.getComponent(m);if(p){var f=p.width,y=p.height,b=p.anchorPoint,v=a.x+this._padding+u*(n+this._spacingX)+c,_=a.y-this._padding-s*(i+this._spacingY),S=v-f*b.x,C=_+y*b.y;switch(this._alignment%3){case _e.LEFT_TOP%3:case _e.LEFT_CENTER%3:case _e.LEFT_BOTTOM%3:S=v-f*b.x;break;case _e.CENTER_TOP%3:case _e.CENTER%3:case _e.CENTER_BOTTOM%3:S=v+(n-f)/2-f*b.x;break;case _e.RIGHT_TOP%3:case _e.RIGHT_CENTER%3:case _e.RIGHT_BOTTOM%3:S=v+n-f-f*b.x}switch(Math.floor(this._alignment/3)){case Math.floor(_e.LEFT_TOP/3):case Math.floor(_e.CENTER_TOP/3):case Math.floor(_e.RIGHT_TOP/3):C=_+y*b.y;break;case Math.floor(_e.LEFT_CENTER/3):case Math.floor(_e.CENTER/3):case Math.floor(_e.RIGHT_CENTER/3):C=_-(i-y)/2+y*b.y;break;case Math.floor(_e.LEFT_BOTTOM/3):case Math.floor(_e.CENTER_BOTTOM/3):case Math.floor(_e.RIGHT_BOTTOM/3):C=_-i+y+y*b.y}d.position=new g(S+f/2,C-y/2,0)}}}}},a.update=function(t){var e=this;if(this.node&&this.node.isValid){var n=this.node.children.map((function(t){return t.active&&t.isValid}));n.length===this._lastChildActiveState.length&&n.every((function(t,n){return t===e._lastChildActiveState[n]}))||(this._lastChildActiveState=n,this.updateLayout())}},a.onChildAdded=function(t){this.addChildActiveListener(t),this.updateLayout(),this._lastChildActiveState=this.node.children.map((function(t){return t.active&&t.isValid}))},a.onRestore=function(){this.updateLayout()},a.resetInEditor=function(){this.updateLayout()},o(r,[{key:"layoutType",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this.updateLayout()}},{key:"alignment",get:function(){return this._alignment},set:function(t){this._alignment=t,this.updateLayout()}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX=t,this.updateLayout()}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY=t,this.updateLayout()}},{key:"columns",get:function(){return this._columns},set:function(t){this._columns=Math.max(1,t),this.updateLayout()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=Math.max(0,t),this.updateLayout()}},{key:"autoResize",get:function(){return this._autoResize},set:function(t){this._autoResize=t,this.updateLayout()}}]),r}(w)).prototype,"_layoutType",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ve.HORIZONTAL}}),t(se.prototype,"layoutType",[ne],Object.getOwnPropertyDescriptor(se.prototype,"layoutType"),se.prototype),ce=t(se.prototype,"_alignment",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _e.LEFT_TOP}}),t(se.prototype,"alignment",[oe],Object.getOwnPropertyDescriptor(se.prototype,"alignment"),se.prototype),ue=t(se.prototype,"_spacingX",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),t(se.prototype,"spacingX",[be],Object.getOwnPropertyDescriptor(se.prototype,"spacingX"),se.prototype),he=t(se.prototype,"_spacingY",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),t(se.prototype,"spacingY",[be],Object.getOwnPropertyDescriptor(se.prototype,"spacingY"),se.prototype),de=t(se.prototype,"_columns",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),t(se.prototype,"columns",[re],Object.getOwnPropertyDescriptor(se.prototype,"columns"),se.prototype),pe=t(se.prototype,"_padding",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(se.prototype,"padding",[be],Object.getOwnPropertyDescriptor(se.prototype,"padding"),se.prototype),fe=t(se.prototype,"_autoResize",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(se.prototype,"autoResize",[be],Object.getOwnPropertyDescriptor(se.prototype,"autoResize"),se.prototype),ae=se));c._RF.pop(),c._RF.push({},"94cc01d1A1Oap9CLldjHriR","Pictionary_PBLogger",void 0);var Se,Ce=function(t){return t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t}({}),we=function(){function t(){}return t.debug=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.log(Ce.Debug,t,n)},t.info=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.log(Ce.Info,t,n)},t.warning=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.log(Ce.Warning,t,n)},t.error=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.log(Ce.Error,t,n)},t.log=function(t,e,n){if(t>=this.currentLevel){var i,o=Ce[t]+": "+e;if((i=console).log.apply(i,[o].concat(n)),this.isProduction&&window.ReactNativeWebView)try{var r={type:"log",level:Ce[t],message:o,params:n};window.ReactNativeWebView.postMessage(JSON.stringify(r))}catch(t){console.error("Failed to send log to ReactNativeWebView:",t)}}},t.setLevel=function(t){this.currentLevel=t},t.setProductionMode=function(t){this.isProduction=t},t}();we.currentLevel=Ce.Debug,we.isProduction=!1,c._RF.pop(),c._RF.push({},"ac205iMzG1JHbT0Q+N3d0VS","Pictionary_PbExtensions",void 0),g.prototype.clampMagnitude=function(t,e){if(!(t>e)){var n=this.length();return n>e?(this.normalize(),this.multiplyScalar(e)):n<t&&(this.normalize(),this.multiplyScalar(t)),this}console.error("min should be less than max")},w.prototype.log=function(){for(var t=this.constructor.name,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];we.info.apply(we,["["+t+"] "].concat(n))},w.prototype.logDebug=function(){for(var t=this.constructor.name,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];we.debug.apply(we,["["+t+"] "].concat(n))},w.prototype.logInfo=function(){for(var t=this.constructor.name,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];we.info.apply(we,["["+t+"] "].concat(n))},w.prototype.logWarning=function(){for(var t=this.constructor.name,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];we.warning.apply(we,["["+t+"] "].concat(n))},w.prototype.logError=function(){for(var t=this.constructor.name,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];we.error.apply(we,["["+t+"] "].concat(n))},c._RF.pop(),c._RF.push({},"1fd44qyYhlBaL8ZGl3clvlf","Pictionary_PbSaveSystem",void 0);var Te,Re,Ee,Pe,Ie,Oe=(0,u.ccclass)("PictionaryPbSaveSystem")(Se=function(){function t(){}return t.SaveData=function(t,e){we.info("============ Saving data in pb save system ========="),P.localStorage.setItem(t,JSON.stringify(e))},t.LoadData=function(t){return JSON.parse(P.localStorage.getItem(t))},t.RemoveData=function(t){P.localStorage.removeItem(t)},t.ClearAllData=function(){P.localStorage.clear()},t}())||Se;c._RF.pop(),c._RF.push({},"7d339PcApZAeKE0NdMIqMnW","Pictionary_ScaleUICanvas",void 0);var Ne=u.ccclass,Ae=u.property;Ne("PictionaryScaleUICanvas")((Ee=t((Re=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"fitToCamera",Ee,i(e)),n(e,"maintainAspectRatio",Pe,i(e)),n(e,"additionalScaleFactor",Ie,i(e)),e}e(o,t);var r=o.prototype;return r.onLoad=function(){this.adjustCanvasScale()},r.start=function(){var t=this;window.addEventListener("resize",(function(){t.scheduleOnce((function(){t.adjustCanvasScale()}),.1)}))},r.update=function(){},r.adjustCanvasScale=function(){var t=this.node;if(t.getComponent(m))if(this.fitToCamera&&Jt.instance){var e=Jt.instance.getWidth(),n=2*Jt.instance.getCurrentOrthoHeight(),i=1;if(this.maintainAspectRatio){var o=I.getDesignResolutionSize(),r=e/o.width,a=n/o.height;i=Math.min(r,a)}i*=this.additionalScaleFactor,t.setScale(i,i,1),z("Canvas Scale with Camera: "+i.toFixed(2))}else{var s=I.getVisibleSize(),l=I.getDesignResolutionSize(),c=s.width/l.width,u=s.height/l.height;if(P.os===P.OS.IOS||P.os===P.OS.ANDROID){var h=E.windowSize.width/E.windowSize.height;(P.os===P.OS.IOS&&h>2||P.os===P.OS.ANDROID&&h>2.1)&&(c*=.95,u*=.95)}var d=this.maintainAspectRatio?Math.min(c,u):Math.max(c,u);d*=this.additionalScaleFactor,t.setScale(d,d,1),z("Canvas Scale: "+d.toFixed(2))}},r.refreshCanvasScale=function(){this.adjustCanvasScale()},o}(w)).prototype,"fitToCamera",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pe=t(Re.prototype,"maintainAspectRatio",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ie=t(Re.prototype,"additionalScaleFactor",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Te=Re));c._RF.pop(),c._RF.push({},"7bd30nbuzxA4a6y7O6awusZ","Pictionary_Utils",void 0);var Le,Me,De,ke,ze,Ge,xe,Fe,He,Be,We,Ue,Ve,Ke,je,Je=function(){function t(){}return t.roundNumber=function(t,e){void 0===e&&(e=2);var n=Math.pow(10,e);return Math.round((t+Number.EPSILON)*n)/n},t}();c._RF.pop(),c._RF.push({},"86a7bJv0rFMmaesJAWA06MD","Pictionary_NetworkConfig",void 0);var Ye=u.ccclass,Ze=u.property,Qe=(Le=Ye("PictionaryNetworkConfig"),Me=Ze({tooltip:"Server host address"}),De=Ze({tooltip:"Server port number"}),ke=Ze({tooltip:"Use SSL for connections"}),ze=Ze({tooltip:"Player identifier"}),Ge=Ze({tooltip:"Room identifier"}),xe=Ze({tooltip:"Name of the game"}),Le((Be=t((He=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"serverHost",Be,i(e)),n(e,"serverPort",We,i(e)),n(e,"useSSL",Ue,i(e)),n(e,"userId",Ve,i(e)),n(e,"roomId",Ke,i(e)),n(e,"gameName",je,i(e)),e}e(o,t);var r=o.prototype;return r.initNetworkConfig=function(){if(P.isBrowser){var t=new URLSearchParams(window.location.search),e="true"===t.get("debug");we.debug("Initializing network config (debug="+e+")"),e?this.parseQueryParams(t):this.parseInjectedConfig(),we.debug("Final network config:",{serverHost:this.serverHost,serverPort:this.serverPort,useSSL:this.useSSL,userId:this.userId,roomId:this.roomId,gameName:this.gameName})}},r.parseQueryParams=function(t){var e=this;we.debug("Parsing config from query parameters"),this.updateConfigFromQueryParam(t,"userId",(function(t){return e.userId=t})),this.updateConfigFromQueryParam(t,"roomId",(function(t){return e.roomId=t})),this.updateConfigFromQueryParam(t,"apiUrl",(function(t){return e.serverHost=t})),this.updateConfigFromQueryParam(t,"apiPort",(function(t){var n=parseInt(t);isNaN(n)||(e.serverPort=n)})),this.updateConfigFromQueryParam(t,"useSSL",(function(t){return e.useSSL="true"===t}))},r.parseInjectedConfig=function(){we.debug("Parsing config from injected GameConfig");try{var t=window.GameConfig;if(!t)return void we.debug("No injected GameConfig found");var e="string"==typeof t?JSON.parse(t):t;this.applyConfig(e)}catch(t){we.debug("Failed to parse injected GameConfig:",t)}},r.applyConfig=function(t){var e,n,i,o,r;t&&(this.userId=null!=(e=t.userId)?e:this.userId,this.roomId=null!=(n=t.roomId)?n:this.roomId,this.serverHost=null!=(i=t.apiUrl)?i:this.serverHost,this.serverPort=Number(null!=(o=t.apiPort)?o:this.serverPort),this.useSSL=null!=(r=t.useSSL)?r:this.useSSL)},r.updateConfigFromQueryParam=function(t,e,n){var i=t.get(e);null!=i&&n(i)},o}(w)).prototype,"serverHost",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localhost"}}),We=t(He.prototype,"serverPort",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),Ue=t(He.prototype,"useSSL",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ve=t(He.prototype,"userId",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ke=t(He.prototype,"roomId",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"testroom1"}}),je=t(He.prototype,"gameName",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pictionary"}}),Fe=He))||Fe);c._RF.pop(),c._RF.push({},"9b6adMqVv9Fw5Gma0CGZzf5","Pictionary_NetworkTypes",void 0);var Xe=function(t){return t[t.SERVER_ROOM_STATE_CHANGE=0]="SERVER_ROOM_STATE_CHANGE",t[t.CONNECTION_STATE_CHANGE=1]="CONNECTION_STATE_CHANGE",t[t.ROOM_STATUS_CHANGE=2]="ROOM_STATUS_CHANGE",t[t.GAME_STATE_CHANGE=3]="GAME_STATE_CHANGE",t[t.SERVER_MESSAGE=4]="SERVER_MESSAGE",t}({}),qe=function(t){return t[t.INITIALIZING=0]="INITIALIZING",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.LOBBY=3]="LOBBY",t[t.JOINED_ROOM=4]="JOINED_ROOM",t[t.DISCONNECTED=5]="DISCONNECTED",t[t.RECONNECTING=6]="RECONNECTING",t[t.KICKED_OUT=7]="KICKED_OUT",t}({}),$e=function(t){return t.NONE="none",t.KICKED_OUT="kicked_out",t.PLAYER_COMEBACK="player_comeback",t.PLAYER_JOINED="player_joined",t}({});c._RF.pop(),c._RF.push({},"a9b91j0/fxDRabIDQyFtkyU","Pictionary_PlayerTypes",void 0);var tn,en,nn,on,rn,an,sn,ln,cn=function(t){return t[t.HUMAN=0]="HUMAN",t[t.BOT=1]="BOT",t[t.SPECTATOR=2]="SPECTATOR",t}({});c._RF.pop(),c._RF.push({},"1704cfz1vNFWqd+wOT8pQ0Z","Pictionary_NetworkManager",void 0);var un=u.ccclass,hn=u.property,dn={roomId:"testroom1",reconnectionToken:"eyJ"},pn=new G,fn=new G,gn=new G,yn=(tn=un("PictionaryNetworkManager"),en=hn({type:N,tooltip:"Enable development mode for additional logging"}),nn=hn({type:Qe,tooltip:"Network configuration settings"}),tn(((ln=function(t){function l(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"isDevMode",an,i(e)),n(e,"networkConfig",sn,i(e)),e._client=void 0,e._room=void 0,e._currentConnectionState=qe.INITIALIZING,e._reconnectionData=r({},dn),e}e(l,t);var c=l.prototype;return c.onLoad=function(){if(l._instance)return this.log("NetworkManager instance already exists. Destroying duplicate."),void this.node.destroy();l._instance=this,this.networkConfig.initNetworkConfig(),this.isDevMode||we.setProductionMode(!0)},c.start=function(){this.initializeClient(),this.log("============ Initializing client ========="),this.log("============ Connecting to room ========="),this.connect(this.networkConfig.roomId,this.networkConfig.userId)},c.onDestroy=function(){this.cleanup()},c.cleanup=function(){this._room&&(this.leaveRoom(),this._room=null),this._client&&(this._client=null),this._currentConnectionState=qe.INITIALIZING,this._reconnectionData=r({},dn),l._instance===this&&(l._instance=null)},c.initializeClient=function(){var t=this.networkConfig.useSSL?"wss":"ws",e="";e=0==this.networkConfig.serverPort?t+"://"+this.networkConfig.serverHost:t+"://"+this.networkConfig.serverHost+":"+this.networkConfig.serverPort,this.log("Initializing client with endpoint: "+e),this._client=new nt.Client(e)},c.shouldRejoin=function(){return!this.isDevMode&&(this._reconnectionData=Oe.LoadData(this.networkConfig.gameName),!!(this._reconnectionData&&this._reconnectionData.roomId&&this._reconnectionData.reconnectionToken)&&this._reconnectionData.roomId===this.networkConfig.roomId)},c.connect=function(){var t=a(s().mark((function t(e,n){var i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.log("============ Connecting to room from connect function ========="),this.updateConnectionState(qe.CONNECTING),!this.shouldRejoin()){t.next=7;break}return this.log("Rejoining room",e),t.next=6,this.rejoin();case 6:return t.abrupt("return");case 7:return t.prev=7,i=this.createPlayerData(n),this.log("Joining with options ",{player:i}),t.next=12,this._client.joinById(e,{player:i});case 12:this._room=t.sent,this.initAfterJoin(e),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(7),this.handleConnectionError(t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[7,16]])})));return function(e,n){return t.apply(this,arguments)}}(),c.initAfterJoin=function(t){this.updateConnectionState(qe.JOINED_ROOM),this.log("Joined room "+t+" with sessionId: "+this._room.sessionId),this.initializeRoomCallbacks(),this.saveReconnectionData()},c.createAndJoinRoom=function(){var t=a(s().mark((function t(e,n){var i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.log("Creating room",e),this.updateConnectionState(qe.CONNECTING),t.prev=2,i=this.createPlayerData(n),t.next=6,this._client.create("PictionaryRoom",{roomId:e,player:i,roomSettings:{maxClients:10}});case 6:this._room=t.sent,this.initAfterJoin(e),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),this.handleConnectionError(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}(),c.createPlayerData=function(t){return{userId:t,name:t,avatar:"randomProfilePicture",type:cn.HUMAN}},c.initializeRoomCallbacks=function(){var t=this;this._room?(this._room.onStateChange((function(t){fn.emit(Xe.SERVER_ROOM_STATE_CHANGE,t)})),this._room.onLeave((function(e){4001===e?t.updateConnectionState(qe.KICKED_OUT):t.updateConnectionState(qe.DISCONNECTED)})),this._room.onMessage($e.KICKED_OUT,(function(){t.updateConnectionState(qe.KICKED_OUT)})),this._room.onMessage("*",(function(t,e){gn.emit(Xe.SERVER_MESSAGE,t,e)}))):this.log("Cannot initialize callbacks: Room is not defined")},c.updateConnectionState=function(t){if(this._currentConnectionState!==t){var e=this._currentConnectionState;this._currentConnectionState=t,this.log("Connection state changed: "+qe[e]+" -> "+qe[t]),pn.emit(Xe.CONNECTION_STATE_CHANGE,e,t)}},c.reconnect=function(){var t=a(s().mark((function t(e,n,i){var o,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=1),void 0===n&&(n=10),void 0===i&&(i=2e3),this._currentConnectionState===qe.DISCONNECTED||this._currentConnectionState===qe.RECONNECTING){t.next=6;break}return this.log("Cannot reconnect: Current state is "+qe[this._currentConnectionState]),t.abrupt("return");case 6:return this._room&&this._room.state&&(o=this._room.state).roomSettings&&o.roomSettings.maxReconnectionAttempts&&(n=o.roomSettings.maxReconnectionAttempts),this.updateConnectionState(qe.RECONNECTING),this.log("Reconnect attempt "+e+"/"+n),t.prev=9,t.next=12,this.delay(i);case 12:if(this._room&&this._room.reconnectionToken){t.next=14;break}throw new Error("Reconnection token not available");case 14:return t.next=16,this._client.reconnect(this._room.reconnectionToken);case 16:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(qe.JOINED_ROOM),this.log("Reconnected successfully."),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(9),this.handleReconnectionError(t.t0,e,n,i);case 27:case"end":return t.stop()}}),t,this,[[9,24]])})));return function(e,n,i){return t.apply(this,arguments)}}(),c.rejoin=function(){var t=a(s().mark((function t(e,n,i){var o,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=1),void 0===n&&(n=10),void 0===i&&(i=2e3),this.log("Rejoin attempt "+e+"/"+n),t.prev=4,t.next=7,this.delay(i);case 7:if(this._reconnectionData&&this._reconnectionData.reconnectionToken){t.next=9;break}throw new Error("Reconnection data not available");case 9:return o=this._reconnectionData.roomId+":"+this._reconnectionData.reconnectionToken,we.info("Using formatted reconnection token: ",o),t.next=13,this._client.reconnect(o);case 13:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(qe.JOINED_ROOM),this.log("Rejoined successfully."),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(4),this.handleReconnectionError(t.t0,e,n,i,"reJoin");case 24:case"end":return t.stop()}}),t,this,[[4,21]])})));return function(e,n,i){return t.apply(this,arguments)}}(),c.delay=function(){var t=a(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c.handleConnectionError=function(t){var e=(null==t?void 0:t.message)||"Unknown error";this.log("Error connecting to room:",e),this.updateConnectionState(qe.DISCONNECTED)},c.handleReconnectionError=function(t,e,n,i,o){void 0===o&&(o="reconnect");var r=(null==t?void 0:t.message)||"Unknown error";this.log(o+" attempt "+e+" failed:",r),e<n||-1===n?"reconnect"===o?this.reconnect(e+1,n,i):this.rejoin(e+1,n,i):(this.log("Max reconnection attempts reached. Please check your network or contact support."),this.updateConnectionState(qe.DISCONNECTED))},c.saveReconnectionData=function(){if(we.info("============ Saving reconnection data ========="),this._room&&this._room.reconnectionToken){var t=this._room.reconnectionToken;t.includes(":")&&(t=t.split(":")[1]),we.info("saving Reconnection token: ",t),this._reconnectionData={roomId:this.networkConfig.roomId,reconnectionToken:t},Oe.SaveData(this.networkConfig.gameName,this._reconnectionData),we.info("Reconnection data saved")}else this.log("Cannot save reconnection data: Room or reconnection token not available")},c.leaveRoom=function(){var t=this;this._room?(this.log("Leaving room"),this._room.leave(!0).then((function(){return t.log("Left room successfully")})).catch((function(e){return t.log("Error leaving room:",(null==e?void 0:e.message)||"Unknown error")}))):this.log("Cannot leave room: Room is not defined")},c.sendMessage=function(t,e){this._room?(this.isDevMode&&this.log("Sending message:",t,e),this._room.send(t,e)):this.log("Cannot send message: Room is not defined")},c.log=function(t){if(this.isDevMode){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.length>0?we.info.apply(we,["[NetworkManager] "+t].concat(n)):we.info("[NetworkManager] "+t)}},o(l,[{key:"CurrentRoom",get:function(){return this._room}},{key:"CurrentConnectionState",get:function(){return this._currentConnectionState}}],[{key:"Instance",get:function(){if(!this._instance)throw new Error("NetworkManager instance is not initialized.");return this._instance}}]),l}(w))._instance=null,an=t((rn=ln).prototype,"isDevMode",[en],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=t(rn.prototype,"networkConfig",[nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),on=rn))||on);c._RF.pop(),c._RF.push({},"a3808xoBh1EaJyFTRy3wBHQ","Pictionary_BasePlayerData",void 0);var mn=function(){function t(){this.userId=void 0,this.name=void 0,this.avatar=void 0,this.sessionId=void 0,this.type=void 0,this.isOnline=void 0,this.isConnected=void 0,this.isReplacedByBot=void 0,this.isKickedOut=void 0,this.isReady=void 0,this.score=void 0}return t.prototype.copyFrom=function(t){this.userId=t.userId,this.name=t.name,this.avatar=t.avatar,this.sessionId=t.sessionId,this.type=t.type,this.isOnline=t.isOnline,this.isConnected=t.isConnected,this.isReplacedByBot=t.isReplacedByBot,this.isKickedOut=t.isKickedOut,this.isReady=t.isReady,this.score=t.score},t}();c._RF.pop(),c._RF.push({},"ed712fU8zJCB63GFLhIhcqf","Pictionary_BaseRoomSettings",void 0);var bn=function(){function t(){this.maxPlayers=void 0,this.minPlayers=void 0,this.maxClients=void 0,this.countdownTimeInSeconds=void 0,this.allowLateJoin=void 0,this.maxReconnectionAttempts=void 0,this.reconnectionAttemptInterval=void 0,this.reconnectionTime=void 0,this.gameFPS=void 0,this.serverFPS=void 0,this.patchRate=void 0}return t.prototype.copyFrom=function(t){this.maxPlayers=t.maxPlayers,this.minPlayers=t.minPlayers,this.maxClients=t.maxClients,this.countdownTimeInSeconds=t.countdownTimeInSeconds,this.allowLateJoin=t.allowLateJoin,this.reconnectionTime=t.reconnectionTime,this.gameFPS=t.gameFPS,this.serverFPS=t.serverFPS,this.patchRate=t.patchRate},t}();c._RF.pop(),c._RF.push({},"bfb0bBayqpG84uxWw6OMfj+","Pictionary_RoomTypes",void 0);var vn=function(t){return t[t.NONE=0]="NONE",t[t.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",t[t.COUNTDOWN=2]="COUNTDOWN",t[t.GAME_SIMULATION=3]="GAME_SIMULATION",t[t.END_GAME=4]="END_GAME",t}({});c._RF.pop(),c._RF.push({},"ed32dyxApRGmrQtfwC1xZQi","Pictionary_BaseRoomState",void 0);var _n,Sn,Cn,wn,Tn,Rn,En,Pn=function(){function t(t,e){this.currentRoomStatus=vn.WAITING_FOR_PLAYERS,this.previousRoomStatus=vn.NONE,this.roomSettings=void 0,this.playersData=void 0,this.spectatorsData=void 0,this.roomSettings=t,this.playersData=e,this.spectatorsData=[]}return t.prototype.copyFrom=function(t){this.currentRoomStatus=t.currentRoomStatus,this.previousRoomStatus=t.previousRoomStatus,this.roomSettings.copyFrom(t.roomSettings)},t}();c._RF.pop(),c._RF.push({},"131cbWGU49GDYCzKfjrgrwQ","Pictionary_Timer",void 0);var In=u.ccclass,On=u.property,Nn=(_n=In("PictionaryTimer"),Sn=On(p),Cn=On(h),_n((Rn=t((Tn=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"timeUiLabel",Rn,i(e)),n(e,"timerFill",En,i(e)),e.elapsedTime=0,e.totalTime=0,e.isRunning=!1,e.timerFillSprite=null,e}e(o,t);var r=o.prototype;return r.start=function(){this.reset(),this.timerFill&&(console.log("timerFill",this.timerFill),this.timerFillSprite=this.timerFill.getComponent(S),console.log("timerFillSprite",this.timerFillSprite))},r.update=function(t){this.isRunning&&(this.elapsedTime-=t,this.elapsedTime<=0&&(this.elapsedTime=0,this.stopTimer()),this.updateTimeLabel(),this.updateTimerFill())},r.startTimer=function(){this.isRunning||(this.isRunning=!0)},r.stopTimer=function(){this.isRunning&&(this.isRunning=!1)},r.reset=function(){this.elapsedTime=0,this.totalTime=0,this.updateTimeLabel(),this.updateTimerFill()},r.setStartTime=function(t){this.elapsedTime=t,this.totalTime=t,this.updateTimeLabel(),this.updateTimerFill()},r.updateTimeLabel=function(){var t=Math.floor(this.elapsedTime);this.timeUiLabel.string=""+t},r.updateTimerFill=function(){if(this.timerFillSprite){var t=this.elapsedTime/this.totalTime;this.timerFillSprite.fillRange=Math.max(0,Math.min(1,t))}},r.formatTime=function(t){return t<10?"0"+t:""+t},r.formatMilliseconds=function(t){return t<10?"00"+t:t<100?"0"+t:""+t},o}(w)).prototype,"timeUiLabel",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),En=t(Tn.prototype,"timerFill",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wn=Tn))||wn);c._RF.pop(),c._RF.push({},"eaf5ch2INJC5ZpHH/uBoUZh","PicitionaryGameState",void 0);var An=function(t){return t[t.NONE=0]="NONE",t[t.START_ROUND=1]="START_ROUND",t[t.WORD_SELECTION=2]="WORD_SELECTION",t[t.DRAWING=3]="DRAWING",t[t.DRAWING_RESULTS=4]="DRAWING_RESULTS",t[t.END_ROUND=5]="END_ROUND",t[t.END_GAME=6]="END_GAME",t}({});c._RF.pop(),c._RF.push({},"fa5d0U3yGhK+pTZUrjZSeKx","PictionaryRoomState",void 0);var Ln=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).playerIndex=void 0,e.consecutiveMissedTurns=0,e}return e(n,t),n.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.playerIndex=e.playerIndex,this.consecutiveMissedTurns=e.consecutiveMissedTurns,this.score=e.score},n}(mn),Mn=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).drawingTimeLimit=void 0,e.timeBeforeRoundStarts=void 0,e.wordSelectionTimeLimit=void 0,e.rounds=void 0,e}return e(n,t),n.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.drawingTimeLimit=e.drawingTimeLimit,this.timeBeforeRoundStarts=e.timeBeforeRoundStarts,this.wordSelectionTimeLimit=e.wordSelectionTimeLimit,this.rounds=e.rounds},n}(bn),Dn=function(){function t(){this.inputType=void 0,this.inputValue=void 0}return t.prototype.copyFrom=function(t){this.inputType=t.inputType,this.inputValue=t.inputValue},t}(),kn=function(){function t(){this.userId=void 0,this.score=void 0,this.guessTime=void 0}return t.prototype.copyFrom=function(t){this.userId=t.userId,this.score=t.score,this.guessTime=t.guessTime},t}(),zn=function(){function t(){this.strokePoints=void 0,this.color=void 0,this.width=void 0}return t.prototype.copyFrom=function(t){this.strokePoints=t.strokePoints.map((function(t){return t})),this.color=t.color,this.width=t.width},t}(),Gn=function(t){function n(){var e;return(e=t.call(this,new Mn,[])||this).elapsedDrawingTime=0,e.elapsedWordSelectionTime=0,e.currentRoomStatus=vn.NONE,e.previousRoomStatus=vn.WAITING_FOR_PLAYERS,e.drawingPlayerIndex=0,e.drawingWord="",e.currentRoundScores=[],e.selectedWord="",e.inputPayload=new Dn,e.currentGameState=An.NONE,e.previousGameState=An.NONE,e.drawingSketchData=[],e.serverTick=0,e.currentRound=1,e}e(n,t);var i=n.prototype;return i.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.playersData=e.playersData.map((function(t){var e=new Ln;return e.copyFrom(t),e})),this.spectatorsData=e.spectatorsData.map((function(t){var e=new mn;return e.copyFrom(t),e})),this.elapsedDrawingTime=e.elapsedDrawingTime,this.elapsedWordSelectionTime=e.elapsedWordSelectionTime,this.currentRoomStatus=e.currentRoomStatus,this.previousRoomStatus=e.previousRoomStatus,this.drawingPlayerIndex=e.drawingPlayerIndex,this.drawingWord=e.drawingWord,this.currentRoundScores=e.currentRoundScores.map((function(t){var e=new kn;return e.copyFrom(t),e})),this.selectedWord=e.selectedWord,this.roomSettings.copyFrom(e.roomSettings),this.inputPayload.copyFrom(e.inputPayload),this.currentGameState=e.currentGameState,this.previousGameState=e.previousGameState,this.drawingSketchData=e.drawingSketchData.map((function(t){var e=new zn;return e.copyFrom(t),e})),this.currentRound=e.currentRound,this.serverTick=e.serverTick},i.getPlayerByUserId=function(t){return this.playersData.find((function(e){return e.userId===t}))||null},i.getOnlinePlayersCount=function(){return this.playersData.filter((function(t){return t.isOnline})).length},i.getPlayerByIndex=function(t){return this.playersData.find((function(e){return e.playerIndex===t}))||null},i.getPlayerBySessionId=function(t){return this.playersData.find((function(e){return e.sessionId===t}))||null},n}(Pn);c._RF.pop(),c._RF.push({},"72207hGM6tF940M784xRiKG","Pictionary_GameMessageType",void 0);var xn,Fn,Hn,Bn,Wn,Un,Vn,Kn=function(t){return t.NONE="none",t.SET_STATE="set_state",t.DRAW_STROKE="draw_stroke",t.WORDS_LIST="words_list",t.SELECTED_WORD="selected_word",t.GUESSED_WORD="guessed_word",t.CHAT_MESSAGE="chat_message",t.REVEAL_LETTER="reveal_letter",t}({});c._RF.pop(),c._RF.push({},"622a1WKnbZO64xNdsO5XAfe","Pictionary_PlayerAvatar",void 0);var jn,Jn,Yn,Zn,Qn,Xn,qn,$n,ti,ei,ni,ii,oi,ri,ai,si,li,ci=u.ccclass,ui=u.property,hi=(xn=ci("PictionaryPlayerAvatar"),Fn=ui({type:S,tooltip:"Player Avatar"}),Hn=ui({type:S,tooltip:"Player Avatar Outline"}),xn((Un=t((Wn=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"playerAvatar",Un,i(e)),n(e,"outline",Vn,i(e)),e.enableOnClick=!1,e.userId="",e}e(o,t);var r=o.prototype;return r.initialize=function(t,e){this.enableOnClick=t,this.userId=e},r.onEnable=function(){this.registerTouchEvents()},r.onDisable=function(){this.unregisterTouchEvents()},r.start=function(){},r.update=function(t){},r.registerTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.on(h.EventType.TOUCH_START,this.handleTouchStart,this)},r.unregisterTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.off(h.EventType.TOUCH_START,this.handleTouchStart,this)},r.handleTouchStart=function(){this.enableOnClick},r.setOutline=function(t){this.outline&&(this.outline.enabled=t)},r.setOutlineColor=function(t){this.outline&&(this.outline.color=t)},r.setAvatarFromUrl=function(t){console.log("Setting avatar from url: ",t);var e=this.getFromCache(t);e?this.createSpriteFrameFromTexture(e):this.loadRemoteImage(t)},r.setAvatarFromSpriteFrame=function(t){this.playerAvatar&&(this.playerAvatar.spriteFrame=t)},r.getFromCache=function(t){var e=x.assets.get(t);if(e){var n=new F;if(n.image=e,n.isValid&&"function"==typeof n.getHash)return n}return null},r.createSpriteFrameFromTexture=function(t){if(t&&t.isValid&&"function"==typeof t.getHash)if(this.playerAvatar){console.log("creating sprteframe from texture",this.playerAvatar);var e=new H;e.texture=t,this.playerAvatar.spriteFrame=e}else console.warn("[PictionaryPlayerAvatar] PlayerAvatar component is null");else console.warn("[PictionaryPlayerAvatar] Invalid texture provided")},r.loadRemoteImage=function(t){var e=this;x.loadRemote(t,{ext:".png"},(function(n,i){if(n)return console.error("[Player] Failed to load profile image: "+JSON.stringify(n)),void(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_avatar_load_failed",data:{userId:e.userId,url:t,errorName:n.name,errorMessage:n.message,errorStack:n.stack}})));try{var o=new H,r=new F;r.image=i,r.isValid&&"function"==typeof r.getHash?(o.texture=r,e.playerAvatar?e.playerAvatar.spriteFrame=o:console.warn("[PictionaryPlayerAvatar] PlayerAvatar component is null")):console.warn("[PictionaryPlayerAvatar] Invalid texture created from imageAsset")}catch(n){console.error("[Player] Error creating sprite frame: "+n),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_sprite_frame_creation_failed",data:{userId:e.userId,url:t,error:n}}))}}))},o}(w)).prototype,"playerAvatar",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vn=t(Wn.prototype,"outline",[Hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bn=Wn))||Bn);c._RF.pop(),c._RF.push({},"1b08d3QQdJCrIUPzM0rfjKq","Pictionary_PlayerProfile",void 0);var di,pi,fi,gi,yi,mi,bi,vi,_i,Si,Ci,wi,Ti,Ri,Ei,Pi,Ii,Oi=u.ccclass,Ni=u.property,Ai=(jn=Oi("PictionaryPlayerProfile"),Jn=Ni({type:p,tooltip:"Label to display player's name"}),Yn=Ni({type:S,tooltip:"Sprite for player's profile image"}),Zn=Ni({type:p,tooltip:"Label to display player's score"}),Qn=Ni({type:p,tooltip:"Label to display player's rank"}),Xn=Ni({type:S}),qn=Ni({type:M}),$n=Ni({type:hi}),jn((ni=t((ei=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"nameLabel",ni,i(e)),n(e,"profileImage",ii,i(e)),n(e,"scoreLabel",oi,i(e)),n(e,"rankLabel",ri,i(e)),n(e,"profilePicHolder",ai,i(e)),n(e,"profilePicWidget",si,i(e)),n(e,"playerAvatar",li,i(e)),e.userId="",e.playerName="",e.profileImageUrl="",e.isProfileInitialized=!1,e.isLocal=!1,e.score=0,e.rank=0,e.goldColor=new T(255,215,0,255),e}e(o,t);var r=o.prototype;return r.onEnable=function(){this.scoreLabel&&(this.scoreLabel.string="0"),this.rankLabel&&(this.rankLabel.string="0")},r.onDisable=function(){this.profileImage&&this.profileImage.node&&this.profileImage.node.off(h.EventType.TOUCH_START,this.openProfile,this)},r.initialize=function(t,e){void 0===e&&(e=!1),t?(this.userId=t.userId,this.playerName=Bi.getTruncatedName(t.name),this.isLocal=e,this.loadProfile(t),e&&this.highlightLocalPlayer(),this.setScore(t.score||0)):console.error("[PlayerProfile] No profile data provided for initialization")},r.loadProfile=function(t){!this.isProfileInitialized&&t&&(this.nameLabel.string=Bi.getTruncatedName(t.name,8),this.profileImageUrl=t.avatar,this.loadProfileImage(),this.profileImage.node.on(h.EventType.TOUCH_START,this.openProfile,this),this.isProfileInitialized=!0)},r.loadProfileImage=function(){this.profileImageUrl?this.playerAvatar.setAvatarFromUrl(this.profileImageUrl):console.warn("[PlayerProfile] No profile image URL provided")},r.highlightLocalPlayer=function(){this.nameLabel&&(this.nameLabel.color=this.goldColor)},r.openProfile=function(){this.userId?console.log("Opening profile for user: "+this.userId):console.warn("[PlayerProfile] Cannot open profile: No user ID available")},r.getProfileSpriteFrame=function(){return this.profileImage?this.profileImage.spriteFrame:null},r.getName=function(){return this.playerName},r.getUserId=function(){return this.userId},r.setScore=function(t){this.score=t,this.scoreLabel&&(this.scoreLabel.string=t.toString())},r.getScore=function(){return this.score},r.setRank=function(t){this.rank=t,this.rankLabel&&(this.rankLabel.string=t.toString())},r.getRank=function(){return this.rank},o}(w)).prototype,"nameLabel",[Jn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=t(ei.prototype,"profileImage",[Yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=t(ei.prototype,"scoreLabel",[Zn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=t(ei.prototype,"rankLabel",[Qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=t(ei.prototype,"profilePicHolder",[Xn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=t(ei.prototype,"profilePicWidget",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=t(ei.prototype,"playerAvatar",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=ei))||ti);c._RF.pop(),c._RF.push({},"8cf4cp74hlLO4Am8q00N9IX","Pictionary_Player",void 0);var Li,Mi,Di,ki,zi,Gi,xi=u.ccclass,Fi=u.property,Hi=function(t){return t[t.IDLE=0]="IDLE",t[t.WORD_SELECTION=1]="WORD_SELECTION",t[t.DRAWING=2]="DRAWING",t[t.GUESSING=3]="GUESSING",t[t.EVALUATION=4]="EVALUATION",t}({}),Bi=(di=xi("PictionaryPlayer"),pi=Fi({type:h,tooltip:"Player's drawing icon"}),fi=Fi({type:h}),gi=Fi({type:h,tooltip:"Container node for message notification"}),yi=Fi({type:p,tooltip:"Label to show the chat message"}),mi=Fi({type:B,tooltip:"Player's index in the game"}),bi=Fi({type:S,tooltip:"Background sprite for player UI"}),vi=Fi({type:Ai,tooltip:"Player profile component"}),di((Ci=t((Si=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"drawingIcon",Ci,i(e)),n(e,"crownImage",wi,i(e)),n(e,"messageContainer",Ti,i(e)),n(e,"messageLabel",Ri,i(e)),e.userId="",e.playerName="",n(e,"index",Ei,i(e)),n(e,"bgSprite",Pi,i(e)),n(e,"profile",Ii,i(e)),e.board=null,e.hasGuessedAnswer=!1,e.playerState=Hi.IDLE,e.isLocal=!1,e.isInitialized=!1,e.roomSettings=null,e.oddColor=new T(15,43,77,255),e.evenColor=new T(0,0,0,0),e.correctGuessColor=new T(0,255,0,125),e}e(o,t);var r=o.prototype;return r.onEnable=function(){this.updateBgColor(),this.initializeMessageContainer()},r.initializeMessageContainer=function(){if(this.messageContainer){var t=this.messageContainer.getComponent(S);t&&(t.color=new T(t.color.r,t.color.g,t.color.b,0))}},r.initialize=function(t,e){if(t&&e){console.log("Initializing Player: "+this.index),this.board=e;var n=t.getPlayerByIndex(this.index);if(n){if(this.profile){var i=n.sessionId===yn.Instance.CurrentRoom.sessionId;this.profile.initialize(n,i),this.isLocal=i}this.userId=n.userId,this.playerName=o.getTruncatedName(n.name),this.roomSettings=t.roomSettings,this.isInitialized=!0,this.updatePlayerState(t)}else console.error("[Player] No profile data found for player index "+this.index)}else console.error("[Player] Failed to initialize: Invalid room state or board")},o.getTruncatedName=function(t,e){void 0===e&&(e=8);var n=t.split(" ")[0],i=n.charAt(0).toUpperCase()+n.slice(1);return i.length<=e?i:i.slice(0,e)+".."},r.setScore=function(t){this.profile&&this.profile.setScore(t)},r.resetState=function(){this.hasGuessedAnswer=!1,this.playerState=Hi.IDLE,this.updateBgColor()},r.onServerRoomStateChange=function(t){if(t){var e=t.getPlayerByIndex(this.index);e&&this.profile&&this.profile.setScore(e.score),this.updatePlayerState(t),this.isMyTurn(t.drawingPlayerIndex)&&this.handleTurnSpecificMessages(t)}else console.error("[Player] Invalid room state")},r.updatePlayerState=function(t){var e=this.isMyTurn(t.drawingPlayerIndex);switch(t.currentGameState){case An.WORD_SELECTION:this.playerState=e?Hi.WORD_SELECTION:Hi.IDLE;break;case An.DRAWING:this.playerState=e?Hi.DRAWING:Hi.GUESSING;break;case An.DRAWING_RESULTS:this.playerState=Hi.EVALUATION;break;default:this.playerState=Hi.IDLE}},r.handleTurnSpecificMessages=function(t){if(t.inputPayload.inputType!==Kn.NONE)switch(t.inputPayload.inputType){case Kn.SET_STATE:this.onSetState(t);break;case Kn.WORDS_LIST:this.handleWordsList(t)}},r.onSetState=function(t){this.updatePlayerState(t)},r.handleWordsList=function(t){console.log("[Player] Received words list ",t.inputPayload)},r.onReconnection=function(t){if(t){var e=t.getPlayerByIndex(this.index);if(e&&this.profile){var n=e.sessionId===yn.Instance.CurrentRoom.sessionId;this.profile.initialize(e,n)}this.updatePlayerState(t),this.updateBgColor()}else console.error("[Player] Invalid room state for reconnection")},r.isMyTurn=function(t){return this.index===t},r.setRank=function(t){this.profile&&this.profile.setRank(t),this.updateBgColor()},r.setGuessedAnswer=function(t){this.hasGuessedAnswer=t,this.updateBgColor()},r.updateBgColor=function(){if(this.bgSprite&&this.profile){var t=this.profile.getRank()%2==0?this.evenColor:this.oddColor;this.hasGuessedAnswer&&(t=this.correctGuessColor),this.bgSprite.color=t}},r.setPlayerNumber=function(t){this.index=t},r.getScore=function(){return this.profile?this.profile.getScore():0},r.getRank=function(){return this.profile?this.profile.getRank():0},r.getProfileSpriteFrame=function(){return this.profile?this.profile.getProfileSpriteFrame():null},r.showMessageNotification=function(t){if(this.messageContainer&&this.messageLabel){var e=t.length>15?t.substring(0,15)+"...":t;this.messageLabel.string=e;var n=this.messageContainer.getComponent(S);n?(C(n).stop(),n.color=new T(n.color.r,n.color.g,n.color.b,0),C(n).to(.3,{color:new T(n.color.r,n.color.g,n.color.b,255)}).delay(1).to(.3,{color:new T(n.color.r,n.color.g,n.color.b,0)}).start()):console.warn("[Player] Sprite component not found on messageContainer")}else console.warn("[Player] Message container or label not assigned")},o}(w)).prototype,"drawingIcon",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wi=t(Si.prototype,"crownImage",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=t(Si.prototype,"messageContainer",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ri=t(Si.prototype,"messageLabel",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=t(Si.prototype,"index",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pi=t(Si.prototype,"bgSprite",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=t(Si.prototype,"profile",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=Si))||_i);c._RF.pop(),c._RF.push({},"da8bfTaMHpEJ6w6Jfuutkdj","Pictionary_Brush",void 0);var Wi,Ui,Vi,Ki,ji,Ji,Yi,Zi,Qi,Xi=u.ccclass,qi=u.property,$i=(Li=Xi("PictionaryBrush"),Mi=qi({type:W}),Li((zi=t((ki=function(t,e){n(this,"width",zi,this),n(this,"color",Gi,this),t&&(this.width=t),e&&(this.color=e)}).prototype,"width",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Gi=t(ki.prototype,"color",[qi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(0,0,0,255)}}),Di=ki))||Di);c._RF.pop(),c._RF.push({},"1d8b39tO65Bf7sCMOk5RYYY","Pictionary_Board",void 0);var to,eo,no=u.ccclass,io=u.property,oo=new G,ro="stroke-completed",ao=(Wi=no("PictionaryBoard"),Ui=io({type:h,tooltip:"The toolbar containing drawing tools"}),Vi=io({type:p,tooltip:"Label displaying the current drawer name"}),Ki=io({type:$i,tooltip:"The current brush settings"}),Wi((Yi=t((Ji=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"toolBar",Yi,i(e)),n(e,"drawerNameLabel",Zi,i(e)),n(e,"brush",Qi,i(e)),e._isDrawing=!1,e._lastPos=null,e._strokePoints=[],e._graphics=null,e._uiTransform=null,e}e(o,t);var r=o.prototype;return r.onLoad=function(){this._graphics=this.getComponent(U),this._uiTransform=this.getComponent(m),this._graphics||we.error("Board requires a Graphics component"),this._uiTransform||we.error("Board requires a UITransform component")},r.enableDrawing=function(t){this.toolBar?(this.toolBar.active=t,t?this.registerTouchEvents():this.unregisterTouchEvents()):we.error("Toolbar not assigned to Board")},r.setDrawerName=function(t){this.drawerNameLabel?this.drawerNameLabel.string=t:we.error("Drawer name label not assigned to Board")},r.registerTouchEvents=function(){this.node.on(h.EventType.MOUSE_DOWN,this.onStartDrawing,this),this.node.on(h.EventType.MOUSE_MOVE,this.onDrawing,this),this.node.on(h.EventType.MOUSE_UP,this.onStopDrawing,this),this.node.on(h.EventType.TOUCH_START,this.onStartDrawing,this),this.node.on(h.EventType.TOUCH_MOVE,this.onDrawing,this),this.node.on(h.EventType.TOUCH_END,this.onStopDrawing,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onStopDrawing,this),this.node.on(V.EventType.KEY_DOWN,this.onKeyDown,this)},r.unregisterTouchEvents=function(){this.node.off(h.EventType.MOUSE_DOWN,this.onStartDrawing,this),this.node.off(h.EventType.MOUSE_MOVE,this.onDrawing,this),this.node.off(h.EventType.MOUSE_UP,this.onStopDrawing,this),this.node.off(h.EventType.TOUCH_START,this.onStartDrawing,this),this.node.off(h.EventType.TOUCH_MOVE,this.onDrawing,this),this.node.off(h.EventType.TOUCH_END,this.onStopDrawing,this),this.node.off(h.EventType.TOUCH_CANCEL,this.onStopDrawing,this),this.node.off(V.EventType.KEY_DOWN,this.onKeyDown,this)},r.onStartDrawing=function(t){if(this._uiTransform){this._isDrawing=!0;var e=t.getUILocation(),n=this._uiTransform.convertToNodeSpaceAR(new g(e.x,e.y,0)),i=new K(n.x,n.y),o=this.normalizePositionWithBoard(i);this.isPointWithinBounds(o)&&(this._lastPos=i,this.addPointToStroke(o),this.setupGraphicsForDrawing())}},r.onDrawing=function(t){if(this._isDrawing&&this._lastPos&&this._uiTransform){var e=t.getUILocation(),n=this._uiTransform.convertToNodeSpaceAR(new g(e.x,e.y,0)),i=new K(n.x,n.y),o=this.normalizePositionWithBoard(i);this.isPointWithinBounds(o)&&(this.drawLine(this._lastPos,i),this._lastPos=i,this.addPointToStroke(o))}},r.onStopDrawing=function(){this._strokePoints.length>0&&oo.emit(ro,{strokePoints:this._strokePoints,brush:this.brush}),this._strokePoints=[],this._isDrawing=!1,this._lastPos=null},r.drawLine=function(t,e){this._graphics&&(this._graphics.moveTo(t.x,t.y),this._graphics.lineTo(e.x,e.y),this._graphics.stroke())},r.setupGraphicsForDrawing=function(){this._graphics&&(this._graphics.lineWidth=this.brush.width,this._graphics.strokeColor=this.brush.color)},r.normalizeAndAddPointToStroke=function(t){var e=this.normalizePositionWithBoard(t);this.isPointWithinBounds(e)?this.addPointToStroke(e):we.info("Discarding point outside bounds:",e)},r.addPointToStroke=function(t){this._strokePoints.push(Je.roundNumber(t.x,6)),this._strokePoints.push(Je.roundNumber(t.y,6))},r.isPointWithinBounds=function(t){return t.x>=0&&t.x<=1&&t.y>=0&&t.y<=1},r.onKeyDown=function(t){67===t.keyCode&&this.clear()},r.clear=function(){this._graphics&&this._graphics.clear()},r.getBrush=function(){return this.brush},r.setBrush=function(t){this.brush=t},r.setCurrentSketch=function(t){if(this.clear(),this._graphics){we.info("Setting current sketch with data:",t);for(var e,n=l(t);!(e=n()).done;){var i=e.value;we.info("Rendering stroke:",i),this.renderStroke(i)}}else we.error("Graphics component not found on the node.")},r.renderStroke=function(t){if(this._graphics){var e=null,n=t.strokePoints;this._graphics.strokeColor=new T(t.color),this._graphics.lineWidth=t.width;for(var i=0;i<n.length;i+=2){var o=n[i],r=n[i+1],a=new K(o,r),s=this.denormalizePositionWithBoard(a);we.info("Denormalized point:",s),e&&(this._graphics.moveTo(e.x,e.y),this._graphics.lineTo(s.x,s.y),this._graphics.stroke()),e=s}}},r.normalizePositionWithBoard=function(t){if(!this._uiTransform)return t;var e=this._uiTransform.contentSize;return 0===e.width||0===e.height?(we.error("Board size is zero. Cannot normalize positions."),t):new K(t.x/e.width,t.y/e.height)},r.denormalizePositionWithBoard=function(t){if(!this._uiTransform)return t;var e=this._uiTransform.contentSize;return new K(t.x*e.width,t.y*e.height)},o}(w)).prototype,"toolBar",[Ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zi=t(Ji.prototype,"drawerNameLabel",[Vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qi=t(Ji.prototype,"brush",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $i}}),ji=Ji))||ji);c._RF.pop(),c._RF.push({},"2536623fwZLFalSUSVpGnE4","Pictionary_GameManager",void 0);var so,lo,co,uo,ho,po,fo,go,yo,mo,bo,vo,_o,So,Co,wo,To=u.ccclass,Ro=u.executionOrder,Eo=new G,Po=new G;To("PictionaryGameManager")(to=Ro(-2)(((eo=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._roomStatus=vn.NONE,e._won=!1,e._handledGameOverCallbacks=!1,e._serverStateCopy=null,e.miloSDK=new it,e._gameStartTime=0,e}e(n,t);var i=n.prototype;return i.onLoad=function(){n._instance?this.node.destroy():(n._instance=this,this.registerEvents(),this.miloSDK.init({gameId:"Pictionary",debug:!0}),window.onKeyboardHeight=function(t){console.log("Keyboard height changed to:",t),Po.emit("keyboardHeight",{height:t})},this.sendGameLoaded())},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){this.unregisterEvents(),n._instance===this&&(n._instance=null)},i.registerEvents=function(){pn.on(Xe.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),fn.on(Xe.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},i.unregisterEvents=function(){pn.off(Xe.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),fn.off(Xe.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},i.sendGameLoaded=function(){var t={timestamp:Date.now()};console.log("Sending game loaded event"),this.miloSDK.gameLoaded(t)},i.sendGameStarted=function(){this._gameStartTime=Date.now();var t={timestamp:this._gameStartTime};console.log("Sending game started event"),this.miloSDK.gameStarted(t)},i.sendGameEnded=function(){var t={duration:this._gameStartTime>0?Date.now()-this._gameStartTime:0,hasWinningScreen:!1};console.log("Sending game ended event"),this.miloSDK.gameEnded(t)},i.onConnectionStateChange=function(t,e){switch(e){case qe.DISCONNECTED:this._roomStatus!==vn.END_GAME&&yn.Instance.reconnect();break;case qe.KICKED_OUT:}},i.onServerRoomStateChange=function(t){this.log("ServerRoomStateChange",t),this._serverStateCopy||(this._serverStateCopy=new Gn,this._serverStateCopy.copyFrom(t)),this.setRoomStatus(t.currentRoomStatus)},i.resetServerState=function(t){this._serverStateCopy||(this._serverStateCopy=new Gn),this._serverStateCopy.copyFrom(t)},i.setRoomStatus=function(t){if(this._roomStatus!==t){var e=this._roomStatus;this._roomStatus=t,this.OnRemoteRoomStatusChange(t),Eo.emit(Xe.ROOM_STATUS_CHANGE,e,t)}},i.GetMyPlayerData=function(){var t,e=yn.Instance.CurrentRoom.sessionId;return null==(t=this._serverStateCopy)?void 0:t.playersData.find((function(t){return t.sessionId===e}))},i.GetWinnerPlayerData=function(){return null},i.OnRemoteRoomStatusChange=function(t){switch(this.log("ServerRoomStatusChange to: "+vn[t]),t){case vn.NONE:case vn.WAITING_FOR_PLAYERS:case vn.COUNTDOWN:break;case vn.GAME_SIMULATION:this.sendGameStarted();break;case vn.END_GAME:this.sendGameEnded(),this.HandleGameOverCallbacks();break;default:console.warn("Unhandled room status: "+t)}},i.HandleGameOverCallbacks=function(){this._handledGameOverCallbacks?console.log("Already handled game over callbacks"):this._handledGameOverCallbacks=!0},o(n,null,[{key:"Instance",get:function(){return this._instance}}]),n}(w))._instance=null,to=eo))||to);c._RF.pop(),c._RF.push({},"c0d9aZCLaxBHYPIaeyY7pDo","Pictionary_ChatManager",void 0);var Io,Oo,No,Ao,Lo,Mo,Do,ko,zo,Go=u.ccclass,xo=u.property,Fo=(so=Go("PictionaryChatManager"),lo=xo({type:h}),co=xo({type:d}),uo=xo({type:f}),ho=xo({type:h}),po=xo({type:d}),fo=xo({type:v}),so(((wo=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"messagesContainer",mo,i(e)),n(e,"messageTextPrefab",bo,i(e)),n(e,"inputEditBox",vo,i(e)),n(e,"boardMessagesContainer",_o,i(e)),n(e,"boardMessageTextPrefab",So,i(e)),n(e,"sendButton",Co,i(e)),e._messages=[],e._containerHeightPercentage=.65,e._currentInputText="",e._keyboardHeight=0,e._inputContainerOriginalPosition=null,e}e(o,t);var r=o.prototype;return r.onLoad=function(){o.Instance=this,this.sendButton&&this.sendButton.node.on("click",this.onSendButtonClicked,this),this.inputEditBox&&(this.inputEditBox.tabIndex=0,this.inputEditBox.node.on("editing-return",this.onSendButtonClicked,this),this.inputEditBox.node.on("text-changed",this.onTextChanged,this)),this.inputEditBox&&(this._inputContainerOriginalPosition=new g(this.inputEditBox.node.position.x,this.inputEditBox.node.position.y,this.inputEditBox.node.position.z)),Po.on("keyboardHeight",this.onKeyboardHeightChanged,this)},r.onDestroy=function(){Po.off("keyboardHeight",this.onKeyboardHeightChanged,this)},r.onKeyboardHeightChanged=function(t){this.setKeyboardHeight(t.height)},r.setKeyboardHeight=function(t){this._keyboardHeight=t,this.updateInputContainerPosition()},r.updateInputContainerPosition=function(){if(this.inputEditBox){var t=this.inputEditBox.node.getComponent(M);if(t||(t=this.inputEditBox.node.addComponent(M)),this._keyboardHeight>0){var e,n=((null==(e=this.inputEditBox.node.getComponent(m))?void 0:e.height)||0)/2;t.bottom=this._keyboardHeight+n-30,console.log("Setting widget bottom to: ",this._keyboardHeight+n," (keyboard height: ",this._keyboardHeight," + half container height: ",n,")")}else t.bottom=0}},r.getKeyboardHeight=function(){return this._keyboardHeight},r.onTextChanged=function(){this._currentInputText=this.inputEditBox.string},r.showBoardToast=function(t,e,n){var i=this,o=b(this.boardMessageTextPrefab),r=this.resolveBoardRichText(o);r?this.configureBoardRichText(r,e,n,t.message):console.warn("RichText component not found on board message prefab."),this.boardMessagesContainer.addChild(o),o.setSiblingIndex(0);var a=o.getComponent(y)||o.addComponent(y);a.opacity=0;var s=this.boardMessagesContainer.getComponent(j);s&&s.updateLayout(),this.scheduleOnce((function(){i.sizeBoardMessageToText(o)?i.playBoardToastAnimation(o,a):i.scheduleOnce((function(){i.sizeBoardMessageToText(o),i.playBoardToastAnimation(o,a)}),0)}),0)},r.resolveBoardRichText=function(t){var e=t.getChildByName("Message");return e?e.getComponent(J)||null:t.getComponent(J)||null},r.configureBoardRichText=function(t,e,n,i){t.maxWidth=0,t.string=e?"<color=#4bb543><b>"+n+" guessed the word!</b></color>":"<color=#000000><b>"+n+": </b></color><color=#000000>"+i+"</color>"},r.sizeBoardMessageToText=function(t){var e=t.getComponent(m),n=t.getComponent(S),i=t.getChildByName("Message"),o=i?i.getComponent(m):null,r=this.resolveBoardRichText(t);if(!(e&&n&&o&&r))return!0;var a=t.getPosition().y;if(400!==r.maxWidth&&o.width>400)return r.maxWidth=400,!1;var s=Math.min(o.width,400),l=e.height,c=o.height+12;n.sizeMode=S.SizeMode.CUSTOM,n.type=S.Type.SLICED,e.setContentSize(s,c);var u=n.node.getComponent(m);u&&u.setContentSize(s,c);var h=this.boardMessagesContainer.getComponent(j);h&&h.updateLayout();var d=c-l;if(0!==d){var p,f=null!=(p=e.anchorY)?p:.5;t.setPosition(new g(t.getPosition().x,a+d*f,t.getPosition().z))}return!0},r.playBoardToastAnimation=function(t,e){var n=this.boardMessagesContainer.getComponent(m),i=t.getComponent(m),o=n?n.width:800,r=i?i.width:400,a=t.getPosition(),s=a.x,l=a.y,c=o/2+r/2+10,u=s-14;t.setPosition(new g(c,l,0)),e.opacity=255,C(t).to(.3,{position:new g(u,l,0)},{easing:"quadOut"}).to(.12,{position:new g(s,l,0)},{easing:"sineIn"}).delay(3).call((function(){C(e).to(.4,{opacity:0}).call((function(){t.parent&&t.removeFromParent(),t.destroy()})).start()})).start()},r.calculateMessageLimit=function(){var t=this.messagesContainer.getComponent(m);if(!t)return 5;var e=t.height*this._containerHeightPercentage,n=b(this.messageTextPrefab),i=n.getComponent(m),o=i?i.height:30;n.destroy();var r=Math.floor(e/o);return Math.max(r,3)},r.addChatMessage=function(t,e){void 0===e&&(e=!1);var n=b(this.messageTextPrefab),i=xa.Instance.getPlayerName(t.playerId),o=n.getComponent(J);if(o){var r=this.messagesContainer.getComponent(m);r&&(o.maxWidth=r.width),o.string=e?"<color=#4bb543>"+i+" guessed the word!</color>":"<color=#afafaf>"+i+"</color> :  "+t.message}else console.warn("RichText component not found on the message prefab.");this.messagesContainer.addChild(n),this.boardMessagesContainer&&this.boardMessageTextPrefab&&this.showBoardToast(t,e,i),this._messages.push(t.message);for(var a=this.calculateMessageLimit();this._messages.length>a;){this._messages.shift();var s=this.messagesContainer.children[0];s&&(this.messagesContainer.removeChild(s),s.destroy())}},r.onSendButtonClicked=function(){if(this.inputEditBox){var t=this._currentInputText.trim();t.length>0&&(this.inputEditBox.string="",console.log("sending message to server: ",t),this._currentInputText="",xa.Instance.sendChatMessageToServer(t),this.inputEditBox.blur())}else console.warn("Input EditBox is not assigned.")},o}(w)).Instance=null,mo=t((yo=wo).prototype,"messagesContainer",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bo=t(yo.prototype,"messageTextPrefab",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vo=t(yo.prototype,"inputEditBox",[uo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_o=t(yo.prototype,"boardMessagesContainer",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),So=t(yo.prototype,"boardMessageTextPrefab",[po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Co=t(yo.prototype,"sendButton",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),go=yo))||go);c._RF.pop(),c._RF.push({},"19d4a1iKXdCv7Cy0oq7pZ3h","Pictionary_WordManager",void 0);var Ho,Bo,Wo,Uo,Vo,Ko,jo,Jo=u.ccclass,Yo=u.property,Zo=(Io=Jo("PictionaryWordManager"),Oo=Yo(p),No=Yo(h),Ao=Yo(p),Io((Do=t((Mo=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"wordLabel",Do,i(e)),n(e,"wordContainer",ko,i(e)),n(e,"wordLengthLabel",zo,i(e)),e.currentWord="",e.isWordVisible=!1,e.revealedLetters=new Set,e}e(o,t);var r=o.prototype;return r.setWordVisible=function(t){this.isWordVisible=t,this.updateWordDisplay()},r.setWord=function(t){this.currentWord=t.toUpperCase(),this.currentWord.length>0&&(this.wordLengthLabel.string=this.currentWord.length.toString()),this.revealedLetters.clear(),this.updateWordDisplay()},r.clearWord=function(){this.setWord("")},r.revealLetter=function(t){t>=0&&t<this.currentWord.length&&(this.revealedLetters.add(t),this.updateWordDisplay(),this.playShakeAnimation())},r.playShakeAnimation=function(){if(this.wordContainer){var t=this.wordContainer.position.clone(),e=this.wordContainer.scale.clone(),n=.5;C(this.wordContainer).sequence(C().sequence(C().to(n/6,{position:new g(t.x+10,t.y,t.z)}),C().to(n/6,{position:new g(t.x-10,t.y,t.z)}),C().to(n/6,{position:new g(t.x+10,t.y,t.z)}),C().to(n/6,{position:new g(t.x-10,t.y,t.z)}),C().to(n/6,{position:t})),C().to(.125,{scale:new g(1.2,1.2,1)}),C().to(.125,{scale:e})).start()}},r.updateWordDisplay=function(){var t=this;if(this.isWordVisible)this.wordLabel.string=this.currentWord;else{var e=this.currentWord.split("").map((function(e,n){return t.revealedLetters.has(n)?e:"-"}));this.wordLabel.string=e.join("")}},o}(w)).prototype,"wordLabel",[Oo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ko=t(Mo.prototype,"wordContainer",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zo=t(Mo.prototype,"wordLengthLabel",[Ao],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lo=Mo))||Lo);c._RF.pop(),c._RF.push({},"70acfH8+KZLKILGN50TNq2E","Pictionary_Menu",void 0);var Qo,Xo,qo,$o,tr,er,nr,ir,or,rr,ar,sr,lr,cr,ur,hr,dr,pr,fr,gr,yr,mr,br,vr=u.ccclass,_r=u.property,Sr=(Ho=vr("PictionaryMenu"),Bo=_r({type:h}),Wo=_r({type:Y}),Ho((Ko=t((Vo=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"content",Ko,i(e)),n(e,"menuName",jo,i(e)),e.isOpened=!1,e}e(o,t);var r=o.prototype;return r.onLoad=function(){null==this.content&&(this.content=this.node.getChildByName("Content"))},r.Open=function(){this.content.active=!0,this.isOpened=!0},r.Close=function(){this.content.active=!1,this.isOpened=!1},r.initialize=function(){we.info("Menu initialize called")},o}(w)).prototype,"content",[Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jo=t(Vo.prototype,"menuName",[Wo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uo=Vo))||Uo);c._RF.pop(),c._RF.push({},"f9e81/u9dpJo6M46HQM5h+S","Pictionary_AudioManager",void 0);var Cr,wr,Tr,Rr,Er,Pr,Ir,Or,Nr,Ar,Lr,Mr,Dr,kr=u.ccclass,zr=u.property,Gr=(Qo=kr("PictionaryAudioClipData"),Xo=zr({type:Y}),qo=zr({type:Z}),$o=zr({type:W}),tr=zr({type:W}),er=zr({type:N}),Qo((or=t((ir=function(){function t(){n(this,"name",or,this),n(this,"audioClips",rr,this),n(this,"delayBetweenClips",ar,this),n(this,"volume",sr,this),n(this,"loop",lr,this),this.isLoopPlaying=void 0,this.lastPlayedTime=0,this.clipIndex=0}var e=t.prototype;return e.GetClip=function(){var t=this.audioClips[this.clipIndex];if(this.clipIndex=(this.clipIndex+1)%this.audioClips.length,this.CanPlay())return this.lastPlayedTime=Date.now(),t},e.CanPlay=function(){return Date.now()-this.lastPlayedTime>1e3*this.delayBetweenClips},t}()).prototype,"name",[Xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rr=t(ir.prototype,"audioClips",[qo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ar=t(ir.prototype,"delayBetweenClips",[$o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sr=t(ir.prototype,"volume",[tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),lr=t(ir.prototype,"loop",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=ir))||nr),xr=(cr=kr("PictionaryAudioManager"),ur=zr({type:Gr}),hr=zr({type:Q}),dr=zr({type:d}),cr(((br=function(t){function r(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"audioClipData",gr,i(e)),n(e,"backgroundAudioSource",yr,i(e)),e.localStorageAudioEnabledKey="SNLAudioEnabled",n(e,"audioSourcePrefab",mr,i(e)),e.audioSources=[],e._isAudioEnabled="true",e}e(r,t);var a=r.prototype;return a.onLoad=function(){r.instance=this,this.ReadAudioEnabledFromLocalStorage()},a.onDestroy=function(){r.instance===this&&(r.instance=null)},a.start=function(){this.SetAudioEnabled(this.IsAudioEnabled)},a.playSound=function(t){if("false"!=this.IsAudioEnabled){var e=this.audioClipData.find((function(e){return e.name==t}));if(null!=e){var n=e.GetClip();if(n){if(e.isLoopPlaying)return;var i=this.getEmptyAudioSource();i.loop=e.loop,e.isLoopPlaying=e.loop,i.volume=e.volume,i.clip=n,e.loop?i.play():i.playOneShot(n)}else console.warn("Audio Clip is in use ",t)}}},a.stopSound=function(t){var e=this.audioClipData.find((function(e){return e.name==t}));e?this.audioSources.forEach((function(t){t.clip==e.audioClips[e.clipIndex]&&(e.isLoopPlaying=!1,t.stop())})):console.warn("Audio Clip not found for ",t)},a.stopAllSounds=function(){this.audioSources.forEach((function(t){t.stop()})),this.audioClipData.forEach((function(t){t.isLoopPlaying=!1}))},a.ToggleAudio=function(){"true"==this.IsAudioEnabled?this.SetAudioEnabled("false"):this.SetAudioEnabled("true")},a.SetAudioEnabled=function(t){this._isAudioEnabled=t,this.UpdateBackgroundMusic(),this.WriteAudioEnabledToLocalStorage()},a.WriteAudioEnabledToLocalStorage=function(){P.localStorage.setItem(this.localStorageAudioEnabledKey,this.IsAudioEnabled)},a.ReadAudioEnabledFromLocalStorage=function(){var t=P.localStorage.getItem(this.localStorageAudioEnabledKey);this._isAudioEnabled=null==t?"true":t},a.UpdateBackgroundMusic=function(){var t,e;"true"==this.IsAudioEnabled?null==(t=this.backgroundAudioSource)||t.play():null==(e=this.backgroundAudioSource)||e.stop()},a.printAllPlayingAudioSources=function(){this.audioSources.forEach((function(t){t.playing&&console.log("Playing audio source: ",t.playing,t.clip.name,t.uuid)}))},a.getEmptyAudioSource=function(){var t=this.audioSources.find((function(t){return!t.playing}));return null==t&&(t=this.createAudioSource()),t},a.createAudioSource=function(){var t=b(this.audioSourcePrefab).getComponent(Q);return t.node.setParent(this.node),this.audioSources.push(t),console.log("==== Created new audio source: ",this.audioSources.length),t},o(r,[{key:"IsAudioEnabled",get:function(){return this._isAudioEnabled}}]),r}(w)).instance=null,gr=t((fr=br).prototype,"audioClipData",[ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yr=t(fr.prototype,"backgroundAudioSource",[hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mr=t(fr.prototype,"audioSourcePrefab",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pr=fr))||pr);c._RF.pop(),c._RF.push({},"0dbc7fn9N1BfbY/g9u3z50t","Pictionary_WordSelectionMenu",void 0);var Fr=u.ccclass,Hr=u.property,Br=new G;Cr=Fr("PictionaryWordSelectionMenu"),wr=Hr({type:d}),Tr=Hr({type:h}),Rr=Hr({type:h}),Er=Hr({type:h}),Pr=Hr({type:p}),Cr((Nr=t((Or=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"uiWordSelectBoxPrefab",Nr,i(e)),n(e,"wordSelectionRoot",Ar,i(e)),n(e,"wordsListNode",Lr,i(e)),n(e,"othersChoosingRoot",Mr,i(e)),n(e,"otherChoosingLabel",Dr,i(e)),e._isSelected=!1,e._isMyTurn=!1,e.originalOthersChoosingPosition=null,e}e(o,t);var r=o.prototype;return r.onLoad=function(){this.originalOthersChoosingPosition=this.othersChoosingRoot.position.clone()},r.Open=function(){we.info("[WordSelectionMenu] Opening"),this._isSelected=!1,t.prototype.Open.call(this)},r.Close=function(){we.info("[WordSelectionMenu] Closing"),this.clearWordList(),t.prototype.Close.call(this)},r.initialize=function(){t.prototype.initialize.call(this),this.originalOthersChoosingPosition=this.othersChoosingRoot.position.clone()},r.setWordList=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=b(this.uiWordSelectBoxPrefab);i.getComponentInChildren(p).string=n,i.setParent(this.wordsListNode),i.on(h.EventType.TOUCH_END,this.onWordSelected.bind(this,n))}},r.onWordSelected=function(t){this._isSelected||(this._isSelected=!0,we.info("Selected word:",t),Br.emit("WORD_SELECTED",t),this.Close())},r.clearWordList=function(){this.wordsListNode.removeAllChildren()},r.setOpponentSelectingMessage=function(t){this.otherChoosingLabel.string=t+" is picking a word...",this.animateOthersChoosingRoot()},r.animateOthersChoosingRoot=function(){var t=I.getVisibleSize().width+.75*this.othersChoosingRoot.getComponent(m).width;this.othersChoosingRoot.setPosition(t,this.originalOthersChoosingPosition.y,this.originalOthersChoosingPosition.z);var e=this.othersChoosingRoot.getComponent(y);e||(e=this.othersChoosingRoot.addComponent(y)),e.opacity=0;var n=C(this.othersChoosingRoot).to(.8,{position:this.originalOthersChoosingPosition},{easing:"cubicOut"}),i=C(e).to(.6,{opacity:255},{easing:"cubicIn"}).call((function(){xr.instance.playSound("RoundStart")}));n.start(),i.start()},r.setMyTurn=function(t){this._isMyTurn=t;var e=xa.Instance.getCurrentDrawingPlayer();this._isMyTurn?(this.othersChoosingRoot.active=!1,this.wordSelectionRoot.active=!0):(this.othersChoosingRoot.active=!0,this.setOpponentSelectingMessage(e.playerName),this.wordSelectionRoot.active=!1)},o}(Sr)).prototype,"uiWordSelectBoxPrefab",[wr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ar=t(Or.prototype,"wordSelectionRoot",[Tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lr=t(Or.prototype,"wordsListNode",[Rr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mr=t(Or.prototype,"othersChoosingRoot",[Er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dr=t(Or.prototype,"otherChoosingLabel",[Pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ir=Or));c._RF.pop(),c._RF.push({},"9c2aaP87iNEH5uaEgVOjEiH","Pictionary_Tool",void 0);var Wr,Ur,Vr,Kr,jr,Jr,Yr,Zr=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.initialize=function(t,e){},i.select=function(){},i.deselect=function(){},n}(w);c._RF.pop(),c._RF.push({},"7f913t8CX1NarPOh/R463ER","Pictionary_Toolbar",void 0);var Qr,Xr,qr,$r,ta,ea,na,ia,oa,ra,aa=u.ccclass,sa=u.property,la=(Wr=aa("PictionaryToolbar"),Ur=sa({type:ao}),Vr=sa({type:[h]}),Wr((Jr=t((jr=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"board",Jr,i(e)),n(e,"tools",Yr,i(e)),e.currentTool=null,e}e(o,t);var r=o.prototype;return r.initialize=function(t){var e=this;this.board=t,this.tools.forEach((function(n){n.getComponent(Zr).initialize(t,e.onSelectTool.bind(e))})),this.currentTool=this.tools[0].getComponent(Zr),this.currentTool.select()},r.onSelectTool=function(t){var e;we.debug("-----------onSelectTool"),we.debug("Selected tool:",t),we.debug("Toolbar instance:",this),null==(e=this.currentTool)||e.deselect(),this.currentTool=t,this.currentTool.select()},o}(w)).prototype,"board",[Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yr=t(jr.prototype,"tools",[Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Kr=jr))||Kr);c._RF.pop(),c._RF.push({},"88ce2PWVEdG678AWRX5tJ0D","Pictionary_UIManager",void 0);var ca,ua,ha,da,pa,fa,ga,ya,ma,ba,va,_a,Sa,Ca,wa,Ta,Ra,Ea,Pa,Ia,Oa,Na=u.ccclass,Aa=u.property,La=(Qr=Na("PictionaryUIManager"),Xr=Aa({type:R}),qr=Aa({type:[Sr]}),$r=Aa({type:h}),Qr(((ra=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"uiCamera",na,i(e)),n(e,"menus",ia,i(e)),n(e,"flashNode",oa,i(e)),e.showMuteButton=!0,e.showResultScreen=!0,e.showFAQ=!0,e}e(o,t);var r=o.prototype;return r.onLoad=function(){o.instance=this,pn.on(Xe.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),Eo.on(Xe.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),gn.on(Xe.SERVER_MESSAGE,this.onServerMessage,this),Ga.on(Xe.GAME_STATE_CHANGE,this.onGameStateChange,this)},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){pn.off(Xe.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),Eo.off(Xe.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),gn.off(Xe.SERVER_MESSAGE,this.onServerMessage,this),Ga.off(Xe.GAME_STATE_CHANGE,this.onGameStateChange,this),o.instance===this&&(o.instance=null)},r.start=function(){},r.OpenHowToPlay=function(){this.OpenMenu("HowToPlay")},r.OpenMenu=function(t){for(var e=0;e<this.menus.length;e++)this.menus[e].menuName==t&&this.menus[e].Open()},r.CloseMenu=function(t){for(var e=0;e<this.menus.length;e++)this.menus[e].menuName==t&&this.menus[e].Close()},r.GetMenu=function(t){for(var e=0;e<this.menus.length;e++)if(this.menus[e].menuName==t)return this.menus[e];return null},r.CloseAllMenus=function(){for(var t=0;t<this.menus.length;t++)this.menus[t].Close()},r.onConnectionStateChange=function(t,e){switch(console.log("[UIManager] Connection state changed: ",e),e){case qe.CONNECTING:this.CloseAllMenus(),this.OpenMenu("InGameMenu")}},r.onGameStateChange=function(t){switch(t){case An.START_ROUND:this.handleStartRoundState();break;case An.DRAWING:this.handleDrawingState();break;case An.WORD_SELECTION:this.handleWordSelectionState();break;case An.DRAWING_RESULTS:this.handleDrawingResultsState();break;case An.END_GAME:this.handleEndGameState()}},r.handleStartRoundState=function(){console.log("[UIManager] Handling start round state"),this.CloseMenu("DrawingResultsMenu");var t=this.GetMenu("StartRoundMenu"),e=xa.Instance.getRoomState().currentRound;t.setRoundMessage(e),this.OpenMenu("StartRoundMenu")},r.handleDrawingState=function(){console.log("[UIManager] Handling drawing state"),this.CloseMenu("WordSelectionMenu")},r.handleWordSelectionState=function(){console.log("[UIManager] Handling word selection state"),this.CloseMenu("StartRoundMenu"),this.CloseMenu("DrawingResultsMenu");var t=this.GetMenu("WordSelectionMenu"),e=xa.Instance.isMyTurn();t.setMyTurn(e),this.OpenMenu("WordSelectionMenu")},r.handleDrawingResultsState=function(){console.log("[UIManager] Handling drawing results state");var t=this.GetMenu("DrawingResultsMenu");t.setCorrectWordMessage(xa.Instance.getCorrectWord()),console.log("Player scores: ",xa.Instance.getPlayerScores()),t.setPlayerScores(xa.Instance.getPlayerScores()),this.OpenMenu("DrawingResultsMenu")},r.handleEndGameState=function(){console.log("[UIManager] Handling end game state"),console.log("[UIManager] End Game State handling in UI Manager"),this.CloseAllMenus(),console.log("[UIManager] Opening end game menu"),this.OpenMenu("EndGameMenu")},r.onServerMessage=function(t,e){switch(t){case Kn.WORDS_LIST:var n=this.GetMenu("WordSelectionMenu"),i=JSON.parse(e);this.log("word choices",i),n.setWordList(i)}},r.onRoomStatusChange=function(t,e){var n=this;switch(console.log("[UIManager] Room status changed: ",e),e){case vn.WAITING_FOR_PLAYERS:console.log("Opening waiting screen"),this.OpenMenu("WaitingScreen");break;case vn.COUNTDOWN:console.log("Opening countdown screen"),this.CloseAllMenus(),this.OpenMenu("CountDownScreen");break;case vn.GAME_SIMULATION:this.CloseMenu("CountDownScreen"),this.scheduleOnce((function(){n.OpenMenu("InGameMenu")}),1);break;default:console.warn("[UIManager] Unhandled RoomStatus: "+e)}},r.playFlashEffect=function(t){var e=this;void 0===t&&(t=new T(197,8,8)),this.flashNode.active=!0;var n=this.flashNode.getComponent(S);n?(n.color=new T(t.r,t.g,t.b,0),C(n).to(.2,{color:new T(t.r,t.g,t.b,255)}).delay(.05).to(.3,{color:new T(t.r,t.g,t.b,0)}).call((function(){e.flashNode.active=!1})).start()):console.error("No Sprite component found on flashNode")},o}(w)).instance=null,na=t((ea=ra).prototype,"uiCamera",[Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ia=t(ea.prototype,"menus",[qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oa=t(ea.prototype,"flashNode",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ta=ea))||ta);c._RF.pop(),c._RF.push({},"6529e0uf6BOEL7N9DSBjlZu","PictionaryGameHandler",void 0);var Ma,Da=u.ccclass,ka=u.property,za=u.executionOrder,Ga=new G,xa=(ca=Da("PictionaryGameHandler"),ua=za(-1),ha=ka({type:d}),da=ka({type:h}),pa=ka({type:[Bi]}),fa=ka({type:ao}),ga=ka({type:Zo}),ya=ka({type:la}),ma=ka({type:Nn}),ba=ka({type:p}),ca(va=ua(((Oa=function(t){function r(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"playerPrefab",Sa,i(e)),n(e,"playersContainer",Ca,i(e)),n(e,"players",wa,i(e)),n(e,"board",Ta,i(e)),n(e,"wordManager",Ra,i(e)),n(e,"toolBar",Ea,i(e)),n(e,"timer",Pa,i(e)),n(e,"currentRoundsLabel",Ia,i(e)),e._currentRoomState=void 0,e.roomSettings=void 0,e.myPlayerNumber=-1,e.hasReconnected=!1,e.localPlayerId="",e}e(r,t);var a=r.prototype;return a.onLoad=function(){r._instance=this,this.registerNetworkEvents(),this.registerGameEvents(),this.handleBrowserClose(),this.toolBar.initialize(this.board)},a.onDestroy=function(){this.cleanup()},a.cleanup=function(){this.unregisterNetworkEvents(),this.unregisterGameEvents(),this.unregisterBrowserClose(),r._instance===this&&(r._instance=null)},a.initialize=function(t){this.roomSettings=t},a.registerNetworkEvents=function(){pn.on(Xe.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),fn.on(Xe.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),gn.on(Xe.SERVER_MESSAGE,this.onServerMessage,this),Br.on("WORD_SELECTED",this.onWordSelected,this),oo.on(ro,this.onStrokeCompleted,this)},a.registerGameEvents=function(){X.on(q.EVENT_HIDE,this.onGameHide,this),X.on(q.EVENT_SHOW,this.onGameShow,this),X.on(q.EVENT_RESTART,this.onGameRestart,this),X.on(q.EVENT_CLOSE,this.onGameClose,this)},a.handleBrowserClose=function(){window.addEventListener("beforeunload",this.onGameClose.bind(this))},a.unregisterNetworkEvents=function(){pn.off(Xe.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),fn.off(Xe.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),gn.off(Xe.SERVER_MESSAGE,this.onServerMessage,this),Br.off("WORD_SELECTED",this.onWordSelected,this),oo.off(ro,this.onStrokeCompleted,this)},a.unregisterGameEvents=function(){X.off(q.EVENT_HIDE,this.onGameHide,this),X.off(q.EVENT_SHOW,this.onGameShow,this),X.off(q.EVENT_RESTART,this.onGameRestart,this),X.off(q.EVENT_CLOSE,this.onGameClose,this)},a.unregisterBrowserClose=function(){window.removeEventListener("beforeunload",this.onGameClose.bind(this))},a.onWordSelected=function(t){yn.Instance.sendMessage(Kn.SELECTED_WORD,t)},a.onServerMessage=function(t,e){switch(we.info("Server message received:",t,e),t){case Kn.CHAT_MESSAGE:var n=JSON.parse(e);this.log("Chat message received:",n),Fo.Instance.addChatMessage(n);var i=this.getPlayer(n.playerId);i&&i.showMessageNotification(n.message);break;case Kn.GUESSED_WORD:we.info("Guessed word received:",e);var o=JSON.parse(e),r=this.getPlayer(o.playerId);r.setGuessedAnswer(!0),r.userId===this.localPlayerId&&(this.wordManager.setWordVisible(!0),La.instance.playFlashEffect(new T(0,255,0)),xr.instance.playSound("CorrectAnswer")),Fo.Instance.addChatMessage({playerId:o.playerId,message:"guessed the word"},!0),this.log("Guessed word received:",e);break;case Kn.REVEAL_LETTER:we.info("Reveal letter received:",e);var a=JSON.parse(e);this.wordManager.revealLetter(a.index);break;default:this.log("Unhandled server message type:",t)}},a.onServerRoomStateChange=function(t){this._currentRoomState?(this._currentRoomState.copyFrom(t),this.handleRoomStateUpdate(this._currentRoomState),this._currentRoomState.currentRoomStatus!==vn.END_GAME&&(this.hasReconnected?this.handleReconnection(this._currentRoomState):this.sendRoomStateToAllPlayers(this._currentRoomState))):this.initializeRoomState(t)},a.initializeRoomState=function(t){this._currentRoomState=new Gn,this._currentRoomState.copyFrom(t),this.initializePlayers(this._currentRoomState),this._currentRoomState.currentGameState!==An.NONE&&(console.log("Joined game in progress"),this.sendReconnectionStateToAllPlayers(this._currentRoomState))},a.handleEndGameState=function(){this.log("Game Over - State Change:",this._currentRoomState)},a.handleReconnection=function(t){this.log("Reconnection State Change:",t),this.sendReconnectionStateToAllPlayers(t),this.hasReconnected=!1},a.handleRoomStateUpdate=function(t){this.log("Room State Update",t.currentGameState);var e=t.inputPayload.inputType;e===Kn.SET_STATE?this.handleSetState(t):e!==Kn.DRAW_STROKE||this.isMyTurn()||this.board.setCurrentSketch(t.drawingSketchData)},a.handleSetState=function(t){if(this.log("Game State Change",An[t.currentGameState]),this.board.enableDrawing(!1),this.timer.reset(),this.timer.stopTimer(),this.players.forEach((function(t){t.drawingIcon&&(t.drawingIcon.active=!1)})),t.currentGameState===An.START_ROUND)this.updateCurrentRoundsLabel(t.currentRound,t.roomSettings.rounds);else if(t.currentGameState===An.DRAWING){we.info("Current state: DRAWING");var e=this.isMyTurn(),n=this.getCurrentDrawingPlayer(),i=n.playerName;e&&(i="You"),this.board.enableDrawing(e),this.board.setDrawerName(i),this.wordManager.setWordVisible(e),this.wordManager.setWord(t.selectedWord),n&&n.drawingIcon&&(n.drawingIcon.active=!0),this.timer.setStartTime(t.roomSettings.drawingTimeLimit),this.timer.startTimer()}else t.currentGameState===An.WORD_SELECTION?(this.board.setDrawerName(""),this.board.clear(),this.players.forEach((function(t){t.resetState()}))):t.currentGameState===An.DRAWING_RESULTS&&this.updatePlayerScores();Ga.emit(Xe.GAME_STATE_CHANGE,t.currentGameState)},a.initializePlayers=function(t){var e=this;this.log("Initializing "+t.playersData.length+" players"),this.assignMyPlayerNumber(t),t.playersData.forEach((function(n,i){e.createPlayer(i).initialize(t,e.board)}))},a.sendChatMessageToServer=function(t){if(""!==this.localPlayerId&&!this.isMyTurn()){var e={playerId:this.players[this.myPlayerNumber].userId,message:t};yn.Instance.sendMessage(Kn.CHAT_MESSAGE,JSON.stringify(e))}},a.onConnectionStateChange=function(t,e){e===qe.DISCONNECTED?this.onGameDisconnect():t===qe.RECONNECTING&&e===qe.JOINED_ROOM&&(this.hasReconnected=!0,this.onGameReconnect())},a.updatePlayerScores=function(){var t=this;this.players.forEach((function(t){t.crownImage&&(t.crownImage.active=!1)}));for(var e=[].concat(this._currentRoomState.playersData).sort((function(t,e){return e.score-t.score})),n=new Map,i=1,o=0;o<e.length;o++){var r=e[o];o>0&&e[o-1].score!==r.score&&(i=o+1),n.set(r.userId,i)}this._currentRoomState.playersData.forEach((function(e){var i=t.players.find((function(t){return t.userId===e.userId}));if(i&&i.node){i.setScore(e.score);var o=n.get(e.userId)||1;i.setRank(o),1===i.getRank()&&i.crownImage&&(i.crownImage.active=!0)}}))},a.sendStrokeDataToServer=function(t,e){we.info("Sending stroke data to server:",{strokePoints:t,color:e.color.toHEX(),width:e.width});var n={strokePoints:t,color:e.color.toHEX(),width:e.width},i=JSON.stringify(n);we.info("Serialized stroke data:",i),yn.Instance.sendMessage(Kn.DRAW_STROKE,i)},a.sendRoomStateToAllPlayers=function(t){},a.sendReconnectionStateToAllPlayers=function(t){we.info("Reconnection state sent to all players")},a.createPlayer=function(t){var e=b(this.playerPrefab);e.setParent(this.playersContainer);var n=e.getComponent(Bi);return n.index=t,this.players.push(n),n},a.updateCurrentRoundsLabel=function(t,e){this.currentRoundsLabel.string=t+"/"+e},a.getRoomState=function(){return this._currentRoomState},a.getCorrectWord=function(){return this._currentRoomState.selectedWord},a.getPlayerScores=function(){return this._currentRoomState.currentRoundScores},a.getPlayerTotalScores=function(){return this._currentRoomState.playersData.map((function(t){var e=new kn;return e.userId=t.userId,e.score=t.score,e}))},a.isMyTurn=function(){return this._currentRoomState.drawingPlayerIndex===this.myPlayerNumber},a.assignMyPlayerNumber=function(t){var e=this;t.playersData.forEach((function(t,n){t.sessionId===yn.Instance.CurrentRoom.sessionId&&(e.myPlayerNumber=n,e.localPlayerId=t.userId)}))},a.getPlayer=function(t){return this.log("Retrieving Player "+t),this.players.find((function(e){return e.userId===t}))},a.getCurrentDrawingPlayer=function(){return this.players[this._currentRoomState.drawingPlayerIndex]},a.allPlayersFinished=function(){return!1},a.anyPlayerFinished=function(){return!1},a.getPlayerName=function(t){var e=this.players.find((function(e){return e.userId===t}));return e?Bi.getTruncatedName(e.playerName):t},a.onGameHide=function(){we.info("Game hidden"),$.stopAll()},a.onGameShow=function(){we.info("Game shown")},a.onGameRestart=function(){we.info("Game restarted")},a.onGameClose=function(){we.info("Game closed")},a.onGameDisconnect=function(){we.info("Game disconnected")},a.onGameReconnect=function(){we.info("Game reconnected")},a.onStrokeCompleted=function(t){this.sendStrokeDataToServer(t.strokePoints,t.brush)},o(r,null,[{key:"Instance",get:function(){return this._instance}}]),r}(w))._instance=void 0,Sa=t((_a=Oa).prototype,"playerPrefab",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ca=t(_a.prototype,"playersContainer",[da],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=t(_a.prototype,"players",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ta=t(_a.prototype,"board",[fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ra=t(_a.prototype,"wordManager",[ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ea=t(_a.prototype,"toolBar",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pa=t(_a.prototype,"timer",[ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ia=t(_a.prototype,"currentRoundsLabel",[ba],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),va=_a))||va)||va);c._RF.pop(),c._RF.push({},"c3d26wnPGZC0qXO4+GKN77y","Pictionary_Logger",void 0),c._RF.pop(),c._RF.push({},"6d5cflyQaJNIZBlVSNxUZHz","Pictionary_LoggerInitializer",void 0);var Fa,Ha,Ba,Wa,Ua,Va,Ka,ja,Ja,Ya=u.ccclass,Za=u.executionOrder;Ya("PictionaryLoggerInitializer")(Ma=Za(-1e3)(Ma=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoad=function(){P.isNative?(we.setLevel(Ce.Info),we.setProductionMode(!0)):(we.setLevel(Ce.Debug),we.setProductionMode(!1)),this.log("LoggerInitializer: Logging extensions are ready to use!")},n}(w))||Ma);c._RF.pop(),c._RF.push({},"97438WKb25MaK0d5cM2jck/","Pictionary_Eraser",void 0);var Qa,Xa,qa,$a,ts,es,ns,is,os,rs=u.ccclass,as=u.property;Fa=rs("PictionaryEraser"),Ha=as({type:S}),Ba=as({type:$i}),Fa((Va=t((Ua=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).board=void 0,n(e,"bg",Va,i(e)),n(e,"activeColor",Ka,i(e)),n(e,"inactiveColor",ja,i(e)),n(e,"brush",Ja,i(e)),e}e(o,t);var r=o.prototype;return r.initialize=function(t,e){var n=this;this.board=t,this.bg.node.on(h.EventType.TOUCH_START,(function(){return e(n)}))},r.select=function(){this.bg.color=this.activeColor,this.board.setBrush(this.brush)},r.deselect=function(){this.bg.color=this.inactiveColor},o}(Zr)).prototype,"bg",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ka=t(Ua.prototype,"activeColor",[as],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(1,0,0,1)}}),ja=t(Ua.prototype,"inactiveColor",[as],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(1,1,1,1)}}),Ja=t(Ua.prototype,"brush",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $i}}),Wa=Ua));c._RF.pop(),c._RF.push({},"3316dgZ+RhCdqCfhiQk2ir0","Pictionary_Pencil",void 0);var ss,ls,cs,us,hs,ds=u.ccclass,ps=u.property;Qa=ds("PictionaryPencil"),Xa=ps({type:S}),qa=ps({type:$i}),Qa((es=t((ts=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).board=void 0,n(e,"bg",es,i(e)),n(e,"activeColor",ns,i(e)),n(e,"inactiveColor",is,i(e)),n(e,"brush",os,i(e)),e}e(o,t);var r=o.prototype;return r.initialize=function(t,e){var n=this;this.board=t,this.bg.node.on(h.EventType.TOUCH_START,(function(){return e(n)}))},r.select=function(){this.bg.color=this.activeColor,this.board.setBrush(this.brush)},r.deselect=function(){this.bg.color=this.inactiveColor},o}(Zr)).prototype,"bg",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=t(ts.prototype,"activeColor",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(1,0,0,1)}}),is=t(ts.prototype,"inactiveColor",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T(1,1,1,1)}}),os=t(ts.prototype,"brush",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $i}}),$a=ts));c._RF.pop(),c._RF.push({},"f6f5e9lEA1DN6GCcucaQxn4","Pictionary_IChatMessageContent",void 0),c._RF.pop(),c._RF.push({},"8f624C7siBPBakdBH+gUeux","Pictionary_IGuessedWordContent",void 0),c._RF.pop(),c._RF.push({},"39b9fpmUm1AJacKr6QJYEfG","Pictionary_CountdownScreen",void 0);var fs,gs,ys,ms,bs,vs,_s,Ss,Cs,ws=u.ccclass,Ts=u.property;ss=ws("PictionaryCountdownScreen"),ls=Ts({type:p}),ss((hs=t((us=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._countdownTween=null,n(e,"countdownText",hs,i(e)),e}e(o,t);var r=o.prototype;return r.onLoad=function(){t.prototype.onLoad.call(this)},r.onDestroy=function(){},r.Open=function(){t.prototype.Open.call(this),this.initialization()},r.Close=function(){t.prototype.Close.call(this),null!=this._countdownTween&&this._countdownTween.stop()},r.initCountdownTween=function(){var t=this;this.countdownText.node.active=!0,this._countdownTween=C(this.countdownText.node);for(var e=function(e){t._countdownTween.call((function(){t.countdownText.string=e.toString(),t.countdownText.node.scale=g.ONE.clone().multiplyScalar(2)})).to(1,{scale:g.ONE.clone().multiplyScalar(1)},{easing:"sineIn"})},n=3;n>=1;n--)e(n);this._countdownTween.call((function(){t.deactivateScreen()}))},r.deactivateScreen=function(){this.countdownText.string="",this.countdownText.node.active=!1},r.initialization=function(){this.initCountdownTween(),this._countdownTween.start()},o}(Sr)).prototype,"countdownText",[ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),cs=us));c._RF.pop(),c._RF.push({},"42596SsAthH0pQ+LlT+NvpT","Pictionary_DrawingResultsMenu",void 0);var Rs,Es,Ps,Is,Os,Ns,As,Ls,Ms,Ds=u.ccclass,ks=u.property;fs=Ds("PictionaryDrawingResultsMenu"),gs=ks({type:p}),ys=ks({type:h}),ms=ks({type:d}),fs((_s=t((vs=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"correctWordMessageLabel",_s,i(e)),n(e,"playerScoreCardsContainer",Ss,i(e)),n(e,"playerScoreCardPrefab",Cs,i(e)),e}e(o,t);var r=o.prototype;return r.Open=function(){t.prototype.Open.call(this)},r.Close=function(){this.clearPlayerScores(),t.prototype.Close.call(this)},r.initialize=function(){t.prototype.initialize.call(this)},r.setCorrectWordMessage=function(t){this.correctWordMessageLabel.string=""+t.toUpperCase()},r.setPlayerScores=function(t){for(var e,n=l(t);!(e=n()).done;){var i=e.value,o=b(this.playerScoreCardPrefab);o.parent=this.playerScoreCardsContainer,o.getChildByName("PlayerName").getComponent(p).string=xa.Instance.getPlayerName(i.userId);var r=o.getChildByName("PlayerScore").getComponent(p);r.string=i.score>0?"+"+i.score:i.score.toString(),r.color=i.score>0?new T(0,255,0):new T(255,0,0)}},r.clearPlayerScores=function(){this.playerScoreCardsContainer.removeAllChildren(),this.correctWordMessageLabel.string=""},o}(Sr)).prototype,"correctWordMessageLabel",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ss=t(vs.prototype,"playerScoreCardsContainer",[ys],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cs=t(vs.prototype,"playerScoreCardPrefab",[ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bs=vs));c._RF.pop(),c._RF.push({},"c61fcs77v9O2IIeRcvWGEy0","Pictionary_EndGameMenu",void 0);var zs,Gs,xs,Fs,Hs,Bs,Ws,Us,Vs,Ks,js,Js,Ys,Zs=u.ccclass,Qs=u.property;Rs=Zs("PictionaryEndGameMenu"),Es=Qs({type:d}),Ps=Qs({type:h}),Is=Qs({type:[Ai]}),Rs((As=t((Ns=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"leaderboardPlayerProfilePrefab",As,i(e)),n(e,"leaderboardPlayerProfilesContainer",Ls,i(e)),n(e,"leaderboardPlayerProfiles",Ms,i(e)),e}e(o,t);var r=o.prototype;return r.Open=function(){t.prototype.Open.call(this),this.populateLeaderboard()},r.Close=function(){t.prototype.Close.call(this),this.clearAdditionalProfiles()},r.initialize=function(){t.prototype.initialize.call(this)},r.populateLeaderboard=function(){var t=xa.Instance.getRoomState();if(t&&t.playersData){var e=xa.Instance.getPlayerTotalScores().sort((function(t,e){return e.score-t.score}));this.populateTopProfiles(e,t.playersData),this.createAdditionalProfiles(e,t.playersData)}},r.populateTopProfiles=function(t,e){for(var n=this,i=function(){if(o>=t.length)return 0;var i=n.leaderboardPlayerProfiles[o];if(!i)return n.logError("Profile is null"),1;var r=t[o],a=e.find((function(t){return t.userId===r.userId}));if(!a)return n.logError("Player data is null"),1;i.node.active=!0;var s=yn.Instance.CurrentRoom.sessionId,l=a.sessionId===s;i.initialize(a,l),i.setRank(o+1),i.setScore(r.score)},o=0;o<Math.min(this.leaderboardPlayerProfiles.length,3)&&0!==i();o++);},r.createAdditionalProfiles=function(t,e){for(var n=this,i=function(){var i=t[o],r=e.find((function(t){return t.userId===i.userId}));if(!r)return 0;var a=b(n.leaderboardPlayerProfilePrefab);a.setParent(n.leaderboardPlayerProfilesContainer);var s=a.getComponent(Ai);if(!s)return 0;var l=yn.Instance.CurrentRoom.sessionId,c=r.sessionId===l;s.initialize(r,c),s.setRank(o+1)},o=Math.min(3,this.leaderboardPlayerProfiles.length);o<t.length;o++)i()},r.clearAdditionalProfiles=function(){for(var t=this,e=function(){var e=t.leaderboardPlayerProfilesContainer.children[n];if(t.leaderboardPlayerProfiles.some((function(t){return t.node===e})))return 1;e.removeFromParent()},n=this.leaderboardPlayerProfilesContainer.children.length-1;n>=0;n--)e()},o}(Sr)).prototype,"leaderboardPlayerProfilePrefab",[Es],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ls=t(Ns.prototype,"leaderboardPlayerProfilesContainer",[Ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ms=t(Ns.prototype,"leaderboardPlayerProfiles",[Is],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Os=Ns));c._RF.pop(),c._RF.push({},"dd85cwkfzdAepNQV5YdxkzD","Pictionary_LobbyMenu",void 0);var Xs,qs,$s,tl,el,nl,il,ol=u.ccclass,rl=u.property;zs=ol("PictionaryLobbyMenu"),Gs=rl({type:p}),xs=rl({type:f}),Fs=rl({type:f}),Hs=rl({type:v}),Bs=rl({type:v}),zs((Vs=t((Us=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"errorLabel",Vs,i(e)),n(e,"playerNameInput",Ks,i(e)),n(e,"roomNameInput",js,i(e)),n(e,"createRoomButton",Js,i(e)),n(e,"joinRoomButton",Ys,i(e)),e}e(o,t);var r=o.prototype;return r.Open=function(){t.prototype.Open.call(this)},r.Close=function(){t.prototype.Close.call(this)},r.initialize=function(){t.prototype.initialize.call(this)},r.onLoad=function(){this.joinRoomButton.node.on(h.EventType.TOUCH_END,this.onJoinRoomButtonClicked,this),this.createRoomButton.node.on(h.EventType.TOUCH_END,this.onCreateRoomButtonClicked,this)},r.onJoinRoomButtonClicked=function(){var t=a(s().mark((function t(){var e,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkInputValidity()){t.next=2;break}return t.abrupt("return");case 2:return e=this.roomNameInput.string.trim(),n=this.playerNameInput.string.trim(),this.joinRoomButton.node.active=!1,this.createRoomButton.node.active=!1,t.prev=6,t.next=9,yn.Instance.connect(e,n);case 9:this.joinRoomButton.node.active=!0,this.createRoomButton.node.active=!0,this.Close(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(6),this.errorLabel.string="Failed to join the room. Please try again.",this.errorLabel.node.active=!0,this.joinRoomButton.node.active=!0,this.createRoomButton.node.active=!0,console.error("Connection error:",t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),r.onCreateRoomButtonClicked=function(){var t=a(s().mark((function t(){var e,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkInputValidity()){t.next=2;break}return t.abrupt("return");case 2:return e=this.roomNameInput.string.trim(),n=this.playerNameInput.string.trim(),this.createRoomButton.node.active=!1,this.joinRoomButton.node.active=!1,t.prev=6,t.next=9,yn.Instance.createAndJoinRoom(e,n);case 9:this.createRoomButton.node.active=!0,this.joinRoomButton.node.active=!0,this.Close(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(6),this.errorLabel.string="Failed to create and join the room. Please try again.",this.errorLabel.node.active=!0,this.createRoomButton.node.active=!0,this.joinRoomButton.node.active=!0,console.error("Create Room error:",t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),r.checkInputValidity=function(){var t=this.roomNameInput.string.trim(),e=this.playerNameInput.string.trim();return 0!==t.length&&0!==e.length||(this.errorLabel.string="Room name and player name cannot be empty",this.errorLabel.node.active=!0,!1)},o}(Sr)).prototype,"errorLabel",[Gs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ks=t(Us.prototype,"playerNameInput",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),js=t(Us.prototype,"roomNameInput",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Js=t(Us.prototype,"createRoomButton",[Hs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ys=t(Us.prototype,"joinRoomButton",[Bs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ws=Us));c._RF.pop(),c._RF.push({},"1f16aNIkc9LwLDrZ+niqacc","Pictionary_StartRoundMenu",void 0);var al,sl=u.ccclass,ll=u.property;new G,Xs=sl("PictionaryStartRoundMenu"),qs=ll({type:h}),$s=ll({type:p}),Xs((nl=t((el=function(t){function o(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"roundRootNode",nl,i(e)),n(e,"roundNumberLabel",il,i(e)),e.originalPosition=null,e}e(o,t);var r=o.prototype;return r.onLoad=function(){this.originalPosition=this.roundRootNode.position.clone()},r.Open=function(){console.log("[WordSelectionMenu] Opening"),t.prototype.Open.call(this),this.animateRoundRoot()},r.Close=function(){console.log("[WordSelectionMenu] Closing"),this.roundNumberLabel.node.active=!1,t.prototype.Close.call(this)},r.initialize=function(){t.prototype.initialize.call(this),this.originalPosition=this.roundRootNode.position.clone(),tt.on(V.EventType.KEY_DOWN,this.onKeyDown,this)},r.onDestroy=function(){tt.off(V.EventType.KEY_DOWN,this.onKeyDown,this)},r.onKeyDown=function(t){t.keyCode===et.KEY_S&&(console.log("S key pressed, playing animation"),this.animateRoundRoot())},r.animateRoundRoot=function(){var t=I.getVisibleSize().width+.75*this.roundRootNode.getComponent(m).width;this.roundRootNode.setPosition(t,this.originalPosition.y,this.originalPosition.z);var e=this.roundRootNode.getComponent(y);e||(e=this.roundRootNode.addComponent(y)),e.opacity=0;var n=C(this.roundRootNode).to(.8,{position:this.originalPosition},{easing:"cubicOut"}),i=C(e).to(.6,{opacity:255},{easing:"cubicIn"});n.start(),i.start(),xr.instance.playSound("RoundStart")},r.setRoundMessage=function(t){this.roundNumberLabel.node.active=!0,this.roundNumberLabel.string="Round "+t},o}(Sr)).prototype,"roundRootNode",[qs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),il=t(el.prototype,"roundNumberLabel",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tl=el));c._RF.pop(),c._RF.push({},"eef8f8Yde5N8oqgCvczfHwE","Pictionary_WaitingScreen",void 0);var cl=u.ccclass;u.property,cl("PictionaryWaitingScreen")(al=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this)},i.onDestroy=function(){},i.Open=function(){t.prototype.Open.call(this)},i.Close=function(){t.prototype.Close.call(this)},i.initialize=function(){t.prototype.initialize.call(this)},n}(Sr));c._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/pictionary_game', 'chunks:///pictionary_game.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});