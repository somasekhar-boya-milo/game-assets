System.register("chunks:///_virtual/PicitionaryGameState.ts",["cc"],(function(t){var N;return{setters:[function(t){N=t.cclegacy}],execute:function(){N._RF.push({},"eaf5ch2INJC5ZpHH/uBoUZh","PicitionaryGameState",void 0);t("PictionaryGameState",function(t){return t[t.NONE=0]="NONE",t[t.START_ROUND=1]="START_ROUND",t[t.WORD_SELECTION=2]="WORD_SELECTION",t[t.DRAWING=3]="DRAWING",t[t.DRAWING_RESULTS=4]="DRAWING_RESULTS",t[t.END_ROUND=5]="END_ROUND",t[t.END_GAME=6]="END_GAME",t}({}));N._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,o,t,n,a,u,r,l,s,c,d,p,h,f,y,b;return{setters:[function(i){e=i.applyDecoratedDescriptor,o=i.inheritsLoose,t=i.initializerDefineProperty,n=i.assertThisInitialized,a=i.createClass},function(i){u=i.cclegacy,r=i._decorator,l=i.CCString,s=i.AudioClip,c=i.CCFloat,d=i.CCBoolean,p=i.AudioSource,h=i.Prefab,f=i.sys,y=i.instantiate,b=i.Component}],execute:function(){var g,A,S,C,m,E,P,v,w,I,L,D,z,_,M,k,B,T,x,F,R,K,G;u._RF.push({},"f9e81/u9dpJo6M46HQM5h+S","Pictionary_AudioManager",void 0);var H=r.ccclass,U=r.property,W=(g=H("PictionaryAudioClipData"),A=U({type:l}),S=U({type:s}),C=U({type:c}),m=U({type:c}),E=U({type:d}),g((w=e((v=function(){function i(){t(this,"name",w,this),t(this,"audioClips",I,this),t(this,"delayBetweenClips",L,this),t(this,"volume",D,this),t(this,"loop",z,this),this.isLoopPlaying=void 0,this.lastPlayedTime=0,this.clipIndex=0}var e=i.prototype;return e.GetClip=function(){var i=this.audioClips[this.clipIndex];if(this.clipIndex=(this.clipIndex+1)%this.audioClips.length,this.CanPlay())return this.lastPlayedTime=Date.now(),i},e.CanPlay=function(){return Date.now()-this.lastPlayedTime>1e3*this.delayBetweenClips},i}()).prototype,"name",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(v.prototype,"audioClips",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(v.prototype,"delayBetweenClips",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(v.prototype,"volume",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=e(v.prototype,"loop",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=v))||P);i("PictionaryAudioManager",(_=H("PictionaryAudioManager"),M=U({type:W}),k=U({type:p}),B=U({type:h}),_(((G=function(i){function e(){for(var e,o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return e=i.call.apply(i,[this].concat(a))||this,t(e,"audioClipData",F,n(e)),t(e,"backgroundAudioSource",R,n(e)),e.localStorageAudioEnabledKey="SNLAudioEnabled",t(e,"audioSourcePrefab",K,n(e)),e.audioSources=[],e._isAudioEnabled="true",e}o(e,i);var u=e.prototype;return u.onLoad=function(){e.instance=this,this.ReadAudioEnabledFromLocalStorage()},u.onDestroy=function(){e.instance===this&&(e.instance=null)},u.start=function(){this.SetAudioEnabled(this.IsAudioEnabled)},u.playSound=function(i){if("false"!=this.IsAudioEnabled){var e=this.audioClipData.find((function(e){return e.name==i}));if(null!=e){var o=e.GetClip();if(o){if(e.isLoopPlaying)return;var t=this.getEmptyAudioSource();t.loop=e.loop,e.isLoopPlaying=e.loop,t.volume=e.volume,t.clip=o,e.loop?t.play():t.playOneShot(o)}else console.warn("Audio Clip is in use ",i)}}},u.stopSound=function(i){var e=this.audioClipData.find((function(e){return e.name==i}));e?this.audioSources.forEach((function(i){i.clip==e.audioClips[e.clipIndex]&&(e.isLoopPlaying=!1,i.stop())})):console.warn("Audio Clip not found for ",i)},u.stopAllSounds=function(){this.audioSources.forEach((function(i){i.stop()})),this.audioClipData.forEach((function(i){i.isLoopPlaying=!1}))},u.ToggleAudio=function(){"true"==this.IsAudioEnabled?this.SetAudioEnabled("false"):this.SetAudioEnabled("true")},u.SetAudioEnabled=function(i){this._isAudioEnabled=i,this.UpdateBackgroundMusic(),this.WriteAudioEnabledToLocalStorage()},u.WriteAudioEnabledToLocalStorage=function(){f.localStorage.setItem(this.localStorageAudioEnabledKey,this.IsAudioEnabled)},u.ReadAudioEnabledFromLocalStorage=function(){var i=f.localStorage.getItem(this.localStorageAudioEnabledKey);this._isAudioEnabled=null==i?"true":i},u.UpdateBackgroundMusic=function(){var i,e;"true"==this.IsAudioEnabled?null==(i=this.backgroundAudioSource)||i.play():null==(e=this.backgroundAudioSource)||e.stop()},u.printAllPlayingAudioSources=function(){this.audioSources.forEach((function(i){i.playing&&console.log("Playing audio source: ",i.playing,i.clip.name,i.uuid)}))},u.getEmptyAudioSource=function(){var i=this.audioSources.find((function(i){return!i.playing}));return null==i&&(i=this.createAudioSource()),i},u.createAudioSource=function(){var i=y(this.audioSourcePrefab).getComponent(p);return i.node.setParent(this.node),this.audioSources.push(i),console.log("==== Created new audio source: ",this.audioSources.length),i},a(e,[{key:"IsAudioEnabled",get:function(){return this._isAudioEnabled}}]),e}(b)).instance=null,F=e((x=G).prototype,"audioClipData",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(x.prototype,"backgroundAudioSource",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(x.prototype,"audioSourcePrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T));u._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_BasePlayerData.ts",["cc"],(function(i){var s;return{setters:[function(i){s=i.cclegacy}],execute:function(){s._RF.push({},"a3808xoBh1EaJyFTRy3wBHQ","Pictionary_BasePlayerData",void 0);i("PictionaryBasePlayerData",function(){function i(){this.userId=void 0,this.name=void 0,this.avatar=void 0,this.sessionId=void 0,this.type=void 0,this.isOnline=void 0,this.isConnected=void 0,this.isReplacedByBot=void 0,this.isKickedOut=void 0,this.isReady=void 0,this.score=void 0}return i.prototype.copyFrom=function(i){this.userId=i.userId,this.name=i.name,this.avatar=i.avatar,this.sessionId=i.sessionId,this.type=i.type,this.isOnline=i.isOnline,this.isConnected=i.isConnected,this.isReplacedByBot=i.isReplacedByBot,this.isKickedOut=i.isKickedOut,this.isReady=i.isReady,this.score=i.score},i}());s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_BaseRoomSettings.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ed712fU8zJCB63GFLhIhcqf","Pictionary_BaseRoomSettings",void 0);t("DefaultRoomSettings",{maxPlayers:8,minPlayers:2,maxClients:8,countdownTimeInSeconds:3,allowLateJoin:!0,maxReconnectionAttempts:3,reconnectionAttemptInterval:1e3,reconnectionTime:1e4,gameFPS:30,serverFPS:30,patchRate:1e3}),t("PictionaryBaseRoomSettings",function(){function t(){this.maxPlayers=void 0,this.minPlayers=void 0,this.maxClients=void 0,this.countdownTimeInSeconds=void 0,this.allowLateJoin=void 0,this.maxReconnectionAttempts=void 0,this.reconnectionAttemptInterval=void 0,this.reconnectionTime=void 0,this.gameFPS=void 0,this.serverFPS=void 0,this.patchRate=void 0}return t.prototype.copyFrom=function(t){this.maxPlayers=t.maxPlayers,this.minPlayers=t.minPlayers,this.maxClients=t.maxClients,this.countdownTimeInSeconds=t.countdownTimeInSeconds,this.allowLateJoin=t.allowLateJoin,this.reconnectionTime=t.reconnectionTime,this.gameFPS=t.gameFPS,this.serverFPS=t.serverFPS,this.patchRate=t.patchRate},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_BaseRoomState.ts",["cc","./Pictionary_RoomTypes.ts"],(function(t){var o,s;return{setters:[function(t){o=t.cclegacy},function(t){s=t.PictionaryRoomStatus}],execute:function(){o._RF.push({},"ed32dyxApRGmrQtfwC1xZQi","Pictionary_BaseRoomState",void 0);t("PictionaryBaseRoomState",function(){function t(t,o){this.currentRoomStatus=s.WAITING_FOR_PLAYERS,this.previousRoomStatus=s.NONE,this.roomSettings=void 0,this.playersData=void 0,this.spectatorsData=void 0,this.roomSettings=t,this.playersData=o,this.spectatorsData=[]}return t.prototype.copyFrom=function(t){this.currentRoomStatus=t.currentRoomStatus,this.previousRoomStatus=t.previousRoomStatus,this.roomSettings.copyFrom(t.roomSettings)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Brush.ts","./Pictionary_Utils.ts","./PictionaryRoomState.ts","./Pictionary_PBLogger.ts","./PictionaryGameHandler.ts"],(function(t){var i,o,r,n,e,s,a,h,c,l,u,d,f,p,_,g,w,T,y,v,S,k;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,e=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,h=t.EventTarget,c=t.Node,l=t.Label,u=t.Graphics,d=t.UITransform,f=t.Input,p=t.Vec3,_=t.Vec2,g=t.Color,w=t.Component},function(t){T=t.PictionaryBrush},function(t){y=t.PictionaryUtils},function(t){v=t.DrawStroke},function(t){S=t.PictionaryPBLogger},function(t){k=t.PictionaryGameHandler}],execute:function(){var m,P,D,E,b,B,O,C,U;s._RF.push({},"1d8b39tO65Bf7sCMOk5RYYY","Pictionary_Board",void 0);var L=a.ccclass,N=a.property,z=t("BoardEvents",new h),W=t("STROKE_COMPLETED_EVENT","stroke-completed");t("PictionaryBoard",(m=L("PictionaryBoard"),P=N({type:c,tooltip:"The toolbar containing drawing tools"}),D=N({type:l,tooltip:"Label displaying the current drawer name"}),E=N({type:T,tooltip:"The current brush settings"}),m((O=i((B=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return i=t.call.apply(t,[this].concat(e))||this,r(i,"toolBar",O,n(i)),r(i,"drawerNameLabel",C,n(i)),r(i,"brush",U,n(i)),i._isDrawing=!1,i._lastPos=null,i._strokePoints=[],i._graphics=null,i._uiTransform=null,i._localStrokes=[],i}o(i,t);var s=i.prototype;return s.onLoad=function(){this._graphics=this.getComponent(u),this._uiTransform=this.getComponent(d),this._graphics||S.error("Board requires a Graphics component"),this._uiTransform||S.error("Board requires a UITransform component")},s.enableDrawing=function(t){this.toolBar?(this.toolBar.active=t,t?this.registerTouchEvents():this.unregisterTouchEvents()):S.error("Toolbar not assigned to Board")},s.setDrawerName=function(t){this.drawerNameLabel?(console.log("Drawer name set to: "+t),this.drawerNameLabel.string=t):S.error("Drawer name label not assigned to Board")},s.registerTouchEvents=function(){this.node.on(c.EventType.MOUSE_DOWN,this.onStartDrawing,this),this.node.on(c.EventType.MOUSE_MOVE,this.onDrawing,this),this.node.on(c.EventType.MOUSE_UP,this.onStopDrawing,this),this.node.on(c.EventType.TOUCH_START,this.onStartDrawing,this),this.node.on(c.EventType.TOUCH_MOVE,this.onDrawing,this),this.node.on(c.EventType.TOUCH_END,this.onStopDrawing,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onStopDrawing,this),this.node.on(f.EventType.KEY_DOWN,this.onKeyDown,this)},s.unregisterTouchEvents=function(){this.node.off(c.EventType.MOUSE_DOWN,this.onStartDrawing,this),this.node.off(c.EventType.MOUSE_MOVE,this.onDrawing,this),this.node.off(c.EventType.MOUSE_UP,this.onStopDrawing,this),this.node.off(c.EventType.TOUCH_START,this.onStartDrawing,this),this.node.off(c.EventType.TOUCH_MOVE,this.onDrawing,this),this.node.off(c.EventType.TOUCH_END,this.onStopDrawing,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onStopDrawing,this),this.node.off(f.EventType.KEY_DOWN,this.onKeyDown,this)},s.onStartDrawing=function(t){if(this._uiTransform){this._isDrawing=!0;var i=t.getUILocation(),o=this._uiTransform.convertToNodeSpaceAR(new p(i.x,i.y,0)),r=new _(o.x,o.y),n=this.normalizePositionWithBoard(r);this.isPointWithinBounds(n)&&(this._lastPos=r,this.addPointToStroke(n),this.setupGraphicsForDrawing())}},s.onDrawing=function(t){if(this._isDrawing&&this._lastPos&&this._uiTransform){var i=t.getUILocation(),o=this._uiTransform.convertToNodeSpaceAR(new p(i.x,i.y,0)),r=new _(o.x,o.y),n=this.normalizePositionWithBoard(r);this.isPointWithinBounds(n)&&(this.drawLine(this._lastPos,r),this._lastPos=r,this.addPointToStroke(n))}},s.onStopDrawing=function(){if(this._strokePoints.length>0){if(!(this.brush.width<0)){var t=new v;t.strokePoints=[].concat(this._strokePoints),t.color=this.brush.color.toHEX(),t.width=this.brush.width,this._localStrokes.push(t)}z.emit(W,{strokePoints:this._strokePoints,brush:this.brush})}this._strokePoints=[],this._isDrawing=!1,this._lastPos=null},s.drawLine=function(t,i){this._graphics&&(this._graphics.moveTo(t.x,t.y),this._graphics.lineTo(i.x,i.y),this._graphics.stroke())},s.setupGraphicsForDrawing=function(){this._graphics&&(this._graphics.lineWidth=this.brush.width,this._graphics.strokeColor=this.brush.color)},s.normalizeAndAddPointToStroke=function(t){var i=this.normalizePositionWithBoard(t);this.isPointWithinBounds(i)?this.addPointToStroke(i):S.info("Discarding point outside bounds:",i)},s.addPointToStroke=function(t){this._strokePoints.push(y.roundNumber(t.x,6)),this._strokePoints.push(y.roundNumber(t.y,6))},s.isPointWithinBounds=function(t){return t.x>=0&&t.x<=1&&t.y>=0&&t.y<=1},s.onKeyDown=function(t){67===t.keyCode&&this.clear()},s.clearGraphics=function(){this._graphics&&this._graphics.clear()},s.clear=function(){this.clearGraphics(),this._localStrokes=[]},s.getBrush=function(){return this.brush},s.getDrawerNameLabel=function(){return this.drawerNameLabel},s.setBrush=function(t){this.brush=t},s.setCurrentSketch=function(t){this.clear(),this._localStrokes=[];for(var i,o=e(t);!(i=o()).done;){var r=i.value;if(r.width<0||"#ff00ff00"===r.color)this._localStrokes.length>0&&this._localStrokes.pop();else{var n=new v;n.copyFrom(r),this._localStrokes.push(n)}}if(this._graphics){S.info("Setting current sketch with data:",t);for(var s,a=e(this._localStrokes);!(s=a()).done;){var h=s.value;S.info("Rendering stroke:",h),this.renderStrokeInternal(h)}}else S.error("Graphics component not found on the node.")},s.undoLastStroke=function(){if(0!==this._localStrokes.length){this._localStrokes.pop(),this.clearGraphics();for(var t,i=e(this._localStrokes);!(t=i()).done;){var o=t.value;this.renderStroke(o)}if(k.Instance){var r=new T;r.color=new g(255,0,255,0),r.width=-1,z.emit(W,{strokePoints:[0,0],brush:r})}S.info("Undo: Removed last stroke. Remaining strokes:",this._localStrokes.length)}else S.info("No strokes to undo")},s.renderStroke=function(t){if(this._graphics)if(t.width<0||"#ff00ff00"===t.color){if(S.info("Received undo marker stroke, removing last stroke"),this._localStrokes.length>0){var i=this._localStrokes.length-1;i>=0&&this._localStrokes[i].width>=0&&this._localStrokes.splice(i,1)}this.clearGraphics();for(var o,r=e(this._localStrokes);!(o=r()).done;){var n=o.value;n.width>=0&&this.renderStrokeInternal(n)}}else this.renderStrokeInternal(t)},s.renderStrokeInternal=function(t){if(this._graphics){var i=null,o=t.strokePoints;this._graphics.strokeColor=new g(t.color),this._graphics.lineWidth=t.width;for(var r=0;r<o.length;r+=2){var n=o[r],e=o[r+1],s=new _(n,e),a=this.denormalizePositionWithBoard(s);S.info("Denormalized point:",a),i&&(this._graphics.moveTo(i.x,i.y),this._graphics.lineTo(a.x,a.y),this._graphics.stroke()),i=a}}},s.normalizePositionWithBoard=function(t){if(!this._uiTransform)return t;var i=this._uiTransform.contentSize;return 0===i.width||0===i.height?(S.error("Board size is zero. Cannot normalize positions."),t):new _(t.x/i.width,t.y/i.height)},s.denormalizePositionWithBoard=function(t){if(!this._uiTransform)return t;var i=this._uiTransform.contentSize;return new _(t.x*i.width,t.y*i.height)},i}(w)).prototype,"toolBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(B.prototype,"drawerNameLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(B.prototype,"brush",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new T}}),b=B))||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Brush.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var t,i,e,o,n,c;return{setters:[function(r){t=r.applyDecoratedDescriptor,i=r.initializerDefineProperty},function(r){e=r.cclegacy,o=r._decorator,n=r.CCFloat,c=r.Color}],execute:function(){var a,u,l,s,p,h;e._RF.push({},"da8bfTaMHpEJ6w6Jfuutkdj","Pictionary_Brush",void 0);var f=o.ccclass,y=o.property;r("PictionaryBrush",(a=f("PictionaryBrush"),u=y({type:n}),a((p=t((s=function(r,t){i(this,"width",p,this),i(this,"color",h,this),r&&(this.width=r),t&&(this.color=t)}).prototype,"width",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),h=t(s.prototype,"color",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,0,0,255)}}),l=s))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_CameraManger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,a,o,h,s,c,d,u,l,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,h=e.UITransform,s=e.Camera,c=e.screen,d=e.sys,u=e.view,l=e.math,g=e.Component}],execute:function(){var p,f,w,m,H,b,y,z,S,v,O,A;a._RF.push({},"84ce1NZ9adOp5zuzoVQGk2o","Pictionary_CameraManger",void 0);var C=o.ccclass,R=o.property;(0,o.executionOrder)(-1);e("PictionaryCameraManger",(p=C("PictionaryCameraManger"),f=R({type:h}),p(((A=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"canvasUITransform",H,n(t)),r(t,"designHeight",b,n(t)),r(t,"designWidth",y,n(t)),r(t,"defaultOrthoHeight",z,n(t)),r(t,"minOrthoHeight",S,n(t)),r(t,"maxOrthoHeight",v,n(t)),r(t,"safeAreaPadding",O,n(t)),t.designAspectRatio=void 0,t.currentAspectRatio=void 0,t.camera=null,t.windowWidth=1080,t.windowHeight=1920,t}i(t,e);var a=t.prototype;return a.onLoad=function(){t.instance=this,this.designAspectRatio=this.designWidth/this.designHeight,this.camera=this.node.getComponent(s)},a.start=function(){var e=this;this.updateScreenSize(),this.adaptCameraToScreen(),window.addEventListener("resize",(function(){e.updateScreenSize(),e.adaptCameraToScreen()}))},a.updateScreenSize=function(){this.windowWidth=c.windowSize.width||window.innerWidth,this.windowHeight=c.windowSize.height||window.innerHeight,this.currentAspectRatio=this.windowWidth/this.windowHeight,console.log("Window Size: "+this.windowWidth+"x"+this.windowHeight+", Aspect Ratio: "+this.currentAspectRatio.toFixed(2))},a.adaptCameraToScreen=function(){if(this.camera){var e=0,t=0,i=0,r=0;if(d.os===d.OS.IOS||d.os===d.OS.ANDROID){var n=u.getVisibleSize(),a=u.getVisibleOrigin();n&&(e=a.y,t=this.windowHeight-(a.y+n.height),i=a.x,r=this.windowWidth-(a.x+n.width))}var o=this.windowHeight-e-t-2*this.safeAreaPadding,h=this.windowWidth-i-r-2*this.safeAreaPadding,s=h/o;console.log("Effective Size: "+h+"x"+o+", Aspect Ratio: "+s.toFixed(2));var c=this.currentAspectRatio>=1,g=this.defaultOrthoHeight;if(c)console.log("=== Landscape Mode ==="),g=this.defaultOrthoHeight*(1/this.currentAspectRatio)*1.5;else{console.log("=== Portrait Mode ===");var p=.6/Math.min(this.currentAspectRatio,.6);g=this.defaultOrthoHeight*p}g=l.clamp(g,this.minOrthoHeight,this.maxOrthoHeight),this.camera.orthoHeight=g,console.log("Camera Ortho Height: "+g.toFixed(2))}},a.getWidth=function(){return 2*this.camera.orthoHeight*this.currentAspectRatio},a.getCurrentOrthoHeight=function(){return this.camera.orthoHeight},a.refreshCameraAdaptation=function(){this.updateScreenSize(),this.adaptCameraToScreen()},t}(g)).instance=null,H=t((m=A).prototype,"canvasUITransform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(m.prototype,"designHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1920}}),y=t(m.prototype,"designWidth",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),z=t(m.prototype,"defaultOrthoHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 820}}),S=t(m.prototype,"minOrthoHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 750}}),v=t(m.prototype,"maxOrthoHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),O=t(m.prototype,"safeAreaPadding",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),w=m))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_ChatManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PictionaryGameHandler.ts","./Pictionary_GameManager.ts","./Pictionary_PlayerAvatar.ts"],(function(t){var e,n,i,o,a,r,s,d,u,c,h,l,g,p,f,y,m,b,C,B,x,v,T,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.EditBox,d=t.Node,u=t.Prefab,c=t.Button,h=t.SpriteFrame,l=t.Vec3,g=t.Widget,p=t.UITransform,f=t.instantiate,y=t.Sprite,m=t.RichText,b=t.UIOpacity,C=t.Layout,B=t.tween,x=t.Component},function(t){v=t.PictionaryGameHandler},function(t){T=t.KeyboardHeightChangeEvent},function(t){P=t.PictionaryPlayerAvatar}],execute:function(){var w,M,I,E,_,H,z,S,k,N,F,G,R,A;a._RF.push({},"c0d9aZCLaxBHYPIaeyY7pDo","Pictionary_ChatManager",void 0);var K=r.ccclass,L=r.property;t("PictionaryChatManager",(w=K("PictionaryChatManager"),M=L({type:s}),I=L({type:d}),E=L({type:u}),_=L({type:c}),H=L({type:h,tooltip:"Sprite frame for correct guess messages"}),w(((A=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"inputEditBox",k,o(e)),i(e,"boardMessagesContainer",N,o(e)),i(e,"boardMessageTextPrefab",F,o(e)),i(e,"sendButton",G,o(e)),i(e,"correctGuessSpriteFrame",R,o(e)),e._currentInputText="",e._keyboardHeight=0,e._inputContainerOriginalPosition=null,e}n(e,t);var a=e.prototype;return a.onLoad=function(){e.Instance=this,this.sendButton&&this.sendButton.node.on("click",this.onSendButtonClicked,this),this.inputEditBox&&(this.inputEditBox.tabIndex=0,this.inputEditBox.node.on("editing-return",this.onSendButtonClicked,this),this.inputEditBox.node.on("text-changed",this.onTextChanged,this)),this.inputEditBox&&(this._inputContainerOriginalPosition=new l(this.inputEditBox.node.position.x,this.inputEditBox.node.position.y,this.inputEditBox.node.position.z)),T.on("keyboardHeight",this.onKeyboardHeightChanged,this)},a.onDestroy=function(){T.off("keyboardHeight",this.onKeyboardHeightChanged,this)},a.onKeyboardHeightChanged=function(t){this.setKeyboardHeight(t.height)},a.setKeyboardHeight=function(t){this._keyboardHeight=t,this.updateInputContainerPosition()},a.updateInputContainerPosition=function(){if(this.inputEditBox){var t=this.inputEditBox.node.getComponent(g);if(t||(t=this.inputEditBox.node.addComponent(g)),this._keyboardHeight>0){var e,n=((null==(e=this.inputEditBox.node.getComponent(p))?void 0:e.height)||0)/2;t.bottom=this._keyboardHeight+n-30,console.log("Setting widget bottom to: ",this._keyboardHeight+n," (keyboard height: ",this._keyboardHeight," + half container height: ",n,")")}else t.bottom=0}},a.getKeyboardHeight=function(){return this._keyboardHeight},a.onTextChanged=function(){this._currentInputText=this.inputEditBox.string},a.showBoardToast=function(t,e,n){var i=this,o=f(this.boardMessageTextPrefab);if(e)if(this.correctGuessSpriteFrame){var a=o.getComponent(y);a?(a.spriteFrame=this.correctGuessSpriteFrame,console.log("Correct guess sprite frame applied")):console.warn("Sprite component not found on board message node for correct guess")}else console.warn("correctGuessSpriteFrame is not assigned in PictionaryChatManager");var r=o.getChildByName("profile");if(r){var s=r.getComponent(P);if(s){var d=v.Instance;if(d){var u=d.getCurrentRoomState();if(u){var c=u.getPlayerByUserId(t.playerId);c&&c.avatar&&s.setAvatarFromUrl(c.avatar)}}}}var h=o.getChildByName("NameContainer");if(h){var l=h.getChildByName("Name");if(l){var g=l.getComponent(m);g?this.configureBoardRichText(g,e,n,t.message):console.warn("RichText component not found on Name node.")}else console.warn("Name node not found in NameContainer.")}else console.warn("NameContainer node not found on board message prefab.");this.boardMessagesContainer.addChild(o),o.setSiblingIndex(0);var p=o.getComponent(b)||o.addComponent(b);p.opacity=0;var B=this.boardMessagesContainer.getComponent(C);B&&B.updateLayout(),this.scheduleOnce((function(){i.sizeBoardMessageToText(o)?i.playBoardToastAnimation(o,p):i.scheduleOnce((function(){i.sizeBoardMessageToText(o),i.playBoardToastAnimation(o,p)}),0)}),0)},a.resolveBoardRichText=function(t){var e=t.getChildByName("NameContainer");if(e){var n=e.getChildByName("Name");if(n)return n.getComponent(m)||null}return t.getComponent(m)||null},a.configureBoardRichText=function(t,e,n,i){t.maxWidth=0,t.string=e?"<line-height=45><color=#ffffff><size=40>"+n+" guessed the word!</size></color></line-height>\n\n":"<line-height=45><color=#00ff00><size=40>"+n+"</size></color></line-height>\n<color=#000000><size=35>"+i+"</size></color>\n\n"},a.sizeBoardMessageToText=function(t){var e=this.boardMessagesContainer.getComponent(C);return e&&e.updateLayout(),!0},a.playBoardToastAnimation=function(t,e){var n=this.boardMessagesContainer.getComponent(p),i=t.getComponent(p),o=n?n.width:800,a=i?i.width:400,r=t.getPosition(),s=r.x,d=r.y,u=-o/2-a/2-10,c=s+14;t.setPosition(new l(u,d,0)),e.opacity=255,B(t).to(.3,{position:new l(c,d,0)},{easing:"quadOut"}).to(.12,{position:new l(s,d,0)},{easing:"sineIn"}).delay(3).call((function(){B(e).to(.4,{opacity:0}).call((function(){t.parent&&t.removeFromParent(),t.destroy()})).start()})).start()},a.addChatMessage=function(t,e){void 0===e&&(e=!1);var n=v.Instance.getDisplayName(t.playerId);this.boardMessagesContainer&&this.boardMessageTextPrefab&&this.showBoardToast(t,e,n)},a.onSendButtonClicked=function(){if(this.inputEditBox){var t=this._currentInputText.trim();t.length>0&&(this.inputEditBox.string="",console.log("sending message to server: ",t),this._currentInputText="",v.Instance.sendChatMessageToServer(t),this.inputEditBox.blur())}else console.warn("Input EditBox is not assigned.")},e}(x)).Instance=null,k=e((S=A).prototype,"inputEditBox",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(S.prototype,"boardMessagesContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"boardMessageTextPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(S.prototype,"sendButton",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"correctGuessSpriteFrame",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=S))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_ContentFitter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var i;e._RF.push({},"201e7hS4U9OjbMxWSKPWjZl","Pictionary_ContentFitter",void 0);var c=r.ccclass;r.property,t("PictionaryContentFitter",c("PictionaryContentFitter")(i=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.start=function(){},r.update=function(t){},e}(o))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_CountdownScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts"],(function(n){var t,o,e,i,c,r,a,u,l,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,r=n._decorator,a=n.Label,u=n.tween,l=n.Vec3},function(n){s=n.PictionaryMenu}],execute:function(){var d,w,p,f,h;c._RF.push({},"39b9fpmUm1AJacKr6QJYEfG","Pictionary_CountdownScreen",void 0);var y=r.ccclass,T=r.property;n("PictionaryCountdownScreen",(d=y("PictionaryCountdownScreen"),w=T({type:a}),d((h=t((f=function(n){function t(){for(var t,o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(t=n.call.apply(n,[this].concat(c))||this)._countdownTween=null,e(t,"countdownText",h,i(t)),t}o(t,n);var c=t.prototype;return c.onLoad=function(){n.prototype.onLoad.call(this)},c.onDestroy=function(){},c.Open=function(){n.prototype.Open.call(this),this.initialization()},c.Close=function(){n.prototype.Close.call(this),null!=this._countdownTween&&this._countdownTween.stop()},c.initCountdownTween=function(){var n=this;this.countdownText.node.active=!0,this._countdownTween=u(this.countdownText.node);for(var t=function(t){n._countdownTween.call((function(){n.countdownText.string=t.toString(),n.countdownText.node.scale=l.ONE.clone().multiplyScalar(2)})).to(1,{scale:l.ONE.clone().multiplyScalar(1)},{easing:"sineIn"})},o=3;o>=1;o--)t(o);this._countdownTween.call((function(){n.deactivateScreen()}))},c.deactivateScreen=function(){this.countdownText.string="",this.countdownText.node.active=!1},c.initialization=function(){this.initCountdownTween(),this._countdownTween.start()},t}(s)).prototype,"countdownText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_DrawingResultsMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./PictionaryGameHandler.ts"],(function(e){var r,t,n,a,o,i,l,c,s,u,p,y,f,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,l=e._decorator,c=e.Label,s=e.Node,u=e.Prefab,p=e.instantiate,y=e.Color},function(e){f=e.PictionaryMenu},function(e){g=e.PictionaryGameHandler}],execute:function(){var d,C,h,b,P,S,m,v,M;i._RF.push({},"42596SsAthH0pQ+LlT+NvpT","Pictionary_DrawingResultsMenu",void 0);var w=l.ccclass,L=l.property;e("PictionaryDrawingResultsMenu",(d=w("PictionaryDrawingResultsMenu"),C=L({type:c}),h=L({type:s}),b=L({type:u}),d((m=r((S=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return r=e.call.apply(e,[this].concat(o))||this,n(r,"correctWordMessageLabel",m,a(r)),n(r,"playerScoreCardsContainer",v,a(r)),n(r,"playerScoreCardPrefab",M,a(r)),r}t(r,e);var i=r.prototype;return i.Open=function(){e.prototype.Open.call(this)},i.Close=function(){this.clearPlayerScores(),e.prototype.Close.call(this)},i.initialize=function(){e.prototype.initialize.call(this)},i.setCorrectWordMessage=function(e){this.correctWordMessageLabel.string=""+e.toUpperCase()},i.setPlayerScores=function(e){for(var r,t=o(e);!(r=t()).done;){var n=r.value,a=p(this.playerScoreCardPrefab);a.parent=this.playerScoreCardsContainer,a.getChildByName("PlayerName").getComponent(c).string=g.Instance.getDisplayName(n.userId);var i=a.getChildByName("PlayerScore").getComponent(c);i.string=n.score>0?"+"+n.score:n.score.toString(),i.color=n.score>0?new y(0,255,0):new y(255,0,0)}},i.clearPlayerScores=function(){this.playerScoreCardsContainer.removeAllChildren(),this.correctWordMessageLabel.string=""},r}(f)).prototype,"correctWordMessageLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(S.prototype,"playerScoreCardsContainer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(S.prototype,"playerScoreCardPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=S))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_EndGameMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_PlayerProfile.ts","./PictionaryGameHandler.ts","./Pictionary_NetworkManager.ts","./Pictionary_GameManager.ts","./MiloGameSDK.ts","./index.ts","./Pictionary_UIManager.ts","./Pictionary_AudioManager.ts","./events.ts"],(function(e){var n,t,o,a,i,r,s,l,c,u,f,d,y,P,p,h,g,v,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Prefab,l=e.Node,c=e.Label,u=e.instantiate},function(e){f=e.PictionaryMenu},function(e){d=e.PictionaryPlayerProfile},function(e){y=e.PictionaryGameHandler},function(e){P=e.PictionaryNetworkManager},function(e){p=e.PictionaryGameManager},function(e){h=e.HostChangeEvent},null,function(e){g=e.PictionaryUIManager},function(e){v=e.PictionaryAudioManager},function(e){b=e.InternalGameSdkEvents}],execute:function(){var m,C,I,H,M,D,G,S,w,A,_,k,E;i._RF.push({},"c61fcs77v9O2IIeRcvWGEy0","Pictionary_EndGameMenu",void 0);var z=r.ccclass,R=r.property;e("PictionaryEndGameMenu",(m=z("PictionaryEndGameMenu"),C=R({type:s}),I=R({type:l}),H=R({type:[d]}),M=R({type:l,tooltip:"Container node for action buttons (Play Again, Change Game)"}),D=R({type:l,tooltip:"Container node for info message (shown to non-host players)"}),m((w=n((S=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,o(n,"leaderboardPlayerProfilePrefab",w,a(n)),o(n,"leaderboardPlayerProfilesContainer",A,a(n)),o(n,"leaderboardPlayerProfiles",_,a(n)),o(n,"actionsButtonContainer",k,a(n)),o(n,"infoContainer",E,a(n)),n}t(n,e);var i=n.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this),h.on(b.HOST_CHANGED,this.onHostChanged,this)},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){h.off(b.HOST_CHANGED,this.onHostChanged,this)},i.Open=function(){e.prototype.Open.call(this),this.populateLeaderboard(),this.updateHostUI(),this.checkAndShowConfetti()},i.Close=function(){e.prototype.Close.call(this),this.clearAdditionalProfiles()},i.initialize=function(){e.prototype.initialize.call(this)},i.populateLeaderboard=function(){var e=y.Instance.getRoomState();if(e&&e.playersData){var n=y.Instance.getPlayerTotalScores().sort((function(e,n){return n.score-e.score}));this.populateTopProfiles(n,e.playersData),this.createAdditionalProfiles(n,e.playersData)}},i.populateTopProfiles=function(e,n){for(var t=this,o=0;o<this.leaderboardPlayerProfiles.length;o++){var a=this.leaderboardPlayerProfiles[o];a&&(a.node.active=!1)}for(var i=Math.min(this.leaderboardPlayerProfiles.length,3),r=function(){var o=t.leaderboardPlayerProfiles[s];if(!o)return t.logError("Profile is null"),0;var a=e[s],i=n.find((function(e){return e.userId===a.userId}));if(!i)return t.logError("Player data is null"),0;o.node.active=!0;var r=P.Instance.CurrentRoom.sessionId,l=i.sessionId===r;o.initialize(i,l),o.setRank(s+1),o.setScore(a.score)},s=0;s<i&&s<e.length;s++)r()},i.createAdditionalProfiles=function(e,n){for(var t=this,o=function(){var o=e[a],i=n.find((function(e){return e.userId===o.userId}));if(!i)return 0;var r=u(t.leaderboardPlayerProfilePrefab);r.setParent(t.leaderboardPlayerProfilesContainer);var s=r.getComponent(d);if(!s)return 0;var l=P.Instance.CurrentRoom.sessionId,c=i.sessionId===l;s.initialize(i,c),s.setRank(a+1)},a=Math.min(3,this.leaderboardPlayerProfiles.length);a<e.length;a++)o()},i.clearAdditionalProfiles=function(){for(var e=this,n=function(){var n=e.leaderboardPlayerProfilesContainer.children[t];if(e.leaderboardPlayerProfiles.some((function(e){return e.node===n})))return 1},t=this.leaderboardPlayerProfilesContainer.children.length-1;t>=0;t--)n()},i.updateHostUI=function(){var e=y.Instance.isLocalUserHost(),n=y.Instance.getHostPlayer();if(e)n&&(this.infoContainer&&(this.infoContainer.active=!1),this.actionsButtonContainer&&(this.actionsButtonContainer.active=!0));else if(n&&(this.actionsButtonContainer&&(this.actionsButtonContainer.active=!1),this.infoContainer)){var t=this.infoContainer.getComponent(c);if(t){var o=y.Instance.getDisplayName(n.userId);t.string="Ask "+o+"(Host) to play again or change game"}this.infoContainer.active=!0}},i.onPlayAgainButtonClicked=function(){var e=Date.now();p.Instance&&(p.Instance.miloSDK.playAgain({timestamp:e}),console.log("Play again button clicked"))},i.onChangeGameButtonClicked=function(){var e=Date.now();p.Instance&&(p.Instance.miloSDK.changeGame({timestamp:e}),console.log("Change game button clicked"))},i.onHostChanged=function(e){console.log("PictionaryEndGameMenu: Host changed from",e.oldHostId,"to",e.newHostId),this.node.active&&this.updateHostUI()},i.checkAndShowConfetti=function(){var e,n=y.Instance.getPlayerTotalScores().sort((function(e,n){return n.score-e.score}));if(0!==n.length&&!n.every((function(e){return 0===e.score}))){var t=n[0];if(t){var o=null==(e=P.Instance)||null==(e=e.CurrentRoom)?void 0:e.sessionId;if(o){var a=y.Instance.getRoomState();if(a&&a.playersData){var i=a.playersData.find((function(e){return e.userId===t.userId}));if(i){var r=i.sessionId===o;v.instance&&(r?(v.instance.playSound("Win"),g.instance&&g.instance.showConfetti()):v.instance.playSound("Lose"))}}}}}},n}(f)).prototype,"leaderboardPlayerProfilePrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(S.prototype,"leaderboardPlayerProfilesContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(S.prototype,"leaderboardPlayerProfiles",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=n(S.prototype,"actionsButtonContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(S.prototype,"infoContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=S))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Eraser.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Brush.ts","./Pictionary_Tool.ts"],(function(r){var t,i,e,o,n,c,a,s;return{setters:[function(r){t=r.applyDecoratedDescriptor,i=r.inheritsLoose,e=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){n=r.cclegacy,c=r._decorator},function(r){a=r.PictionaryBrush},function(r){s=r.PictionaryTool}],execute:function(){var u,l,p,y,h;n._RF.push({},"97438WKb25MaK0d5cM2jck/","Pictionary_Eraser",void 0);var f=c.ccclass,b=c.property;r("PictionaryEraser",(u=f("PictionaryEraser"),l=b({type:a}),u((h=t((y=function(r){function t(){for(var t,i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];return t=r.call.apply(r,[this].concat(n))||this,e(t,"brush",h,o(t)),t}return i(t,r),t.prototype.select=function(){r.prototype.select.call(this),this.board&&this.board.setBrush(this.brush)},t}(s)).prototype,"brush",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),p=y))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_FitToScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_CameraManger.ts"],(function(e){var t,i,n,r,o,a,c,s,d,u,h,l,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.CCBoolean,s=e.director,d=e.Director,u=e.UITransform,h=e.screen,l=e.Widget,p=e.Component},function(e){g=e.PictionaryCameraManger}],execute:function(){var f,y,w,v,T;o._RF.push({},"c1bffwXCPVJn4y4/4eqlj4P","Pictionary_FitToScreen",void 0);var S=a.ccclass,m=a.property;e("PictionaryFitToScreen",(f=S("PictionaryFitToScreen"),y=m({type:c}),f((T=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"updateWidgetsRecursively",T,r(t)),t}i(t,e);var o=t.prototype;return o.onEnable=function(){var e=this;s.once(d.EVENT_AFTER_UPDATE,(function(){e.refresh()}))},o.setUiTransformToScreenSize=function(){var e=this.node.getComponent(u),t=g.instance.getCurrentOrthoHeight()/g.instance.defaultOrthoHeight,i=h.windowSize.width||window.innerWidth,n=h.windowSize.height||window.innerHeight,r=g.instance.designHeight*t,o=r*i/n;console.log("windowWidth",i,"windowHeight",n),e.setContentSize(o,r)},o.refresh=function(){this.setUiTransformToScreenSize(),this.updateWidgetsRecursively&&this.updateWidgetsInHierarchy()},o.updateWidgetsInHierarchy=function(){this.updateWidgetAndDescendants(this.node)},o.updateWidgetAndDescendants=function(e){var t=this,i=e.getComponent(l);i&&this.node.uuid!=e.uuid&&i.updateAlignment(),e.children.forEach((function(e){t.updateWidgetAndDescendants(e)}))},t}(p)).prototype,"updateWidgetsRecursively",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=v))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/pictionary_game",["./Pictionary_MiloKeyboard.ts","./Pictionary_CameraManger.ts","./Pictionary_ContentFitter.ts","./Pictionary_FitToScreen.ts","./Pictionary_MiloLayout.ts","./Pictionary_PBLogger.ts","./Pictionary_PbExtensions.ts","./Pictionary_PbSaveSystem.ts","./Pictionary_ScaleUICanvas.ts","./Pictionary_Utils.ts","./Pictionary_NetworkConfig.ts","./Pictionary_NetworkManager.ts","./Pictionary_BasePlayerData.ts","./Pictionary_BaseRoomSettings.ts","./Pictionary_BaseRoomState.ts","./Pictionary_NetworkTypes.ts","./Pictionary_PlayerTypes.ts","./Pictionary_RoomTypes.ts","./PictionaryGameHandler.ts","./Pictionary_AudioManager.ts","./Pictionary_Board.ts","./Pictionary_Brush.ts","./Pictionary_ChatManager.ts","./Pictionary_Player.ts","./Pictionary_PlayerProfile.ts","./Pictionary_Timer.ts","./Pictionary_Toolbar.ts","./Pictionary_WordManager.ts","./Pictionary_GameManager.ts","./Pictionary_Logger.ts","./Pictionary_LoggerInitializer.ts","./PictionaryRoomState.ts","./Pictionary_Eraser.ts","./Pictionary_Pencil.ts","./Pictionary_Tool.ts","./Pictionary_Undo.ts","./PicitionaryGameState.ts","./Pictionary_GameMessageType.ts","./Pictionary_IChatMessageContent.ts","./Pictionary_IGuessedWordContent.ts","./Pictionary_CountdownScreen.ts","./Pictionary_DrawingResultsMenu.ts","./Pictionary_EndGameMenu.ts","./Pictionary_LobbyMenu.ts","./Pictionary_Menu.ts","./Pictionary_PlayerAvatar.ts","./Pictionary_StartRoundMenu.ts","./Pictionary_UIManager.ts","./Pictionary_WaitingScreen.ts","./Pictionary_WordSelectionMenu.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Pictionary_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_RoomTypes.ts","./Pictionary_NetworkManager.ts","./Pictionary_NetworkTypes.ts","./PictionaryRoomState.ts","./MiloGameSDK.ts"],(function(e){var t,n,o,a,i,r,s,c,l,u,h,m,d,S,g;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,a=e._decorator,i=e.EventTarget,r=e.sys,s=e.Component},function(e){c=e.PictionaryRoomStatus},function(e){l=e.ConnectionStateChangeEvent,u=e.ServerRoomStateChangeEvent,h=e.PictionaryNetworkManager},function(e){m=e.PictionaryNetworkEvents,d=e.PictionaryConnectionState},function(e){S=e.PictionaryRoomState},function(e){g=e.MiloGameSDK}],execute:function(){var _,y;o._RF.push({},"2536623fwZLFalSUSVpGnE4","Pictionary_GameManager",void 0);var C=a.ccclass,f=a.executionOrder,v=e("RoomStatusChangeEvent",new i),E=e("KeyboardHeightChangeEvent",new i);e("PictionaryGameManager",C("PictionaryGameManager")(_=f(-2)(((y=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._roomStatus=c.NONE,t._won=!1,t._handledGameOverCallbacks=!1,t._serverStateCopy=null,t.miloSDK=new g,t._gameStartTime=0,t}t(o,e);var a=o.prototype;return a.onLoad=function(){if(o._instance)this.node.destroy();else{if(o._instance=this,this.registerEvents(),r.isBrowser){var e=document;null!=e&&e.body&&(e.body.style.backgroundColor="#ffffff",console.log("[PictionaryGameManager] Set document.body background to white"))}this.miloSDK.init({gameId:"Pictionary",debug:!0}),window.onKeyboardHeight=function(e){console.log("Keyboard height changed to:",e),E.emit("keyboardHeight",{height:e})},this.sendGameLoaded()}},a.onDestroy=function(){this.cleanup()},a.cleanup=function(){if(this.unregisterEvents(),r.isBrowser){var e=document;null!=e&&e.body&&(e.body.style.backgroundColor="",console.log("[PictionaryGameManager] Cleared document.body background to default"))}o._instance===this&&(o._instance=null)},a.registerEvents=function(){l.on(m.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),u.on(m.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},a.unregisterEvents=function(){l.off(m.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),u.off(m.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},a.sendGameLoaded=function(){var e={timestamp:Date.now()};console.log("Sending game loaded event"),this.miloSDK.gameLoaded(e)},a.sendGameStarted=function(){this._gameStartTime=Date.now();var e={timestamp:this._gameStartTime};console.log("Sending game started event"),this.miloSDK.gameStarted(e)},a.sendGameEnded=function(){var e={duration:this._gameStartTime>0?Date.now()-this._gameStartTime:0,hasWinningScreen:!1};console.log("Sending game ended event"),this.miloSDK.gameEnded(e)},a.onConnectionStateChange=function(e,t){switch(t){case d.DISCONNECTED:this._roomStatus!==c.END_GAME&&h.Instance.reconnect();break;case d.KICKED_OUT:}},a.onServerRoomStateChange=function(e){this.log("ServerRoomStateChange",e),this._serverStateCopy||(this._serverStateCopy=new S,this._serverStateCopy.copyFrom(e)),this.setRoomStatus(e.currentRoomStatus)},a.resetServerState=function(e){this._serverStateCopy||(this._serverStateCopy=new S),this._serverStateCopy.copyFrom(e)},a.setRoomStatus=function(e){if(this._roomStatus!==e){var t=this._roomStatus;this._roomStatus=e,this.OnRemoteRoomStatusChange(e),v.emit(m.ROOM_STATUS_CHANGE,t,e)}},a.GetMyPlayerData=function(){var e,t=h.Instance.CurrentRoom.sessionId;return null==(e=this._serverStateCopy)?void 0:e.playersData.find((function(e){return e.sessionId===t}))},a.GetWinnerPlayerData=function(){return null},a.OnRemoteRoomStatusChange=function(e){var t=this;switch(this.log("ServerRoomStatusChange to: "+c[e]),e){case c.NONE:case c.WAITING_FOR_PLAYERS:case c.COUNTDOWN:break;case c.GAME_SIMULATION:this.sendGameStarted();break;case c.END_GAME:this.scheduleOnce((function(){t.sendGameEnded()}),5),this.HandleGameOverCallbacks();break;default:console.warn("Unhandled room status: "+e)}},a.HandleGameOverCallbacks=function(){this._handledGameOverCallbacks?console.log("Already handled game over callbacks"):this._handledGameOverCallbacks=!0},n(o,null,[{key:"Instance",get:function(){return this._instance}}]),o}(s))._instance=null,_=y))||_)||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_GameMessageType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"72207hGM6tF940M784xRiKG","Pictionary_GameMessageType",void 0);e("PictionaryGameMessageType",function(e){return e.NONE="none",e.SET_STATE="set_state",e.DRAW_STROKE="draw_stroke",e.WORDS_LIST="words_list",e.SELECTED_WORD="selected_word",e.GUESSED_WORD="guessed_word",e.CHAT_MESSAGE="chat_message",e.REVEAL_LETTER="reveal_letter",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_IChatMessageContent.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f6f5e9lEA1DN6GCcucaQxn4","Pictionary_IChatMessageContent",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_IGuessedWordContent.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8f624C7siBPBakdBH+gUeux","Pictionary_IGuessedWordContent",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_LobbyMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_NetworkManager.ts"],(function(t){var e,n,o,r,i,a,c,u,s,l,p,m,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,s=t.Label,l=t.EditBox,p=t.Button,m=t.Node},function(t){h=t.PictionaryMenu},function(t){y=t.PictionaryNetworkManager}],execute:function(){var d,b,f,v,R,g,B,k,I,L,N,C,w;c._RF.push({},"dd85cwkfzdAepNQV5YdxkzD","Pictionary_LobbyMenu",void 0);var j=u.ccclass,P=u.property;t("PictionaryLobbyMenu",(d=j("PictionaryLobbyMenu"),b=P({type:s}),f=P({type:l}),v=P({type:l}),R=P({type:p}),g=P({type:p}),d((I=e((k=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"errorLabel",I,r(e)),o(e,"playerNameInput",L,r(e)),o(e,"roomNameInput",N,r(e)),o(e,"createRoomButton",C,r(e)),o(e,"joinRoomButton",w,r(e)),e}n(e,t);var c=e.prototype;return c.Open=function(){t.prototype.Open.call(this)},c.Close=function(){t.prototype.Close.call(this)},c.initialize=function(){t.prototype.initialize.call(this)},c.onLoad=function(){this.joinRoomButton.node.on(m.EventType.TOUCH_END,this.onJoinRoomButtonClicked,this),this.createRoomButton.node.on(m.EventType.TOUCH_END,this.onCreateRoomButtonClicked,this)},c.onJoinRoomButtonClicked=function(){var t=i(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkInputValidity()){t.next=2;break}return t.abrupt("return");case 2:return e=this.roomNameInput.string.trim(),n=this.playerNameInput.string.trim(),this.joinRoomButton.node.active=!1,this.createRoomButton.node.active=!1,t.prev=6,t.next=9,y.Instance.connect(e,n);case 9:this.joinRoomButton.node.active=!0,this.createRoomButton.node.active=!0,this.Close(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(6),this.errorLabel.string="Failed to join the room. Please try again.",this.errorLabel.node.active=!0,this.joinRoomButton.node.active=!0,this.createRoomButton.node.active=!0,console.error("Connection error:",t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),c.onCreateRoomButtonClicked=function(){var t=i(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkInputValidity()){t.next=2;break}return t.abrupt("return");case 2:return e=this.roomNameInput.string.trim(),n=this.playerNameInput.string.trim(),this.createRoomButton.node.active=!1,this.joinRoomButton.node.active=!1,t.prev=6,t.next=9,y.Instance.createAndJoinRoom(e,n);case 9:this.createRoomButton.node.active=!0,this.joinRoomButton.node.active=!0,this.Close(),t.next=21;break;case 14:t.prev=14,t.t0=t.catch(6),this.errorLabel.string="Failed to create and join the room. Please try again.",this.errorLabel.node.active=!0,this.createRoomButton.node.active=!0,this.joinRoomButton.node.active=!0,console.error("Create Room error:",t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,14]])})));return function(){return t.apply(this,arguments)}}(),c.checkInputValidity=function(){var t=this.roomNameInput.string.trim(),e=this.playerNameInput.string.trim();return 0!==t.length&&0!==e.length||(this.errorLabel.string="Room name and player name cannot be empty",this.errorLabel.node.active=!0,!1)},e}(h)).prototype,"errorLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(k.prototype,"playerNameInput",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(k.prototype,"roomNameInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(k.prototype,"createRoomButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(k.prototype,"joinRoomButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=k))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Logger.ts",["cc"],(function(){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"c3d26wnPGZC0qXO4+GKN77y","Pictionary_Logger",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_LoggerInitializer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PbExtensions.ts","./Pictionary_PBLogger.ts"],(function(e){var i,o,t,n,r,c,s;return{setters:[function(e){i=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,n=e.sys,r=e.Component},null,function(e){c=e.PictionaryPBLogger,s=e.LogLevel}],execute:function(){var a;o._RF.push({},"6d5cflyQaJNIZBlVSNxUZHz","Pictionary_LoggerInitializer",void 0);var g=t.ccclass,u=t.executionOrder;e("PictionaryLoggerInitializer",g("PictionaryLoggerInitializer")(a=u(-1e3)(a=function(e){function o(){return e.apply(this,arguments)||this}return i(o,e),o.prototype.onLoad=function(){n.isNative?(c.setLevel(s.Info),c.setProductionMode(!0)):(c.setLevel(s.Debug),c.setProductionMode(!1)),this.log("LoggerInitializer: Logging extensions are ready to use!")},o}(r))||a)||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PBLogger.ts"],(function(n){var e,t,i,o,r,c,a,u,l,s;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,c=n._decorator,a=n.Node,u=n.CCString,l=n.Component},function(n){s=n.PictionaryPBLogger}],execute:function(){var p,y,f,h,d,g,P;r._RF.push({},"70acfH8+KZLKILGN50TNq2E","Pictionary_Menu",void 0);var m=c.ccclass,v=c.property;n("PictionaryMenu",(p=m("PictionaryMenu"),y=v({type:a}),f=v({type:u}),p((g=e((d=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return e=n.call.apply(n,[this].concat(r))||this,i(e,"content",g,o(e)),i(e,"menuName",P,o(e)),e.isOpened=!1,e}t(e,n);var r=e.prototype;return r.onLoad=function(){null==this.content&&(this.content=this.node.getChildByName("Content"))},r.Open=function(){this.content.active=!0,this.isOpened=!0},r.Close=function(){this.content.active=!1,this.isOpened=!1},r.initialize=function(){s.info("Menu initialize called")},e}(l)).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(d.prototype,"menuName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=d))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_MiloKeyboard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,u,l,c,h,p,b,d,y,_,f,g,C,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,u=t.Prefab,l=t.Label,c=t.EditBox,h=t.Vec3,p=t.UIOpacity,b=t.UITransform,d=t.instantiate,y=t.Button,_=t.EventHandler,f=t.Sprite,g=t.tween,C=t.Component,k=t.Color}],execute:function(){var T,m,w,v,L,K,x,P,z,E,O,I,S,B,D,N,V,A,U,H,M,R,j,F,q,G;r._RF.push({},"bfd893E4+5Doq0mGo6HUwSj","Pictionary_MiloKeyboard",void 0);var J=s.ccclass,Q=s.property;t("PictionaryMiloKeyboard",(T=J("PictionaryMiloKeyboard"),m=Q({type:a}),w=Q({type:a}),v=Q({type:u}),L=Q({type:l}),K=Q({type:a}),x=Q({type:c}),P=Q({type:a}),z=Q({type:a}),T(((G=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"content",I,o(e)),n(e,"keyboardContent",S,o(e)),n(e,"keyPrefab",B,o(e)),n(e,"inputLabel",D,o(e)),n(e,"keyboardLayout",N,o(e)),n(e,"linkedEditBox",V,o(e)),n(e,"cursorBlinkRate",A,o(e)),n(e,"cursorNode",U,o(e)),n(e,"outSideArea",H,o(e)),n(e,"keyboardTopPadding",M,o(e)),n(e,"animationDuration",R,o(e)),n(e,"slideDistance",j,o(e)),n(e,"darkKeysColor",F,o(e)),n(e,"lightKeysColor",q,o(e)),e._currentTween=null,e._contentOriginalPos=null,e._lowerCaseLayout=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["123",",","space",".","return"]],e._upperCaseLayout=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["shift","Z","X","C","V","B","N","M","backspace"],["123",",","space",".","return"]],e._symbolsLayout=[["1","2","3","4","5","6","7","8","9","0"],["-","/",":",";","(",")","$","&","@",'"'],["#=",".",",","?","!","'","backspace"],["ABC",",","space",".","return"]],e._currentLayout=void 0,e._isUpperCase=!1,e._isSymbols=!1,e._inputText="",e._onSendCallback=null,e._isVisible=!0,e._cursorVisible=!0,e._cursorTimer=0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){e.Instance=this,this.content&&(this._contentOriginalPos=new h(this.content.position.x,this.content.position.y,this.content.position.z),this.content.getComponent(p)||this.content.addComponent(p)),this.hideKeyboard(),this.outSideArea&&this.outSideArea.on(a.EventType.TOUCH_END,this.onOutsideAreaClicked,this),this.keyboardContent&&(this.keyboardContent.on(a.EventType.TOUCH_START,this.onKeyboardContentTouched,this),this.keyboardContent.on(a.EventType.TOUCH_MOVE,this.onKeyboardContentTouched,this),this.keyboardContent.on(a.EventType.TOUCH_END,this.onKeyboardContentTouched,this),this.keyboardContent.on(a.EventType.TOUCH_CANCEL,this.onKeyboardContentTouched,this))},r.start=function(){var t=this;this._inputText="",this._currentLayout=this._lowerCaseLayout,setTimeout((function(){t.createKeyboard(),t.updateInputLabel()}),10)},r.createKeyboard=function(){this.keyboardLayout.removeAllChildren();var t=this.node.getComponent(b).width;console.log("widthOfTheKeyboard",t);for(var e=(t-100)/11,i=0;i<this._currentLayout.length;i++){var n=this._currentLayout[i],o=10*e+90,r=-(i===this._currentLayout.length-1?o:n.length*e+10*(n.length-1))/2,s=85*(this._currentLayout.length/2-i-.5)-this.keyboardTopPadding,a=[];if(i===this._currentLayout.length-1){var u=o-10*(n.length-1);a.push(1.5*e),a.push(e);var c=u-(a[0]+2*a[1]),h=.75*c,p=.25*c;a.push(h),a.push(e),a.push(p)}for(var g=r,C=0;C<n.length;C++){var k=n[C],T=d(this.keyPrefab);T.active=!0,this.keyboardLayout.addChild(T);var m=T.getComponent(b);i===this._currentLayout.length-1?m.width=a[C]:m.width="shift"===k||"backspace"===k||"#+="===k?1.25*e:e,m.height=75,g+=m.width/2,T.position.set(g,s,0),g+=m.width/2+10;var w=k;"space"===k&&(w=" "),"backspace"===k&&(w=""),"return"===k&&(w="Enter"),"shift"===k&&(w=""),T.getComponentInChildren(l).string=w;var v=T.getComponent(y),L=new _;if(L.target=this.node,L.component="MiloKeyboard",L.handler="onKeyPressed",L.customEventData=k,v.clickEvents=[],v.clickEvents.push(L),"shift"===k||"backspace"===k||"return"===k||"123"===k||"ABC"===k){var K=T.getComponent(f);K&&(K.color=this.darkKeysColor),v&&(v.normalColor=this.darkKeysColor)}else{var x=T.getComponent(f);x&&(x.color=this.lightKeysColor),v&&(v.normalColor=this.lightKeysColor)}}}},r.onKeyPressed=function(t,e){var i=e;switch(i){case"backspace":this._inputText.length>0&&(this._inputText=this._inputText.substring(0,this._inputText.length-1));break;case"space":this._inputText+=" ";break;case",":this._inputText+=",";break;case".":this._inputText+=".";break;case"return":if(this._onSendCallback){var n=this._inputText;this.clearInput(),this.hideKeyboard(),this._onSendCallback(n)}else this.clearInput(),this.hideKeyboard();break;case"shift":this._isUpperCase=!this._isUpperCase,this._currentLayout=this._isUpperCase?this._upperCaseLayout:this._lowerCaseLayout,this.createKeyboard();break;case"123":this._isSymbols=!0,this._isUpperCase=!1,this._currentLayout=this._symbolsLayout,this.createKeyboard();break;case"ABC":this._isSymbols=!1,this._currentLayout=this._lowerCaseLayout,this.createKeyboard();break;case"#+=":break;default:this._inputText+=i}this.updateInputLabel()},r.updateInputLabel=function(){if(this.inputLabel&&(this.inputLabel.string=this._inputText,this.cursorNode)){this.cursorNode.active=this._cursorVisible;var t=this.inputLabel.string,e=this.inputLabel.getComponent(b).contentSize.width;if(0===t.length){var i=-e/2+5;this.cursorNode.position=new h(i,this.cursorNode.position.y,this.cursorNode.position.z)}else{var n=e/2+(this.inputLabel.getComponent(b).width-e)/2;this.cursorNode.position=new h(n,this.cursorNode.position.y,this.cursorNode.position.z)}}this.linkedEditBox&&(this.linkedEditBox.string=this._inputText)},r.update=function(t){this._cursorTimer+=t,this._cursorTimer>=this.cursorBlinkRate&&(this._cursorTimer=0,this._cursorVisible=!this._cursorVisible,this.updateInputLabel())},r.getInputText=function(){return this._inputText},r.clearInput=function(){this._inputText="",this.updateInputLabel()},r.setInputText=function(t){this._inputText=t,this.updateInputLabel()},r.setSendCallback=function(t){this._onSendCallback=t},r.showKeyboard=function(){this._currentTween&&(this._currentTween.stop(),this._currentTween=null),this._isVisible=!0,this.content.active=!0,this._cursorVisible=!0,this._cursorTimer=0,this._contentOriginalPos&&(this.content.position=new h(this._contentOriginalPos.x,this._contentOriginalPos.y-this.slideDistance,this._contentOriginalPos.z),this._currentTween=g(this.content).to(this.animationDuration,{position:this._contentOriginalPos},{easing:"cubicOut"}).start())},r.hideKeyboard=function(){var t=this;if(this._currentTween&&(this._currentTween.stop(),this._currentTween=null),this._isVisible)if(this._isVisible=!1,this._contentOriginalPos){var e=new h(this._contentOriginalPos.x,this._contentOriginalPos.y-this.slideDistance,this._contentOriginalPos.z);this._currentTween=g(this.content).to(this.animationDuration,{position:e},{easing:"cubicIn"}).call((function(){t.content.active=!1})).start()}else this.content.active=!1},r.toggleKeyboard=function(){this._isVisible=!this._isVisible,this.content.active=this._isVisible},r.setLinkedEditBox=function(t){this.linkedEditBox=t},r.onOutsideAreaClicked=function(){this.hideKeyboard(),this.clearInput()},r.onKeyboardContentTouched=function(t){t.propagationStopped=!0},e}(C)).Instance=null,I=e((O=G).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(O.prototype,"keyboardContent",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(O.prototype,"keyPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(O.prototype,"inputLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(O.prototype,"keyboardLayout",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(O.prototype,"linkedEditBox",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(O.prototype,"cursorBlinkRate",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),U=e(O.prototype,"cursorNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(O.prototype,"outSideArea",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(O.prototype,"keyboardTopPadding",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),R=e(O.prototype,"animationDuration",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),j=e(O.prototype,"slideDistance",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),F=e(O.prototype,"darkKeysColor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k(0,0,0,1)}}),q=e(O.prototype,"lightKeysColor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k(255,255,255,1)}}),E=O))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_MiloLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,a,s,r,h,c,u,l,p,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,h=t.Enum,c=t.Size,u=t.Node,l=t.Vec3,p=t.UITransform,_=t.Component}],execute:function(){var T,d,y,f,g,E,O,R,C,L,m,v,M,b,I;s._RF.push({},"2306bazD3FGnq2pvU/G1blw","Pictionary_MiloLayout",void 0);var H=r.ccclass,w=r.property,N=t("MiloLayoutType",function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.GRID=2]="GRID",t}({})),A=t("MiloLayoutAlign",function(t){return t[t.LEFT_TOP=0]="LEFT_TOP",t[t.CENTER_TOP=1]="CENTER_TOP",t[t.RIGHT_TOP=2]="RIGHT_TOP",t[t.LEFT_CENTER=3]="LEFT_CENTER",t[t.CENTER=4]="CENTER",t[t.RIGHT_CENTER=5]="RIGHT_CENTER",t[t.LEFT_BOTTOM=6]="LEFT_BOTTOM",t[t.CENTER_BOTTOM=7]="CENTER_BOTTOM",t[t.RIGHT_BOTTOM=8]="RIGHT_BOTTOM",t}({}));t("PictionaryMiloLayout",(T=H("PictionaryMiloLayout"),d=w({type:h(N)}),y=w({type:h(N)}),f=w({type:h(A)}),g=w({type:h(A)}),E=w({visible:function(){return this._layoutType===N.GRID}}),T((C=e((R=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"_layoutType",C,o(e)),n(e,"_alignment",L,o(e)),n(e,"_spacingX",m,o(e)),n(e,"_spacingY",v,o(e)),n(e,"_columns",M,o(e)),n(e,"_padding",b,o(e)),n(e,"_autoResize",I,o(e)),e._layoutSize=new c(0,0),e._lastChildActiveState=[],e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.on(u.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(u.EventType.CHILD_REMOVED,this.onChildRemoved,this)},s.onDestroy=function(){this.node.off(u.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(u.EventType.CHILD_REMOVED,this.onChildRemoved,this),this.removeAllChildListeners()},s.onChildRemoved=function(t){this.removeChildListener(t),this.updateLayout()},s.removeAllChildListeners=function(){var t=this;this.node.children.forEach((function(e){return t.removeChildListener(e)}))},s.removeChildListener=function(t){t.__miloLayoutActiveHandler&&(t.off(u.EventType.ACTIVE_IN_HIERARCHY_CHANGED,t.__miloLayoutActiveHandler),delete t.__miloLayoutActiveHandler)},s.start=function(){this.updateActiveChildListeners(),this.updateLayout()},s.onEnable=function(){this.updateLayout()},s.updateActiveChildListeners=function(){var t=this;this.removeAllChildListeners(),this.node.children.forEach((function(e){return t.addChildActiveListener(e)}))},s.addChildActiveListener=function(t){var e=this;if(!t.__miloLayoutActiveHandler){var i=function(){e.scheduleOnce(e.updateLayout.bind(e),0)};t.__miloLayoutActiveHandler=i,t.on(u.EventType.ACTIVE_IN_HIERARCHY_CHANGED,i)}},s.getAlignmentOffset=function(t){var e=new l,i=this.node.getComponent(p);if(!i)return e;var n,o,a=i.contentSize,s=i.anchorPoint;switch(n=-a.width*s.x,o=a.height*s.y,this._alignment%3){case A.LEFT_TOP%3:case A.LEFT_CENTER%3:case A.LEFT_BOTTOM%3:e.x=n+this._padding;break;case A.CENTER_TOP%3:case A.CENTER%3:case A.CENTER_BOTTOM%3:e.x=n+(a.width-t.width)/2;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:e.x=n+a.width-t.width-this._padding;break;default:e.x=n}switch(Math.floor(this._alignment/3)){case Math.floor(A.LEFT_TOP/3):case Math.floor(A.CENTER_TOP/3):case Math.floor(A.RIGHT_TOP/3):e.y=o-this._padding;break;case Math.floor(A.LEFT_CENTER/3):case Math.floor(A.CENTER/3):case Math.floor(A.RIGHT_CENTER/3):e.y=o-(a.height+t.height)/2;break;case Math.floor(A.LEFT_BOTTOM/3):case Math.floor(A.CENTER_BOTTOM/3):case Math.floor(A.RIGHT_BOTTOM/3):e.y=o-a.height+t.height+this._padding;break;default:e.y=o}return e},s.updateLayout=function(){if(this.node&&this.node.isValid){var t=this.node.children.filter((function(t){return t.active&&t.isValid}));if(0!==t.length){switch(this._layoutType){case N.HORIZONTAL:this.updateHorizontalLayout(t);break;case N.VERTICAL:this.updateVerticalLayout(t);break;case N.GRID:this.updateGridLayout(t)}if(this._autoResize){var e=this.node.getComponent(p);e&&this._layoutSize.width>0&&this._layoutSize.height>0&&e.setContentSize(this._layoutSize)}}else this._layoutSize=new c(2*this._padding,2*this._padding)}},s.updateHorizontalLayout=function(t){var e=this,i=-this._spacingX,n=0;t.forEach((function(o,a){var s=o.getComponent(p);s&&s.contentSize.width&&s.contentSize.height&&(i+=s.width,a<t.length-1&&(i+=e._spacingX),n=Math.max(n,s.height))})),i+=2*this._padding,n+=2*this._padding,this._layoutSize=new c(i,n);var o=this.getAlignmentOffset(this._layoutSize),a=o.x;t.forEach((function(t){var i=t.getComponent(p);if(i){var n=i.width,s=i.height,r=i.anchorPoint,h=a-n*r.x,c=o.y+s*r.y;t.position=new l(h+n/2,c-s/2,0),a+=n+e._spacingX}}))},s.updateVerticalLayout=function(t){var e=this,i=-this._spacingY,n=0;t.forEach((function(o,a){var s=o.getComponent(p);s&&(i+=s.height,a<t.length-1&&(i+=e._spacingY),n=Math.max(n,s.width))})),i+=2*this._padding,n+=2*this._padding,this._layoutSize=new c(n,i);var o=this.getAlignmentOffset(this._layoutSize),a=o.y;t.forEach((function(t){var i=t.getComponent(p);if(i){var s=i.width,r=i.height,h=i.anchorPoint,c=o.x+(n-s)/2-s*h.x;switch(e._alignment%3){case A.LEFT_TOP%3:case A.LEFT_CENTER%3:case A.LEFT_BOTTOM%3:c=o.x+e._padding-s*h.x;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:c=o.x+n-s-e._padding-s*h.x}var u=a+r*h.y;t.position=new l(c+s/2,u-r/2,0),a-=r+e._spacingY}}))},s.updateGridLayout=function(t){this._columns<=0&&(this._columns=1);var e=Math.ceil(t.length/this._columns),i=0,n=0;if(t.forEach((function(t){var e=t.getComponent(p);e&&(i=Math.max(i,e.width),n=Math.max(n,e.height))})),0!==i&&0!==n){var o=2*this._padding+i*this._columns+this._spacingX*(this._columns-1),a=2*this._padding+n*e+this._spacingY*(e-1);this._layoutSize=new c(o,a);for(var s=this.getAlignmentOffset(this._layoutSize),r=0;r<e;r++){var h=Math.min(this._columns,t.length-r*this._columns),u=0;switch(this._alignment%3){case A.CENTER_TOP%3:case A.CENTER%3:case A.CENTER_BOTTOM%3:u=(this._columns*i+(this._columns-1)*this._spacingX-h*i-(h-1)*this._spacingX)/2;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:u=this._columns*i+(this._columns-1)*this._spacingX-(h*i+(h-1)*this._spacingX)}for(var _=0;_<h;_++){var T=r*this._columns+_;if(T>=t.length)break;var d=t[T],y=d.getComponent(p);if(y){var f=y.width,g=y.height,E=y.anchorPoint,O=s.x+this._padding+_*(i+this._spacingX)+u,R=s.y-this._padding-r*(n+this._spacingY),C=O-f*E.x,L=R+g*E.y;switch(this._alignment%3){case A.LEFT_TOP%3:case A.LEFT_CENTER%3:case A.LEFT_BOTTOM%3:C=O-f*E.x;break;case A.CENTER_TOP%3:case A.CENTER%3:case A.CENTER_BOTTOM%3:C=O+(i-f)/2-f*E.x;break;case A.RIGHT_TOP%3:case A.RIGHT_CENTER%3:case A.RIGHT_BOTTOM%3:C=O+i-f-f*E.x}switch(Math.floor(this._alignment/3)){case Math.floor(A.LEFT_TOP/3):case Math.floor(A.CENTER_TOP/3):case Math.floor(A.RIGHT_TOP/3):L=R+g*E.y;break;case Math.floor(A.LEFT_CENTER/3):case Math.floor(A.CENTER/3):case Math.floor(A.RIGHT_CENTER/3):L=R-(n-g)/2+g*E.y;break;case Math.floor(A.LEFT_BOTTOM/3):case Math.floor(A.CENTER_BOTTOM/3):case Math.floor(A.RIGHT_BOTTOM/3):L=R-n+g+g*E.y}d.position=new l(C+f/2,L-g/2,0)}}}}},s.update=function(t){var e=this;if(this.node&&this.node.isValid){var i=this.node.children.map((function(t){return t.active&&t.isValid}));i.length===this._lastChildActiveState.length&&i.every((function(t,i){return t===e._lastChildActiveState[i]}))||(this._lastChildActiveState=i,this.updateLayout())}},s.onChildAdded=function(t){this.addChildActiveListener(t),this.updateLayout(),this._lastChildActiveState=this.node.children.map((function(t){return t.active&&t.isValid}))},s.onRestore=function(){this.updateLayout()},s.resetInEditor=function(){this.updateLayout()},a(e,[{key:"layoutType",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this.updateLayout()}},{key:"alignment",get:function(){return this._alignment},set:function(t){this._alignment=t,this.updateLayout()}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX=t,this.updateLayout()}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY=t,this.updateLayout()}},{key:"columns",get:function(){return this._columns},set:function(t){this._columns=Math.max(1,t),this.updateLayout()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=Math.max(0,t),this.updateLayout()}},{key:"autoResize",get:function(){return this._autoResize},set:function(t){this._autoResize=t,this.updateLayout()}}]),e}(_)).prototype,"_layoutType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.HORIZONTAL}}),e(R.prototype,"layoutType",[y],Object.getOwnPropertyDescriptor(R.prototype,"layoutType"),R.prototype),L=e(R.prototype,"_alignment",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.LEFT_TOP}}),e(R.prototype,"alignment",[g],Object.getOwnPropertyDescriptor(R.prototype,"alignment"),R.prototype),m=e(R.prototype,"_spacingX",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(R.prototype,"spacingX",[w],Object.getOwnPropertyDescriptor(R.prototype,"spacingX"),R.prototype),v=e(R.prototype,"_spacingY",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(R.prototype,"spacingY",[w],Object.getOwnPropertyDescriptor(R.prototype,"spacingY"),R.prototype),M=e(R.prototype,"_columns",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),e(R.prototype,"columns",[E],Object.getOwnPropertyDescriptor(R.prototype,"columns"),R.prototype),b=e(R.prototype,"_padding",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(R.prototype,"padding",[w],Object.getOwnPropertyDescriptor(R.prototype,"padding"),R.prototype),I=e(R.prototype,"_autoResize",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(R.prototype,"autoResize",[w],Object.getOwnPropertyDescriptor(R.prototype,"autoResize"),R.prototype),O=R))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_NetworkConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PBLogger.ts"],(function(r){var e,t,i,o,n,a,s,u,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,o=r.assertThisInitialized},function(r){n=r.cclegacy,a=r._decorator,s=r.sys,u=r.Component},function(r){c=r.PictionaryPBLogger}],execute:function(){var l,f,p,g,m,d,h,y,v,P,b,S,I,w,C;n._RF.push({},"86a7bJv0rFMmaesJAWA06MD","Pictionary_NetworkConfig",void 0);var L=a.ccclass,N=a.property;r("PictionaryNetworkConfig",(l=L("PictionaryNetworkConfig"),f=N({tooltip:"Server host address"}),p=N({tooltip:"Server port number"}),g=N({tooltip:"Use SSL for connections"}),m=N({tooltip:"Player identifier"}),d=N({tooltip:"Room identifier"}),h=N({tooltip:"Name of the game"}),l((P=e((v=function(r){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n))||this,i(e,"serverHost",P,o(e)),i(e,"serverPort",b,o(e)),i(e,"useSSL",S,o(e)),i(e,"userId",I,o(e)),i(e,"roomId",w,o(e)),i(e,"gameName",C,o(e)),e}t(e,r);var n=e.prototype;return n.initNetworkConfig=function(){if(s.isBrowser){var r=new URLSearchParams(window.location.search),e="true"===r.get("debug");c.debug("Initializing network config (debug="+e+")"),e?this.parseQueryParams(r):this.parseInjectedConfig(),c.debug("Final network config:",{serverHost:this.serverHost,serverPort:this.serverPort,useSSL:this.useSSL,userId:this.userId,roomId:this.roomId,gameName:this.gameName})}},n.parseQueryParams=function(r){var e=this;c.debug("Parsing config from query parameters"),this.updateConfigFromQueryParam(r,"userId",(function(r){return e.userId=r})),this.updateConfigFromQueryParam(r,"roomId",(function(r){return e.roomId=r})),this.updateConfigFromQueryParam(r,"apiUrl",(function(r){return e.serverHost=r})),this.updateConfigFromQueryParam(r,"apiPort",(function(r){var t=parseInt(r);isNaN(t)||(e.serverPort=t)})),this.updateConfigFromQueryParam(r,"useSSL",(function(r){return e.useSSL="true"===r}))},n.parseInjectedConfig=function(){c.debug("Parsing config from injected GameConfig");try{var r=window.GameConfig;if(!r)return void c.debug("No injected GameConfig found");var e="string"==typeof r?JSON.parse(r):r;this.applyConfig(e)}catch(r){c.debug("Failed to parse injected GameConfig:",r)}},n.applyConfig=function(r){var e,t,i,o,n;r&&(this.userId=null!=(e=r.userId)?e:this.userId,this.roomId=null!=(t=r.roomId)?t:this.roomId,this.serverHost=null!=(i=r.apiUrl)?i:this.serverHost,this.serverPort=Number(null!=(o=r.apiPort)?o:this.serverPort),this.useSSL=null!=(n=r.useSSL)?n:this.useSSL)},n.updateConfigFromQueryParam=function(r,e,t){var i=r.get(e);null!=i&&t(i)},e}(u)).prototype,"serverHost",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localhost"}}),b=e(v.prototype,"serverPort",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),S=e(v.prototype,"useSSL",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=e(v.prototype,"userId",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=e(v.prototype,"roomId",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"testroom1"}}),C=e(v.prototype,"gameName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pictionary"}}),y=v))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./Pictionary_NetworkTypes.ts","./Pictionary_PlayerTypes.ts","./Pictionary_PbSaveSystem.ts","./Pictionary_NetworkConfig.ts","./Pictionary_PBLogger.ts","./colyseus.js"],(function(t){var n,e,o,i,r,a,c,s,h,u,l,f,g,d,m,p,C,v,_,y,k;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.extends,a=t.createClass,c=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){h=t.cclegacy,u=t._decorator,l=t.EventTarget,f=t.CCBoolean,g=t.Component},null,function(t){d=t.PictionaryConnectionState,m=t.PictionaryNetworkEvents,p=t.PictionaryServerMessageType},function(t){C=t.PictionaryPlayerType},function(t){v=t.PictionaryPbSaveSystem},function(t){_=t.PictionaryNetworkConfig},function(t){y=t.PictionaryPBLogger},function(t){k=t.default}],execute:function(){var w,S,N,E,D,R,I,T;h._RF.push({},"1704cfz1vNFWqd+wOT8pQ0Z","Pictionary_NetworkManager",void 0);var P=u.ccclass,b=u.property,M={roomId:"testroom1",reconnectionToken:"eyJ"},x=t("ConnectionStateChangeEvent",new l),O=t("ServerRoomStateChangeEvent",new l),A=t("ServerMessageEvent",new l);t("PictionaryNetworkManager",(w=P("PictionaryNetworkManager"),S=b({type:f,tooltip:"Enable development mode for additional logging"}),N=b({type:_,tooltip:"Network configuration settings"}),w(((T=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return n=t.call.apply(t,[this].concat(a))||this,o(n,"isDevMode",R,i(n)),o(n,"networkConfig",I,i(n)),n._client=void 0,n._room=void 0,n._currentConnectionState=d.INITIALIZING,n._reconnectionData=r({},M),n}e(n,t);var h=n.prototype;return h.onLoad=function(){if(n._instance)return this.log("NetworkManager instance already exists. Destroying duplicate."),void this.node.destroy();n._instance=this,this.networkConfig.initNetworkConfig(),this.isDevMode||y.setProductionMode(!0)},h.start=function(){this.initializeClient(),this.log("============ Initializing client ========="),this.log("============ Connecting to room ========="),this.connect(this.networkConfig.roomId,this.networkConfig.userId)},h.onDestroy=function(){this.cleanup()},h.cleanup=function(){this._room&&(this.leaveRoom(),this._room=null),this._client&&(this._client=null),this._currentConnectionState=d.INITIALIZING,this._reconnectionData=r({},M),n._instance===this&&(n._instance=null)},h.initializeClient=function(){var t=this.networkConfig.useSSL?"wss":"ws",n="";n=0==this.networkConfig.serverPort?t+"://"+this.networkConfig.serverHost:t+"://"+this.networkConfig.serverHost+":"+this.networkConfig.serverPort,this.log("Initializing client with endpoint: "+n),this._client=new k.Client(n)},h.shouldRejoin=function(){return!this.isDevMode&&(this._reconnectionData=v.LoadData(this.networkConfig.gameName),!!(this._reconnectionData&&this._reconnectionData.roomId&&this._reconnectionData.reconnectionToken)&&this._reconnectionData.roomId===this.networkConfig.roomId)},h.connect=function(){var t=c(s().mark((function t(n,e){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.log("============ Connecting to room from connect function ========="),this.updateConnectionState(d.CONNECTING),!this.shouldRejoin()){t.next=7;break}return this.log("Rejoining room",n),t.next=6,this.rejoin();case 6:return t.abrupt("return");case 7:return t.prev=7,o=this.createPlayerData(e),this.log("Joining with options ",{player:o}),t.next=12,this._client.joinById(n,{player:o});case 12:this._room=t.sent,this.initAfterJoin(n),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(7),this.handleConnectionError(t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[7,16]])})));return function(n,e){return t.apply(this,arguments)}}(),h.initAfterJoin=function(t){this.updateConnectionState(d.JOINED_ROOM),this.log("Joined room "+t+" with sessionId: "+this._room.sessionId),this.initializeRoomCallbacks(),this.saveReconnectionData()},h.createAndJoinRoom=function(){var t=c(s().mark((function t(n,e){var o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.log("Creating room",n),this.updateConnectionState(d.CONNECTING),t.prev=2,o=this.createPlayerData(e),t.next=6,this._client.create("PictionaryRoom",{roomId:n,player:o,roomSettings:{maxClients:10}});case 6:this._room=t.sent,this.initAfterJoin(n),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),this.handleConnectionError(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(n,e){return t.apply(this,arguments)}}(),h.createPlayerData=function(t){return{userId:t,name:t,avatar:"randomProfilePicture",type:C.HUMAN}},h.initializeRoomCallbacks=function(){var t=this;this._room?(this._room.onStateChange((function(t){O.emit(m.SERVER_ROOM_STATE_CHANGE,t)})),this._room.onLeave((function(n){4001===n?t.updateConnectionState(d.KICKED_OUT):t.updateConnectionState(d.DISCONNECTED)})),this._room.onMessage(p.KICKED_OUT,(function(){t.updateConnectionState(d.KICKED_OUT)})),this._room.onMessage("*",(function(t,n){A.emit(m.SERVER_MESSAGE,t,n)}))):this.log("Cannot initialize callbacks: Room is not defined")},h.updateConnectionState=function(t){if(this._currentConnectionState!==t){var n=this._currentConnectionState;this._currentConnectionState=t,this.log("Connection state changed: "+d[n]+" -> "+d[t]),x.emit(m.CONNECTION_STATE_CHANGE,n,t)}},h.reconnect=function(){var t=c(s().mark((function t(n,e,o){var i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=1),void 0===e&&(e=10),void 0===o&&(o=2e3),this._currentConnectionState===d.DISCONNECTED||this._currentConnectionState===d.RECONNECTING){t.next=6;break}return this.log("Cannot reconnect: Current state is "+d[this._currentConnectionState]),t.abrupt("return");case 6:return this._room&&this._room.state&&(i=this._room.state).roomSettings&&i.roomSettings.maxReconnectionAttempts&&(e=i.roomSettings.maxReconnectionAttempts),this.updateConnectionState(d.RECONNECTING),this.log("Reconnect attempt "+n+"/"+e),t.prev=9,t.next=12,this.delay(o);case 12:if(this._room&&this._room.reconnectionToken){t.next=14;break}throw new Error("Reconnection token not available");case 14:return t.next=16,this._client.reconnect(this._room.reconnectionToken);case 16:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(d.JOINED_ROOM),this.log("Reconnected successfully."),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(9),this.handleReconnectionError(t.t0,n,e,o);case 27:case"end":return t.stop()}}),t,this,[[9,24]])})));return function(n,e,o){return t.apply(this,arguments)}}(),h.rejoin=function(){var t=c(s().mark((function t(n,e,o){var i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),void 0===e&&(e=10),void 0===o&&(o=2e3),this.log("Rejoin attempt "+n+"/"+e),t.prev=4,t.next=7,this.delay(o);case 7:if(this._reconnectionData&&this._reconnectionData.reconnectionToken){t.next=9;break}throw new Error("Reconnection data not available");case 9:return i=this._reconnectionData.roomId+":"+this._reconnectionData.reconnectionToken,y.info("Using formatted reconnection token: ",i),t.next=13,this._client.reconnect(i);case 13:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(d.JOINED_ROOM),this.log("Rejoined successfully."),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(4),this.handleReconnectionError(t.t0,n,e,o,"reJoin");case 24:case"end":return t.stop()}}),t,this,[[4,21]])})));return function(n,e,o){return t.apply(this,arguments)}}(),h.delay=function(){var t=c(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,n)})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),h.handleConnectionError=function(t){var n=(null==t?void 0:t.message)||"Unknown error";this.log("Error connecting to room:",n),this.updateConnectionState(d.DISCONNECTED)},h.handleReconnectionError=function(t,n,e,o,i){void 0===i&&(i="reconnect");var r=(null==t?void 0:t.message)||"Unknown error";this.log(i+" attempt "+n+" failed:",r),n<e||-1===e?"reconnect"===i?this.reconnect(n+1,e,o):this.rejoin(n+1,e,o):(this.log("Max reconnection attempts reached. Please check your network or contact support."),this.updateConnectionState(d.DISCONNECTED))},h.saveReconnectionData=function(){if(y.info("============ Saving reconnection data ========="),this._room&&this._room.reconnectionToken){var t=this._room.reconnectionToken;t.includes(":")&&(t=t.split(":")[1]),y.info("saving Reconnection token: ",t),this._reconnectionData={roomId:this.networkConfig.roomId,reconnectionToken:t},v.SaveData(this.networkConfig.gameName,this._reconnectionData),y.info("Reconnection data saved")}else this.log("Cannot save reconnection data: Room or reconnection token not available")},h.leaveRoom=function(){var t=this;this._room?(this.log("Leaving room"),this._room.leave(!0).then((function(){return t.log("Left room successfully")})).catch((function(n){return t.log("Error leaving room:",(null==n?void 0:n.message)||"Unknown error")}))):this.log("Cannot leave room: Room is not defined")},h.sendMessage=function(t,n){this._room?(this.isDevMode&&this.log("Sending message:",t,n),this._room.send(t,n)):this.log("Cannot send message: Room is not defined")},h.log=function(t){if(this.isDevMode){for(var n=arguments.length,e=new Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];e.length>0?y.info.apply(y,["[NetworkManager] "+t].concat(e)):y.info("[NetworkManager] "+t)}},a(n,[{key:"CurrentRoom",get:function(){return this._room}},{key:"CurrentConnectionState",get:function(){return this._currentConnectionState}}],[{key:"Instance",get:function(){if(!this._instance)throw new Error("NetworkManager instance is not initialized.");return this._instance}}]),n}(g))._instance=null,R=n((D=T).prototype,"isDevMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=n(D.prototype,"networkConfig",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=D))||E));h._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_NetworkTypes.ts",["cc"],(function(E){var N;return{setters:[function(E){N=E.cclegacy}],execute:function(){N._RF.push({},"9b6adMqVv9Fw5Gma0CGZzf5","Pictionary_NetworkTypes",void 0);E("PictionaryNetworkEvents",function(E){return E[E.SERVER_ROOM_STATE_CHANGE=0]="SERVER_ROOM_STATE_CHANGE",E[E.CONNECTION_STATE_CHANGE=1]="CONNECTION_STATE_CHANGE",E[E.ROOM_STATUS_CHANGE=2]="ROOM_STATUS_CHANGE",E[E.GAME_STATE_CHANGE=3]="GAME_STATE_CHANGE",E[E.SERVER_MESSAGE=4]="SERVER_MESSAGE",E}({})),E("PictionaryConnectionState",function(E){return E[E.INITIALIZING=0]="INITIALIZING",E[E.CONNECTING=1]="CONNECTING",E[E.CONNECTED=2]="CONNECTED",E[E.LOBBY=3]="LOBBY",E[E.JOINED_ROOM=4]="JOINED_ROOM",E[E.DISCONNECTED=5]="DISCONNECTED",E[E.RECONNECTING=6]="RECONNECTING",E[E.KICKED_OUT=7]="KICKED_OUT",E}({})),E("PictionaryServerMessageType",function(E){return E.NONE="none",E.KICKED_OUT="kicked_out",E.PLAYER_COMEBACK="player_comeback",E.PLAYER_JOINED="player_joined",E}({}));N._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PbExtensions.ts",["cc","./Pictionary_PBLogger.ts"],(function(t){var n,o,r,e;return{setters:[function(t){n=t.cclegacy,o=t.Vec3,r=t.Component},function(t){e=t.PictionaryPBLogger}],execute:function(){t("transformPoint",(function(){return this.worldPosition.clone()})),n._RF.push({},"ac205iMzG1JHbT0Q+N3d0VS","Pictionary_PbExtensions",void 0),o.prototype.clampMagnitude=function(t,n){if(!(t>n)){var o=this.length();return o>n?(this.normalize(),this.multiplyScalar(n)):o<t&&(this.normalize(),this.multiplyScalar(t)),this}console.error("min should be less than max")},r.prototype.log=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.info.apply(e,["["+t+"] "].concat(o))},r.prototype.logDebug=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.debug.apply(e,["["+t+"] "].concat(o))},r.prototype.logInfo=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.info.apply(e,["["+t+"] "].concat(o))},r.prototype.logWarning=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.warning.apply(e,["["+t+"] "].concat(o))},r.prototype.logError=function(){for(var t=this.constructor.name,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.error.apply(e,["["+t+"] "].concat(o))},n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PBLogger.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"94cc01d1A1Oap9CLldjHriR","Pictionary_PBLogger",void 0);var n=e("LogLevel",function(e){return e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e}({})),o=e("PictionaryPBLogger",function(){function e(){}return e.debug=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Debug,e,o)},e.info=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Info,e,o)},e.warning=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Warning,e,o)},e.error=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];this.log(n.Error,e,o)},e.log=function(e,r,o){if(e>=this.currentLevel){var t,i=n[e]+": "+r;if((t=console).log.apply(t,[i].concat(o)),this.isProduction&&window.ReactNativeWebView)try{var c={type:"log",level:n[e],message:i,params:o};window.ReactNativeWebView.postMessage(JSON.stringify(c))}catch(e){console.error("Failed to send log to ReactNativeWebView:",e)}}},e.setLevel=function(e){this.currentLevel=e},e.setProductionMode=function(e){this.isProduction=e},e}());o.currentLevel=n.Debug,o.isProduction=!1,r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PbSaveSystem.ts",["cc","./Pictionary_PBLogger.ts"],(function(t){var a,e,n,o;return{setters:[function(t){a=t.cclegacy,e=t._decorator,n=t.sys},function(t){o=t.PictionaryPBLogger}],execute:function(){var c;a._RF.push({},"1fd44qyYhlBaL8ZGl3clvlf","Pictionary_PbSaveSystem",void 0);var r=e.ccclass;t("PictionaryPbSaveSystem",r("PictionaryPbSaveSystem")(c=function(){function t(){}return t.SaveData=function(t,a){o.info("============ Saving data in pb save system ========="),n.localStorage.setItem(t,JSON.stringify(a))},t.LoadData=function(t){return JSON.parse(n.localStorage.getItem(t))},t.RemoveData=function(t){n.localStorage.removeItem(t)},t.ClearAllData=function(){n.localStorage.clear()},t}())||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Pencil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Brush.ts","./Pictionary_Tool.ts"],(function(i){var t,r,e,n,o,c,s,a;return{setters:[function(i){t=i.applyDecoratedDescriptor,r=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,c=i._decorator},function(i){s=i.PictionaryBrush},function(i){a=i.PictionaryTool}],execute:function(){var l,u,p,h,y;o._RF.push({},"3316dgZ+RhCdqCfhiQk2ir0","Pictionary_Pencil",void 0);var f=c.ccclass,P=c.property;i("PictionaryPencil",(l=f("PictionaryPencil"),u=P({type:s}),l((y=t((h=function(i){function t(){for(var t,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=i.call.apply(i,[this].concat(o))||this,e(t,"brush",y,n(t)),t}return r(t,i),t.prototype.select=function(){i.prototype.select.call(this),this.board&&this.board.setBrush(this.brush)},t}(a)).prototype,"brush",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),p=h))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_NetworkManager.ts","./Pictionary_GameMessageType.ts","./PicitionaryGameState.ts","./Pictionary_PlayerProfile.ts","./PictionaryGameHandler.ts"],(function(e){var t,i,r,o,n,a,s,l,c,u,p,f,h,y,d,g,S,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,c=e.CCInteger,u=e.Sprite,p=e.Color,f=e.tween,h=e.Component},function(e){y=e.PictionaryNetworkManager},function(e){d=e.PictionaryGameMessageType},function(e){g=e.PictionaryGameState},function(e){S=e.PictionaryPlayerProfile},function(e){m=e.PictionaryGameHandler}],execute:function(){var I,P,b,w,C,L,N,E,G,v,R,T,D,A,z,x,_;n._RF.push({},"8cf4cp74hlLO4Am8q00N9IX","Pictionary_Player",void 0);var M=a.ccclass,O=a.property,k=e("PlayerState",function(e){return e[e.IDLE=0]="IDLE",e[e.WORD_SELECTION=1]="WORD_SELECTION",e[e.DRAWING=2]="DRAWING",e[e.GUESSING=3]="GUESSING",e[e.EVALUATION=4]="EVALUATION",e}({}));e("PictionaryPlayer",(I=M("PictionaryPlayer"),P=O({type:s,tooltip:"Player's drawing icon"}),b=O({type:s}),w=O({type:s,tooltip:"Container node for message notification"}),C=O({type:l,tooltip:"Label to show the chat message"}),L=O({type:c,tooltip:"Player's index in the game"}),N=O({type:u,tooltip:"Background sprite for player UI"}),E=O({type:S,tooltip:"Player profile component"}),I((R=t((v=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"drawingIcon",R,o(t)),r(t,"crownImage",T,o(t)),r(t,"messageContainer",D,o(t)),r(t,"messageLabel",A,o(t)),t.userId="",t.playerName="",r(t,"index",z,o(t)),r(t,"bgSprite",x,o(t)),r(t,"profile",_,o(t)),t.board=null,t.hasGuessedAnswer=!1,t.playerState=k.IDLE,t.isLocal=!1,t.isInitialized=!1,t.roomSettings=null,t.oddColor=new p(15,43,77,255),t.evenColor=new p(0,0,0,0),t.correctGuessColor=new p(0,255,0,125),t}i(t,e);var n=t.prototype;return n.onEnable=function(){this.updateBgColor(),this.initializeMessageContainer()},n.initializeMessageContainer=function(){if(this.messageContainer){var e=this.messageContainer.getComponent(u);e&&(e.color=new p(e.color.r,e.color.g,e.color.b,0))}},n.initialize=function(e,t){if(e&&t){console.log("Initializing Player: "+this.index),this.board=t;var i=e.getPlayerByIndex(this.index);if(i){if(this.profile){var r=i.sessionId===y.Instance.CurrentRoom.sessionId;this.profile.initialize(i,r),this.isLocal=r}this.userId=i.userId,this.playerName=m.Instance.getDisplayName(this.userId),this.roomSettings=e.roomSettings,this.isInitialized=!0,this.updatePlayerState(e)}else console.error("[Player] No profile data found for player index "+this.index)}else console.error("[Player] Failed to initialize: Invalid room state or board")},n.setScore=function(e){this.profile&&this.profile.setScore(e)},n.resetState=function(){this.hasGuessedAnswer=!1,this.playerState=k.IDLE,this.updateBgColor()},n.onServerRoomStateChange=function(e){if(e){var t=e.getPlayerByIndex(this.index);t&&this.profile&&this.profile.setScore(t.score),this.updatePlayerState(e),this.isMyTurn(e.drawingPlayerIndex)&&this.handleTurnSpecificMessages(e)}else console.error("[Player] Invalid room state")},n.updatePlayerState=function(e){var t=this.isMyTurn(e.drawingPlayerIndex);switch(e.currentGameState){case g.WORD_SELECTION:this.playerState=t?k.WORD_SELECTION:k.IDLE;break;case g.DRAWING:this.playerState=t?k.DRAWING:k.GUESSING;break;case g.DRAWING_RESULTS:this.playerState=k.EVALUATION;break;default:this.playerState=k.IDLE}},n.handleTurnSpecificMessages=function(e){if(e.inputPayload.inputType!==d.NONE)switch(e.inputPayload.inputType){case d.SET_STATE:this.onSetState(e);break;case d.WORDS_LIST:this.handleWordsList(e)}},n.onSetState=function(e){this.updatePlayerState(e)},n.handleWordsList=function(e){console.log("[Player] Received words list ",e.inputPayload)},n.onReconnection=function(e){if(e){var t=e.getPlayerByIndex(this.index);if(t&&this.profile){var i=t.sessionId===y.Instance.CurrentRoom.sessionId;this.profile.initialize(t,i)}this.updatePlayerState(e),this.updateBgColor()}else console.error("[Player] Invalid room state for reconnection")},n.isMyTurn=function(e){return this.index===e},n.setRank=function(e){this.profile&&this.profile.setRank(e),this.updateBgColor()},n.setGuessedAnswer=function(e){this.hasGuessedAnswer=e,this.updateBgColor()},n.updateBgColor=function(){if(this.bgSprite&&this.profile){var e=this.profile.getRank()%2==0?this.evenColor:this.oddColor;this.hasGuessedAnswer&&(e=this.correctGuessColor),this.bgSprite.color=e}},n.setPlayerNumber=function(e){this.index=e},n.getScore=function(){return this.profile?this.profile.getScore():0},n.getRank=function(){return this.profile?this.profile.getRank():0},n.getProfileSpriteFrame=function(){return this.profile?this.profile.getProfileSpriteFrame():null},n.showMessageNotification=function(e){if(this.messageContainer&&this.messageLabel){var t=e.length>15?e.substring(0,15)+"...":e;this.messageLabel.string=t;var i=this.messageContainer.getComponent(u);i?(f(i).stop(),i.color=new p(i.color.r,i.color.g,i.color.b,0),f(i).to(.3,{color:new p(i.color.r,i.color.g,i.color.b,255)}).delay(1).to(.3,{color:new p(i.color.r,i.color.g,i.color.b,0)}).start()):console.warn("[Player] Sprite component not found on messageContainer")}else console.warn("[Player] Message container or label not assigned")},t}(h)).prototype,"drawingIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(v.prototype,"crownImage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(v.prototype,"messageContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(v.prototype,"messageLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(v.prototype,"index",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=t(v.prototype,"bgSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(v.prototype,"profile",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=v))||G));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PlayerAvatar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,i,n,o,l,s,c,u,p,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.Node,c=e.assetManager,u=e.Texture2D,p=e.SpriteFrame,y=e.Component}],execute:function(){var v,f,h,d,m,g,A;n._RF.push({},"622a1WKnbZO64xNdsO5XAfe","Pictionary_PlayerAvatar",void 0);var P=o.ccclass,w=o.property;e("PictionaryPlayerAvatar",(v=P("PictionaryPlayerAvatar"),f=w({type:l,tooltip:"Player Avatar"}),h=w({type:l,tooltip:"Player Avatar Outline"}),v((g=t((m=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"playerAvatar",g,i(t)),a(t,"outline",A,i(t)),t.enableOnClick=!1,t.userId="",t}r(t,e);var n=t.prototype;return n.initialize=function(e,t){this.enableOnClick=e,this.userId=t},n.onEnable=function(){this.registerTouchEvents()},n.onDisable=function(){this.unregisterTouchEvents()},n.start=function(){},n.update=function(e){},n.registerTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.on(s.EventType.TOUCH_START,this.handleTouchStart,this)},n.unregisterTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.off(s.EventType.TOUCH_START,this.handleTouchStart,this)},n.handleTouchStart=function(){this.enableOnClick},n.setOutline=function(e){this.outline&&(this.outline.enabled=e)},n.setOutlineColor=function(e){this.outline&&(this.outline.color=e)},n.setAvatarFromUrl=function(e){console.log("Setting avatar from url: ",e);var t=this.getFromCache(e);t?this.createSpriteFrameFromTexture(t):this.loadRemoteImage(e)},n.setAvatarFromSpriteFrame=function(e){this.playerAvatar&&(this.playerAvatar.spriteFrame=e)},n.getFromCache=function(e){var t=c.assets.get(e);if(t){var r=new u;if(r.image=t,r.isValid&&"function"==typeof r.getHash)return r}return null},n.createSpriteFrameFromTexture=function(e){if(e&&e.isValid&&"function"==typeof e.getHash)if(this.playerAvatar){console.log("creating sprteframe from texture",this.playerAvatar);var t=new p;t.texture=e,this.playerAvatar.spriteFrame=t}else console.warn("[PictionaryPlayerAvatar] PlayerAvatar component is null");else console.warn("[PictionaryPlayerAvatar] Invalid texture provided")},n.loadRemoteImage=function(e){var t=this;c.loadRemote(e,{ext:".png"},(function(r,a){if(r)return console.error("[Player] Failed to load profile image: "+JSON.stringify(r)),void(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_avatar_load_failed",data:{userId:t.userId,url:e,errorName:r.name,errorMessage:r.message,errorStack:r.stack}})));try{var i=new p,n=new u;n.image=a,n.isValid&&"function"==typeof n.getHash?(i.texture=n,t.playerAvatar?t.playerAvatar.spriteFrame=i:console.warn("[PictionaryPlayerAvatar] PlayerAvatar component is null")):console.warn("[PictionaryPlayerAvatar] Invalid texture created from imageAsset")}catch(r){console.error("[Player] Error creating sprite frame: "+r),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_sprite_frame_creation_failed",data:{userId:t.userId,url:e,error:r}}))}}))},t}(y)).prototype,"playerAvatar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(m.prototype,"outline",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PlayerProfile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_PlayerAvatar.ts","./PictionaryGameHandler.ts"],(function(e){var i,r,t,o,a,l,n,s,c,p,f,u,h,g,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,n=e.Label,s=e.Sprite,c=e.RichText,p=e.Widget,f=e.Node,u=e.Color,h=e.Component},function(e){g=e.PictionaryPlayerAvatar},function(e){y=e.PictionaryGameHandler}],execute:function(){var b,m,d,P,I,L,v,z,w,k,S,C,R,T,N,U,A,_,H;a._RF.push({},"1b08d3QQdJCrIUPzM0rfjKq","Pictionary_PlayerProfile",void 0);var D=l.ccclass,E=l.property;e("PictionaryPlayerProfile",(b=D("PictionaryPlayerProfile"),m=E({type:n,tooltip:"Label to display player's name"}),d=E({type:s,tooltip:"Sprite for player's profile image"}),P=E({type:c,tooltip:"RichText to display player's score"}),I=E({type:n,tooltip:"Label to display player's rank"}),L=E({type:s}),v=E({type:p}),z=E({type:g}),w=E({type:f,tooltip:"Crown image node to show for rank 1 player"}),b((C=i((S=function(e){function i(){for(var i,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return i=e.call.apply(e,[this].concat(a))||this,t(i,"nameLabel",C,o(i)),t(i,"profileImage",R,o(i)),t(i,"scoreLabel",T,o(i)),t(i,"rankLabel",N,o(i)),t(i,"profilePicHolder",U,o(i)),t(i,"profilePicWidget",A,o(i)),t(i,"playerAvatar",_,o(i)),t(i,"crownImage",H,o(i)),i.userId="",i.playerName="",i.profileImageUrl="",i.isProfileInitialized=!1,i.isLocal=!1,i.score=0,i.rank=0,i.goldColor=new u(255,215,0,255),i}r(i,e);var a=i.prototype;return a.onEnable=function(){this.scoreLabel&&(this.isProfileInitialized?this.scoreLabel.string="<color=#00000080>SCORE:</color> <b><color=#000000><size=45>"+this.score+"</size></color></b>":this.scoreLabel.string="<color=#00000080>SCORE:</color> <b><color=#000000><size=45>0</size></color></b>"),this.rankLabel&&(this.isProfileInitialized?this.rankLabel.string=this.rank.toString():this.rankLabel.string="0"),this.crownImage&&(this.crownImage.active=!1)},a.onDisable=function(){this.profileImage&&this.profileImage.node&&this.profileImage.node.off(f.EventType.TOUCH_START,this.openProfile,this)},a.initialize=function(e,i){void 0===i&&(i=!1),e?(this.userId=e.userId,this.playerName=y.Instance.getDisplayName(this.userId),this.isLocal=i,this.loadProfile(e),this.setScore(e.score||0)):console.error("[PlayerProfile] No profile data provided for initialization")},a.loadProfile=function(e){!this.isProfileInitialized&&e&&(this.nameLabel&&(this.nameLabel.string=this.playerName),this.profileImageUrl=e.avatar,this.loadProfileImage(),this.profileImage&&this.profileImage.node&&this.profileImage.node.on(f.EventType.TOUCH_START,this.openProfile,this),this.isProfileInitialized=!0)},a.loadProfileImage=function(){this.profileImageUrl?this.playerAvatar.setAvatarFromUrl(this.profileImageUrl):console.warn("[PlayerProfile] No profile image URL provided")},a.highlightLocalPlayer=function(){this.nameLabel&&(this.nameLabel.color=this.goldColor)},a.openProfile=function(){this.userId?console.log("Opening profile for user: "+this.userId):console.warn("[PlayerProfile] Cannot open profile: No user ID available")},a.getProfileSpriteFrame=function(){return this.profileImage?this.profileImage.spriteFrame:null},a.getName=function(){return this.playerName},a.getUserId=function(){return this.userId},a.setScore=function(e){if(this.score=e,this.scoreLabel){var i="<color=#00000080>SCORE:</color> <b><color=#000000><size=45>"+e+"</size></color></b>";this.scoreLabel.string=i}},a.getScore=function(){return this.score},a.setRank=function(e){this.rank=e,this.rankLabel&&(this.rankLabel.string=e.toString()),this.crownImage&&(this.crownImage.active=1===e)},a.getRank=function(){return this.rank},a.setBackgroundSprite=function(e){if(e){var i=this.node.getComponent(s);i&&(i.spriteFrame=e)}},i}(h)).prototype,"nameLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(S.prototype,"profileImage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(S.prototype,"scoreLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(S.prototype,"rankLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(S.prototype,"profilePicHolder",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(S.prototype,"profilePicWidget",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(S.prototype,"playerAvatar",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(S.prototype,"crownImage",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=S))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_PlayerTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a9b91j0/fxDRabIDQyFtkyU","Pictionary_PlayerTypes",void 0);e("PictionaryPlayerType",function(e){return e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.SPECTATOR=2]="SPECTATOR",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_RoomTypes.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"bfb0bBayqpG84uxWw6OMfj+","Pictionary_RoomTypes",void 0);t("PictionaryRoomStatus",function(t){return t[t.NONE=0]="NONE",t[t.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",t[t.COUNTDOWN=2]="COUNTDOWN",t[t.GAME_SIMULATION=3]="GAME_SIMULATION",t[t.END_GAME=4]="END_GAME",t}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_ScaleUICanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_CameraManger.ts"],(function(t){var a,i,e,n,r,o,c,s,l,u,h,d,f;return{setters:[function(t){a=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,c=t.UITransform,s=t.view,l=t.log,u=t.sys,h=t.screen,d=t.Component},function(t){f=t.PictionaryCameraManger}],execute:function(){var p,S,v,g,m;r._RF.push({},"7d339PcApZAeKE0NdMIqMnW","Pictionary_ScaleUICanvas",void 0);var C=o.ccclass,y=o.property;t("PictionaryScaleUICanvas",C("PictionaryScaleUICanvas")((v=a((S=function(t){function a(){for(var a,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return a=t.call.apply(t,[this].concat(r))||this,e(a,"fitToCamera",v,n(a)),e(a,"maintainAspectRatio",g,n(a)),e(a,"additionalScaleFactor",m,n(a)),a}i(a,t);var r=a.prototype;return r.onLoad=function(){this.adjustCanvasScale()},r.start=function(){var t=this;window.addEventListener("resize",(function(){t.scheduleOnce((function(){t.adjustCanvasScale()}),.1)}))},r.update=function(){},r.adjustCanvasScale=function(){var t=this.node;if(t.getComponent(c))if(this.fitToCamera&&f.instance){var a=f.instance.getWidth(),i=2*f.instance.getCurrentOrthoHeight(),e=1;if(this.maintainAspectRatio){var n=s.getDesignResolutionSize(),r=a/n.width,o=i/n.height;e=Math.min(r,o)}e*=this.additionalScaleFactor,t.setScale(e,e,1),l("Canvas Scale with Camera: "+e.toFixed(2))}else{var d=s.getVisibleSize(),p=s.getDesignResolutionSize(),S=d.width/p.width,v=d.height/p.height;if(u.os===u.OS.IOS||u.os===u.OS.ANDROID){var g=h.windowSize.width/h.windowSize.height;(u.os===u.OS.IOS&&g>2||u.os===u.OS.ANDROID&&g>2.1)&&(S*=.95,v*=.95)}var m=this.maintainAspectRatio?Math.min(S,v):Math.max(S,v);m*=this.additionalScaleFactor,t.setScale(m,m,1),l("Canvas Scale: "+m.toFixed(2))}},r.refreshCanvasScale=function(){this.adjustCanvasScale()},a}(d)).prototype,"fitToCamera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=a(S.prototype,"maintainAspectRatio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=a(S.prototype,"additionalScaleFactor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=S))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_StartRoundMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_AudioManager.ts"],(function(o){var n,t,i,e,r,a,u,s,c,l,d,p,y,h,g,f,R,b;return{setters:[function(o){n=o.applyDecoratedDescriptor,t=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){r=o.cclegacy,a=o._decorator,u=o.EventTarget,s=o.Node,c=o.Label,l=o.input,d=o.Input,p=o.KeyCode,y=o.view,h=o.UITransform,g=o.UIOpacity,f=o.tween},function(o){R=o.PictionaryMenu},function(o){b=o.PictionaryAudioManager}],execute:function(){var N,v,P,m,S,w,M;r._RF.push({},"1f16aNIkc9LwLDrZ+niqacc","Pictionary_StartRoundMenu",void 0);var L=a.ccclass,_=a.property;o("WordSelectedEvent",new u),o("PictionaryStartRoundMenu",(N=L("PictionaryStartRoundMenu"),v=_({type:s}),P=_({type:c}),N((w=n((S=function(o){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=o.call.apply(o,[this].concat(r))||this,i(n,"roundRootNode",w,e(n)),i(n,"roundNumberLabel",M,e(n)),n.originalPosition=null,n}t(n,o);var r=n.prototype;return r.onLoad=function(){this.originalPosition=this.roundRootNode.position.clone()},r.Open=function(){console.log("[WordSelectionMenu] Opening"),o.prototype.Open.call(this),this.animateRoundRoot()},r.Close=function(){console.log("[WordSelectionMenu] Closing"),this.roundNumberLabel.node.active=!1,o.prototype.Close.call(this)},r.initialize=function(){o.prototype.initialize.call(this),this.originalPosition=this.roundRootNode.position.clone(),l.on(d.EventType.KEY_DOWN,this.onKeyDown,this)},r.onDestroy=function(){l.off(d.EventType.KEY_DOWN,this.onKeyDown,this)},r.onKeyDown=function(o){o.keyCode===p.KEY_S&&(console.log("S key pressed, playing animation"),this.animateRoundRoot())},r.animateRoundRoot=function(){var o=y.getVisibleSize().width+.75*this.roundRootNode.getComponent(h).width;this.roundRootNode.setPosition(o,this.originalPosition.y,this.originalPosition.z);var n=this.roundRootNode.getComponent(g);n||(n=this.roundRootNode.addComponent(g)),n.opacity=0;var t=f(this.roundRootNode).to(.8,{position:this.originalPosition},{easing:"cubicOut"}),i=f(n).to(.6,{opacity:255},{easing:"cubicIn"});t.start(),i.start(),b.instance.playSound("RoundStart")},r.setRoundMessage=function(o){this.roundNumberLabel.node.active=!0,this.roundNumberLabel.string="Round "+o},n}(R)).prototype,"roundRootNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(S.prototype,"roundNumberLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,r,l,n,s,a,o,m,u;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,l=i.assertThisInitialized},function(i){n=i.cclegacy,s=i._decorator,a=i.Label,o=i.Node,m=i.Sprite,u=i.Component}],execute:function(){var p,c,h,T,d,f,g;n._RF.push({},"131cbWGU49GDYCzKfjrgrwQ","Pictionary_Timer",void 0);var F=s.ccclass,b=s.property;i("PictionaryTimer",(p=F("PictionaryTimer"),c=b(a),h=b(o),p((f=e((d=function(i){function e(){for(var e,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=i.call.apply(i,[this].concat(n))||this,r(e,"timeUiLabel",f,l(e)),r(e,"timerFill",g,l(e)),e.elapsedTime=0,e.totalTime=0,e.isRunning=!1,e.timerFillSprite=null,e}t(e,i);var n=e.prototype;return n.start=function(){this.reset(),this.timerFill&&(console.log("timerFill",this.timerFill),this.timerFillSprite=this.timerFill.getComponent(m),console.log("timerFillSprite",this.timerFillSprite))},n.update=function(i){this.isRunning&&(this.elapsedTime-=i,this.elapsedTime<=0&&(this.elapsedTime=0,this.stopTimer()),this.updateTimeLabel(),this.updateTimerFill())},n.startTimer=function(){this.isRunning||(this.isRunning=!0)},n.stopTimer=function(){this.isRunning&&(this.isRunning=!1)},n.reset=function(){this.elapsedTime=0,this.totalTime=0,this.updateTimeLabel(),this.updateTimerFill()},n.setStartTime=function(i){this.elapsedTime=i,this.totalTime=i,this.updateTimeLabel(),this.updateTimerFill()},n.syncTimer=function(i,e){this.elapsedTime=i,this.totalTime=e>0?e:i,this.updateTimeLabel(),this.updateTimerFill()},n.updateTimeLabel=function(){var i=Math.floor(this.elapsedTime);console.log("updateTimeLabel seconds",i),this.timeUiLabel.string=""+i},n.updateTimerFill=function(){if(this.timerFillSprite){var i=this.elapsedTime/this.totalTime;this.timerFillSprite.fillRange=Math.max(0,Math.min(1,i))}},n.formatTime=function(i){return i<10?"0"+i:""+i},n.formatMilliseconds=function(i){return i<10?"00"+i:i<100?"0"+i:""+i},e}(u)).prototype,"timeUiLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(d.prototype,"timerFill",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=d))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Tool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o,n,l,s,a,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,s=t.SpriteFrame,a=t.Sprite,c=t.Node,p=t.Component}],execute:function(){var u,h,d,g,f;n._RF.push({},"9c2aaP87iNEH5uaEgVOjEiH","Pictionary_Tool",void 0);var S=l.ccclass,b=l.property;t("PictionaryTool",(u=S("PictionaryTool"),h=b({type:s,tooltip:"Selected background sprite frame for this tool"}),u((f=e((g=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n))||this,r(e,"selectedBgSpriteFrame",f,o(e)),e.toolNode=null,e.bgSprite=null,e.board=null,e}i(e,t);var n=e.prototype;return n.initialize=function(t,e){var i=this;this.board=t,this.toolNode=this.node,this.toolNode&&(this.bgSprite=this.toolNode.getComponent(a),this.bgSprite&&(this.bgSprite.spriteFrame=null),this.toolNode.on(c.EventType.TOUCH_START,(function(){e(i)})))},n.select=function(){this.bgSprite&&this.selectedBgSpriteFrame&&(this.bgSprite.spriteFrame=this.selectedBgSpriteFrame)},n.deselect=function(){this.bgSprite&&(this.bgSprite.spriteFrame=null)},n.isActionTool=function(){return!1},e}(p)).prototype,"selectedBgSpriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Toolbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Board.ts","./Pictionary_Tool.ts"],(function(o){var t,r,i,e,n,l,a,c,s,u;return{setters:[function(o){t=o.applyDecoratedDescriptor,r=o.inheritsLoose,i=o.initializerDefineProperty,e=o.assertThisInitialized},function(o){n=o.cclegacy,l=o._decorator,a=o.Node,c=o.Component},function(o){s=o.PictionaryBoard},function(o){u=o.PictionaryTool}],execute:function(){var p,y,h,f,T,b,d;n._RF.push({},"7f913t8CX1NarPOh/R463ER","Pictionary_Toolbar",void 0);var v=l.ccclass,P=l.property;o("PictionaryToolbar",(p=v("PictionaryToolbar"),y=P({type:s}),h=P({type:[a]}),p((b=t((T=function(o){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=o.call.apply(o,[this].concat(n))||this,i(t,"board",b,e(t)),i(t,"tools",d,e(t)),t.currentTool=null,t}r(t,o);var n=t.prototype;return n.initialize=function(o){var t=this;this.board=o;var r=[];this.tools.forEach((function(i){var e=i.getComponent(u);e&&(e.initialize(o,t.onSelectTool.bind(t)),r.push(e))})),r.length>0&&(this.currentTool=r[0],this.currentTool.select())},n.onSelectTool=function(o){var t;o.isActionTool()?o.select():(null==(t=this.currentTool)||t.deselect(),this.currentTool=o,this.currentTool.select())},t}(c)).prototype,"board",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(T.prototype,"tools",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=T))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_RoomTypes.ts","./Pictionary_NetworkTypes.ts","./PicitionaryGameState.ts","./Pictionary_GameMessageType.ts","./Pictionary_GameManager.ts","./PictionaryGameHandler.ts","./Pictionary_NetworkManager.ts"],(function(e){var n,t,o,a,i,s,r,u,c,l,h,g,f,M,S,d,m,C,p,y,w,N,E,R,G,P;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,r=e.Camera,u=e.Node,c=e.Prefab,l=e.Color,h=e.Sprite,g=e.tween,f=e.instantiate,M=e.Vec3,S=e.Component},function(e){d=e.PictionaryMenu},function(e){m=e.PictionaryRoomStatus},function(e){C=e.PictionaryNetworkEvents,p=e.PictionaryConnectionState},function(e){y=e.PictionaryGameState},function(e){w=e.PictionaryGameMessageType},function(e){N=e.RoomStatusChangeEvent},function(e){E=e.GameStateChangeEvent,R=e.PictionaryGameHandler},function(e){G=e.ConnectionStateChangeEvent,P=e.ServerMessageEvent}],execute:function(){var I,O,_,T,v,A,b,D,U,W,H,k,L,z;i._RF.push({},"88ce2PWVEdG678AWRX5tJ0D","Pictionary_UIManager",void 0);var F=s.ccclass,V=s.property;e("PictionaryUIManager",(I=F("PictionaryUIManager"),O=V({type:r}),_=V({type:[d]}),T=V({type:u}),v=V({type:c}),A=V({type:u}),I(((z=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,o(n,"uiCamera",U,a(n)),o(n,"menus",W,a(n)),o(n,"flashNode",H,a(n)),o(n,"showerConfettiPrefab",k,a(n)),o(n,"confettiPositionNode",L,a(n)),n.showMuteButton=!0,n.showResultScreen=!0,n.showFAQ=!0,n}t(n,e);var i=n.prototype;return i.onLoad=function(){n.instance=this,G.on(C.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),N.on(C.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),P.on(C.SERVER_MESSAGE,this.onServerMessage,this),E.on(C.GAME_STATE_CHANGE,this.onGameStateChange,this)},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){G.off(C.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),N.off(C.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),P.off(C.SERVER_MESSAGE,this.onServerMessage,this),E.off(C.GAME_STATE_CHANGE,this.onGameStateChange,this),n.instance===this&&(n.instance=null)},i.start=function(){},i.OpenHowToPlay=function(){this.OpenMenu("HowToPlay")},i.OpenMenu=function(e){for(var n=0;n<this.menus.length;n++)this.menus[n].menuName==e&&this.menus[n].Open()},i.CloseMenu=function(e){for(var n=0;n<this.menus.length;n++)this.menus[n].menuName==e&&this.menus[n].Close()},i.GetMenu=function(e){for(var n=0;n<this.menus.length;n++)if(this.menus[n].menuName==e)return this.menus[n];return null},i.CloseAllMenus=function(){for(var e=0;e<this.menus.length;e++)this.menus[e].Close()},i.onConnectionStateChange=function(e,n){switch(console.log("[UIManager] Connection state changed: ",n),n){case p.CONNECTING:this.CloseAllMenus(),this.OpenMenu("InGameMenu")}},i.onGameStateChange=function(e){switch(e){case y.START_ROUND:this.handleStartRoundState();break;case y.DRAWING:this.handleDrawingState();break;case y.WORD_SELECTION:this.handleWordSelectionState();break;case y.DRAWING_RESULTS:this.handleDrawingResultsState();break;case y.END_GAME:this.handleEndGameState()}},i.handleStartRoundState=function(){console.log("[UIManager] Handling start round state"),this.CloseMenu("DrawingResultsMenu");var e=this.GetMenu("StartRoundMenu"),n=R.Instance.getRoomState().currentRound;e.setRoundMessage(n),this.OpenMenu("StartRoundMenu")},i.handleDrawingState=function(){console.log("[UIManager] Handling drawing state"),this.CloseMenu("WordSelectionMenu")},i.handleWordSelectionState=function(){console.log("[UIManager] Handling word selection state"),this.CloseMenu("StartRoundMenu"),this.CloseMenu("DrawingResultsMenu");var e=this.GetMenu("WordSelectionMenu"),n=R.Instance.isMyTurn();e.setMyTurn(n),this.OpenMenu("WordSelectionMenu")},i.handleDrawingResultsState=function(){console.log("[UIManager] Handling drawing results state");var e=this.GetMenu("DrawingResultsMenu");e.setCorrectWordMessage(R.Instance.getCorrectWord()),console.log("Player scores: ",R.Instance.getPlayerScores()),e.setPlayerScores(R.Instance.getPlayerScores()),this.OpenMenu("DrawingResultsMenu")},i.handleEndGameState=function(){console.log("[UIManager] Handling end game state"),console.log("[UIManager] End Game State handling in UI Manager"),this.CloseAllMenus(),console.log("[UIManager] Opening end game menu"),this.OpenMenu("EndGameMenu")},i.onServerMessage=function(e,n){switch(e){case w.WORDS_LIST:var t=this.GetMenu("WordSelectionMenu"),o=JSON.parse(n);this.log("word choices",o),t.setWordList(o)}},i.onRoomStatusChange=function(e,n){var t=this;switch(console.log("[UIManager] Room status changed: ",n),n){case m.WAITING_FOR_PLAYERS:console.log("Opening waiting screen"),this.OpenMenu("WaitingScreen");break;case m.COUNTDOWN:console.log("Opening countdown screen"),this.CloseAllMenus(),this.OpenMenu("CountDownScreen");break;case m.GAME_SIMULATION:this.CloseMenu("CountDownScreen"),this.scheduleOnce((function(){t.OpenMenu("InGameMenu")}),1);break;default:console.warn("[UIManager] Unhandled RoomStatus: "+n)}},i.playFlashEffect=function(e){var n=this;void 0===e&&(e=new l(197,8,8)),this.flashNode.active=!0;var t=this.flashNode.getComponent(h);t?(t.color=new l(e.r,e.g,e.b,0),g(t).to(.2,{color:new l(e.r,e.g,e.b,255)}).delay(.05).to(.3,{color:new l(e.r,e.g,e.b,0)}).call((function(){n.flashNode.active=!1})).start()):console.error("No Sprite component found on flashNode")},i.showConfetti=function(){var e=f(this.showerConfettiPrefab);this.confettiPositionNode.addChild(e),e.setPosition(new M(0,150,0))},n}(S)).instance=null,U=n((D=z).prototype,"uiCamera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=n(D.prototype,"menus",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=n(D.prototype,"flashNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(D.prototype,"showerConfettiPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(D.prototype,"confettiPositionNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=D))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Undo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Tool.ts"],(function(o){var t,n,i,r;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,i=o._decorator},function(o){r=o.PictionaryTool}],execute:function(){var c;n._RF.push({},"86c71yQn3NJALHr14Jyx2sQ","Pictionary_Undo",void 0);var e=i.ccclass;o("PictionaryUndo",e("PictionaryUndo")(c=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var i=n.prototype;return i.select=function(){this.board&&this.board.undoLastStroke()},i.isActionTool=function(){return!0},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"7bd30nbuzxA4a6y7O6awusZ","Pictionary_Utils",void 0);t("PictionaryUtils",function(){function t(){}return t.roundNumber=function(t,n){void 0===n&&(n=2);var i=Math.pow(10,n);return Math.round((t+Number.EPSILON)*i)/i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_WaitingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts"],(function(t){var n,i,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator},function(t){e=t.PictionaryMenu}],execute:function(){var c;i._RF.push({},"eef8f8Yde5N8oqgCvczfHwE","Pictionary_WaitingScreen",void 0);var r=o.ccclass;o.property,t("PictionaryWaitingScreen",r("PictionaryWaitingScreen")(c=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var o=i.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this)},o.onDestroy=function(){},o.Open=function(){t.prototype.Open.call(this)},o.Close=function(){t.prototype.Close.call(this)},o.initialize=function(){t.prototype.initialize.call(this)},i}(e))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_WordManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a,s,l,c,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,l=e.Node,c=e.tween,d=e.Vec3,u=e.Component}],execute:function(){var p,h,y,f,w,b,W,g,L;o._RF.push({},"19d4a1iKXdCv7Cy0oq7pZ3h","Pictionary_WordManager",void 0);var v=a.ccclass,C=a.property;e("PictionaryWordManager",(p=v("PictionaryWordManager"),h=C(s),y=C(l),f=C(s),p((W=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"wordLabel",W,n(t)),i(t,"wordContainer",g,n(t)),i(t,"wordLengthLabel",L,n(t)),t.currentWord="",t.isWordVisible=!1,t.revealedLetters=new Set,t}r(t,e);var o=t.prototype;return o.setWordVisible=function(e){this.isWordVisible=e,this.updateWordDisplay()},o.setWord=function(e){if(this.currentWord=e.toUpperCase(),this.currentWord.length>0){var t=this.currentWord.length;this.wordLengthLabel.string=t<10?"0"+t:t.toString()}this.revealedLetters.clear(),this.updateWordDisplay()},o.clearWord=function(){this.setWord("")},o.revealLetter=function(e){e>=0&&e<this.currentWord.length&&(this.revealedLetters.add(e),this.updateWordDisplay(),this.playShakeAnimation())},o.playShakeAnimation=function(){if(this.wordContainer){var e=this.wordContainer.position.clone(),t=this.wordContainer.scale.clone(),r=.5;c(this.wordContainer).sequence(c().sequence(c().to(r/6,{position:new d(e.x+10,e.y,e.z)}),c().to(r/6,{position:new d(e.x-10,e.y,e.z)}),c().to(r/6,{position:new d(e.x+10,e.y,e.z)}),c().to(r/6,{position:new d(e.x-10,e.y,e.z)}),c().to(r/6,{position:e})),c().to(.125,{scale:new d(1.2,1.2,1)}),c().to(.125,{scale:t})).start()}},o.updateWordDisplay=function(){var e=this;if(this.isWordVisible)this.wordLabel.string=this.currentWord;else{var t=this.currentWord.split("").map((function(t,r){return e.revealedLetters.has(r)?t:"_"}));this.wordLabel.string=t.join("")}},t}(u)).prototype,"wordLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"wordContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(b.prototype,"wordLengthLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=b))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pictionary_WordSelectionMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Menu.ts","./Pictionary_PBLogger.ts","./PictionaryGameHandler.ts","./Pictionary_AudioManager.ts"],(function(o){var t,i,e,n,r,s,a,l,c,h,u,g,d,p,y,f,C,b,P;return{setters:[function(o){t=o.applyDecoratedDescriptor,i=o.inheritsLoose,e=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){r=o.cclegacy,s=o._decorator,a=o.EventTarget,l=o.Prefab,c=o.Node,h=o.Label,u=o.instantiate,g=o.view,d=o.UITransform,p=o.UIOpacity,y=o.tween},function(o){f=o.PictionaryMenu},function(o){C=o.PictionaryPBLogger},function(o){b=o.PictionaryGameHandler},function(o){P=o.PictionaryAudioManager}],execute:function(){var S,v,w,R,m,_,L,M,O,W,z,T,N;r._RF.push({},"0dbc7fn9N1BfbY/g9u3z50t","Pictionary_WordSelectionMenu",void 0);var B=s.ccclass,D=s.property,E=o("WordSelectedEvent",new a);o("PictionaryWordSelectionMenu",(S=B("PictionaryWordSelectionMenu"),v=D({type:l}),w=D({type:c}),R=D({type:c}),m=D({type:c}),_=D({type:h}),S((O=t((M=function(o){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=o.call.apply(o,[this].concat(r))||this,e(t,"uiWordSelectBoxPrefab",O,n(t)),e(t,"wordSelectionRoot",W,n(t)),e(t,"wordsListNode",z,n(t)),e(t,"othersChoosingRoot",T,n(t)),e(t,"otherChoosingLabel",N,n(t)),t._isSelected=!1,t._isMyTurn=!1,t.originalOthersChoosingPosition=null,t}i(t,o);var r=t.prototype;return r.onLoad=function(){this.originalOthersChoosingPosition=this.othersChoosingRoot.position.clone()},r.Open=function(){C.info("[WordSelectionMenu] Opening"),this._isSelected=!1,o.prototype.Open.call(this)},r.Close=function(){C.info("[WordSelectionMenu] Closing"),this.clearWordList(),o.prototype.Close.call(this)},r.initialize=function(){o.prototype.initialize.call(this),this.originalOthersChoosingPosition=this.othersChoosingRoot.position.clone()},r.setWordList=function(o){for(var t=0;t<o.length;t++){var i=o[t],e=u(this.uiWordSelectBoxPrefab);e.getComponentInChildren(h).string=i,e.setParent(this.wordsListNode),e.on(c.EventType.TOUCH_END,this.onWordSelected.bind(this,i))}},r.onWordSelected=function(o){this._isSelected||(this._isSelected=!0,C.info("Selected word:",o),E.emit("WORD_SELECTED",o),this.Close())},r.clearWordList=function(){this.wordsListNode.removeAllChildren()},r.setOpponentSelectingMessage=function(o){this.otherChoosingLabel.string=o+" is picking a word...",this.animateOthersChoosingRoot()},r.animateOthersChoosingRoot=function(){var o=g.getVisibleSize().width+.75*this.othersChoosingRoot.getComponent(d).width;this.othersChoosingRoot.setPosition(o,this.originalOthersChoosingPosition.y,this.originalOthersChoosingPosition.z);var t=this.othersChoosingRoot.getComponent(p);t||(t=this.othersChoosingRoot.addComponent(p)),t.opacity=0;var i=y(this.othersChoosingRoot).to(.8,{position:this.originalOthersChoosingPosition},{easing:"cubicOut"}),e=y(t).to(.6,{opacity:255},{easing:"cubicIn"}).call((function(){P.instance.playSound("RoundStart")}));i.start(),e.start()},r.setMyTurn=function(o){this._isMyTurn=o;var t=b.Instance.getCurrentDrawingPlayer();this._isMyTurn?(this.othersChoosingRoot.active=!1,this.wordSelectionRoot.active=!0):(this.othersChoosingRoot.active=!0,this.setOpponentSelectingMessage(t.playerName),this.wordSelectionRoot.active=!1)},t}(f)).prototype,"uiWordSelectBoxPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(M.prototype,"wordSelectionRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"wordsListNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"othersChoosingRoot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(M.prototype,"otherChoosingLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=M))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/PictionaryGameHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_Timer.ts","./PictionaryRoomState.ts","./Pictionary_RoomTypes.ts","./Pictionary_NetworkManager.ts","./Pictionary_GameMessageType.ts","./PicitionaryGameState.ts","./Pictionary_Player.ts","./Pictionary_Board.ts","./Pictionary_ChatManager.ts","./Pictionary_WordManager.ts","./Pictionary_WordSelectionMenu.ts","./Pictionary_Toolbar.ts","./Pictionary_NetworkTypes.ts","./Pictionary_PBLogger.ts","./Pictionary_AudioManager.ts","./Pictionary_UIManager.ts","./Pictionary_GameManager.ts","./Pictionary_PlayerProfile.ts"],(function(e){var t,r,n,o,a,i,s,l,c,u,d,h,f,p,m,y,S,g,b,R,v,E,P,w,C,_,T,I,N,G,D,L,M,B,A,O,k,H,W,z,U,x,V,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){i=e.cclegacy,s=e._decorator,l=e.EventTarget,c=e.Prefab,u=e.Node,d=e.Label,h=e.SpriteFrame,f=e.game,p=e.Game,m=e.Color,y=e.instantiate,S=e.Sprite,g=e.Tween,b=e.Component},function(e){R=e.PictionaryTimer},function(e){v=e.PictionaryRoomState,E=e.PlayerScore},function(e){P=e.PictionaryRoomStatus},function(e){w=e.ConnectionStateChangeEvent,C=e.ServerRoomStateChangeEvent,_=e.ServerMessageEvent,T=e.PictionaryNetworkManager},function(e){I=e.PictionaryGameMessageType},function(e){N=e.PictionaryGameState},function(e){G=e.PictionaryPlayer},function(e){D=e.PictionaryBoard,L=e.BoardEvents,M=e.STROKE_COMPLETED_EVENT},function(e){B=e.PictionaryChatManager},function(e){A=e.PictionaryWordManager},function(e){O=e.WordSelectedEvent},function(e){k=e.PictionaryToolbar},function(e){H=e.PictionaryNetworkEvents,W=e.PictionaryConnectionState},function(e){z=e.PictionaryPBLogger},function(e){U=e.PictionaryAudioManager},function(e){x=e.PictionaryUIManager},function(e){V=e.PictionaryGameManager},function(e){F=e.PictionaryPlayerProfile}],execute:function(){var J,K,j,X,Y,Z,q,Q,$,ee,te,re,ne,oe,ae,ie,se,le,ce,ue,de,he,fe,pe,me,ye,Se,ge,be,Re,ve,Ee,Pe,we,Ce,_e,Te;i._RF.push({},"6529e0uf6BOEL7N9DSBjlZu","PictionaryGameHandler",void 0);var Ie=s.ccclass,Ne=s.property,Ge=s.executionOrder,De=e("GameStateChangeEvent",new l);e("PictionaryGameHandler",(J=Ie("PictionaryGameHandler"),K=Ge(-1),j=Ne({type:c}),X=Ne({type:u}),Y=Ne({type:[G]}),Z=Ne({type:D}),q=Ne({type:A}),Q=Ne({type:k}),$=Ne({type:u,tooltip:"Input box node for guessing (shown when not drawing)"}),ee=Ne({type:R}),te=Ne({type:d}),re=Ne({type:u,tooltip:"Button node to toggle leaderboard visibility"}),ne=Ne({type:u,tooltip:"Leaderboard node to show/hide"}),oe=Ne({type:h,tooltip:"Sprite frame for leaderboard button (when closed)"}),ae=Ne({type:h,tooltip:"Sprite frame for close button (when leaderboard is open)"}),ie=Ne({type:h,tooltip:"Sprite frame for top user (rank 1) in leaderboard"}),se=Ne({type:c,tooltip:"Leaderboard profile prefab with PictionaryPlayerProfile component"}),le=Ne({type:u,tooltip:"Container node to display list of leaderboard profiles"}),J(ce=K(((Te=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"playerPrefab",de,o(t)),n(t,"playersContainer",he,o(t)),n(t,"players",fe,o(t)),n(t,"board",pe,o(t)),n(t,"wordManager",me,o(t)),n(t,"toolBar",ye,o(t)),n(t,"inputBox",Se,o(t)),n(t,"timer",ge,o(t)),n(t,"currentRoundsLabel",be,o(t)),n(t,"leaderboardButton",Re,o(t)),n(t,"leaderboardNode",ve,o(t)),n(t,"leaderBoardSprite",Ee,o(t)),n(t,"closeSprite",Pe,o(t)),n(t,"leaderBoardTopUserSprite",we,o(t)),n(t,"leaderboardProfile",Ce,o(t)),n(t,"leaderboardContainer",_e,o(t)),t._currentRoomState=void 0,t.roomSettings=void 0,t.myPlayerNumber=-1,t.hasReconnected=!1,t.localPlayerId="",t}r(t,e);var i=t.prototype;return i.onLoad=function(){t._instance=this,this.registerNetworkEvents(),this.registerGameEvents(),this.handleBrowserClose(),this.toolBar&&(this.toolBar.initialize(this.board),this.toolBar.node&&(this.toolBar.node.active=!1)),this.inputBox&&(this.inputBox.active=!1),this.hideLabelContainers(),this.leaderboardButton&&(this.leaderboardButton.active=!0,this.leaderboardButton.on(u.EventType.TOUCH_START,this.onLeaderboardButtonClicked,this),this.updateLeaderboardIconSprite(!1)),this.leaderboardNode&&(this.leaderboardNode.active=!1)},i.hideLabelContainers=function(){if(this.board&&this.board.getDrawerNameLabel()){var e=this.board.getDrawerNameLabel();e&&e.node&&e.node.parent&&(e.node.parent.active=!1)}this.currentRoundsLabel&&this.currentRoundsLabel.node&&this.currentRoundsLabel.node.parent&&(this.currentRoundsLabel.node.parent.active=!1)},i.showLabelContainers=function(){if(this.board&&this.board.getDrawerNameLabel()){var e=this.board.getDrawerNameLabel();e&&e.node&&e.node.parent&&(e.node.parent.active=!0)}this.currentRoundsLabel&&this.currentRoundsLabel.node&&this.currentRoundsLabel.node.parent&&(this.currentRoundsLabel.node.parent.active=!0)},i.updateToolbarAndInputBox=function(e){this.toolBar&&this.toolBar.node&&(this.toolBar.node.active=e),this.inputBox&&(this.inputBox.active=!e)},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){this.unregisterNetworkEvents(),this.unregisterGameEvents(),this.unregisterBrowserClose(),t._instance===this&&(t._instance=null)},i.initialize=function(e){this.roomSettings=e},i.registerNetworkEvents=function(){w.on(H.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),C.on(H.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),_.on(H.SERVER_MESSAGE,this.onServerMessage,this),O.on("WORD_SELECTED",this.onWordSelected,this),L.on(M,this.onStrokeCompleted,this)},i.registerGameEvents=function(){f.on(p.EVENT_HIDE,this.onGameHide,this),f.on(p.EVENT_SHOW,this.onGameShow,this),f.on(p.EVENT_RESTART,this.onGameRestart,this),f.on(p.EVENT_CLOSE,this.onGameClose,this)},i.handleBrowserClose=function(){window.addEventListener("beforeunload",this.onGameClose.bind(this))},i.unregisterNetworkEvents=function(){w.off(H.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),C.off(H.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),_.off(H.SERVER_MESSAGE,this.onServerMessage,this),O.off("WORD_SELECTED",this.onWordSelected,this),L.off(M,this.onStrokeCompleted,this)},i.unregisterGameEvents=function(){f.off(p.EVENT_HIDE,this.onGameHide,this),f.off(p.EVENT_SHOW,this.onGameShow,this),f.off(p.EVENT_RESTART,this.onGameRestart,this),f.off(p.EVENT_CLOSE,this.onGameClose,this)},i.unregisterBrowserClose=function(){window.removeEventListener("beforeunload",this.onGameClose.bind(this))},i.onWordSelected=function(e){T.Instance.sendMessage(I.SELECTED_WORD,e)},i.onServerMessage=function(e,t){switch(z.info("Server message received:",e,t),e){case I.CHAT_MESSAGE:var r=JSON.parse(t);this.log("Chat message received:",r),B.Instance.addChatMessage(r);var n=this.getPlayer(r.playerId);n&&n.showMessageNotification(r.message);break;case I.GUESSED_WORD:z.info("Guessed word received:",t);var o=JSON.parse(t),a=this.getPlayer(o.playerId);a.setGuessedAnswer(!0),a.userId===this.localPlayerId&&(this.wordManager.setWordVisible(!0),x.instance.playFlashEffect(new m(0,255,0)),U.instance.playSound("CorrectAnswer")),B.Instance.addChatMessage({playerId:o.playerId,message:"guessed the word"},!0),this.log("Guessed word received:",t);break;case I.REVEAL_LETTER:z.info("Reveal letter received:",t);var i=JSON.parse(t);this.wordManager.revealLetter(i.index);break;default:this.log("Unhandled server message type:",e)}},i.onServerRoomStateChange=function(e){this._currentRoomState?(this._currentRoomState.copyFrom(e),this.handleRoomStateUpdate(this._currentRoomState),this._currentRoomState.currentRoomStatus!==P.END_GAME&&(this.hasReconnected?this.handleReconnection(this._currentRoomState):this.sendRoomStateToAllPlayers(this._currentRoomState))):this.initializeRoomState(e)},i.initializeRoomState=function(e){this._currentRoomState=new v,this._currentRoomState.copyFrom(e),this.initializePlayers(this._currentRoomState),this._currentRoomState.currentGameState!==N.NONE&&(console.log("Joined game in progress"),this.sendReconnectionStateToAllPlayers(this._currentRoomState))},i.handleEndGameState=function(){this.log("Game Over - State Change:",this._currentRoomState)},i.handleReconnection=function(e){this.log("Reconnection State Change:",e),this.sendReconnectionStateToAllPlayers(e),this.hasReconnected=!1},i.handleRoomStateUpdate=function(e){this.log("Room State Update",e.currentGameState);var t=e.inputPayload.inputType;t===I.SET_STATE?this.handleSetState(e):t!==I.DRAW_STROKE||this.isMyTurn()||this.board.setCurrentSketch(e.drawingSketchData)},i.handleSetState=function(e){if(this.log("Game State Change",N[e.currentGameState]),this.board.enableDrawing(!1),this.timer.reset(),this.timer.stopTimer(),this.players.forEach((function(e){e.drawingIcon&&(e.drawingIcon.active=!1)})),this.toolBar&&this.toolBar.node&&(this.toolBar.node.active=!1),this.inputBox&&(this.inputBox.active=!1),e.currentGameState===N.START_ROUND)this.showLabelContainers(),this.updateCurrentRoundsLabel(e.currentRound,e.roomSettings.rounds);else if(e.currentGameState===N.DRAWING){z.info("Current state: DRAWING");var t=this.isMyTurn(),r=this.getCurrentDrawingPlayer(),n=this.getDisplayName(r.userId);this.board.enableDrawing(t),this.board.setDrawerName(n),this.wordManager.setWordVisible(t),this.wordManager.setWord(e.selectedWord),this.updateToolbarAndInputBox(t),r&&r.drawingIcon&&(r.drawingIcon.active=!0),this.timer.setStartTime(e.roomSettings.drawingTimeLimit),this.timer.startTimer()}else e.currentGameState===N.WORD_SELECTION?(this.board.setDrawerName(""),this.board.clear(),this.players.forEach((function(e){e.resetState()}))):e.currentGameState===N.DRAWING_RESULTS&&this.updatePlayerScores();De.emit(H.GAME_STATE_CHANGE,e.currentGameState)},i.initializePlayers=function(e){var t=this;this.log("Initializing "+e.playersData.length+" players"),this.assignMyPlayerNumber(e),e.playersData.forEach((function(r,n){t.createPlayer(n).initialize(e,t.board)}))},i.sendChatMessageToServer=function(e){if(""!==this.localPlayerId&&!this.isMyTurn()){var t={playerId:this.players[this.myPlayerNumber].userId,message:e};T.Instance.sendMessage(I.CHAT_MESSAGE,JSON.stringify(t))}},i.onConnectionStateChange=function(e,t){t===W.DISCONNECTED?this.onGameDisconnect():e===W.RECONNECTING&&t===W.JOINED_ROOM&&(this.hasReconnected=!0,this.onGameReconnect())},i.updatePlayerScores=function(){var e=this;if(this.players.forEach((function(e){e.crownImage&&(e.crownImage.active=!1)})),this._currentRoomState.playersData.every((function(e){return 0===e.score})))this._currentRoomState.playersData.forEach((function(t){var r=e.players.find((function(e){return e.userId===t.userId}));r&&r.node&&(r.setScore(t.score),r.setRank(0))}));else{for(var t=[].concat(this._currentRoomState.playersData).sort((function(e,t){return t.score-e.score})),r=new Map,n=1,o=0;o<t.length;o++){var a=t[o];o>0&&t[o-1].score!==a.score&&(n=o+1),r.set(a.userId,n)}this._currentRoomState.playersData.forEach((function(t){var n=e.players.find((function(e){return e.userId===t.userId}));if(n&&n.node){n.setScore(t.score);var o=r.get(t.userId)||1;n.setRank(o)}}))}this.leaderboardNode&&this.leaderboardNode.active&&this.populateLeaderboard()},i.sendStrokeDataToServer=function(e,t){z.info("Sending stroke data to server:",{strokePoints:e,color:t.color.toHEX(),width:t.width});var r={strokePoints:e,color:t.color.toHEX(),width:t.width},n=JSON.stringify(r);z.info("Serialized stroke data:",n),T.Instance.sendMessage(I.DRAW_STROKE,n)},i.sendRoomStateToAllPlayers=function(e){},i.sendReconnectionStateToAllPlayers=function(e){if(z.info("Reconnection state sent to all players"),this.updateCurrentRoundsLabel(e.currentRound,e.roomSettings.rounds),this.updatePlayerScores(),e.currentGameState===N.DRAWING){var t=e.roomSettings.drawingTimeLimit,r=e.elapsedDrawingTime||0,n=Math.max(0,t-r);this.timer.syncTimer(n,t),this.timer.startTimer();var o=this.isMyTurn();this.wordManager.setWordVisible(o),this.wordManager.setWord(e.selectedWord);var a=this.getCurrentDrawingPlayer();a&&a.drawingIcon&&(a.drawingIcon.active=!0);var i=(null==a?void 0:a.playerName)||"Unknown";this.board.enableDrawing(o),this.board.setDrawerName(i),this.board.setCurrentSketch(e.drawingSketchData)}else e.currentGameState===N.END_GAME&&De.emit(H.GAME_STATE_CHANGE,N.END_GAME)},i.createPlayer=function(e){var t=y(this.playerPrefab);t.setParent(this.playersContainer);var r=t.getComponent(G);return r.index=e,this.players.push(r),r},i.updateCurrentRoundsLabel=function(e,t){this.currentRoundsLabel.string="Round "+e+"/"+t},i.getRoomState=function(){return this._currentRoomState},i.getCorrectWord=function(){return this._currentRoomState.selectedWord},i.getPlayerScores=function(){return this._currentRoomState.currentRoundScores},i.getPlayerTotalScores=function(){return this._currentRoomState.playersData.map((function(e){var t=new E;return t.userId=e.userId,t.score=e.score,t}))},i.isMyTurn=function(){return this._currentRoomState.drawingPlayerIndex===this.myPlayerNumber},i.assignMyPlayerNumber=function(e){var t=this;e.playersData.forEach((function(e,r){e.sessionId===T.Instance.CurrentRoom.sessionId&&(t.myPlayerNumber=r,t.localPlayerId=e.userId)}))},i.getPlayer=function(e){return this.log("Retrieving Player "+e),this.players.find((function(t){return t.userId===e}))},i.getCurrentRoomState=function(){return this._currentRoomState||null},i.populateLeaderboard=function(){var e=this;if(this.leaderboardContainer&&this.leaderboardProfile)if(this.leaderboardContainer.removeAllChildren(),this._currentRoomState&&this._currentRoomState.playersData){var t=this.getPlayerTotalScores().sort((function(e,t){return t.score-e.score})),r=t.every((function(e){return 0===e.score}));t.forEach((function(t,n){var o=e._currentRoomState.playersData.find((function(e){return e.userId===t.userId}));if(o){var a=r?0:n+1,i=y(e.leaderboardProfile),s=i.getComponent(F);if(s){var l;e.leaderboardContainer.addChild(i);var c=o.sessionId===((null==(l=T.Instance)||null==(l=l.CurrentRoom)?void 0:l.sessionId)||"");s.initialize(o,c),s.setRank(a),1===a&&e.leaderBoardTopUserSprite&&s.setBackgroundSprite(e.leaderBoardTopUserSprite),e.scheduleOnce((function(){s.setScore(o.score||0),s.setRank(a),1===a&&e.leaderBoardTopUserSprite&&s.setBackgroundSprite(e.leaderBoardTopUserSprite)}),0)}else console.warn("[PictionaryGameHandler] populateLeaderboard: PictionaryPlayerProfile component not found on prefab")}else console.warn("[PictionaryGameHandler] populateLeaderboard: Player data not found for userId: "+t.userId)}))}else console.warn("[PictionaryGameHandler] populateLeaderboard: Missing room state or playersData");else console.warn("[PictionaryGameHandler] populateLeaderboard: Missing leaderboardContainer or leaderboardProfile")},i.onLeaderboardButtonClicked=function(){if(this.leaderboardNode){var e=this.leaderboardNode.active;this.leaderboardNode.active=!e,this.updateLeaderboardIconSprite(!e),e||this.populateLeaderboard()}},i.updateLeaderboardIconSprite=function(e){if(this.leaderboardButton){var t=this.leaderboardButton.getChildByName("Icon");if(t){var r=t.getComponent(S);r&&(e?this.closeSprite&&(r.spriteFrame=this.closeSprite):this.leaderBoardSprite&&(r.spriteFrame=this.leaderBoardSprite))}}},i.getCurrentDrawingPlayer=function(){return this.players[this._currentRoomState.drawingPlayerIndex]},i.allPlayersFinished=function(){return!1},i.anyPlayerFinished=function(){return!1},i.getLocalUserId=function(){var e;if(!this._currentRoomState||null==(e=T.Instance)||!e.CurrentRoom)return"";var t=T.Instance.CurrentRoom.sessionId,r=this._currentRoomState.playersData.find((function(e){return e.sessionId===t}));return r?r.userId:""},i.isLocalUserHost=function(){if(!V.Instance)return!1;var e=V.Instance.miloSDK.getHostId(),t=this.getLocalUserId();return!!t&&e===t},i.getHostPlayer=function(){if(!V.Instance||!this._currentRoomState)return null;var e=V.Instance.miloSDK.getHostId();return e&&this._currentRoomState.playersData.find((function(t){return t.userId===e}))||null},i.getDisplayName=function(e,t,r){var n,o;void 0===t&&(t=8),void 0===r&&(r=!0);var a=this.getLocalUserId();if(r&&a&&a===e)return"YOU";var i=null==(n=V.Instance)||null==(n=n.miloSDK)?void 0:n.getContactName(e);if(i&&""!==i.trim())return t>0?this.truncateName(i,t):i;var s=null==(o=this._currentRoomState)?void 0:o.playersData.find((function(t){return t.userId===e})),l=s?s.name:"";return t>0?this.truncateName(l,t):l},i.truncateName=function(e,t){var r=e.indexOf(" ");return-1!=r&&(e=e.substring(0,r)),e.length>t?e.substring(0,t)+"..":e},i.onGameHide=function(){z.info("Game hidden"),g.stopAll()},i.onGameShow=function(){z.info("Game shown")},i.onGameRestart=function(){z.info("Game restarted")},i.onGameClose=function(){z.info("Game closed")},i.onGameDisconnect=function(){z.info("Game disconnected")},i.onGameReconnect=function(){z.info("Game reconnected")},i.onStrokeCompleted=function(e){this.sendStrokeDataToServer(e.strokePoints,e.brush)},a(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(b))._instance=void 0,de=t((ue=Te).prototype,"playerPrefab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ue.prototype,"playersContainer",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(ue.prototype,"players",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=t(ue.prototype,"board",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ue.prototype,"wordManager",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ue.prototype,"toolBar",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ue.prototype,"inputBox",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ue.prototype,"timer",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ue.prototype,"currentRoundsLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(ue.prototype,"leaderboardButton",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ue.prototype,"leaderboardNode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(ue.prototype,"leaderBoardSprite",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ue.prototype,"closeSprite",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ue.prototype,"leaderBoardTopUserSprite",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(ue.prototype,"leaderboardProfile",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(ue.prototype,"leaderboardContainer",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=ue))||ce)||ce));i._RF.pop()}}}));

System.register("chunks:///_virtual/PictionaryRoomState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pictionary_RoomTypes.ts","./PicitionaryGameState.ts","./Pictionary_BasePlayerData.ts","./Pictionary_BaseRoomSettings.ts","./Pictionary_BaseRoomState.ts"],(function(t){var e,i,o,r,n,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){o=t.PictionaryRoomStatus},function(t){r=t.PictionaryGameState},function(t){n=t.PictionaryBasePlayerData},function(t){a=t.PictionaryBaseRoomSettings},function(t){s=t.PictionaryBaseRoomState}],execute:function(){i._RF.push({},"fa5d0U3yGhK+pTZUrjZSeKx","PictionaryRoomState",void 0);var u=t("PictionaryPlayerData",function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).playerIndex=void 0,e.consecutiveMissedTurns=0,e}return e(i,t),i.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.playerIndex=e.playerIndex,this.consecutiveMissedTurns=e.consecutiveMissedTurns,this.score=e.score},i}(n)),c=t("PictionaryRoomSettings",function(t){function i(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).drawingTimeLimit=void 0,e.timeBeforeRoundStarts=void 0,e.wordSelectionTimeLimit=void 0,e.rounds=void 0,e}return e(i,t),i.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.drawingTimeLimit=e.drawingTimeLimit,this.timeBeforeRoundStarts=e.timeBeforeRoundStarts,this.wordSelectionTimeLimit=e.wordSelectionTimeLimit,this.rounds=e.rounds},i}(a)),d=t("PictionaryInputPayload",function(){function t(){this.inputType=void 0,this.inputValue=void 0}return t.prototype.copyFrom=function(t){this.inputType=t.inputType,this.inputValue=t.inputValue},t}()),p=t("PlayerScore",function(){function t(){this.userId=void 0,this.score=void 0,this.guessTime=void 0}return t.prototype.copyFrom=function(t){this.userId=t.userId,this.score=t.score,this.guessTime=t.guessTime},t}()),l=t("DrawStroke",function(){function t(){this.strokePoints=void 0,this.color=void 0,this.width=void 0}return t.prototype.copyFrom=function(t){this.strokePoints=t.strokePoints.map((function(t){return t})),this.color=t.color,this.width=t.width},t}());t("PictionaryRoomState",function(t){function i(){var e;return(e=t.call(this,new c,[])||this).elapsedDrawingTime=0,e.elapsedWordSelectionTime=0,e.currentRoomStatus=o.NONE,e.previousRoomStatus=o.WAITING_FOR_PLAYERS,e.drawingPlayerIndex=0,e.drawingWord="",e.currentRoundScores=[],e.selectedWord="",e.inputPayload=new d,e.currentGameState=r.NONE,e.previousGameState=r.NONE,e.drawingSketchData=[],e.serverTick=0,e.currentRound=1,e}e(i,t);var a=i.prototype;return a.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.playersData=e.playersData.map((function(t){var e=new u;return e.copyFrom(t),e})),this.spectatorsData=e.spectatorsData.map((function(t){var e=new n;return e.copyFrom(t),e})),this.elapsedDrawingTime=e.elapsedDrawingTime,this.elapsedWordSelectionTime=e.elapsedWordSelectionTime,this.currentRoomStatus=e.currentRoomStatus,this.previousRoomStatus=e.previousRoomStatus,this.drawingPlayerIndex=e.drawingPlayerIndex,this.drawingWord=e.drawingWord,this.currentRoundScores=e.currentRoundScores.map((function(t){var e=new p;return e.copyFrom(t),e})),this.selectedWord=e.selectedWord,this.roomSettings.copyFrom(e.roomSettings),this.inputPayload.copyFrom(e.inputPayload),this.currentGameState=e.currentGameState,this.previousGameState=e.previousGameState,this.drawingSketchData=e.drawingSketchData.map((function(t){var e=new l;return e.copyFrom(t),e})),this.currentRound=e.currentRound,this.serverTick=e.serverTick},a.getPlayerByUserId=function(t){return this.playersData.find((function(e){return e.userId===t}))||null},a.getOnlinePlayersCount=function(){return this.playersData.filter((function(t){return t.isOnline})).length},a.getPlayerByIndex=function(t){return this.playersData.find((function(e){return e.playerIndex===t}))||null},a.getPlayerBySessionId=function(t){return this.playersData.find((function(e){return e.sessionId===t}))||null},i}(s));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/pictionary_game', 'chunks:///_virtual/pictionary_game'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});