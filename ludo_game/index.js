System.register("chunks:///ludo_game.js",["./rollupPluginModLoBabelHelpers-5eee144e.js","cc","./colyseus.mjs_cjs=&original=-36827661.js","./index-dff8d36e.js"],(function(){var e,t,n,i,o,r,a,s,l,u,c,h,p,d,m,f,g,y,v,b,_,C,S,T,P,w,O,N,R,E,I,A,L,D,M,F,k,G,z,H,U,B,x,W,V,K,j,J,Y,Z,Q,X,q,$;return{setters:[function(l){e=l._,t=l.a,n=l.b,i=l.c,o=l.h,r=l.d,a=l.f,s=l.g},function(e){l=e.cclegacy,u=e._decorator,c=e.sys,h=e.Component,p=e.EventTarget,d=e.CCBoolean,m=e.UITransform,f=e.Camera,g=e.screen,y=e.view,v=e.math,b=e.director,_=e.Director,C=e.Widget,S=e.Enum,T=e.Size,P=e.Node,w=e.Vec3,O=e.CCString,N=e.AudioClip,R=e.CCFloat,E=e.AudioSource,I=e.Prefab,A=e.instantiate,L=e.SpriteFrame,D=e.Color,M=e.Sprite,F=e.CCInteger,k=e.Animation,G=e.tween,z=e.quat,H=e.Quat,U=e.ParticleSystem2D,B=e.Tween,x=e.Label,W=e.Input,V=e.assetManager,K=e.Texture2D,j=e.Layout,J=e.game,Y=e.Game,Z=e.log},function(e){Q=e._,X=e.M,q=e.H,$=e.I},null],execute:function(){l._RF.push({},"252bcBm+SNGlrM56mjzUHDf","Ludo_PBLogger",void 0);var ee,te,ne,ie,oe,re,ae,se,le,ue,ce,he,pe,de,me,fe=function(e){return e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e}({}),ge=function(){function e(){}return e.debug=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(fe.Debug,e,n)},e.info=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(fe.Info,e,n)},e.warning=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(fe.Warning,e,n)},e.error=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.log(fe.Error,e,n)},e.log=function(e,t,n){if(e>=this.currentLevel){var i,o=fe[e]+": "+t;if((i=console).log.apply(i,[o].concat(n)),this.isProduction&&window.ReactNativeWebView)try{var r={type:"log",level:fe[e],message:o,params:n};window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(r))}catch(e){console.error("Failed to send log to ReactNativeWebView:",e)}}},e.setLevel=function(e){this.currentLevel=e},e.setProductionMode=function(e){this.isProduction=e},e}();ge.currentLevel=fe.Debug,ge.isProduction=!1,l._RF.pop(),l._RF.push({},"e4058gBTZdP478xfKH7t4KO","Ludo_NetworkConfig",void 0);var ye=u.ccclass,ve=u.property,be=(ee=ye("LudoNetworkConfig"),te=ve({tooltip:"Server host address"}),ne=ve({tooltip:"Server port number"}),ie=ve({tooltip:"Use SSL for connections"}),oe=ve({tooltip:"Player identifier"}),re=ve({tooltip:"Room identifier"}),ae=ve({tooltip:"Name of the game"}),ee((ue=e((le=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"serverHost",ue,i(t)),n(t,"serverPort",ce,i(t)),n(t,"useSSL",he,i(t)),n(t,"userId",pe,i(t)),n(t,"roomId",de,i(t)),n(t,"gameName",me,i(t)),t}t(o,e);var r=o.prototype;return r.initNetworkConfig=function(){if(c.isBrowser){var e=new URLSearchParams(window.location.search),t="true"===e.get("debug");ge.debug("Initializing network config (debug="+t+")"),t?this.parseQueryParams(e):this.parseInjectedConfig(),ge.debug("Final network config:",{serverHost:this.serverHost,serverPort:this.serverPort,useSSL:this.useSSL,userId:this.userId,roomId:this.roomId,gameName:this.gameName})}},r.parseQueryParams=function(e){var t=this;ge.debug("Parsing config from query parameters"),this.updateConfigFromQueryParam(e,"userId",(function(e){return t.userId=e})),this.updateConfigFromQueryParam(e,"roomId",(function(e){return t.roomId=e})),this.updateConfigFromQueryParam(e,"apiUrl",(function(e){return t.serverHost=e})),this.updateConfigFromQueryParam(e,"apiPort",(function(e){var n=parseInt(e);isNaN(n)||(t.serverPort=n)})),this.updateConfigFromQueryParam(e,"useSSL",(function(e){return t.useSSL="true"===e}))},r.parseInjectedConfig=function(){ge.debug("Parsing config from injected GameConfig");try{var e=window.GameConfig;if(!e)return void ge.debug("No injected GameConfig found");var t="string"==typeof e?JSON.parse(e):e;this.applyConfig(t)}catch(e){ge.debug("Failed to parse injected GameConfig:",e)}},r.applyConfig=function(e){var t,n,i,o,r;e&&(this.userId=null!=(t=e.userId)?t:this.userId,this.roomId=null!=(n=e.roomId)?n:this.roomId,this.serverHost=null!=(i=e.apiUrl)?i:this.serverHost,this.serverPort=Number(null!=(o=e.apiPort)?o:this.serverPort),this.useSSL=null!=(r=e.useSSL)?r:this.useSSL)},r.updateConfigFromQueryParam=function(e,t,n){var i=e.get(t);null!=i&&n(i)},o}(h)).prototype,"serverHost",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localhost"}}),ce=e(le.prototype,"serverPort",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),he=e(le.prototype,"useSSL",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pe=e(le.prototype,"userId",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),de=e(le.prototype,"roomId",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"testroom1"}}),me=e(le.prototype,"gameName",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pictionary"}}),se=le))||se);l._RF.pop(),l._RF.push({},"5c769UxAqtBHbbVocngx5rD","Ludo_NetworkTypes",void 0);var _e=function(e){return e[e.SERVER_ROOM_STATE_CHANGE=0]="SERVER_ROOM_STATE_CHANGE",e[e.CONNECTION_STATE_CHANGE=1]="CONNECTION_STATE_CHANGE",e[e.ROOM_STATUS_CHANGE=2]="ROOM_STATUS_CHANGE",e[e.SERVER_MESSAGE=3]="SERVER_MESSAGE",e}({}),Ce=function(e){return e[e.INITIALIZING=0]="INITIALIZING",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.LOBBY=3]="LOBBY",e[e.JOINED_ROOM=4]="JOINED_ROOM",e[e.DISCONNECTED=5]="DISCONNECTED",e[e.RECONNECTING=6]="RECONNECTING",e[e.KICKED_OUT=7]="KICKED_OUT",e}({}),Se=function(e){return e.NONE="none",e.KICKED_OUT="kicked_out",e.PLAYER_CAMEBACK="player_cameback",e.PLAYER_JOINED="player_joined",e}({});l._RF.pop(),l._RF.push({},"ce170UUEpVOWKSm1y0OznJC","Ludo_PlayerTypes",void 0);var Te,Pe=function(e){return e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.SPECTATOR=2]="SPECTATOR",e}({});l._RF.pop(),l._RF.push({},"e31ccxQaj5LtqnJTrZKMgzh","Ludo_PbSaveSystem",void 0);var we,Oe,Ne,Re,Ee,Ie,Ae,Le,De=(0,u.ccclass)("LudoPbSaveSystem")(Te=function(){function e(){}return e.SaveData=function(e,t){ge.info("============ Saving data in pb save system ========="),c.localStorage.setItem(e,JSON.stringify(t))},e.LoadData=function(e){return JSON.parse(c.localStorage.getItem(e))},e.RemoveData=function(e){c.localStorage.removeItem(e)},e.ClearAllData=function(){c.localStorage.clear()},e}())||Te;l._RF.pop(),l._RF.push({},"73e75uE9GBNV5HiTK3x/NCS","Ludo_NetworkManager",void 0);var Me,Fe,ke,Ge,ze,He,Ue,Be,xe,We,Ve,Ke,je=u.ccclass,Je=u.property,Ye={roomId:"testroom1",reconnectionToken:"eyJ"},Ze=new p,Qe=new p,Xe=new p,qe=(we=je("LudoNetworkManager"),Oe=Je({type:d,tooltip:"Enable development mode for additional logging"}),Ne=Je({type:be,tooltip:"Network configuration settings"}),we(((Le=function(e){function l(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"isDevMode",Ie,i(t)),n(t,"networkConfig",Ae,i(t)),t._client=void 0,t._room=void 0,t._currentConnectionState=Ce.INITIALIZING,t._reconnectionData=o({},Ye),t}t(l,e);var u=l.prototype;return u.onLoad=function(){l._instance&&(this.log("NetworkManager instance already exists. Destroying duplicate."),this.node.destroy()),l._instance=this,this.networkConfig.initNetworkConfig(),this.isDevMode||ge.setProductionMode(!0)},u.start=function(){this.initializeClient(),ge.info("============ Initializing client ========="),ge.info("============ Connecting to room ========="),this.connect(this.networkConfig.roomId,this.networkConfig.userId)},u.initializeClient=function(){var e=this.networkConfig.useSSL?"wss":"ws",t="";t=0==this.networkConfig.serverPort?e+"://"+this.networkConfig.serverHost:e+"://"+this.networkConfig.serverHost+":"+this.networkConfig.serverPort,this.log("Initializing client with endpoint: "+t),this._client=new Q.Client(t)},u.shouldRejoin=function(){return!this.isDevMode&&(this._reconnectionData=De.LoadData(this.networkConfig.gameName),!!(this._reconnectionData&&this._reconnectionData.roomId&&this._reconnectionData.reconnectionToken)&&this._reconnectionData.roomId===this.networkConfig.roomId)},u.connect=function(){var e=a(s().mark((function e(t,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ge.info("============ Connecting to room from connect function ========="),this.updateConnectionState(Ce.CONNECTING),!this.shouldRejoin()){e.next=7;break}return this.log("Rejoining room",t),e.next=6,this.rejoin();case 6:return e.abrupt("return");case 7:return e.prev=7,i=this.createPlayerData(n),this.log("Joining with options ",{player:i}),e.next=12,this._client.joinById(t,{player:i});case 12:this._room=e.sent,this.initAfterJoin(t),e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(7),this.handleConnectionError(e.t0),e.t0;case 20:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(t,n){return e.apply(this,arguments)}}(),u.initAfterJoin=function(e){this.updateConnectionState(Ce.JOINED_ROOM),this.log("Joined room "+e+" with sessionId: "+this._room.sessionId),this.initializeRoomCallbacks(),this.saveReconnectionData()},u.createAndJoinRoom=function(){var e=a(s().mark((function e(t,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.log("Creating room",t),this.updateConnectionState(Ce.CONNECTING),e.prev=2,i=this.createPlayerData(n),e.next=6,this._client.create("PictionaryRoom",{roomId:t,player:i,roomSettings:{maxClients:10}});case 6:this._room=e.sent,this.initAfterJoin(t),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(2),this.handleConnectionError(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),u.createPlayerData=function(e){return{userId:e,name:e,avatar:"randomProfilePicture",type:Pe.HUMAN}},u.initializeRoomCallbacks=function(){var e=this;console.log("============ Initializing room callbacks ========="),this._room?(this._room.onStateChange((function(e){Qe.emit(_e.SERVER_ROOM_STATE_CHANGE,e)})),this._room.onLeave((function(t){4001===t?e.updateConnectionState(Ce.KICKED_OUT):e.updateConnectionState(Ce.DISCONNECTED)})),this._room.onMessage(Se.KICKED_OUT,(function(){e.updateConnectionState(Ce.KICKED_OUT)})),this._room.onMessage("*",(function(e,t){Xe.emit(_e.SERVER_MESSAGE,e,t)}))):this.log("Cannot initialize callbacks: Room is not defined")},u.updateConnectionState=function(e){if(this._currentConnectionState!==e){var t=this._currentConnectionState;this._currentConnectionState=e,this.log("Connection state changed: "+Ce[t]+" -> "+Ce[e]),Ze.emit(_e.CONNECTION_STATE_CHANGE,t,e)}},u.reconnect=function(){var e=a(s().mark((function e(t,n,i){var o,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=1),void 0===n&&(n=10),void 0===i&&(i=2e3),this._currentConnectionState===Ce.DISCONNECTED||this._currentConnectionState===Ce.RECONNECTING){e.next=6;break}return this.log("Cannot reconnect: Current state is "+Ce[this._currentConnectionState]),e.abrupt("return");case 6:return this._room&&this._room.state&&(o=this._room.state).roomSettings&&o.roomSettings.maxReconnectionAttempts&&(n=o.roomSettings.maxReconnectionAttempts),this.updateConnectionState(Ce.RECONNECTING),this.log("Reconnect attempt "+t+"/"+n),e.prev=9,e.next=12,this.delay(i);case 12:if(this._room&&this._room.reconnectionToken){e.next=14;break}throw new Error("Reconnection token not available");case 14:return e.next=16,this._client.reconnect(this._room.reconnectionToken);case 16:r=e.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(Ce.JOINED_ROOM),this.log("Reconnected successfully."),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(9),this.handleReconnectionError(e.t0,t,n,i);case 27:case"end":return e.stop()}}),e,this,[[9,24]])})));return function(t,n,i){return e.apply(this,arguments)}}(),u.rejoin=function(){var e=a(s().mark((function e(t,n,i){var o,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=1),void 0===n&&(n=10),void 0===i&&(i=2e3),this.log("Rejoin attempt "+t+"/"+n),e.prev=4,e.next=7,this.delay(i);case 7:if(this._reconnectionData&&this._reconnectionData.reconnectionToken){e.next=9;break}throw new Error("Reconnection data not available");case 9:return o=this._reconnectionData.roomId+":"+this._reconnectionData.reconnectionToken,ge.info("Using formatted reconnection token: ",o),e.next=13,this._client.reconnect(o);case 13:r=e.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(Ce.JOINED_ROOM),this.log("Rejoined successfully."),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),this.handleReconnectionError(e.t0,t,n,i,"reJoin");case 24:case"end":return e.stop()}}),e,this,[[4,21]])})));return function(t,n,i){return e.apply(this,arguments)}}(),u.delay=function(){var e=a(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.handleConnectionError=function(e){var t=(null==e?void 0:e.message)||"Unknown error";this.log("Error connecting to room:",t),this.updateConnectionState(Ce.DISCONNECTED)},u.handleReconnectionError=function(e,t,n,i,o){void 0===o&&(o="reconnect");var r=(null==e?void 0:e.message)||"Unknown error";this.log(o+" attempt "+t+" failed:",r),t<n||-1===n?"reconnect"===o?this.reconnect(t+1,n,i):this.rejoin(t+1,n,i):(this.log("Max reconnection attempts reached. Please check your network or contact support."),this.updateConnectionState(Ce.DISCONNECTED))},u.saveReconnectionData=function(){if(ge.info("============ Saving reconnection data ========="),this._room&&this._room.reconnectionToken){var e=this._room.reconnectionToken;e.includes(":")&&(e=e.split(":")[1]),ge.info("saving Reconnection token: ",e),this._reconnectionData={roomId:this.networkConfig.roomId,reconnectionToken:e},De.SaveData(this.networkConfig.gameName,this._reconnectionData),ge.info("Reconnection data saved")}else this.log("Cannot save reconnection data: Room or reconnection token not available")},u.leaveRoom=function(){var e=this;this._room?(this.log("Leaving room"),this._room.leave(!0).then((function(){return e.log("Left room successfully")})).catch((function(t){return e.log("Error leaving room:",(null==t?void 0:t.message)||"Unknown error")}))):this.log("Cannot leave room: Room is not defined")},u.getMySessionId=function(){return this._room.sessionId},u.sendMessage=function(e,t){this._room?(this.isDevMode&&this.log("Sending message:",e,t),this._room.send(e,t)):this.log("Cannot send message: Room is not defined")},u.log=function(e){if(this.isDevMode){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.length>0?ge.info.apply(ge,["[NetworkManager] "+e].concat(n)):ge.info("[NetworkManager] "+e)}},u.onDestroy=function(){l._instance===this&&(l._instance=null)},r(l,[{key:"CurrentRoom",get:function(){return this._room}},{key:"CurrentConnectionState",get:function(){return this._currentConnectionState}}],[{key:"Instance",get:function(){if(!this._instance)throw new Error("NetworkManager instance is not initialized.");return this._instance}}]),l}(h))._instance=null,Ie=e((Ee=Le).prototype,"isDevMode",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=e(Ee.prototype,"networkConfig",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=Ee))||Re);l._RF.pop(),l._RF.push({},"01e10aBtaxDyoi4buVWsPAK","Ludo_CameraManger",void 0);var $e=u.ccclass,et=u.property,tt=u.executionOrder,nt=new p;tt(-100);var it,ot,rt,at,st,lt=(Me=$e("LudoCameraManger"),Fe=et({type:m}),Me(((Ke=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"canvasUITransform",ze,i(t)),n(t,"designHeight",He,i(t)),n(t,"designWidth",Ue,i(t)),n(t,"defaultOrthoHeight",Be,i(t)),n(t,"minOrthoHeight",xe,i(t)),n(t,"maxOrthoHeight",We,i(t)),n(t,"safeAreaPadding",Ve,i(t)),t.designAspectRatio=void 0,t.currentAspectRatio=void 0,t.camera=null,t.windowWidth=1080,t.windowHeight=1920,t.effectiveWidth=0,t.effectiveHeight=0,t.effectiveAspectRatio=0,t}t(o,e);var r=o.prototype;return r.onLoad=function(){console.log("CameraManger onLoad"),o.instance=this,this.designAspectRatio=this.designWidth/this.designHeight,this.camera=this.node.getComponent(f)},r.start=function(){var e=this;this.updateScreenSize(),this.adaptCameraToScreen(),window.addEventListener("resize",(function(){e.updateScreenSize(),e.adaptCameraToScreen()}))},r.updateScreenSize=function(){this.windowWidth=g.windowSize.width||window.innerWidth,this.windowHeight=g.windowSize.height||window.innerHeight,this.currentAspectRatio=this.windowWidth/this.windowHeight,console.log("Window Size: "+this.windowWidth+"x"+this.windowHeight+", Aspect Ratio: "+this.currentAspectRatio.toFixed(2))},r.adaptCameraToScreen=function(){if(this.camera){var e=0,t=0,n=0,i=0;if(c.os===c.OS.IOS||c.os===c.OS.ANDROID){var o=y.getVisibleSize(),r=y.getVisibleOrigin();o&&(e=r.y,t=this.windowHeight-(r.y+o.height),n=r.x,i=this.windowWidth-(r.x+o.width))}this.effectiveHeight=this.windowHeight-e-t-2*this.safeAreaPadding,this.effectiveWidth=this.windowWidth-n-i-2*this.safeAreaPadding,this.effectiveAspectRatio=this.effectiveWidth/this.effectiveHeight,console.log("Effective Size: "+this.effectiveWidth+"x"+this.effectiveHeight+", Aspect Ratio: "+this.effectiveAspectRatio.toFixed(2));var a=this.currentAspectRatio>=1,s=this.defaultOrthoHeight;if(a)console.log("=== Landscape Mode ==="),s=this.defaultOrthoHeight*(1/this.currentAspectRatio)*1.5;else{console.log("=== Portrait Mode ===");var l=.6/Math.min(this.currentAspectRatio,.6);s=this.defaultOrthoHeight*l}s=v.clamp(s,this.minOrthoHeight,this.maxOrthoHeight),this.camera.orthoHeight=s,console.log("Camera Ortho Height: "+s.toFixed(2)),nt.emit("CameraOrthoSizeChange",s)}},r.getWidth=function(){return 2*this.camera.orthoHeight*this.currentAspectRatio},r.getCurrentOrthoHeight=function(){return this.camera.orthoHeight},r.refreshCameraAdaptation=function(){this.updateScreenSize(),this.adaptCameraToScreen()},o}(h)).instance=null,ze=e((Ge=Ke).prototype,"canvasUITransform",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=e(Ge.prototype,"designHeight",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1920}}),Ue=e(Ge.prototype,"designWidth",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),Be=e(Ge.prototype,"defaultOrthoHeight",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 820}}),xe=e(Ge.prototype,"minOrthoHeight",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 750}}),We=e(Ge.prototype,"maxOrthoHeight",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),Ve=e(Ge.prototype,"safeAreaPadding",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),ke=Ge))||ke);l._RF.pop(),l._RF.push({},"8367ePaJIVEZqV0my7KdGeL","Ludo_FitToScreen",void 0);var ut,ct,ht,pt,dt,mt,ft,gt,yt,vt,bt,_t,Ct,St,Tt,Pt=u.ccclass,wt=u.property;it=Pt("LudoFitToScreen"),ot=wt({type:d}),it((st=e((at=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"updateWidgetsRecursively",st,i(t)),t}t(o,e);var r=o.prototype;return r.onEnable=function(){var e=this;b.once(_.EVENT_AFTER_UPDATE,(function(){e.refresh()}))},r.setUiTransformToScreenSize=function(){var e=this.node.getComponent(m),t=lt.instance.getCurrentOrthoHeight()/lt.instance.defaultOrthoHeight,n=g.windowSize.width||window.innerWidth,i=g.windowSize.height||window.innerHeight,o=lt.instance.designHeight*t,r=o*n/i;console.log("windowWidth",n,"windowHeight",i),e.setContentSize(r,o)},r.refresh=function(){this.setUiTransformToScreenSize(),this.updateWidgetsRecursively&&this.updateWidgetsInHierarchy()},r.updateWidgetsInHierarchy=function(){this.updateWidgetAndDescendants(this.node)},r.updateWidgetAndDescendants=function(e){var t=this,n=e.getComponent(C);n&&this.node.uuid!=e.uuid&&n.updateAlignment(),e.children.forEach((function(e){t.updateWidgetAndDescendants(e)}))},o}(h)).prototype,"updateWidgetsRecursively",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=at));l._RF.pop(),l._RF.push({},"640d11d9f5CfojRvMNrEUJN","Ludo_MiloLayout",void 0);var Ot=u.ccclass,Nt=u.property,Rt=function(e){return e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e[e.GRID=2]="GRID",e}({}),Et=function(e){return e[e.LEFT_TOP=0]="LEFT_TOP",e[e.CENTER_TOP=1]="CENTER_TOP",e[e.RIGHT_TOP=2]="RIGHT_TOP",e[e.LEFT_CENTER=3]="LEFT_CENTER",e[e.CENTER=4]="CENTER",e[e.RIGHT_CENTER=5]="RIGHT_CENTER",e[e.LEFT_BOTTOM=6]="LEFT_BOTTOM",e[e.CENTER_BOTTOM=7]="CENTER_BOTTOM",e[e.RIGHT_BOTTOM=8]="RIGHT_BOTTOM",e}({});ut=Ot("LudoMiloLayout"),ct=Nt({type:S(Rt)}),ht=Nt({type:S(Rt)}),pt=Nt({type:S(Et)}),dt=Nt({type:S(Et)}),mt=Nt({visible:function(){return this._layoutType===Rt.GRID}}),ut((yt=e((gt=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"_layoutType",yt,i(t)),n(t,"_alignment",vt,i(t)),n(t,"_spacingX",bt,i(t)),n(t,"_spacingY",_t,i(t)),n(t,"_columns",Ct,i(t)),n(t,"_padding",St,i(t)),n(t,"_autoResize",Tt,i(t)),t._activeChildCount=0,t._layoutSize=new T(0,0),t._lastChildActiveState=[],t}t(o,e);var a=o.prototype;return a.onLoad=function(){this.node.on(P.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(P.EventType.CHILD_REMOVED,this.onChildRemoved,this)},a.onDestroy=function(){this.node.off(P.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(P.EventType.CHILD_REMOVED,this.onChildRemoved,this),this.removeAllChildListeners()},a.onChildRemoved=function(e){this.removeChildListener(e),this.updateLayout()},a.removeAllChildListeners=function(){var e=this;this.node.children.forEach((function(t){e.removeChildListener(t)}))},a.removeChildListener=function(e){e.__miloLayoutActiveHandler&&(e.off(P.EventType.ACTIVE_IN_HIERARCHY_CHANGED,e.__miloLayoutActiveHandler),e.__miloLayoutActiveHandler=null)},a.start=function(){this._lastChildActiveState=this.node.children.map((function(e){return e.active})),this.updateLayout(),this.addChildActiveListeners()},a.addChildActiveListeners=function(){var e=this;this.node.children.forEach((function(t){e.addChildActiveListener(t)}))},a.addChildActiveListener=function(e){var t=this;e.off(P.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.onChildActiveChanged,this);var n=function(){t.scheduleOnce((function(){t.updateLayout()}),0)};e.__miloLayoutActiveHandler=n,e.on(P.EventType.ACTIVE_IN_HIERARCHY_CHANGED,n)},a.onChildActiveChanged=function(e){},a.onEnable=function(){this.updateLayout()},a.getAlignmentOffset=function(e){var t,n=new w,i=(null==(t=this.node.getComponent(m))?void 0:t.contentSize)||new T(0,0);switch(this._alignment){case Et.LEFT_TOP:case Et.LEFT_CENTER:case Et.LEFT_BOTTOM:n.x=this._padding;break;case Et.CENTER_TOP:case Et.CENTER:case Et.CENTER_BOTTOM:n.x=(i.width-e.width)/2;break;case Et.RIGHT_TOP:case Et.RIGHT_CENTER:case Et.RIGHT_BOTTOM:n.x=i.width-e.width-this._padding}switch(this._alignment){case Et.LEFT_TOP:case Et.CENTER_TOP:case Et.RIGHT_TOP:n.y=-this._padding;break;case Et.LEFT_CENTER:case Et.CENTER:case Et.RIGHT_CENTER:n.y=-(i.height-e.height)/2;break;case Et.LEFT_BOTTOM:case Et.CENTER_BOTTOM:case Et.RIGHT_BOTTOM:n.y=-i.height+e.height+this._padding}return n},a.updateLayout=function(){if(this.node){var e=this.node.children.filter((function(e){return e.active}));if(this._activeChildCount=e.length,0!==this._activeChildCount)switch(this._layoutType){case Rt.HORIZONTAL:this.updateHorizontalLayout(e);break;case Rt.VERTICAL:this.updateVerticalLayout(e);break;case Rt.GRID:this.updateGridLayout(e)}}},a.updateHorizontalLayout=function(e){var t=this,n=2*this._padding,i=0;e.forEach((function(o,r){var a=o.getComponent(m);a&&(n+=a.width,r<e.length-1&&(n+=t._spacingX),i=Math.max(i,a.height))}));var o=new T(n,i+2*this._padding),r=this.getAlignmentOffset(o),a=r.x;if(e.forEach((function(e){var n=e.getComponent(m);if(n){var o=n.height,s=n.width,l=r.y;switch(t._alignment){case Et.LEFT_TOP:case Et.CENTER_TOP:case Et.RIGHT_TOP:l=r.y-t._padding;break;case Et.LEFT_CENTER:case Et.CENTER:case Et.RIGHT_CENTER:l=r.y-(i-o)/2;break;case Et.LEFT_BOTTOM:case Et.CENTER_BOTTOM:case Et.RIGHT_BOTTOM:l=r.y-i+o}e.position=new w(a+s/2,l-o/2,0),a+=s+t._spacingX}})),this._layoutSize=o,this._autoResize){var s=this.node.getComponent(m);s&&s.setContentSize(o)}},a.updateVerticalLayout=function(e){var t=this,n=2*this._padding,i=0;e.forEach((function(o,r){var a=o.getComponent(m);a&&(n+=a.height,r<e.length-1&&(n+=t._spacingY),i=Math.max(i,a.width))}));var o=new T(i+2*this._padding,n),r=this.getAlignmentOffset(o),a=r.y;if(e.forEach((function(e){var n=e.getComponent(m);if(n){var o=n.height,s=n.width,l=r.x;switch(t._alignment){case Et.LEFT_TOP:case Et.LEFT_CENTER:case Et.LEFT_BOTTOM:l=r.x+t._padding;break;case Et.CENTER_TOP:case Et.CENTER:case Et.CENTER_BOTTOM:l=r.x+(i-s)/2+t._padding;break;case Et.RIGHT_TOP:case Et.RIGHT_CENTER:case Et.RIGHT_BOTTOM:l=r.x+i-s+t._padding}e.position=new w(l+s/2,a-o/2,0),a-=o+t._spacingY}})),this._layoutSize=o,this._autoResize){var s=this.node.getComponent(m);s&&s.setContentSize(o)}},a.updateGridLayout=function(e){if(!(this._columns<=0)){var t=Math.ceil(e.length/this._columns),n=0,i=0;e.forEach((function(e){var t=e.getComponent(m);t&&(n=Math.max(n,t.width),i=Math.max(i,t.height))}));for(var o=2*this._padding+n*this._columns+this._spacingX*(this._columns-1),r=2*this._padding+i*t+this._spacingY*(t-1),a=new T(o,r),s=this.getAlignmentOffset(a),l=0;l<t;l++){var u=Math.min(this._columns,e.length-l*this._columns),c=u*n+(u-1)*this._spacingX,h=0;switch(this._alignment){case Et.CENTER_TOP:case Et.CENTER:case Et.CENTER_BOTTOM:h=(this._columns*n+(this._columns-1)*this._spacingX-c)/2;break;case Et.RIGHT_TOP:case Et.RIGHT_CENTER:case Et.RIGHT_BOTTOM:h=this._columns*n+(this._columns-1)*this._spacingX-c}for(var p=0;p<u;p++){var d=l*this._columns+p;if(d>=e.length)break;var f=e[d],g=f.getComponent(m);if(g){var y=g.width,v=g.height,b=s.x+this._padding+p*(n+this._spacingX)+h,_=s.y-this._padding-l*(i+this._spacingY),C=b,S=_;switch(this._alignment){case Et.LEFT_TOP:case Et.LEFT_CENTER:case Et.LEFT_BOTTOM:C=b;break;case Et.CENTER_TOP:case Et.CENTER:case Et.CENTER_BOTTOM:C=b+(n-y)/2;break;case Et.RIGHT_TOP:case Et.RIGHT_CENTER:case Et.RIGHT_BOTTOM:C=b+n-y}switch(this._alignment){case Et.LEFT_TOP:case Et.CENTER_TOP:case Et.RIGHT_TOP:S=_;break;case Et.LEFT_CENTER:case Et.CENTER:case Et.RIGHT_CENTER:S=_-(i-v)/2;break;case Et.LEFT_BOTTOM:case Et.CENTER_BOTTOM:case Et.RIGHT_BOTTOM:S=_-i+v}f.position=new w(C+y/2,S-v/2,0)}}}if(this._layoutSize=a,this._autoResize){var P=this.node.getComponent(m);P&&P.setContentSize(a)}}},a.update=function(e){if(this.node&&this.node.children.length>0){var t=this.node.children.map((function(e){return e.active})),n=!1;if(this._lastChildActiveState.length!==t.length)n=!0;else for(var i=0;i<t.length;i++)if(this._lastChildActiveState[i]!==t[i]){n=!0;break}n&&(this._lastChildActiveState=t,this.updateLayout())}},a.onChildAdded=function(e){this.addChildActiveListener(e),this.updateLayout()},r(o,[{key:"layoutType",get:function(){return this._layoutType},set:function(e){this._layoutType=e,this.updateLayout()}},{key:"alignment",get:function(){return this._alignment},set:function(e){this._alignment=e,this.updateLayout()}},{key:"spacingX",get:function(){return this._spacingX},set:function(e){this._spacingX=e,this.updateLayout()}},{key:"spacingY",get:function(){return this._spacingY},set:function(e){this._spacingY=e,this.updateLayout()}},{key:"columns",get:function(){return this._columns},set:function(e){this._columns=e,this.updateLayout()}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding=e,this.updateLayout()}},{key:"autoResize",get:function(){return this._autoResize},set:function(e){this._autoResize=e,this.updateLayout()}}]),o}(h)).prototype,"_layoutType",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Rt.HORIZONTAL}}),e(gt.prototype,"layoutType",[ht],Object.getOwnPropertyDescriptor(gt.prototype,"layoutType"),gt.prototype),vt=e(gt.prototype,"_alignment",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Et.LEFT_TOP}}),e(gt.prototype,"alignment",[dt],Object.getOwnPropertyDescriptor(gt.prototype,"alignment"),gt.prototype),bt=e(gt.prototype,"_spacingX",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(gt.prototype,"spacingX",[Nt],Object.getOwnPropertyDescriptor(gt.prototype,"spacingX"),gt.prototype),_t=e(gt.prototype,"_spacingY",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(gt.prototype,"spacingY",[Nt],Object.getOwnPropertyDescriptor(gt.prototype,"spacingY"),gt.prototype),Ct=e(gt.prototype,"_columns",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),e(gt.prototype,"columns",[mt],Object.getOwnPropertyDescriptor(gt.prototype,"columns"),gt.prototype),St=e(gt.prototype,"_padding",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(gt.prototype,"padding",[Nt],Object.getOwnPropertyDescriptor(gt.prototype,"padding"),gt.prototype),Tt=e(gt.prototype,"_autoResize",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(gt.prototype,"autoResize",[Nt],Object.getOwnPropertyDescriptor(gt.prototype,"autoResize"),gt.prototype),ft=gt));l._RF.pop(),l._RF.push({},"d60aeTma09GH52ik5OUjVWN","Ludo_PbExtensions",void 0),w.prototype.clampMagnitude=function(e,t){if(!(e>t)){var n=this.length();return n>t?(this.normalize(),this.multiplyScalar(t)):n<e&&(this.normalize(),this.multiplyScalar(e)),this}console.error("min should be less than max")},h.prototype.log=function(){for(var e=this.constructor.name,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];ge.info.apply(ge,[e+" "].concat(n))},l._RF.pop(),l._RF.push({},"36d70Gp0MFBHof+pJPfkcIh","Ludo_Utils",void 0),l._RF.pop(),l._RF.push({},"ae0b1fI4I5GDZhxMKh6Yad9","Ludo_BasePlayerData",void 0);var It=function(){function e(){this.userId=void 0,this.name=void 0,this.avatar=void 0,this.sessionId=void 0,this.playerNumber=void 0,this.type=void 0,this.isOnline=void 0,this.isConnected=void 0,this.isReplacedByBot=void 0,this.isKickedOut=void 0,this.isReady=void 0,this.score=void 0}return e.prototype.copyFrom=function(e){this.userId=e.userId,this.name=e.name,this.avatar=e.avatar,this.sessionId=e.sessionId,this.playerNumber=e.playerNumber,this.type=e.type,this.isOnline=e.isOnline,this.isConnected=e.isConnected,this.isReplacedByBot=e.isReplacedByBot,this.isKickedOut=e.isKickedOut,this.isReady=e.isReady,this.score=e.score},e}();l._RF.pop(),l._RF.push({},"7fec135h2xKlIO+Q+n1ixAz","Ludo_BaseRoomSettings",void 0);var At=function(){function e(){this.maxPlayers=void 0,this.minPlayers=void 0,this.maxClients=void 0,this.countdownTimeInSeconds=void 0,this.allowLateJoin=void 0,this.maxReconnectionAttempts=void 0,this.reconnectionAttemptInterval=void 0,this.reconnectionTime=void 0,this.gameFPS=void 0,this.serverFPS=void 0,this.patchRate=void 0}return e.prototype.copyFrom=function(e){this.maxPlayers=e.maxPlayers,this.minPlayers=e.minPlayers,this.maxClients=e.maxClients,this.countdownTimeInSeconds=e.countdownTimeInSeconds,this.allowLateJoin=e.allowLateJoin,this.reconnectionTime=e.reconnectionTime,this.gameFPS=e.gameFPS,this.serverFPS=e.serverFPS,this.patchRate=e.patchRate},e}();l._RF.pop(),l._RF.push({},"f212cQ6wtxPAajXkEvADcEq","Ludo_RoomTypes",void 0);var Lt=function(e){return e[e.NONE=0]="NONE",e[e.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",e[e.COUNTDOWN=2]="COUNTDOWN",e[e.GAME_SIMULATION=3]="GAME_SIMULATION",e[e.END_GAME=4]="END_GAME",e[e.KICKED_OUT=5]="KICKED_OUT",e}({});l._RF.pop(),l._RF.push({},"92cc9D9VqVFCoBMqhukL46V","Ludo_BaseRoomState",void 0);var Dt,Mt,Ft,kt,Gt,zt,Ht,Ut,Bt,xt,Wt,Vt,Kt,jt,Jt,Yt,Zt,Qt,Xt,qt,$t,en,tn,nn=function(){function e(e,t){this.currentRoomStatus=Lt.WAITING_FOR_PLAYERS,this.previousRoomStatus=Lt.NONE,this.roomSettings=void 0,this.playersData=void 0,this.spectatorsData=void 0,this.roomSettings=e,this.playersData=t,this.spectatorsData=[]}return e.prototype.copyFrom=function(e){this.currentRoomStatus=e.currentRoomStatus,this.previousRoomStatus=e.previousRoomStatus,this.roomSettings.copyFrom(e.roomSettings)},e}();l._RF.pop(),l._RF.push({},"0bce8NjgndFhq9YoIFFHzFK","Ludo_AudioManager",void 0);var on=u.ccclass,rn=u.property,an=(Dt=on("LudoAudioClipData"),Mt=rn({type:O}),Ft=rn({type:N}),kt=rn({type:R}),Gt=rn({type:R}),zt=rn({type:d}),Dt((Bt=e((Ut=function(){function e(){n(this,"name",Bt,this),n(this,"audioClips",xt,this),n(this,"delayBetweenClips",Wt,this),n(this,"volume",Vt,this),n(this,"loop",Kt,this),this.isLoopPlaying=void 0,this.lastPlayedTime=0,this.clipIndex=0}var t=e.prototype;return t.GetClip=function(){var e=this.audioClips[this.clipIndex];if(this.clipIndex=(this.clipIndex+1)%this.audioClips.length,this.CanPlay())return this.lastPlayedTime=Date.now(),e},t.CanPlay=function(){return Date.now()-this.lastPlayedTime>1e3*this.delayBetweenClips},e}()).prototype,"name",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=e(Ut.prototype,"audioClips",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wt=e(Ut.prototype,"delayBetweenClips",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vt=e(Ut.prototype,"volume",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Kt=e(Ut.prototype,"loop",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=Ut))||Ht),sn=(jt=on("LudoAudioManager"),Jt=rn({type:an}),Yt=rn({type:E}),Zt=rn({type:I}),jt(((tn=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"audioClipData",qt,i(t)),n(t,"backgroundAudioSource",$t,i(t)),t.localStorageAudioEnabledKey="LudoAudioEnabled",n(t,"audioSourcePrefab",en,i(t)),t.audioSources=[],t._isAudioEnabled="true",t}t(o,e);var a=o.prototype;return a.onLoad=function(){o.instance=this,this.ReadAudioEnabledFromLocalStorage()},a.start=function(){this.SetAudioEnabled(this.IsAudioEnabled)},a.playSound=function(e){if("false"!=this.IsAudioEnabled){var t=this.audioClipData.find((function(t){return t.name==e}));if(null!=t){var n=t.GetClip();if(n){if(t.isLoopPlaying)return;var i=this.getEmptyAudioSource();i.loop=t.loop,t.isLoopPlaying=t.loop,i.volume=t.volume,i.clip=n,t.loop?i.play():i.playOneShot(n)}else console.warn("Audio Clip is in use ",e)}}},a.stopSound=function(e){var t=this.audioClipData.find((function(t){return t.name==e}));t?this.audioSources.forEach((function(e){e.clip==t.audioClips[t.clipIndex]&&(t.isLoopPlaying=!1,e.stop())})):console.warn("Audio Clip not found for ",e)},a.stopAllSounds=function(){this.audioSources.forEach((function(e){e.stop()})),this.audioClipData.forEach((function(e){e.isLoopPlaying=!1}))},a.ToggleAudio=function(){"true"==this.IsAudioEnabled?this.SetAudioEnabled("false"):this.SetAudioEnabled("true")},a.SetAudioEnabled=function(e){this._isAudioEnabled=e,this.UpdateBackgroundMusic(),this.WriteAudioEnabledToLocalStorage()},a.WriteAudioEnabledToLocalStorage=function(){c.localStorage.setItem(this.localStorageAudioEnabledKey,this.IsAudioEnabled)},a.ReadAudioEnabledFromLocalStorage=function(){var e=c.localStorage.getItem(this.localStorageAudioEnabledKey);this._isAudioEnabled=null==e?"true":e},a.UpdateBackgroundMusic=function(){var e,t;"true"==this.IsAudioEnabled?null==(e=this.backgroundAudioSource)||e.play():null==(t=this.backgroundAudioSource)||t.stop()},a.printAllPlayingAudioSources=function(){this.audioSources.forEach((function(e){e.playing&&console.log("Playing audio source: ",e.playing,e.clip.name,e.uuid)}))},a.getEmptyAudioSource=function(){var e=this.audioSources.find((function(e){return!e.playing}));return null==e&&(e=this.createAudioSource()),e},a.createAudioSource=function(){var e=A(this.audioSourcePrefab).getComponent(E);return e.node.setParent(this.node),this.audioSources.push(e),console.log("==== Created new audio source: ",this.audioSources.length),e},a.onDestroy=function(){o.instance===this&&(o.instance=null)},r(o,[{key:"IsAudioEnabled",get:function(){return this._isAudioEnabled}}]),o}(h)).instance=null,qt=e((Xt=tn).prototype,"audioClipData",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$t=e(Xt.prototype,"backgroundAudioSource",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=e(Xt.prototype,"audioSourcePrefab",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=Xt))||Qt);l._RF.pop(),l._RF.push({},"3af50d/ZYNP9Zdeeel1JjUX","Ludo_Defines",void 0);var ln,un,cn,hn,pn,dn,mn,fn,gn,yn,vn,bn,_n,Cn,Sn,Tn,Pn,wn,On,Nn,Rn,En,In,An,Ln,Dn,Mn,Fn,kn,Gn,zn,Hn,Un=function(e){return e[e.NONE=0]="NONE",e[e.ROLLING=1]="ROLLING",e[e.MOVING_PIECE=2]="MOVING_PIECE",e[e.END_TURN=3]="END_TURN",e[e.ROLLING_ACK=4]="ROLLING_ACK",e[e.MOVING_PIECE_ACK=5]="MOVING_PIECE_ACK",e}({}),Bn=function(e){return e.NONE="none",e.SET_STATE="set_state",e.DICE_OUTCOME="dice_outcome",e.CLIENT_DICE_ROLL="client_dice_roll",e.MOVE_PIECE="move_piece",e.ROLLING_ACK="rolling_ack",e.MOVE_PIECE_ACK="move_piece_ack",e.WAITING_ACK="waiting_ack",e}({}),xn=function(e){return e[e.DEFAULT=1]="DEFAULT",e[e.SAFE=2]="SAFE",e[e.GOLDEN_DICE=4]="GOLDEN_DICE",e[e.BOMB=8]="BOMB",e[e.PROPELLER=16]="PROPELLER",e}({});l._RF.pop(),l._RF.push({},"f5a55y4aCtOBbMzeZLjsmUl","Ludo_PlayerAssets",void 0);var Wn,Vn=u.ccclass,Kn=u.property,jn=(ln=Vn("LudoPlayerAssets"),un=Kn({type:L}),cn=Kn({type:D}),hn=Kn({type:D}),pn=Kn({type:L}),dn=Kn({type:L}),mn=Kn({type:I}),fn=Kn({type:I}),gn=Kn({type:L}),yn=Kn({type:L}),vn=Kn({type:L}),bn=Kn({type:I}),_n=Kn({type:[L]}),Cn=Kn({type:I}),Sn=Kn({type:I}),ln(((Hn=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"pawnSprites",wn,i(t)),n(t,"pawnColors",On,i(t)),n(t,"DiceBgColors",Nn,i(t)),n(t,"profileNamePlateSprite",Rn,i(t)),n(t,"homeBaseSprite",En,i(t)),n(t,"pawnPrefab",In,i(t)),n(t,"basePrefab",An,i(t)),n(t,"diceOutComeSprites",Ln,i(t)),n(t,"diceOutComesStackSprites",Dn,i(t)),n(t,"goldenDiceOutComeSprite",Mn,i(t)),n(t,"moveOptionsUI",Fn,i(t)),n(t,"powerUpSprites",kn,i(t)),n(t,"powerUpPrefab",Gn,i(t)),n(t,"bombBlastEffectPrefab",zn,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){o.instance=this},r.getPawnSprite=function(e){return this.pawnSprites[e]},r.getProfileNamePlateSprite=function(e){return this.profileNamePlateSprite[e]},r.getHomeBaseSprite=function(e){return this.homeBaseSprite[e]},r.getDiceOutComeSprite=function(e){return this.diceOutComeSprites[e]},r.getDiceOutComesStackSprite=function(e){return this.diceOutComesStackSprites[e]},r.getGoldenDiceOutComeSprite=function(){return this.goldenDiceOutComeSprite},r.getPowerUpSprite=function(e){var t=e&xn.GOLDEN_DICE,n=e&xn.BOMB,i=e&xn.PROPELLER;return t?this.powerUpSprites[0]:n?this.powerUpSprites[1]:i?this.powerUpSprites[2]:void 0},r.getPawnColor=function(e){return this.pawnColors[e]},r.getDiceBgColor=function(e){return D.WHITE.clone()},r.onDestroy=function(){o.instance===this&&(o.instance=null)},o}(h)).instance=null,wn=e((Pn=Hn).prototype,"pawnSprites",[un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),On=e(Pn.prototype,"pawnColors",[cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nn=e(Pn.prototype,"DiceBgColors",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rn=e(Pn.prototype,"profileNamePlateSprite",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),En=e(Pn.prototype,"homeBaseSprite",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),In=e(Pn.prototype,"pawnPrefab",[mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),An=e(Pn.prototype,"basePrefab",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ln=e(Pn.prototype,"diceOutComeSprites",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dn=e(Pn.prototype,"diceOutComesStackSprites",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mn=e(Pn.prototype,"goldenDiceOutComeSprite",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fn=e(Pn.prototype,"moveOptionsUI",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kn=e(Pn.prototype,"powerUpSprites",[_n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gn=e(Pn.prototype,"powerUpPrefab",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zn=e(Pn.prototype,"bombBlastEffectPrefab",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tn=Pn))||Tn);l._RF.pop(),l._RF.push({},"19663z31QZA16DkkcltEJTD","Ludo_Pooler",void 0);var Jn,Yn,Zn=u.ccclass,Qn=(u.property,Zn("LudoPooler")(Wn=function(){function e(e){this.poolName="NodePool",this.pooledObjects=[],this.objectPrefab=null,this.pooledObjectCount=0,this.tempNode=null,this.poolName=e}var t=e.prototype;return t.getObject=function(){return this.pooledObjects.length>0?(this.tempNode=this.pooledObjects.pop(),this.tempNode.active=!0,this.tempNode):this.createObject()},t.returnObject=function(e){this.pooledObjects.push(e),e.active=!1},t.createObject=function(){this.pooledObjectCount++;var e=A(this.objectPrefab);return e.name=this.poolName+" "+this.pooledObjectCount,console.log("Creating new object for pool "+this.poolName),e},e}())||Wn);l._RF.pop(),l._RF.push({},"3ce18TrxUhP369oN+mnV8Rg","Ludo_PoolManager",void 0);var Xn,qn,$n,ei,ti,ni,ii,oi,ri,ai,si,li,ui,ci,hi,pi=u.ccclass,di=(u.property,pi("LudoPoolManager")(((Yn=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).pools=[],t}t(n,e);var i=n.prototype;return i.onLoad=function(){n.instance=this},i.createPool=function(e){var t=new Qn(e.name);t.objectPrefab=e,this.pools.push(t)},i.getObjectFromPool=function(e){var t=this.getPool(e.name);return null!=t?t.getObject():(this.createPool(e),this.pools[this.pools.length-1].getObject())},i.getPool=function(e){for(var t=0;t<this.pools.length;t++)if(this.pools[t].poolName==e)return this.pools[t];return null},i.returnObjectToPool=function(e){if(e.active){var t=e.name.split(" ")[0],n=this.getPool(t);null!=n?n.returnObject(e):console.warn("No pool found for object "+e.name)}},i.onDestroy=function(){n.instance===this&&(n.instance=null)},n}(h)).instance=null,Jn=Yn))||Jn);l._RF.pop(),l._RF.push({},"50862QE65RBTZEJtP2u9mku","Ludo_Piece",void 0);var mi,fi,gi,yi,vi,bi,_i,Ci,Si,Ti=u.ccclass,Pi=u.property,wi=(Xn=Ti("LudoPiece"),qn=Pi({type:M}),$n=Pi({type:F}),ei=Pi({type:F}),ti=Pi({type:k}),ni=Pi({type:k}),ii=Pi({type:I}),Xn((ai=e((ri=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"pieceSprite",ai,i(t)),n(t,"pieceNumber",si,i(t)),n(t,"playerNumber",li,i(t)),t.moveData=[],t.previousPathNumber=0,t.pathNumber=0,t.pieceScaleOnBoard=.45,t.stackedupScale=.35,n(t,"propellerAnimation",ui,i(t)),n(t,"dottedCircleAnim",ci,i(t)),n(t,"moveRippleEffect",hi,i(t)),t.stackedupCount=0,t}t(o,e);var r=o.prototype;return r.Initialize=function(e,t){this.playerNumber=e,this.pieceNumber=t,this.pieceSprite&&jn.instance&&(this.pieceSprite.spriteFrame=jn.instance.getPawnSprite(e))},r.start=function(){},r.update=function(e){},r.move=function(e,t){var n=this.pathNumber+e;return this.isOnBase()&&6==e&&(n=1),this.setPathNumber(n),this.updateParentNode(),this.getMoveAnimation(n,t)},r.moveToTargetPathNumber=function(e,t,n){return void 0===n&&(n=.12),this.setPathNumber(e),this.updateParentNode(),this.getMoveAnimation(e,t,n)},r.getMoveAnimation=function(e,t,n){var i=this;void 0===n&&(n=.12);for(var o=this.node.worldPosition.clone(),r=Zi.Instance.getPathPositions(this.previousPathNumber,e,this.playerNumber,this.pieceNumber),a=(Zi.Instance.getPathTile(e,this.playerNumber,this.pieceNumber),G(this.node).call((function(){i.node.setWorldPosition(o)}))),s=1;s<r.length;s++)a.then(this.jumpToNextTileAnimation(this.node,r[s-1],r[s],n));return a.call((function(){null!=t&&t()})),a},r.jumpToNextTileAnimation=function(e,t,n,i){var o=this;void 0===i&&(i=.12);var r=t.clone().add(n).multiplyScalar(.5),a=e.scale.clone(),s=G(e).call((function(){sn.instance.playSound("Move"),e.setWorldPosition(t)}));return s.call((function(){o.playMoveRippleEffect(t.clone())})),s.to(i,{worldPosition:r,scale:a.clone().multiplyScalar(1.5)}),s.to(i,{worldPosition:n,scale:a}),s},r.setPathNumber=function(e){this.previousPathNumber=this.pathNumber,this.pathNumber=e},r.updateParentNode=function(e){void 0===e&&(e=-1),-1==e&&(e=this.pathNumber);var t=Zi.Instance.getPathTile(e,this.playerNumber,this.pieceNumber);this.node.setParent(t,!0)},r.updatePiecePosition=function(e){void 0===e&&(e=-1),-1==e&&(e=this.pathNumber),this.node.setPosition(w.ZERO.clone());Zi.Instance.getPathTile(e,this.playerNumber,this.pieceNumber);Zi.Instance.piecesOnTile(e,this.playerNumber)>1&&this.node.setWorldPosition(this.node.worldPosition.add(this.getOffsetPosition())),this.updatePieceScale()},r.getOffsetPosition=function(){if(1==this.node.parent.children.length)return w.ZERO.clone();var e=this.myIndexInTile(this.node.parent)+1;return new w(10*e-20,0,0)},r.updatePieceScale=function(){var e=Zi.Instance.getPawnsCountOnTile(this.pathNumber,this.playerNumber);this.isOnBase()?this.node.scale=w.ONE.clone():this.node.scale=2==e?w.ONE.clone().multiplyScalar(this.stackedupScale):e>2?w.ONE.clone().multiplyScalar(this.stackedupScale-.07):w.ONE.clone().multiplyScalar(this.pieceScaleOnBoard)},r.myIndexInTile=function(e){for(var t=0;t<e.children.length;t++)if(e.children[t]==this.node)return t;return-1},r.animatePieceToSize=function(e){G(this.node).to(.5,{scale:w.ONE.clone().multiplyScalar(e)}).start()},r.isOnBase=function(){return 0==this.pathNumber},r.playPropellerAnimation=function(e){this.propellerAnimation&&this.propellerAnimation.node?(this.propellerAnimation.node.active=!0,this.propellerAnimation.node.setPosition(w.ZERO.clone()),this.setNodeUpDirection(this.propellerAnimation.node,e),this.propellerAnimation.node.setWorldPosition(this.node.worldPosition.clone().subtract(this.propellerAnimation.node.up.multiplyScalar(50))),this.propellerAnimation.play(),sn.instance&&sn.instance.playSound("Propeller")):console.warn("[LudoPiece] Propeller animation is null, cannot play")},r.setNodeUpDirection=function(e,t){var n=t.clone().normalize(),i=new w(0,0,1),o=new w(0,0,0);w.cross(o,n,i).normalize();var r=z();H.fromAxes(r,o,n,i),e.setWorldRotation(r)},r.stopPropellerAnimation=function(){this.propellerAnimation&&this.propellerAnimation.node&&(this.propellerAnimation.stop(),this.propellerAnimation.node.active=!1),sn.instance&&sn.instance.stopSound("Propeller")},r.playRippleAnimation=function(){if(this.dottedCircleAnim&&this.dottedCircleAnim.node){this.dottedCircleAnim.node.active=!0;var e=this.dottedCircleAnim.node.getComponent(M);null!=e&&jn.instance&&(e.color=jn.instance.getPawnColor(this.playerNumber)),this.dottedCircleAnim.play()}else console.warn("[LudoPiece] Dotted circle animation is null, cannot play")},r.stopRippleAnimation=function(){this.dottedCircleAnim&&this.dottedCircleAnim.node&&(this.dottedCircleAnim.stop(),this.dottedCircleAnim.node.active=!1)},r.playMoveRippleEffect=function(e){if(di.instance&&Zi.Instance){var t=di.instance.getObjectFromPool(this.moveRippleEffect);if(t){t.setParent(Zi.Instance.node,!0),t.setWorldPosition(e);var n=t.getComponent(M);null!=n&&jn.instance&&(n.color=jn.instance.getPawnColor(this.playerNumber));var i=t.getComponent(k);i&&i.play()}else console.warn("[LudoPiece] Failed to get ripple effect from pool")}else console.warn("[LudoPiece] PoolManager or Board instance is null, cannot play ripple effect")},r.reset=function(e){this.setPathNumber(e),this.updateParentNode(),this.updatePiecePosition(),this.stopPropellerAnimation()},r.onDestroy=function(){this.stopPropellerAnimation(),this.stopRippleAnimation(),this.pieceSprite.spriteFrame=null,this.playerNumber=0,this.pieceNumber=0,this.pathNumber=0,this.stackedupCount=0},o}(h)).prototype,"pieceSprite",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=e(ri.prototype,"pieceNumber",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),li=e(ri.prototype,"playerNumber",[ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ui=e(ri.prototype,"propellerAnimation",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ci=e(ri.prototype,"dottedCircleAnim",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hi=e(ri.prototype,"moveRippleEffect",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=ri))||oi);l._RF.pop(),l._RF.push({},"79be7R/4lpII4NagNQfqR8k","Ludo_PowerUp",void 0);var Oi,Ni,Ri,Ei,Ii,Ai,Li,Di,Mi,Fi,ki,Gi,zi,Hi,Ui,Bi,xi,Wi=u.ccclass,Vi=u.property,Ki=(mi=Wi("LudoPowerUp"),fi=Vi({type:M}),gi=Vi({type:I}),yi=Vi({type:k}),mi((_i=e((bi=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"sprite",_i,i(t)),t.pathNumber=0,t.powerupType=0,n(t,"magicTrailPrefab",Ci,i(t)),n(t,"animation",Si,i(t)),t}t(o,e);var r=o.prototype;return r.start=function(){this.playIdleAnimation()},r.setPathNumber=function(e){this.pathNumber=e},r.setPowerUpType=function(e){this.powerupType=e,this.sprite.spriteFrame=jn.instance.getPowerUpSprite(e)},r.blinkWithRedColor=function(){G(this.sprite).to(.2,{color:D.RED},{onUpdate:function(e,t){e.color=D.RED}}).to(.2,{color:D.WHITE},{onUpdate:function(e,t){e.color=D.WHITE}}).union().repeatForever().start()},r.playMagicTrailEffect=function(){console.log("playMagicTrailEffect");var e=A(this.magicTrailPrefab);e.setParent(this.node,!0),e.setSiblingIndex(0),e.setPosition(w.ZERO.clone());e.getComponent(U)},r.playIdleAnimation=function(){var e=this,t=2e3*Math.random();null==this.animation&&(this.animation=this.getComponent(k)),setTimeout((function(){var t;null==(t=e.animation)||t.play()}),t)},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){var e,t;null==(e=this.animation)||e.stop(),this.animation=null,null==(t=this.tween)||t.stop(),this.tween=null,this.powerUpType=0,this.sprite=null,this.magicTrailPrefab=null},o}(h)).prototype,"sprite",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=e(bi.prototype,"magicTrailPrefab",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=e(bi.prototype,"animation",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vi=bi))||vi);l._RF.pop(),l._RF.push({},"00ec6G0x55IjbOOdOucCJhh","Ludo_Board",void 0);var ji=u.ccclass,Ji=u.property,Yi=(Oi=ji("LudoHomeTiles"),Ni=Ji({type:[P]}),Oi((Ii=e((Ei=function(){n(this,"homeTiles",Ii,this)}).prototype,"homeTiles",[Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ri=Ei))||Ri),Zi=(Ai=ji("LudoBoard"),Li=Ji({type:[P]}),Di=Ji({type:[Yi]}),Mi=Ji({type:P}),Fi=Ji({type:P}),Ai(((xi=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"pathTiles",zi,i(t)),t.tileTypes=[],t.powerUps=[],n(t,"homeTiles",Hi,i(t)),n(t,"basesParent",Ui,i(t)),t.pieces=[],t._initialOffset=0,t._isInitialized=!1,t.roomSettings=null,n(t,"powerupsParent",Bi,i(t)),t.bombSteps=8,t.rocketSteps=8,t}t(o,e);var a=o.prototype;return a.onLoad=function(){null!=o._instance&&this.node.destroy(),o._instance=this,this._initialOffset=26},a.onDestroy=function(){o._instance===this&&(o._instance=null)},a.Initialize=function(e){if(!this._isInitialized){this.roomSettings=e.roomSettings;var t=e.playersData.find((function(e){return e.sessionId==qe.Instance.CurrentRoom.sessionId}));null!=t&&(this.node.setRotationFromEuler(0,0,180+90*this.getPlayerPositionOnBoard(t.playerNumber)),this._isInitialized=!0,this.bombSteps=this.roomSettings.bombSteps,this.rocketSteps=this.roomSettings.rocketSteps,this.createTiles(e))}},a.reset=function(e){this.createTiles(e)},a.createTiles=function(e){this.tileTypes=[];for(var t=0;t<e.boardTiles.length;t++)this.tileTypes.push(e.boardTiles[t]);this.createPowerups()},a.start=function(){},a.createPowerups=function(){for(var e=[],t=0;t<this.tileTypes.length;t++)for(var n=0;n<this.roomSettings.PowerupTypes.length;n++)if(this.tileTypes[t]&this.roomSettings.PowerupTypes[n]){var i=this.popPowerupON(t);if(null!=i){e.push(i);break}var o=A(jn.instance.powerUpPrefab).getComponent(Ki);o.node.setParent(this.powerupsParent,!0),o.node.worldPosition=this.pathTiles[t].worldPosition.clone(),o.setPathNumber(t),o.setPowerUpType(this.tileTypes[t]),e.push(o);break}for(var r=0;r<this.powerUps.length;r++)this.powerUps[r].node.destroy();this.powerUps=e},a.popPowerupON=function(e){for(var t=0;t<this.powerUps.length;t++)if(this.powerUps[t].pathNumber==e){var n=this.powerUps[t];return this.powerUps.splice(t,1),n}return null},a.getPathTile=function(e,t,n){if(0==e)return this.getPlayerBase(t).children[n];if(e>=52)return this.homeTiles[t].homeTiles[e-52];var i=this.getGlobalTileIndex(e,t);return this.pathTiles[i]},a.getPathPositions=function(e,t,n,i){var o=[],r=null;if(0==t){for(var a=e;a>=0;a--)r=this.getPathTile(a,n,i),o.push(r.worldPosition.clone());return console.log("Piece going to home : path positions length ",o.length," start path number: ",e," end path number: ",t),o}for(var s=e;s<=t;s++)null!=(r=this.getPathTile(s,n,i))&&o.push(r.worldPosition.clone());return o},a.isPathOccupied=function(e,t){if(0==e)return!1;for(var n=this.getGlobalPiecePathNumber(t.playerNumber,t.pathNumber,this.roomSettings),i=0;i<this.pieces.length;i++)if(this.getGlobalPiecePathNumber(this.pieces[i].playerNumber,this.pieces[i].pathNumber,this.roomSettings)==n&&this.pieces[i]!=t)return!0;return!1},a.getPawnsCountOnTile=function(e,t){var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings);if(-1==n)return 0;for(var i=0,o=0;o<this.pieces.length;o++){this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==n&&i++}return i},a.getPawnsOnTile=function(e,t){var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings);if(-1==n)return[];for(var i=[],o=0;o<this.pieces.length;o++){this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==n&&i.push(this.pieces[o])}return i},a.canKillOtherPieces=function(e,t,n){if(this.getGlobalPiecePathNumber(t,e,this.roomSettings)<=-1)return!1;var i=this.getPathTile(e,t,n);if(this.isSafeTile(e,t))return!1;if(i.children.length>=3)return!1;for(var o=0;o<i.children.length;o++)if(i.children[o].getComponent(wi).playerNumber!=t)return!0;return!1},a.piecesOnTile=function(e,t){for(var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings),i=0,o=0;o<this.pieces.length;o++){this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==n&&i++}return i},a.getKillablePieces=function(e){var t=this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings);if(t<=-1)return null;if(this.isSafeTile(e.pathNumber,e.playerNumber))return null;for(var n=0,i=null,o=0;o<this.pieces.length;o++){if(this.pieces[o]!=e)this.getGlobalPiecePathNumber(this.pieces[o].playerNumber,this.pieces[o].pathNumber,this.roomSettings)==t&&(n++,this.pieces[o].playerNumber!=e.playerNumber&&(i=this.pieces[o]))}return console.log("Other Pieces on Tile: ",n),console.log("Opponent Piece: ",i),1==n?i:null},a.isSafeTile=function(e,t){var n=this.getGlobalPiecePathNumber(t,e,this.roomSettings);return(this.tileTypes[n]&xn.SAFE)>0},a.getPowerUpType=function(e){for(var t=this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings),n=this.tileTypes[t],i=0;i<this.roomSettings.PowerupTypes.length;i++)if(n&this.roomSettings.PowerupTypes[i]){this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings);return this.roomSettings.PowerupTypes[i]}return xn.DEFAULT},a.getPowerupNode=function(e){for(var t=this.getGlobalPiecePathNumber(e.playerNumber,e.pathNumber,this.roomSettings),n=0;n<this.powerUps.length;n++)if(this.powerUps[n].pathNumber==t)return this.powerUps[n].node;return null},a.removePowerUp=function(e){this.tileTypes[e.pathNumber]=xn.DEFAULT;for(var t=0;t<this.powerUps.length;t++)if(this.powerUps[t]==e){this.powerUps.splice(t,1);break}e.node.destroy()},a.removePowerUpByPathNumber=function(e){this.tileTypes[e]=xn.DEFAULT;for(var t=0;t<this.powerUps.length;t++)if(this.powerUps[t].pathNumber==e){this.powerUps[t].node.destroy(),this.powerUps.splice(t,1);break}},a.doesEnemyExist=function(e,t){if(0==t||t>=this.nonHomePathCount(this.roomSettings))return!1;for(var n=this.getGlobalPiecePathNumber(e.playerNumber,t,this.roomSettings),i=0;i<this.pieces.length;i++){var o=this.getGlobalPiecePathNumber(this.pieces[i].playerNumber,this.pieces[i].pathNumber,this.roomSettings);if(o==n&&this.pieces[i].playerNumber!=e.playerNumber)return console.log("otherPieceGlobalPathNumber: ",o," globalPathNumber: ",n),console.log("Enemy Exists at Path Number: ",this.pieces[i].pathNumber," for player: ",this.pieces[i].playerNumber," at piece: ",this.pieces[i].pieceNumber),console.log(" my piece path number: ",e.pathNumber," my piece player number: ",e.playerNumber," my piece index: ",e.pieceNumber),console.log("my piece ",e),console.log("enemy piece ",this.pieces[i]),!0}return!1},a.doesAnyPieceExistOnPath=function(e,t){if(0==t||t>=this.nonHomePathCount(this.roomSettings))return!1;for(var n=this.getGlobalPiecePathNumber(e.playerNumber,t,this.roomSettings),i=0;i<this.pieces.length;i++){if(this.pieces[i]!=e)if(this.getGlobalPiecePathNumber(this.pieces[i].playerNumber,this.pieces[i].pathNumber,this.roomSettings)==n)return!0}return!1},a.getPropellerLandingPathNumber=function(e){for(var t=e.pathNumber,n=0;n<this.rocketSteps;n++){if(!this.isValidPathNumber(t+1,e.playerNumber))return console.log("Invalid Path Number: ",t+1),t;if(this.doesAnyPieceExistOnPath(e,t+1))return console.log("Enemy Exists at Path Number: ",t+1),t;t+=1}return t},a.getBombLandingPathNumber=function(e){for(var t=e.pathNumber,n=0;n<this.bombSteps;n++){if(!this.isValidPathNumber(t+1,e.playerNumber))return t;if(this.doesAnyPieceExistOnPath(e,t+1))return t+1;t+=1}return t},a.getGlobalTileIndex=function(e,t){return(e+13*this.getPlayerPositionOnBoard(t))%this.pathTiles.length},a.getGlobalPiecePathNumber=function(e,t,n){if(t>=this.nonHomePathCount(n)){var i=t-this.nonHomePathCount(n);return-1*e*n.pathTilesPerSide-5-i}return 0==t?-1*e-1:(this.getInitialOffset(e,n)+t)%this.nonHomePathCount(n)},a.getInitialOffset=function(e,t){return 0==e?0:1==e?4*t.pathTilesPerSide+2:2==e?6*t.pathTilesPerSide+3:3==e?2*t.pathTilesPerSide+1:void 0},a.isValidPathNumber=function(e,t){return e>=0&&e<this.nonHomePathCount(this.roomSettings)+this.homePathCount(this.roomSettings)},a.nonHomePathCount=function(e){return 8*e.pathTilesPerSide+4},a.homePathCount=function(e){return e.pathTilesPerSide},a.getPlayerPositionOnBoard=function(e){return 0==e?0:1==e?2:2==e?3:3==e?1:void 0},a.getPlayerBase=function(e){return this.basesParent.children[e]},a.addPieces=function(e){var t;(t=this.pieces).push.apply(t,e)},a.addPiece=function(e){this.pieces.push(e)},a.updateAllPiecePositions=function(){for(var e=0;e<this.pieces.length;e++)this.pieces[e].updatePiecePosition()},a.createBombBlastEffect=function(e){var t=A(jn.instance.bombBlastEffectPrefab);sn.instance.playSound("BombBlast"),t.setParent(o.Instance.node,!0),t.worldPosition=e,this.scheduleOnce((function(){t.destroy()}),1)},r(o,null,[{key:"Instance",get:function(){return o._instance}}]),o}(h))._instance=null,zi=e((Gi=xi).prototype,"pathTiles",[Li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Hi=e(Gi.prototype,"homeTiles",[Di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ui=e(Gi.prototype,"basesParent",[Mi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bi=e(Gi.prototype,"powerupsParent",[Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ki=Gi))||ki);l._RF.pop(),l._RF.push({},"f59a8phHoNJLaYWbxPYCkUJ","Ludo_AnimationTag",void 0);var Qi,Xi,qi,$i,eo,to,no,io,oo,ro=function(e){return e[e.DICE_ROLL=0]="DICE_ROLL",e[e.PIECE_MOVE=1]="PIECE_MOVE",e}({});l._RF.pop(),l._RF.push({},"1d7316nvBFKubCgcOjXz/2t","Ludo_Dice",void 0);var ao,so,lo,uo,co,ho=u.ccclass,po=u.property,mo=(Qi=ho("LudoDice"),Xi=po({type:[L]}),qi=po({type:[L]}),$i=po({type:M}),Qi((no=e((to=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"diceFaces",no,i(t)),n(t,"rollingFrames",io,i(t)),n(t,"diceSprite",oo,i(t)),t.onDiceRollDone=function(){},t._currentFace=0,t._rollingTween=null,t._rollDuration=.5,t}t(o,e);var r=o.prototype;return r.onLoad=function(){this._rollingTween=G(this.diceSprite.node)},r.rollDice=function(e){sn.instance.playSound("DiceRoll"),this.rollAnimation(e)},r.setDiceFace=function(e){e<0||e>=this.diceFaces.length||(this._currentFace=e,this.diceSprite&&this.diceFaces[e]&&(this.diceSprite.spriteFrame=this.diceFaces[e]))},r.rollAnimation=function(e){var t=this;this.stopRolling(),this._rollingTween=G({value:0}).to(.5,{value:12},{onUpdate:function(e){var n=Math.floor(e.value)%t.rollingFrames.length;t.diceSprite&&t.rollingFrames[n]&&(t.diceSprite.spriteFrame=t.rollingFrames[n])}}).call((function(){t.setDiceFace(e),console.log("~~~ Dice Rolling Done ~~~"),t.onDiceRollDone()})),this._rollingTween.tag(ro.DICE_ROLL),this._rollingTween.start()},r.stopRolling=function(){this._rollingTween&&this._rollingTween.stop()},r.reset=function(){this.diceSprite&&this.diceFaces[0]&&(this.diceSprite.spriteFrame=this.diceFaces[0])},r.onDestroy=function(){this.stopRolling(),this.diceSprite.spriteFrame=null},o}(h)).prototype,"diceFaces",[Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),io=e(to.prototype,"rollingFrames",[qi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),oo=e(to.prototype,"diceSprite",[$i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),eo=to))||eo);l._RF.pop(),l._RF.push({},"eafe8/x0ZZFgJLAvuatzb9l","Ludo_Timer",void 0);var fo,go,yo,vo,bo,_o,Co,So=u.ccclass,To=u.property,Po=(ao=So("LudoTimer"),so=To({type:M}),ao((co=e((uo=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._totalTime=0,t._currentTime=0,n(t,"timerSprite",co,i(t)),t._canRunTimer=!1,t._isTimerWarning=!1,t._isLocal=!1,t}t(o,e);var r=o.prototype;return r.update=function(e){this._canRunTimer&&(this._currentTime-=e,this._currentTime<0&&(this._currentTime=0),this.timerSprite.fillRange=this.getTimeLeftPercentage(),this.checkAndSetTimerWarning())},r.isTimeUp=function(){return this._currentTime<=0},r.setTotalTime=function(e){this._totalTime=e,this._currentTime=e,this.timerSprite.fillRange=this.getTimeLeftPercentage()},r.setCurrentTime=function(e){this._currentTime=e,this.timerSprite.fillRange=this.getTimeLeftPercentage()},r.run=function(){this._canRunTimer=!0},r.stop=function(){this._canRunTimer=!1,this.reset()},r.reset=function(){this._isTimerWarning=!1,this.timerSprite.fillRange=0,sn.instance.stopSound("TimerWarning")},r.getTimeLeftPercentage=function(){return this._currentTime/this._totalTime},r.checkAndSetTimerWarning=function(){this._isLocal&&this.getTimeLeftPercentage()<.2&&(this._isTimerWarning||(sn.instance.playSound("TimerWarning"),this._isTimerWarning=!0))},r.setLocal=function(e){this._isLocal=e},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){this.stop(),this._canRunTimer=!1,this._isLocal=!1,this._totalTime=0,this._currentTime=0,this.timerSprite.fillRange=0},o}(h)).prototype,"timerSprite",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lo=uo))||lo);l._RF.pop(),l._RF.push({},"738a5KZKwtEMoE2/rtxUtOr","Ludo_Menu",void 0);var wo=u.ccclass,Oo=u.property,No=(fo=wo("LudoMenu"),go=Oo({type:P}),yo=Oo({type:O}),fo((_o=e((bo=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"content",_o,i(t)),n(t,"menuName",Co,i(t)),t.isOpened=!1,t}t(o,e);var r=o.prototype;return r.onLoad=function(){this.content=this.node.getChildByName("Content")},r.Open=function(){this.content.active=!0,this.isOpened=!0},r.Close=function(){this.content.active=!1,this.isOpened=!1},r.initialize=function(){console.log("Menu initialize called")},o}(h)).prototype,"content",[go],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Co=e(bo.prototype,"menuName",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo=bo))||vo);l._RF.pop(),l._RF.push({},"28ae6s9f0JHvIUODASGOMiF","LudoRoomSettings",void 0);var Ro=o({},{maxPlayers:8,minPlayers:2,maxClients:8,countdownTimeInSeconds:3,allowLateJoin:!0,maxReconnectionAttempts:3,reconnectionAttemptInterval:1e3,reconnectionTime:1e4,gameFPS:30,serverFPS:30,patchRate:1e3},{pathTilesPerSide:6,safeTiles:[1,9],diceRollWaitTime:30,movePiecesWaitTime:30,lagDelayCompensationTime:1,animationWaitTime:10,bombSteps:8,rocketSteps:8,PowerupTypes:[xn.GOLDEN_DICE,xn.BOMB,xn.PROPELLER],show_mute_button:!1,show_result_screen:!0,show_faq:!0,MissTurnsToKickOut:3,maxReconnectionAttempts:10}),Eo=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).pathTilesPerSide=Ro.pathTilesPerSide,t.safeTiles=Ro.safeTiles,t.diceRollWaitTime=Ro.diceRollWaitTime,t.movePiecesWaitTime=Ro.movePiecesWaitTime,t.lagDelayCompensationTime=Ro.lagDelayCompensationTime,t.animationWaitTime=Ro.animationWaitTime,t.bombSteps=Ro.bombSteps,t.rocketSteps=Ro.rocketSteps,t.PowerupTypes=Ro.PowerupTypes,t.show_mute_button=Ro.show_mute_button,t.show_result_screen=Ro.show_result_screen,t.show_faq=Ro.show_faq,t.MissTurnsToKickOut=Ro.MissTurnsToKickOut,t.maxReconnectionAttempts=Ro.maxReconnectionAttempts,t}return t(n,e),n.prototype.CopyFrom=function(e){this.pathTilesPerSide=e.pathTilesPerSide,this.safeTiles=[];for(var t=0;t<e.safeTiles.length;t++)this.safeTiles.push(e.safeTiles[t]);this.diceRollWaitTime=e.diceRollWaitTime,this.movePiecesWaitTime=e.movePiecesWaitTime,this.lagDelayCompensationTime=e.lagDelayCompensationTime,this.animationWaitTime=e.animationWaitTime,this.show_mute_button=e.show_mute_button,this.show_result_screen=e.show_result_screen,this.show_faq=e.show_faq,this.MissTurnsToKickOut=e.MissTurnsToKickOut,this.maxReconnectionAttempts=e.maxReconnectionAttempts},n}(At);l._RF.pop(),l._RF.push({},"0f127sRNEpCYZ0EXfo54zWR","LudoPlayerData",void 0);var Io=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).pieces=[1,1,1,1],t.rollsList=[],t.goldenDiceCount=0,t.timeLeft=0,t.finishPosition=-1,t.isBot=!1,t.killsCount=0,t.deathsCount=0,t}return t(n,e),n.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.pieces=[];for(var n=0;n<t.pieces.length;n++)this.pieces.push(t.pieces[n]);this.timeLeft=t.timeLeft,this.finishPosition=t.finishPosition,this.rollsList=[];for(var i=0;i<t.rollsList.length;i++)this.rollsList.push(t.rollsList[i]);this.goldenDiceCount=t.goldenDiceCount,this.isBot=t.isBot,this.isKickedOut=t.isKickedOut,this.killsCount=t.killsCount,this.deathsCount=t.deathsCount},n}(It);l._RF.pop(),l._RF.push({},"0ed96DhOm5GSKiSbb+Eb8Q9","LudoInputPayload",void 0);var Ao=function(){function e(){this.inputType=void 0,this.inputValue=void 0}return e.prototype.copyFrom=function(e){this.inputType=e.inputType,this.inputValue=e.inputValue},e}();l._RF.pop(),l._RF.push({},"e755fBWyzZDJblI9DGio/Bu","LudoRoomState",void 0);var Lo,Do,Mo=function(e){function n(){var t;return(t=e.call(this,new Eo,[])||this).turnPlayerNumber=0,t.finishedCount=0,t.inputPayload=new Ao,t.currentGameState=Un.NONE,t.previousGameState=Un.NONE,t.syncStateNumber=0,t.boardTiles=[],t.hasMissedTurn=!0,t.timer=0,t}return t(n,e),n.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.playersData=t.playersData.map((function(e){var t=new Io;return t.copyFrom(e),t})),this.spectatorsData=t.spectatorsData.map((function(e){var t=new It;return t.copyFrom(e),t})),this.turnPlayerNumber=t.turnPlayerNumber,this.finishedCount=t.finishedCount,this.syncStateNumber=t.syncStateNumber,this.inputPayload=new Ao,this.inputPayload.copyFrom(t.inputPayload),this.boardTiles=[];for(var n=0;n<t.boardTiles.length;n++)this.boardTiles.push(t.boardTiles[n]);this.hasMissedTurn=t.hasMissedTurn,this.timer=t.timer,this.currentGameState=t.currentGameState,this.previousGameState=t.previousGameState},n}(nn);l._RF.pop(),l._RF.push({},"47909I9gx9JA61azZJFCYtu","Ludo_GameManager",void 0);var Fo,ko,Go,zo,Ho,Uo,Bo,xo,Wo,Vo,Ko,jo,Jo,Yo,Zo=u.ccclass,Qo=(u.property,new p),Xo=Zo("LudoGameManager")(((Do=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._roomStatus=Lt.NONE,t._won=!1,t._handledGameOverCallbacks=!1,t._handledWinLose=!1,t._serverStateCopy=null,t._missTurnsToKickOut=3,t._gameStartTime=0,t.miloSdk=new X,t}t(n,e);var i=n.prototype;return i.onLoad=function(){null!=n._instance&&this.node.destroy(),n._instance=this,this.miloSdk.init({gameId:"Ludo",debug:!0}),this.sendGameLoadedEvent(),Ze.on(_e.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),Qe.on(_e.SERVER_ROOM_STATE_CHANGE,this.onServerStateChange,this)},i.onConnectionStateChange=function(e,t){t==Ce.DISCONNECTED?this._roomStatus!=Lt.END_GAME&&qe.Instance.reconnect():t==Ce.KICKED_OUT&&this.setRoomStatus(Lt.KICKED_OUT)},i.setRoomStatus=function(e){this.OnRemoteGameStateChange(e),this._roomStatus=e,Qo.emit(_e.ROOM_STATUS_CHANGE,e)},i.onServerStateChange=function(e){null==this._serverStateCopy&&(this._serverStateCopy=new Mo,this._serverStateCopy.copyFrom(e),this._missTurnsToKickOut=this._serverStateCopy.roomSettings.MissTurnsToKickOut),e.currentRoomStatus!=Lt.END_GAME||this._handledWinLose||(console.log("Game Over"),this._serverStateCopy=new Mo,this._serverStateCopy.copyFrom(e),this.handleWon(e),this._handledWinLose=!0),this.setRoomStatus(e.currentRoomStatus)},i.handleWon=function(e){if(this._handledWinLose)console.log("Already handled win/lose sound, skipping");else{var t=new Mo;t.copyFrom(e);var n=qe.Instance.CurrentRoom.sessionId,i=t.playersData.findIndex((function(e){return e.sessionId==n}));if(-1!=i){for(var o=t.playersData[i].pieces,r=Zi.Instance.nonHomePathCount(t.roomSettings)+Zi.Instance.homePathCount(t.roomSettings)-1,a=0;a<o.length;a++)o[a]==r&&(this._won=!0);this._won?(er.instance.showConfetti(),sn.instance.playSound("Win")):sn.instance.playSound("Lose")}}},i.getPlayersRanking=function(){var e=this;return this._serverStateCopy.playersData.sort((function(t,n){return e.getPlayerDistanceFromFinish(t)-e.getPlayerDistanceFromFinish(n)}))},i.getPlayerDistanceFromFinish=function(e){for(var t=60,n=0;n<e.pieces.length;n++)-1!=e.pieces[n]&&(t=Math.min(t,57-e.pieces[n]));return t},i.onDestroy=function(){Ze.off(_e.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),Qe.off(_e.SERVER_ROOM_STATE_CHANGE,this.onServerStateChange,this),n._instance===this&&(n._instance=null)},i.update=function(e){},i.GetPlayerData=function(){return console.log("Player Profiles : ",this._serverStateCopy.playersData),this._serverStateCopy.playersData.find((function(e){return e.sessionId==qe.Instance.CurrentRoom.sessionId}))},i.GetWinnerPlayerData=function(){for(var e=-1,t=0;t<this._serverStateCopy.playersData.length;t++)if(this._serverStateCopy.playersData[t].finishPosition>=0){e=t;break}return console.log("Winner Player Id : ",e),-1==e?null:this._serverStateCopy.playersData.find((function(t){return t.playerNumber==e}))},i.OnRemoteGameStateChange=function(e){this._roomStatus!=e&&(this._roomStatus==Lt.NONE&&e==Lt.WAITING_FOR_PLAYERS||e==Lt.COUNTDOWN||(e==Lt.GAME_SIMULATION?this.sendGameStartedEvent():e==Lt.END_GAME&&(this.sendGameEndedEvent(),this.HandleGameOverCallbacks())))},i.HandleGameOverCallbacks=function(){if(!this._handledGameOverCallbacks){var e=this._won?1:0;this.sendScoreEvent(e),this._handledGameOverCallbacks=!0}},i.setInput=function(e){},i.sendGameLoadedEvent=function(){this.miloSdk.gameLoaded({timestamp:Date.now()}),console.log("[MiloGameSDK] Game loaded event sent")},i.sendGameStartedEvent=function(){this._gameStartTime=Date.now(),this.miloSdk.gameStarted({timestamp:this._gameStartTime}),console.log("[MiloGameSDK] Game started event sent")},i.sendGameEndedEvent=function(){var e=this._gameStartTime>0?Date.now()-this._gameStartTime:0;this.miloSdk.gameEnded({duration:e,hasWinningScreen:!0}),console.log("[MiloGameSDK] Game ended event sent with duration: "+e+"ms")},i.sendScoreEvent=function(e){this.miloSdk.sendScore({score:e}),console.log("[MiloGameSDK] Score event sent: "+e)},r(n,null,[{key:"Instance",get:function(){return this._instance}}]),n}(h))._instance=null,Lo=Do))||Lo;l._RF.pop(),l._RF.push({},"7baa6RkSZpERbIrrDte7z8d","Ludo_UIManager",void 0);var qo=u.ccclass,$o=u.property,er=(Fo=qo("LudoUIManager"),ko=$o({type:f}),Go=$o({type:[No]}),zo=$o({type:P}),Ho=$o({type:I}),Uo=$o({type:P}),Fo(((Yo=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"uiCamera",Wo,i(t)),n(t,"menus",Vo,i(t)),t.showMuteButton=!0,t.showResultScreen=!0,t.showFAQ=!0,n(t,"flashNode",Ko,i(t)),n(t,"showerConfettiPrefab",jo,i(t)),n(t,"confettiPositionNode",Jo,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){o.instance=this,Qo.on(_e.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this)},r.start=function(){},r.onDestroy=function(){Qo.off(_e.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),o.instance===this&&(o.instance=null)},r.OpenHowToPlay=function(){this.OpenMenu("HowToPlay")},r.OpenMenu=function(e){for(var t=0;t<this.menus.length;t++)this.menus[t].menuName==e&&this.menus[t].Open()},r.CloseMenu=function(e){for(var t=0;t<this.menus.length;t++)this.menus[t].menuName==e&&this.menus[t].Close()},r.GetMenu=function(e){for(var t=0;t<this.menus.length;t++)if(this.menus[t].menuName==e)return this.menus[t];return null},r.CloseAllMenus=function(){for(var e=0;e<this.menus.length;e++)this.menus[e].Close()},r.onRoomStatusChange=function(e){var t=this;e==Lt.WAITING_FOR_PLAYERS?(console.log("Opening waiting screen"),this.updateUiBasedOnConfig(),this.OpenMenu("WaitingScreen")):e==Lt.COUNTDOWN?(console.log("Opening countdown screen"),this.CloseAllMenus(),this.OpenMenu("CountdownScreen")):e==Lt.GAME_SIMULATION?this.scheduleOnce((function(){t.CloseMenu("CountdownScreen"),t.OpenMenu("InGameMenu")}),1):e==Lt.END_GAME?(this.CloseAllMenus(),this.OpenMenu("RoundCompletedScreen")):e==Lt.KICKED_OUT&&(this.CloseAllMenus(),this.OpenMenu("KickedOutScreen"))},r.FixWidthOfUICamera=function(){console.log("Fixing width of UI Camera"),this.uiCamera.orthoHeight=lt.instance.getCurrentOrthoHeight(),this.FixCanvasSize()},r.FixCanvasSize=function(){var e=this.node.getComponent(m);e.setContentSize(lt.instance.getWidth(),2*lt.instance.camera.orthoHeight),console.log("UI Width: ",e.width,"UI Height: ",e.height);var t=this.node.getComponent(C);t.top=960-e.height/2,t.bottom=960-e.height/2,t.updateAlignment();for(var n=this.node.getComponentsInChildren(C),i=0;i<n.length;i++)n[i].updateAlignment()},r.getAllChildWidgets=function(e){var t=e.getComponentsInChildren(C);console.log("All widgets: ",t.length)},r.updateUiBasedOnConfig=function(){this.showMuteButton=Xo.Instance._serverStateCopy.roomSettings.show_mute_button,this.showResultScreen=Xo.Instance._serverStateCopy.roomSettings.show_result_screen,this.showFAQ=Xo.Instance._serverStateCopy.roomSettings.show_faq;for(var e=0;e<this.menus.length;e++)this.menus[e].initialize()},r.playFlashEffect=function(){var e=this;this.flashNode.active=!0;var t=this.flashNode.getComponent(M);t?(t.color=new D(197,8,8,0),G(t).to(.2,{color:new D(197,8,8,255)}).to(.3,{color:new D(197,8,8,0)}).call((function(){e.flashNode.active=!1})).start()):console.error("No Sprite component found on flashNode")},r.showConfetti=function(){var e=A(this.showerConfettiPrefab);this.confettiPositionNode.addChild(e),e.setPosition(new w(0,150,0))},o}(h)).instance=null,Wo=e((xo=Yo).prototype,"uiCamera",[ko],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vo=e(xo.prototype,"menus",[Go],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ko=e(xo.prototype,"flashNode",[zo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jo=e(xo.prototype,"showerConfettiPrefab",[Ho],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jo=e(xo.prototype,"confettiPositionNode",[Uo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bo=xo))||Bo);l._RF.pop(),l._RF.push({},"0f849xgRBtKtY8k5XecVFN+","Ludo_PawnHandler",void 0);var tr,nr,ir,or,rr,ar=0,sr=1,lr=function(){function e(e,t){this.player=void 0,this.pawns=void 0,this.state=ar,this.moveDataQueue=[],this.pawnAnimation=null,this.currentHandlingPieceIndex=-1,this.currentHandlingMoveData=null,this.pieceAnimationsTag=ro.PIECE_MOVE,this.hasKilledInThisMove=!1,this.pawns=e,this.player=t}var t=e.prototype;return t.setState=function(e){this.state=e},t.onPawnMoveAnimationComplete=function(){Zi.Instance.updateAllPiecePositions(),this.handleData()},t.handleData=function(){if(this.hasKilledInThisMove=!1,0!=this.moveDataQueue.length){this.StopRippleAnimations();var e=this.moveDataQueue.shift();this.setState(sr),this.player.outComesUIManager.removeOutCome(e.rollValue),this.currentHandlingPieceIndex=e.pieceIndex,this.currentHandlingMoveData=e,console.log("Handling Move Data: ","piece ",e.pieceIndex,"with roll value ",e.rollValue),this.pawnAnimation=this.pawns[e.pieceIndex].move(e.rollValue,this.onPieceLandedOnTargetTile.bind(this)),this.pawnAnimation.tag(this.pieceAnimationsTag),this.pawnAnimation.start()}else this.state==sr&&(this.setState(ar),this.StartRippleForValidMovePieces())},t.onPieceLandedOnTargetTile=function(){var e=this;console.log("Moved Piece to Target Tile: ",this.pawns[this.currentHandlingPieceIndex].pathNumber),0===this.pawns[this.currentHandlingPieceIndex].previousPathNumber&&this.pawns[this.currentHandlingPieceIndex].pathNumber>0&&sn.instance.playSound("PawnOutOfBase");var t=this.killOpponentPieces(this.pawns[this.currentHandlingPieceIndex]);if(null!=t)return t.call((function(){e.onPieceLandedOnTargetTile()})),void t.start();var n=this.handlePowerUps(this.pawns[this.currentHandlingPieceIndex]);if(null!=n&&sn.instance.playSound("Power"),null==n||n.start(),null==n){if(Za.Instance.anyPlayerFinished())return console.log("All Players Finished : Sending Move Ack"),void this.sendMoveAck();if(this.hasKilledInThisMove)return console.log("Killed in this move: Sending Move Ack"),void this.sendMoveAck();this.currentHandlingMoveData.sendAck&&this.sendMoveAck(),this.onPawnMoveAnimationComplete()}},t.handlePowerUps=function(e){var t=Zi.Instance.getPowerUpType(e);return t==xn.PROPELLER?(console.log("Landed on Propeller Powerup"),this.getPropellerAnimation(e)):t==xn.BOMB?(console.log("Landed on Bomb Powerup"),this.getBombAnimation(e)):t==xn.GOLDEN_DICE?(console.log("Landed on Golden Dice Powerup"),this.getGoldenDiceAnimation(e)):null},t.getPropellerAnimation=function(e){var t=this,n=Zi.Instance.getPropellerLandingPathNumber(e);console.log("Propeller Landing Path Number: ",n);var i=Zi.Instance.getPowerupNode(e);Zi.Instance.removePowerUp(i.getComponent(Ki)),e.setPathNumber(n),e.updateParentNode();var o=Zi.Instance.getPathTile(n,e.playerNumber,e.pieceNumber).worldPosition.clone(),r=w.distance(e.node.worldPosition,o)/100*.15,a=o.clone().subtract(e.node.worldPosition).normalize();r=Math.max(r,.3);var s=G(e.node).call((function(){e.playPropellerAnimation(a)})).to(r,{worldPosition:o});return s.call((function(){e.stopPropellerAnimation(),t.onPieceLandedOnTargetTile()})),s.tag(this.pieceAnimationsTag),s},t.getGoldenDiceAnimation=function(e){var t=this,n=Zi.Instance.getPowerupNode(e),i=n.getComponent(Ki),o=this.player.node.worldPosition;n.setParent(this.player.node,!0),i.playMagicTrailEffect(),console.log("Golden Dice Powerup Target Position: ",o);var r=w.distance(n.worldPosition,o)/50*.15;r=v.clamp(r,.3,1),console.log("Golden Dice Animation Duration: ",r);var a=G(this.player.node).to(.2,{scale:w.ONE.clone().multiplyScalar(1.15)}).to(.1,{scale:w.ONE.clone()}),s=G(n);return s.call((function(){sn.instance.playSound("MagicTrail")})),s.to(.05,{scale:w.ONE.clone().multiplyScalar(.7)}),s.to(r,{worldPosition:o},{easing:"expoIn"}),s.call((function(){sn.instance.stopSound("MagicTrail"),a.start()})),s.delay(.1),s.call((function(){Zi.Instance.removePowerUp(i),t.onPieceLandedOnTargetTile()})),s},t.getBombAnimation=function(e){var t=this,n=Zi.Instance.getPowerupNode(e),i=n.getComponent(Ki),o=Zi.Instance.getBombLandingPathNumber(e);console.log("Bomb Landing Path Number: ",o),e.setPathNumber(o),e.updateParentNode();var r=Zi.Instance.getPathPositions(e.previousPathNumber,o,e.playerNumber,e.pieceNumber),a=e.getMoveAnimation(o,null);a.tag(this.pieceAnimationsTag);for(var s=G(n).call((function(){n.setWorldPosition(r[0]),i.blinkWithRedColor()})),l=1;l<r.length;l++)s.then(this.jumpToNextTileAnimation(n,r[l-1],r[l])),l==r.length-1&&s.call((function(){a.call((function(){t.onPieceLandedOnTargetTile()})),a.start()}));return s.call((function(){var i;Zi.Instance.createBombBlastEffect(n.worldPosition.clone()),null==(i=t.killOpponentPieces(e))||i.start(),Zi.Instance.removePowerUp(n.getComponent(Ki))})),s.tag(this.pieceAnimationsTag),s},t.jumpToNextTileAnimation=function(e,t,n){var i=t.clone().add(n).multiplyScalar(.5),o=e.scale.clone(),r=G(e).call((function(){sn.instance.playSound("Move"),e.setWorldPosition(t)}));return r.to(.12,{worldPosition:i,scale:o.clone().multiplyScalar(1.5)}),r.to(.12,{worldPosition:n,scale:o}),r},t.killOpponentPieces=function(e){var t=this,n=Zi.Instance.getKillablePieces(e);if(null!=n){console.log("Killing Opponent Piece: ","piece ",n.pieceNumber,"of player ",n.playerNumber);var i=Zi.Instance.getPathPositions(n.pathNumber,0,n.playerNumber,n.pieceNumber);n.setPathNumber(0),n.updateParentNode(),n.updatePieceScale();var o=v.clamp(w.distance(n.node.worldPosition,i[i.length-1])/50*.15,.3,1);console.log("kill animation duration per tile: ",o);var r=G(n.node);return r.call((function(){sn.instance.playSound("Kill");var e=Za.Instance.getPlayer(n.playerNumber);e&&e._isLocal&&er.instance.playFlashEffect(),n.node.setWorldPosition(i[0])})),r.to(o,{worldPosition:i[i.length-1]},{progress:function(e,n,i,o){return v.lerp(e,n,t.easeOutBack(o))}}),r.call((function(){})),this.hasKilledInThisMove=!0,r}},t.easeOutBack=function(e){var t=1.70158*1.5;return 1+3.5523700000000002*Math.pow(e-1,3)+t*Math.pow(e-1,2)},t.movePiece=function(e,t,n){this.moveDataQueue.push({pieceIndex:e,rollValue:t,sendAck:n}),this.state==ar&&this.handleData()},t.Reset=function(e){this.stopAllAnimations(),this.moveDataQueue=[],this.setState(ar),this.ResetPawnPositions(e),Zi.Instance.reset(e)},t.ResetPawnPositions=function(e){for(var t=e.playersData[this.player.playerNumber],n=0;n<t.pieces.length;n++)this.pawns[n].reset(t.pieces[n]);console.log("Reset Pawn Positions of Player: ",this.player.playerNumber)},t.stopAllAnimations=function(){this.StopRippleAnimations(),B.stopAllByTag(this.pieceAnimationsTag)},t.sendMoveAck=function(){qe.Instance.CurrentRoom.send(Bn.MOVE_PIECE_ACK,JSON.stringify({}))},t.isAnimating=function(){return this.state==sr},t.StartRippleForValidMovePieces=function(){if(this.player._isLocal)for(var e=this.player._stateMachine.movePieceState.getAllMovablePieces(),t=0;t<e.length;t++)e[t].playRippleAnimation()},t.StopRippleAnimations=function(){if(this.player._isLocal)for(var e=0;e<this.pawns.length;e++)this.pawns[e].stopRippleAnimation()},e}();l._RF.pop(),l._RF.push({},"05831EM9wFKDYwgl1xxBdlq","Ludo_OutComesUIManager",void 0);var ur,cr,hr,pr,dr,mr,fr,gr,yr,vr,br,_r,Cr,Sr,Tr,Pr=u.ccclass,wr=u.property,Or=(tr=Pr("LudoOutComesUIManager"),nr=wr({type:I}),tr((rr=e((or=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"outComesPrefab",rr,i(t)),t.currentOutComesUI=[],t.currentOutComesValues=[],t.goldenDiceOutcomes=0,t.player=null,t}t(o,e);var r=o.prototype;return r.setGoldenDiceOutcomes=function(e){this.goldenDiceOutcomes=e},r.addOutCome=function(e){var t=A(this.outComesPrefab);t.setParent(this.node),t.getComponent(M).spriteFrame=jn.instance.getDiceOutComesStackSprite(e),this.currentOutComesUI.length<this.goldenDiceOutcomes&&6==e&&(t.getComponent(M).spriteFrame=jn.instance.getGoldenDiceOutComeSprite()),this.currentOutComesUI.push(t),this.currentOutComesValues.push(e),this.onOutComesChanged()},r.removeOutCome=function(e){var t=this.currentOutComesValues.indexOf(e);-1!=t&&(this.currentOutComesUI[t].destroy(),this.currentOutComesUI.splice(t,1),this.currentOutComesValues.splice(t,1)),this.onOutComesChanged()},r.clearAllOutComes=function(){console.warn("Clearing All OutComes"),this.currentOutComesUI.forEach((function(e){e.destroy()})),this.currentOutComesUI=[],this.currentOutComesValues=[],this.onOutComesChanged()},r.getOutComes=function(){return this.currentOutComesValues},r.onOutComesChanged=function(){this.currentOutComesValues.length<=0?this.player.enableName(!0):this.player.enableName(!1)},r.reset=function(e){this.clearAllOutComes();for(var t=0;t<e.length;t++)this.addOutCome(e[t]);console.warn("all out comes ",this.getOutComes())},r.setPlayer=function(e){this.player=e},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){this.clearAllOutComes(),this.player=null,this.outComesUI=[],this.outComesUISprites=[],this.outComesUILabels=[]},o}(h)).prototype,"outComesPrefab",[nr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ir=or))||ir);l._RF.pop(),l._RF.push({},"9b0ac/e1CFIF7LkqGL7gfm9","Ludo_MoveOptionsInput",void 0);var Nr=u.ccclass,Rr=u.property,Er=(ur=Nr("LudoMoveOptionsInput"),cr=Rr({type:x}),hr=Rr({type:x}),pr=Rr({type:x}),dr=Rr({type:P}),mr=Rr({type:m}),fr=Rr({type:M}),ur((vr=e((yr=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"firstOutComeLabel",vr,i(t)),n(t,"secondOutComeLabel",br,i(t)),n(t,"thirdOutComeLabel",_r,i(t)),t.outComeValues=[6,6,6],n(t,"pointer",Cr,i(t)),t.outComeClickedCallback=null,t.uiTransform=null,n(t,"optionsUITransform",Sr,i(t)),n(t,"optionsBGSprite",Tr,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){this.uiTransform=this.node.getComponent(m)},r.onEnable=function(){this.firstOutComeLabel.node.on(P.EventType.TOUCH_START,this.onFirstOutComeClick,this),this.secondOutComeLabel.node.on(P.EventType.TOUCH_START,this.onSecondOutComeClick,this),this.thirdOutComeLabel.node.on(P.EventType.TOUCH_START,this.onThirdOutComeClick,this)},r.onDisable=function(){this.firstOutComeLabel.node.off(P.EventType.TOUCH_START,this.onFirstOutComeClick,this),this.secondOutComeLabel.node.off(P.EventType.TOUCH_START,this.onSecondOutComeClick,this),this.thirdOutComeLabel.node.on(P.EventType.TOUCH_START,this.onThirdOutComeClick,this)},r.setOutComeSprites=function(e,t){this.outComeValues=e,this.optionsBGSprite.color=jn.instance.getPawnColor(t),e.length>=1&&(this.firstOutComeLabel.string=this.outComeValues[0].toString()),e.length>=2?(console.log("Setting Second OutCome"),this.secondOutComeLabel.node.active=!0,this.secondOutComeLabel.string=this.outComeValues[1].toString()):this.secondOutComeLabel.node.active=!1,e.length>=3?(console.log("Setting Third OutCome"),this.thirdOutComeLabel.node.active=!0,this.thirdOutComeLabel.string=this.outComeValues[2].toString()):this.thirdOutComeLabel.node.active=!1},r.onFirstOutComeClick=function(){null!=this.outComeClickedCallback&&this.outComeClickedCallback(this.outComeValues[0])},r.onSecondOutComeClick=function(){null!=this.outComeClickedCallback&&this.outComeClickedCallback(this.outComeValues[1])},r.onThirdOutComeClick=function(){null!=this.outComeClickedCallback&&this.outComeClickedCallback(this.outComeValues[2])},r.SetPosition=function(e){var t=lt.instance.getWidth(),n=.5*this.optionsUITransform.width,i=.2*this.optionsUITransform.width,o=e.x,r=o,a=0;console.log("Debug - Screen Width:",t,"Component Width:",this.optionsUITransform.width,"Half Width:",n,"Offset Width:",i),console.log("Debug - Pawn X:",o,"Default Left Bound:",o-n,"Default Right Bound:",o+n),o-n<0?(a=o-(r=o+n-i),console.log("Left overflow - Moving options 20% left. Actual X:",r,"Pointer offset:",a)):o+n>t?(a=o-(r=o-n+i),console.log("Right overflow - Moving options 20% right. Actual X:",r,"Pointer offset:",a)):console.log("No overflow - Centered on pawn"),this.node.setWorldPosition(new w(r,e.y,e.z)),this.optionsUITransform.node.setPosition(new w(0,0,0));var s=n-20;a=Math.max(-s,Math.min(s,a)),this.pointer&&this.pointer.setPosition(new w(a,this.pointer.position.y,this.pointer.position.z)),console.log("Final - World X:",r,"Pointer offset:",a,"Final bounds:",r-n,"to",r+n)},r.SetBackgroundColor=function(e){this.optionsBGSprite.color=e},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){this.firstOutComeLabel&&this.firstOutComeLabel.node&&this.firstOutComeLabel.node.off(P.EventType.TOUCH_START,this.onFirstOutComeClick,this),this.secondOutComeLabel&&this.secondOutComeLabel.node&&this.secondOutComeLabel.node.off(P.EventType.TOUCH_START,this.onSecondOutComeClick,this),this.thirdOutComeLabel&&this.thirdOutComeLabel.node&&this.thirdOutComeLabel.node.off(P.EventType.TOUCH_START,this.onThirdOutComeClick,this),this.firstOutComeLabel=null,this.secondOutComeLabel=null,this.thirdOutComeLabel=null,this.optionsBGSprite=null,this.onFirstOutComeClick=null,this.onSecondOutComeClick=null,this.onThirdOutComeClick=null},o}(h)).prototype,"firstOutComeLabel",[cr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),br=e(yr.prototype,"secondOutComeLabel",[hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_r=e(yr.prototype,"thirdOutComeLabel",[pr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cr=e(yr.prototype,"pointer",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sr=e(yr.prototype,"optionsUITransform",[mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tr=e(yr.prototype,"optionsBGSprite",[fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gr=yr))||gr);l._RF.pop(),l._RF.push({},"df26b0q0BZMS5DnK7lTZnIB","Ludo_PlayerBaseState",void 0);var Ir=function(){};l._RF.pop(),l._RF.push({},"4d196ipAgNGv7Yzxlx1Vt+Y","Ludo_IdleState",void 0);var Ar=function(e){function n(t){var n;return(n=e.call(this)||this).stateMachine=void 0,n._stateName=La.IDLE,n.player=void 0,n.stateMachine=t,n.player=n.stateMachine.player,n}t(n,e);var i=n.prototype;return i.enterState=function(){this.clearPlayerData()},i.updateState=function(e){},i.exitState=function(){},i.clearPlayerData=function(){this.player.timer.stop(),this.player.outComesUIManager.setGoldenDiceOutcomes(0),this.player.outComesUIManager.clearAllOutComes(),this.player.dice.reset(),this.player.diceRoot.active=!1,null!=this.player._moveOptioneInput&&(this.player._moveOptioneInput.node.active=!1)},n}(Ir);l._RF.pop(),l._RF.push({},"f3927+WU2RAEZliBMGTRyeT","Ludo_MovePieceState",void 0);var Lr=function(e){function n(t){var n;return(n=e.call(this)||this).stateMachine=void 0,n._stateName=La.MOVING_PIECE,n.player=void 0,n.moveOptionsOffset=new w(0,120,0),n.stateMachine=t,n.player=n.stateMachine.player,n}t(n,e);var i=n.prototype;return i.enterState=function(){console.log("Entered Moving Piece State"),console.log("Rolls : ",this.player.outComesUIManager.getOutComes());var e=this.stateMachine.currentServerState.playersData[this.player.playerNumber];this.player.outComesUIManager.reset(e.rollsList),this.player.diceRoot.active=!1,this.player.timer.stop(),this.player.timer.setTotalTime(this.stateMachine.currentServerState.roomSettings.movePiecesWaitTime),this.player.timer.run(),this.player._pawnHandler.StartRippleForValidMovePieces();for(var t=0;t<this.player.pawns.length;t++)this.player.pawns[t].node.on(P.EventType.TOUCH_START,this.OnPieceClick,this)},i.updateState=function(e){},i.exitState=function(){console.log("Exited Move Piece State local ",this.player._isLocal),this.player.timer.stop(),this.player._pawnHandler.Reset(this.stateMachine.currentServerState);for(var e=0;e<this.player.pawns.length;e++)this.player.pawns[e].node.off(P.EventType.TOUCH_START,this.OnPieceClick,this)},i.getAllMovablePieces=function(){for(var e,t=this,n=[],i=this.player.outComesUIManager.getOutComes(),o=function(o){e=i.filter((function(e){return t.canMovePiece(t.player.pawns[o].pathNumber,e)})),(e=Array.from(new Set(e))).length>0&&n.push(t.player.pawns[o])},r=0;r<this.player.pawns.length;r++)o(r);return n},i.OnPieceClick=function(e){var t=this;if(this.player._isLocal)if(this.player._pawnHandler.isAnimating())this.player._moveOptioneInput.node.active=!1;else{this.player._moveOptioneInput.node.active=!1;var n=e.target.getComponent(wi),i=this.player.outComesUIManager.getOutComes().filter((function(e){return t.canMovePiece(n.pathNumber,e)}));if(i=Array.from(new Set(i)),console.log("Piece Valid OutComes: ",i),0!=i.length)return 1==i.length&&this.sendMovePieceMessage(n.pieceNumber,i[0]),i.length>=2?(this.player._moveOptioneInput.node.active=!0,this.player._moveOptioneInput.outComeClickedCallback=this.outComeClickedCallback.bind(this),this.player._moveOptioneInput.setOutComeSprites(i,this.player.playerNumber),this.player._currentSelectedPieceNumber=n.pieceNumber,void this.player._moveOptioneInput.SetPosition(e.target.worldPosition.clone().add(this.moveOptionsOffset))):void 0}},i.onMovePiece=function(){var e=JSON.parse(this.stateMachine.currentServerState.inputPayload.inputValue);console.log("Move Piece From Server: ",e);this.stateMachine.currentServerState.playersData[this.player.playerNumber];var t=e.pieceIndex,n=e.rollValue;this.player.timer.stop(),this.player._moveOptioneInput.node.active=!1,this.player._pawnHandler.movePiece(t,n,!0)},i.canMovePiece=function(e,t){var n=this.player._roomSettings;return(0!=e||6==t)&&!(e+t>this.nonHomePathCount(n)+this.homePathCount(n))},i.nonHomePathCount=function(e){return 8*e.pathTilesPerSide+4},i.homePathCount=function(e){return e.pathTilesPerSide},i.sendMovePieceMessage=function(e,t){Xo.Instance.setInput("MovePiece"),qe.Instance.CurrentRoom.send(Bn.MOVE_PIECE,JSON.stringify({pieceIndex:e,rollValue:t})),console.log("Move Piece Message Sent : ","piece ",e,"with roll value ",t)},i.outComeClickedCallback=function(e){this.sendMovePieceMessage(this.player._currentSelectedPieceNumber,e),this.player._moveOptioneInput.node.active=!1,this.player._currentSelectedPieceNumber=-1},i.reset=function(){this.exitState()},n}(Ir);l._RF.pop(),l._RF.push({},"aa136Cw9C5NTap6DGd3y94y","Ludo_RollingState",void 0);var Dr=function(e){function n(t){var n;return(n=e.call(this)||this).stateMachine=void 0,n._stateName=La.ROLLING,n.player=void 0,n.currentDiceOutcome=0,n.goldenDiceOutcomes=0,n.stateMachine=t,n.player=n.stateMachine.player,n.player.dice.onDiceRollDone=n.onDiceRollDone.bind(i(n)),n}t(n,e);var o=n.prototype;return o.enterState=function(){console.log("Entered Rolling State"),this.player.diceRoot.active=!0,this.player.dice.reset(),ge.info("dice active"),this.player.timer.stop(),this.player.timer.setTotalTime(this.stateMachine.currentServerState.roomSettings.diceRollWaitTime),this.player.timer.run(),this.player._pawnHandler.Reset(this.stateMachine.currentServerState),this.updateGoldenDiceCount(),this.player._isLocal&&(this.player.dice.node.on(P.EventType.TOUCH_START,this.OnDiceClick,this),this.player.arrowPointToDiceAnimation(!0)),n.lastRolledPlayer&&n.lastRolledPlayer!=this.player&&this.player._isLocal&&Xo.Instance.miloSdk.vibratePreset("light"),n.lastRolledPlayer=this.player},o.updateState=function(e){},o.exitState=function(){this.player.diceRoot.active=!1,this.player.timer.stop(),console.log("Exited Rolling State local ",this.player._isLocal);var e=this.stateMachine.currentServerState.playersData[this.player.playerNumber].rollsList;this.player.outComesUIManager.reset(e),this.player._isLocal&&this.player.dice.node.off(W.EventType.TOUCH_START,this.OnDiceClick,this)},o.OnDiceClick=function(e){this.player._isLocal&&(this.player.dice.node.off(W.EventType.TOUCH_START,this.OnDiceClick,this),Xo.Instance.setInput("DiceRoll"),this.player.arrowPointToDiceAnimation(!1),console.log("Clicked on Dice"),qe.Instance.CurrentRoom.send(Bn.CLIENT_DICE_ROLL,JSON.stringify({})))},o.onDiceRollDone=function(){this.player.outComesUIManager.addOutCome(this.currentDiceOutcome),qe.Instance.CurrentRoom.send(Bn.ROLLING_ACK,JSON.stringify({})),console.log("Roll Ack Sent")},o.onDiceOutCome=function(){var e=JSON.parse(this.stateMachine.currentServerState.inputPayload.inputValue);this.player.dice.rollDice(e.value),this.currentDiceOutcome=e.value,console.log("Rolled : ",e.value),this.player.timer.stop()},o.updateGoldenDiceCount=function(){var e=this.stateMachine.currentServerState.playersData[this.player.playerNumber];this.goldenDiceOutcomes=e.goldenDiceCount,this.player.outComesUIManager.setGoldenDiceOutcomes(this.goldenDiceOutcomes),this.player.outComesUIManager.reset(e.rollsList)},o.reset=function(){this.exitState()},n}(Ir);Dr.lastRolledPlayer=void 0,l._RF.pop(),l._RF.push({},"61671wuL4BI5baN7AKOa45p","Ludo_PlayerStateMachine",void 0);var Mr,Fr,kr,Gr,zr,Hr,Ur,Br=function(){function e(e){this._currentState=void 0,this.idleState=void 0,this.rollingState=void 0,this.movePieceState=void 0,this.player=void 0,this.currentServerState=void 0,this.currentTurnPlayerNumber=-1,this.player=e,this.idleState=new Ar(this),this.rollingState=new Dr(this),this.movePieceState=new Lr(this),this._currentState=this.idleState}var t=e.prototype;return t.updateState=function(e){null!=this._currentState&&this._currentState.updateState(e)},t.changeState=function(e){this._currentState.exitState(),this._currentState=e,this._currentState.enterState()},t.getPlayerNumber=function(){return this.player.playerNumber},t.onServerStateChange=function(e){if(this.currentServerState=e,ge.info("onServerStateChange input payload inputType : ",e.inputPayload.inputType),this.currentTurnPlayerNumber!=e.turnPlayerNumber&&(this.currentTurnPlayerNumber=e.turnPlayerNumber,this.player.isMyTurn(e.turnPlayerNumber)&&(console.log("===================================="),console.log("Player Turn : ",this.currentTurnPlayerNumber))),this.currentServerState.currentRoomStatus!==Lt.END_GAME&&this.checkAndUpdateBotScreen(),this.player.isMyTurn(e.turnPlayerNumber)){if(ge.info("input payload inputType : ",e.inputPayload.inputType),e.inputPayload.inputType!=Bn.NONE)switch(e.inputPayload.inputType){case Bn.SET_STATE:this.onSetState(e);break;case Bn.DICE_OUTCOME:this._currentState==this.rollingState&&this.rollingState.onDiceOutCome();break;case Bn.MOVE_PIECE:this._currentState==this.movePieceState&&this.movePieceState.onMovePiece()}}else this._currentState!=this.idleState&&this.changeState(this.idleState)},t.onReconnection=function(e){this.currentServerState=e,this.rollingState.exitState(),this.movePieceState.exitState(),this.player.isMyTurn(e.turnPlayerNumber)?e.currentGameState==Un.ROLLING?(this._currentState=this.rollingState,this._currentState.enterState(),this.player.timer.setCurrentTime(e.timer)):e.currentGameState==Un.MOVING_PIECE&&(this._currentState=this.movePieceState,this._currentState.enterState(),this.player.timer.setCurrentTime(e.timer)):this.changeState(this.idleState)},t.onSetState=function(e){e.currentGameState==Un.ROLLING?this.changeState(this.rollingState):e.currentGameState==Un.MOVING_PIECE&&this.changeState(this.movePieceState)},t.checkAndUpdateBotScreen=function(){this.player._isLocal&&(this.currentServerState.playersData[this.player.playerNumber].isKickedOut?er.instance.OpenMenu("KickedOutScreen"):this.currentServerState.playersData[this.player.playerNumber].isBot&&(console.log("Opening BotMadeMoveScreen"),er.instance.OpenMenu("BotMadeMoveScreen")))},e}();l._RF.pop(),l._RF.push({},"610f8L0srdIIJNwtb7O4Q+M","Ludo_PlayerAvatar",void 0);var xr,Wr,Vr,Kr,jr,Jr,Yr,Zr,Qr,Xr,qr,$r,ea,ta,na,ia,oa,ra,aa,sa,la,ua,ca,ha,pa,da,ma,fa,ga,ya,va,ba=u.ccclass,_a=u.property,Ca=(Mr=ba("LudoPlayerAvatar"),Fr=_a({type:M,tooltip:"Player Avatar"}),kr=_a({type:M,tooltip:"Player Avatar Outline"}),Mr((Hr=e((zr=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"playerAvatar",Hr,i(t)),n(t,"outline",Ur,i(t)),t.enableOnClick=!1,t.userId="",t}t(o,e);var r=o.prototype;return r.initialize=function(e,t){this.enableOnClick=e,this.userId=t},r.onEnable=function(){this.registerTouchEvents()},r.onDisable=function(){this.unregisterTouchEvents()},r.start=function(){},r.update=function(e){},r.registerTouchEvents=function(){this.playerAvatar.node.on(P.EventType.TOUCH_START,this.handleTouchStart,this)},r.unregisterTouchEvents=function(){this.playerAvatar.node.off(P.EventType.TOUCH_START,this.handleTouchStart,this)},r.handleTouchStart=function(){this.enableOnClick},r.setOutline=function(e){this.outline.enabled=e},r.setAvatarFromUrl=function(e){console.log("Setting avatar from url: ",e);var t=this.getFromCache(e);t?this.createSpriteFrameFromTexture(t):this.loadRemoteImage(e)},r.setAvatarFromSpriteFrame=function(e){this.playerAvatar.spriteFrame=e},r.getFromCache=function(e){try{var t=V.assets.get(e);if(t&&t.isValid&&"function"==typeof t.getHash)return t}catch(e){console.warn("[PlayerAvatar] Error accessing cached texture: "+e)}return null},r.createSpriteFrameFromTexture=function(e){if(e&&e.isValid&&"function"==typeof e.getHash)if(this.playerAvatar)try{var t=new L;t.texture=e,this.playerAvatar.spriteFrame=t}catch(e){console.error("[PlayerAvatar] Error creating sprite frame: "+e)}else console.warn("[PlayerAvatar] playerAvatar is null, cannot create sprite frame");else console.warn("[PlayerAvatar] Invalid texture provided")},r.loadRemoteImage=function(e){var t=this;V.loadRemote(e,{ext:".png"},(function(n,i){if(n)return console.error("[Player] Failed to load profile image: "+JSON.stringify(n)),void(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_avatar_load_failed",data:{userId:t.userId,url:e,errorName:n.name,errorMessage:n.message,errorStack:n.stack}})));try{var o=new L,r=new K;r.image=i,r&&r.isValid&&"function"==typeof r.getHash?(o.texture=r,t.playerAvatar?t.playerAvatar.spriteFrame=o:console.warn("[PlayerAvatar] playerAvatar is null, cannot set sprite frame")):console.warn("[PlayerAvatar] Invalid texture created from image asset")}catch(n){console.error("[Player] Error creating sprite frame: "+n),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_sprite_frame_creation_failed",data:{userId:t.userId,url:e,error:n}}))}}))},r.onDestroy=function(){this.playerAvatar.spriteFrame=null,this.userId="",this.enableOnClick=!1},o}(h)).prototype,"playerAvatar",[Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ur=e(zr.prototype,"outline",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gr=zr))||Gr);l._RF.pop(),l._RF.push({},"87f9b9YQoBHFZGNuuQ0d4mr","Ludo_Player",void 0);var Sa,Ta,Pa,wa,Oa,Na,Ra,Ea,Ia=u.ccclass,Aa=u.property,La=function(e){return e[e.IDLE=0]="IDLE",e[e.ROLLING=1]="ROLLING",e[e.MOVING_PIECE=2]="MOVING_PIECE",e}({}),Da=(xr=Ia("LudoPlayer"),Wr=Aa({type:F}),Vr=Aa({type:x}),Kr=Aa({type:M}),jr=Aa({type:M}),Jr=Aa({type:C}),Yr=Aa({type:Po}),Zr=Aa({type:M}),Qr=Aa({type:mo}),Xr=Aa({type:P}),qr=Aa({type:M}),$r=Aa({type:M}),ea=Aa({type:Ca}),ta=Aa({type:Or}),na=Aa({type:P}),xr((ra=e((oa=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"playerNumber",ra,i(t)),n(t,"playerName",aa,i(t)),n(t,"profileImage",sa,i(t)),n(t,"profilePicHolder",la,i(t)),n(t,"profilePicWidget",ua,i(t)),n(t,"timer",ca,i(t)),n(t,"timerSprite",ha,i(t)),n(t,"dice",pa,i(t)),n(t,"diceRoot",da,i(t)),n(t,"diceBgSprite",ma,i(t)),n(t,"namePlateSprite",fa,i(t)),n(t,"playerAvatar",ga,i(t)),t.bases=[],t.pawns=[],t.state=La.IDLE,t.playerData=null,t._isLocal=!1,t._isInitialized=!1,t._currentPiecesData=[0,0,0,0],t._playerIndex=0,t._currentDiceValue=1,t._pieceAnimations=[],t._isProfileInitialized=!1,t._board=null,t._myBasesParent=null,t._pawnHandler=null,n(t,"outComesUIManager",ya,i(t)),n(t,"dicePointingArrow",va,i(t)),t.diceArrowInitialPosition=new w(0,0,0),t._currentSelectedPieceNumber=-1,t._moveOptioneInput=null,t._roomSettings=null,t._stateMachine=void 0,t.profileImageUrl="",t.arrowAnimation=null,t}t(o,e);var r=o.prototype;return r.onLoad=function(){this._pawnHandler=new lr(this.pawns,this),this.diceArrowInitialPosition=this.dicePointingArrow.getPosition(),this.outComesUIManager.setPlayer(this),null==this._stateMachine&&(this._stateMachine=new Br(this))},r.start=function(){this.createMoveOptionsUI()},r.update=function(e){this._stateMachine.updateState(e)},r.createMoveOptionsUI=function(){var e=A(jn.instance.moveOptionsUI);e.setParent(this.node),e.setPosition(new w(0,0,0)),this._moveOptioneInput=e.getComponent(Er),this._moveOptioneInput.SetBackgroundColor(jn.instance.getPawnColor(this.playerNumber)),this._moveOptioneInput.node.active=!1},r.initialize=function(e,t){var n=this;this._board=t;var i=e.playersData.find((function(e){return e.playerNumber==n.playerNumber}));null!=i&&(this.playerData=i,this.loadProfile(i),this._myBasesParent=t.getPlayerBase(this.playerNumber),this.createBases(2),this.createPawns(2),i.sessionId==qe.Instance.CurrentRoom.sessionId&&(this._isLocal=!0,this.timer.setLocal(this._isLocal)),this._roomSettings=e.roomSettings,this.setDiceBgColor(),this.setTimerColor())},r.loadProfile=function(e){this._isProfileInitialized||null!=e&&(this.playerName.string=this.truncateName(e.name,10),this.profileImageUrl=e.avatar,this.loadProfileImage(),this.profilePicHolder.color=jn.instance.getPawnColor(e.playerNumber),this.namePlateSprite.spriteFrame=jn.instance.getProfileNamePlateSprite(e.playerNumber),this._isInitialized=!0,this.profileImage.node.on(P.EventType.TOUCH_START,this.openProfile,this))},r.loadProfileImage=function(){this.profileImageUrl?this.playerAvatar.setAvatarFromUrl(this.profileImageUrl):console.warn("[Player] No profile image URL provided")},r.repostionOutComesUI=function(){var e=this.namePlateSprite.node.getComponent(m),t=(this.namePlateSprite.node.getComponent(j).cellSize.width,this.outComesUIManager.node.position.clone());t.x=e.width-30;var n=Math.sign(this.diceRoot.scale.x);t.x*=n,this.outComesUIManager.node.position=t},r.createBases=function(e){for(var t=0;t<e;t++){var n=A(jn.instance.basePrefab);n.setParent(this._myBasesParent,!0),n.name="Base"+t;var i=0,o=0;switch(t){case 0:i=-55,o=55;break;case 1:i=55,o=55;break;case 2:i=55,o=-55;break;case 3:i=-55,o=-55}e<=2&&(o=0),n.setWorldPosition(new w(i,o,0).add(this._myBasesParent.worldPosition)),this.bases.push(n)}},r.createPawns=function(e){for(var t=jn.instance.pawnPrefab,n=0;n<e;n++){var i=A(t);i.setParent(this.bases[n],!0),i.setPosition(new w(0,0,0));var o=i.getComponent(wi);o.Initialize(this.playerNumber,n),this.pawns.push(o),Zi.Instance.addPiece(o)}},r.onServerStateChange=function(e){null==this._stateMachine&&(this._stateMachine=new Br(this)),this._stateMachine.onServerStateChange(e)},r.onReconnection=function(e){this._stateMachine.onReconnection(e)},r.isMyTurn=function(e){return this.playerNumber==e},r.isAnyPieceSelected=function(){return-1!=this._currentSelectedPieceNumber},r.truncateName=function(e,t){var n=e.indexOf(" ");return-1!=n&&(e=e.substring(0,n)),e.length>t?e.substring(0,t)+"..":e},r.setPlayerNumber=function(e){this.playerNumber=e},r.enableName=function(e){},r.arrowPointToDiceAnimation=function(e){var t;null==(t=this.arrowAnimation)||t.stop(),console.log("arrowPointToDiceAnimation : ",e),e?(console.log("Enabling Arrow"),this.dicePointingArrow.active=!0,this.dicePointingArrow.setPosition(this.diceArrowInitialPosition),this.arrowAnimation=G(this.dicePointingArrow),this.arrowAnimation.by(.2,{position:new w(0,-10,0)}),this.arrowAnimation.by(.2,{position:new w(0,10,0)}),this.arrowAnimation.union(),this.arrowAnimation.repeatForever(),this.arrowAnimation.start()):(console.log("Disabling Arrow"),this.dicePointingArrow.active=!1,this.arrowAnimation.stop())},r.isFinished=function(){for(var e=this._roomSettings,t=0;t<this.pawns.length;t++)if(this.pawns[t].pathNumber==Zi.Instance.nonHomePathCount(e)+Zi.Instance.homePathCount(e)-1)return!0;return!1},r.setDiceBgColor=function(){this.diceBgSprite.color=jn.instance.getDiceBgColor(this.playerNumber)},r.setTimerColor=function(){this.timerSprite},r.GetProfileSpriteFrame=function(){return this.profileImage.spriteFrame},r.openProfile=function(){var e=this,t=this._stateMachine.currentServerState.playersData.find((function(t){return t.playerNumber==e.playerNumber})).userId;console.log("Opening Profile of User : ",t)},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){var e;null==(e=this.arrowAnimation)||e.stop(),this.timer&&this.timer.stop(),this.dice&&this.dice.stopRolling(),this._pieceAnimations.forEach((function(e){e&&e.stop()})),this._pieceAnimations=[],this._pawnHandler=null,this._stateMachine=null,this._moveOptioneInput=null,this.outComesUIManager=null,this.playerAvatar=null,this.bases=[],this.pawns=[],this._currentPiecesData=[0,0,0,0],this.state=La.IDLE,this.playerData=null,this._isLocal=!1,this._isInitialized=!1,this._playerIndex=0,this._currentDiceValue=1,this._isProfileInitialized=!1,this._board=null,this._myBasesParent=null,this._currentSelectedPieceNumber=-1,this._roomSettings=null,this.profileImageUrl="",this.dicePointingArrow&&(this.dicePointingArrow.active=!1)},o}(h)).prototype,"playerNumber",[Wr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),aa=e(oa.prototype,"playerName",[Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sa=e(oa.prototype,"profileImage",[Kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),la=e(oa.prototype,"profilePicHolder",[jr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ua=e(oa.prototype,"profilePicWidget",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ca=e(oa.prototype,"timer",[Yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ha=e(oa.prototype,"timerSprite",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pa=e(oa.prototype,"dice",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),da=e(oa.prototype,"diceRoot",[Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ma=e(oa.prototype,"diceBgSprite",[qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fa=e(oa.prototype,"namePlateSprite",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ga=e(oa.prototype,"playerAvatar",[ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ya=e(oa.prototype,"outComesUIManager",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),va=e(oa.prototype,"dicePointingArrow",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ia=oa))||ia);l._RF.pop(),l._RF.push({},"a00c9NpjJBFt4W4CEuvRPJr","Ludo_GameHandler",void 0);var Ma,Fa,ka,Ga,za,Ha,Ua,Ba,xa,Wa,Va,Ka,ja,Ja=u.ccclass,Ya=u.property,Za=(new p,Sa=Ja("LudoGameHandler"),Ta=Ya({type:[Da]}),Pa=Ya({type:Zi}),Sa(((Ea=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._clientState=void 0,t._serverState=void 0,n(t,"players",Na,i(t)),n(t,"board",Ra,i(t)),t.roomSettings=void 0,t.myPlayerNumber=-1,t.hasReconnected=!1,t.isNewPlayerJoined=!1,t}t(o,e);var a=o.prototype;return a.onLoad=function(){o._instance=this,Ze.on(_e.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),Qe.on(_e.SERVER_ROOM_STATE_CHANGE,this.OnServerStateChange,this),J.on(Y.EVENT_HIDE,this.onGameHide,this),J.on(Y.EVENT_SHOW,this.onGameShow,this),J.on(Y.EVENT_RESTART,this.onGameRestart,this),J.on(Y.EVENT_CLOSE,this.onGameClose,this),window.addEventListener("beforeunload",this.onGameClose)},a.onGameHide=function(){console.log("====== Game Hide ======"),B.stopAll()},a.onGameShow=function(){console.log("====== Game Show ======"),B.stopAllByTag(ro.DICE_ROLL),Xo.Instance._roomStatus,Lt.GAME_SIMULATION},a.onGameRestart=function(){console.log("====== Game Restart ======")},a.onGameClose=function(){console.log("====== Game Close ======")},a.onGameDisconnect=function(){console.log("====== Game Disconnect ======"),sn.instance.stopAllSounds()},a.onGameReconnect=function(){console.log("====== Game Reconnect ======")},a.OnServerStateChange=function(e){return null==this._clientState?(ge.info("========= Setting initial Client State ========="),this._clientState=new Mo,this._clientState.copyFrom(e),this._serverState=new Mo,this._serverState.copyFrom(e),this.board.Initialize(e),this.InitializePlayers(e),void(this._serverState.currentGameState!=Un.NONE&&(console.log("========= joined game in between ========="),Zi.Instance.reset(this._serverState),this.sendReconnectionStateToAllPlayers(this._serverState)))):(this._serverState=new Mo,this._serverState.copyFrom(e),e.currentRoomState==Lt.END_GAME?(console.log("========= Game Over State Change ",this._serverState),void this.sendReconnectionStateToAllPlayers(this._serverState)):this.hasReconnected?(console.log("========= sending Reconnection State Change ",this._serverState),Zi.Instance.reset(this._serverState),this.sendReconnectionStateToAllPlayers(this._serverState),void(this.hasReconnected=!1)):void this.sendStateToAllPlayers(this._serverState))},a.onConnectionStateChange=function(e,t){t==Ce.DISCONNECTED?this.onGameDisconnect():e==Ce.RECONNECTING&&t==Ce.JOINED_ROOM&&(this.hasReconnected=!0,this.onGameReconnect())},a.sendStateToAllPlayers=function(e){ge.info("sendStateToAllPlayers input payload inputType : ",e.inputPayload.inputType);for(var t=0;t<this.players.length;t++)this.players[t].onServerStateChange(e)},a.sendReconnectionStateToAllPlayers=function(e){console.log("=========Reconnection State Sent to All Players");for(var t=0;t<this.players.length;t++)this.players[t].node.active&&this.players[t].onReconnection(e)},a.InitializePlayers=function(e){-1==this.myPlayerNumber&&(this.assignMyPlayerNumber(e),this.rotatePlayerNumbersInProfileUI(this.getNumberOfProfileRotation(this.myPlayerNumber)));for(var t=0;t<e.playersData.length;t++){var n=this.getPlayer(t);null==n||n.node.active||(n.node.active=!0,n.initialize(e,this.board))}},a.assignMyPlayerNumber=function(e){for(var t=0;t<e.playersData.length;t++)if(e.playersData[t].sessionId==qe.Instance.CurrentRoom.sessionId){this.myPlayerNumber=t;break}},a.rotatePlayerNumbersInProfileUI=function(e){for(;e>0;){for(var t=-1,n=-1,i=0;i<this.players.length;i++)t=this.players[i].playerNumber,this.players[i].playerNumber=n,n=t;this.players[0].playerNumber=n,e--}},a.getNumberOfProfileRotation=function(e){return 0==e?0:1==e?2:2==e?1:3==e?3:void 0},a.getPlayer=function(e){return this.players.find((function(t){return t.playerNumber==e}))},a.allPlayersFinished=function(){for(var e=0,t=0,n=0;n<this.players.length;n++)this.players[n].node.active&&(t++,this.players[n].isFinished()&&e++);return console.log("Finished Players Count ",e),console.log("Total Players ",this.players.length),e==t-1},a.anyPlayerFinished=function(){for(var e=0;e<this.players.length;e++)if(this.players[e].isFinished())return!0;return!1},a.getMostKillsPlayer=function(){var e=this._serverState.playersData.reduce((function(e,t){return t.killsCount>e.killsCount?t:e}));return this.getPlayer(e.playerNumber)},a.getMostDeathsPlayer=function(){var e=this._serverState.playersData.reduce((function(e,t){return t.deathsCount>e.deathsCount?t:e}));return this.getPlayer(e.playerNumber)},a.isLocalUserHost=function(){var e,t=Xo.Instance.miloSdk.getHostId(),n=this.getPlayer(this.myPlayerNumber);return null!=n&&null!=(e=n.playerData)&&e.userId?t===n.playerData.userId:(console.warn("Local player data not available"),!1)},a.getHostPlayer=function(){var e=Xo.Instance.miloSdk.getHostId(),t=this._serverState.playersData.find((function(t){return t.userId===e}));return t?this.getPlayer(t.playerNumber):null},a.onDestroy=function(){o._instance===this&&(o._instance=null)},r(o,null,[{key:"Instance",get:function(){return this._instance}}]),o}(h))._instance=void 0,Na=e((Oa=Ea).prototype,"players",[Ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ra=e(Oa.prototype,"board",[Pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wa=Oa))||wa);l._RF.pop(),l._RF.push({},"aac54/JVAZBGLlV+reHzC2h","Ludo_InputManager",void 0),l._RF.pop(),l._RF.push({},"8b65chvZHZMiKIen1RIFX6s","Ludo_LeaderboardProfile",void 0);var Qa,Xa,qa,$a,es=u.ccclass,ts=u.property,ns=(Ma=es("LudoLeaderboardProfile"),Fa=ts({type:M}),ka=ts({type:M}),Ga=ts({type:D}),za=ts({type:M}),Ha=ts({type:x}),Ma((xa=e((Ba=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"profileOutline",xa,i(t)),n(t,"numberBG",Wa,i(t)),n(t,"bgColor",Va,i(t)),n(t,"avatar",Ka,i(t)),n(t,"nameLabel",ja,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){},r.start=function(){},r.setPlayerData=function(e){this.avatar.spriteFrame=e.GetProfileSpriteFrame(),this.nameLabel.string=this.truncateName(e.playerName.string,10)},r.truncateName=function(e,t){var n=e.indexOf(" ");return-1!=n&&(e=e.substring(0,n)),e.length>t?e.substring(0,t)+"..":e},r.update=function(e){},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){this.playerName=null,this.playerScore=null,this.avatar=null,this.rankLabel=null,this.rankIcon=null,this.playerData=null,this.playerNumber=0},o}(h)).prototype,"profileOutline",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wa=e(Ba.prototype,"numberBG",[ka],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Va=e(Ba.prototype,"bgColor",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ka=e(Ba.prototype,"avatar",[za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ja=e(Ba.prototype,"nameLabel",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ua=Ba))||Ua);l._RF.pop(),l._RF.push({},"529e4S0uIRGoYleRsJTkb7O","Ludo_MiloClientSdk",void 0);var is=u.ccclass,os=u.property,rs=u.executionOrder;function as(e){try{var t={type:"GAME_EVENT",payload:e,timestamp:Date.now()};console.log("Sending message to parent:",t),window.parent.postMessage(JSON.stringify(t),"*")}catch(e){console.error("Failed to send message:",e)}}var ss,ls,us,cs,hs,ps,ds,ms,fs,gs,ys,vs,bs,_s,Cs,Ss,Ts,Ps,ws,Os,Ns,Rs,Es;is("LudoMiloClientSdk")(Qa=rs(-100)((($a=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"gameName",qa,i(t)),t.isDebugMode=!0,t}t(o,e);var r=o.prototype;return r.onLoad=function(){o.instance=this},r.handlePauseGame=function(){this.gamePaused()},r.handleResumeGame=function(){this.gameResumed()},r.gameInitializing=function(){as({status:"initializing",gameName:this.gameName})},r.gameStarted=function(){as({status:"started",gameName:this.gameName})},r.gameCompleted=function(e){as({status:"completed",gameName:this.gameName,score:e})},r.gamePaused=function(){as({status:"paused",gameName:this.gameName})},r.gameResumed=function(){as({status:"resumed",gameName:this.gameName})},r.gameError=function(e){as({status:"error",gameName:this.gameName,error:e})},r.onDestroy=function(){o.instance===this&&(o.instance=null)},o}(h)).instance=null,qa=e((Xa=$a).prototype,"gameName",[os],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"speed-ludo"}}),Qa=Xa))||Qa);l._RF.pop(),l._RF.push({},"193f25F07RLI7FV0+ui2drm","Ludo_RoundCompleted",void 0);var Is,As=u.ccclass,Ls=u.property;ss=As("LudoRoundCompleted"),ls=Ls({type:Ca}),us=Ls({type:x}),cs=Ls({type:Ca}),hs=Ls({type:x}),ps=Ls({type:Ca}),ds=Ls({type:x}),ms=Ls({type:x}),fs=Ls({type:x}),gs=Ls({type:P}),ys=Ls({type:P}),ss((_s=e((bs=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"winnerAvatar",_s,i(t)),n(t,"winnerName",Cs,i(t)),n(t,"mostKillsPlayerAvatar",Ss,i(t)),n(t,"mostKillsPlayerName",Ts,i(t)),n(t,"mostDeathsPlayerAvatar",Ps,i(t)),n(t,"mostDeathsPlayerName",ws,i(t)),n(t,"killsCountLabel",Os,i(t)),n(t,"deathsCountLabel",Ns,i(t)),n(t,"actionsButtonContainer",Rs,i(t)),n(t,"infoContainer",Es,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this),q.on($.HOST_CHANGED,this.onHostChanged,this)},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){q.off($.HOST_CHANGED,this.onHostChanged,this),this.leaderboardProfiles=[],this.leaderboardContainer=null,this.scrollView=null,this.scrollContent=null},r.Open=function(){e.prototype.Open.call(this),this.initialize()},r.Close=function(){e.prototype.Close.call(this)},r.initialize=function(){e.prototype.initialize.call(this);var t=Xo.Instance._serverStateCopy.playersData.findIndex((function(e){return 1==e.finishPosition}));if(-1!=t){var n=Za.Instance.getPlayer(t);this.winnerAvatar.setAvatarFromSpriteFrame(n.GetProfileSpriteFrame()),this.winnerName.string=n.playerData.name;var i=Za.Instance.getMostKillsPlayer();this.mostKillsPlayerAvatar.setAvatarFromSpriteFrame(i.GetProfileSpriteFrame()),this.mostKillsPlayerName.string=i.playerName.string;var o=Za.Instance.getMostDeathsPlayer();this.mostDeathsPlayerAvatar.setAvatarFromSpriteFrame(o.GetProfileSpriteFrame()),this.mostDeathsPlayerName.string=o.playerName.string,this.killsCountLabel.string="Most Kills: "+i.playerData.killsCount,this.deathsCountLabel.string="Most Deaths: "+o.playerData.deathsCount,this.updateHostUI()}else console.error("no winning player")},r.updateHostUI=function(){var e=Za.Instance.isLocalUserHost(),t=Za.Instance.getHostPlayer();e?t&&(this.infoContainer.active=!1,this.actionsButtonContainer.active=!0):t&&(this.actionsButtonContainer.active=!1,this.infoContainer.getComponent(x).string="Ask "+t.playerData.name+"(Host) to play again or change game",this.infoContainer.active=!0)},r.onHostChanged=function(e){console.log("RoundCompleted: Host changed from",e.oldHostId,"to",e.newHostId),this.node.active&&this.updateHostUI()},r.onPlayAgainButtonClicked=function(){var e=Date.now();Xo.Instance.miloSdk.playAgain({timestamp:e}),console.log("play again button clicked")},r.onChangeGameButtonClicked=function(){var e=Date.now();Xo.Instance.miloSdk.changeGame({timestamp:e}),console.log("change game button clicked")},o}(No)).prototype,"winnerAvatar",[ls],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cs=e(bs.prototype,"winnerName",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ss=e(bs.prototype,"mostKillsPlayerAvatar",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ts=e(bs.prototype,"mostKillsPlayerName",[hs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ps=e(bs.prototype,"mostDeathsPlayerAvatar",[ps],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ws=e(bs.prototype,"mostDeathsPlayerName",[ds],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Os=e(bs.prototype,"killsCountLabel",[ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ns=e(bs.prototype,"deathsCountLabel",[fs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rs=e(bs.prototype,"actionsButtonContainer",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Es=e(bs.prototype,"infoContainer",[ys],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vs=bs));l._RF.pop(),l._RF.push({},"a8a3bubYfhORq+a4d29zTFx","Ludo_ScaleUICanvas",void 0);var Ds,Ms,Fs,ks,Gs,zs,Hs,Us=u.ccclass;u.property,Us("LudoScaleUICanvas")(Is=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.onLoad=function(){this.adjustCanvasScale(),this.adjustCanvasScale()},i.adjustCanvasScale=function(){var e=this.node.getComponent(m);if(e){var t=y.getVisibleSize(),n=y.getDesignResolutionSize(),i=t.width/n.width,o=t.height/n.height,r=Math.min(i,o);e.width=n.width*r,e.height=n.height*r,Z("Adjusted Canvas Scale: width="+e.width+", height="+e.height)}},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){this.canvas=null},n}(h));l._RF.pop(),l._RF.push({},"fd98eYme1lBibSLi1fDdDHQ","Ludo_AutoReturnToPool",void 0);var Bs,xs=u.ccclass,Ws=u.property;Ds=xs("LudoAutoReturnToPool"),Ms=Ws({type:R}),Fs=Ws({type:d}),Ds((zs=e((Gs=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"timeToReturnToPool",zs,i(t)),n(t,"shouldDestroy",Hs,i(t)),t}t(o,e);var r=o.prototype;return r.onEnable=function(){this.scheduleOnce(this.returnToPool,this.timeToReturnToPool)},r.start=function(){},r.update=function(e){},r.returnToPool=function(){di.instance.returnObjectToPool(this.node),this.shouldDestroy&&this.node.destroy()},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){this.shouldDestroy=!1,this.returnDelay=0},o}(h)).prototype,"timeToReturnToPool",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),Hs=e(Gs.prototype,"shouldDestroy",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ks=Gs));l._RF.pop(),l._RF.push({},"2a54ci7xlBJbIDclel3ETXQ","Ludo_BotMadeMoveScreen",void 0);var Vs,Ks,js,Js,Ys,Zs,Qs,Xs=u.ccclass;u.property,Xs("LudoBotMadeMoveScreen")(Bs=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._timer=0,t}t(n,e);var i=n.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this),this.content.on(P.EventType.TOUCH_START,this.OnClick,this)},i.onDestroy=function(){},i.Open=function(){e.prototype.Open.call(this),this._timer=0},i.Close=function(){e.prototype.Close.call(this)},i.initHandTween=function(){},i.initialization=function(){this.initHandTween()},i.OnClick=function(){qe.Instance.sendMessage(Se.PLAYER_CAMEBACK,{}),er.instance.CloseMenu(this.menuName)},n}(No));l._RF.pop(),l._RF.push({},"e235b1n845P3Kj8E4MhzxR0","Ludo_CountdownScreen",void 0);var qs,$s,el,tl,nl,il,ol,rl=u.ccclass,al=u.property;Vs=rl("LudoCountdownScreen"),Ks=al({type:x}),js=al({type:P}),Vs((Zs=e((Ys=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._countdownTween=null,n(t,"countdownText",Zs,i(t)),n(t,"blackBG",Qs,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this)},r.onDestroy=function(){},r.Open=function(){e.prototype.Open.call(this),this.initialization()},r.Close=function(){e.prototype.Close.call(this),null!=this._countdownTween&&this._countdownTween.stop()},r.initCountdownTween=function(){var e=this;this.countdownText.node.active=!0,this._countdownTween=G(this.countdownText.node);for(var t=function(t){e._countdownTween.call((function(){e.countdownText.string=t.toString(),e.countdownText.node.scale=w.ONE.clone().multiplyScalar(2)})).to(1,{scale:w.ONE.clone().multiplyScalar(1)},{easing:"sineIn"})},n=3;n>=1;n--)t(n);this._countdownTween.call((function(){e.deactivateScreen()}))},r.deactivateScreen=function(){this.countdownText.string="",this.countdownText.node.active=!1,this.blackBG.active=!1},r.initialization=function(){this.initCountdownTween(),this._countdownTween.start()},o}(No)).prototype,"countdownText",[Ks],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qs=e(Ys.prototype,"blackBG",[js],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Js=Ys));l._RF.pop(),l._RF.push({},"dd2c6RLMhNIZagz0allhO2A","Ludo_EndRoundScreen",void 0);var sl,ll=u.ccclass,ul=u.property;qs=ll("LudoEndRoundScreen"),$s=ul({type:P}),el=ul({type:[ns]}),qs((il=e((nl=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"rotatingGlow",il,i(t)),n(t,"leaderboardProfiles",ol,i(t)),t._shouldShowThisScreen=!1,t._optionsInitialized=!1,t._isWinner=!1,t._rotatingGlow=null,t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this),Qe.on(_e.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},r.onDestroy=function(){Qe.off(_e.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},r.ServerStateChanged=function(e){if(!this._optionsInitialized){var t=new Mo;t.roomSettings&&(this._shouldShowThisScreen=t.roomSettings.show_result_screen,this._optionsInitialized=!0),t.copyFrom(e)}},r.Open=function(){this._shouldShowThisScreen&&(e.prototype.Open.call(this),console.log("Opening EndROudnScreen"),this.initialize())},r.Close=function(){e.prototype.Close.call(this),this.stopRotateGlow()},r.initialize=function(){var t=this;if(e.prototype.initialize.call(this),er.instance.showResultScreen){for(var n=Xo.Instance.getPlayersRanking(),i=n.length,o=function(e){var i=t.leaderboardProfiles[e],o=Za.Instance.players.find((function(t){return t.playerNumber==n[e].playerNumber}));i.node.active=!0,i.setPlayerData(o)},r=0;r<Math.min(i,this.leaderboardProfiles.length);r++)o(r);for(var a=i;a<this.leaderboardProfiles.length;a++)this.leaderboardProfiles[a].node.active=!1}else this.Close()},r.stopRotateGlow=function(){this._rotatingGlow&&(this._rotatingGlow.stop(),this._rotatingGlow=null)},r.rotateGlow=function(){this.stopRotateGlow(),this._rotatingGlow=G(this.rotatingGlow).by(10,{angle:360}).repeatForever().start()},r.GetDisplayName=function(e){return e.length>6?e.substring(0,6)+"..":e},o}(No)).prototype,"rotatingGlow",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ol=e(nl.prototype,"leaderboardProfiles",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tl=nl));l._RF.pop(),l._RF.push({},"821e72ZsnJA46G0QRnrdfAC","Ludo_HowToPlay",void 0);var cl,hl,pl,dl,ml,fl,gl,yl,vl,bl,_l,Cl=u.ccclass;u.property,Cl("LudoHowToPlay")(sl=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this)},i.onDestroy=function(){},i.Open=function(){e.prototype.Open.call(this)},i.Close=function(){e.prototype.Close.call(this)},i.initHandTween=function(){},n}(No));l._RF.pop(),l._RF.push({},"20f5108aW9Of6FiA/+OEL5D","Ludo_InGameMenu",void 0);var Sl,Tl,Pl,wl,Ol,Nl,Rl,El,Il,Al,Ll,Dl=u.ccclass,Ml=u.property;cl=Dl("LudoInGameMenu"),hl=Ml({type:L}),pl=Ml({type:L}),dl=Ml({type:M}),ml=Ml({type:P}),cl((yl=e((gl=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"soundOnSprite",yl,i(t)),n(t,"soundOffSprite",vl,i(t)),n(t,"soundButton",bl,i(t)),n(t,"faqButton",_l,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this),Qe.on(_e.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},r.onDestroy=function(){Qe.off(_e.SERVER_ROOM_STATE_CHANGE,this.ServerStateChanged,this)},r.ServerStateChanged=function(e){},r.start=function(){},r.Open=function(){console.log("InGameMenu open called"),e.prototype.Open.call(this),this.initialize()},r.Close=function(){e.prototype.Close.call(this)},r.initialize=function(){e.prototype.initialize.call(this),this.UpdateAudioSprite(),this.soundButton.node.active=er.instance.showMuteButton,this.faqButton.active=er.instance.showFAQ},r.UpdateAudioSprite=function(){console.log("UpdateAudioSprite: ",sn.instance.IsAudioEnabled),"true"==sn.instance.IsAudioEnabled?this.soundButton.spriteFrame=this.soundOnSprite:this.soundButton.spriteFrame=this.soundOffSprite},r.ToggleSound=function(){sn.instance.ToggleAudio(),this.UpdateAudioSprite()},o}(No)).prototype,"soundOnSprite",[hl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vl=e(gl.prototype,"soundOffSprite",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bl=e(gl.prototype,"soundButton",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_l=e(gl.prototype,"faqButton",[ml],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fl=gl));l._RF.pop(),l._RF.push({},"79bf6wI4i5Fkr7dx3hG1Gbi","Ludo_InstructionsScreen",void 0);var Fl,kl,Gl,zl,Hl,Ul=u.ccclass,Bl=u.property;Sl=Ul("LudoInstructionsScreen"),Tl=Bl({type:P}),Pl=Bl({type:P}),wl=Bl({type:P}),Ol=Bl({type:P}),Sl((El=e((Rl=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"helpInstructions",El,i(t)),n(t,"autoMoveInstructions",Il,i(t)),n(t,"waitingForUser",Al,i(t)),n(t,"spinner",Ll,i(t)),t._isHelpInstructionDone=!1,t._isAutoMoveInstructionDone=!1,t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this),G(this.spinner).repeatForever(G().by(1,{angle:360})).start()},r.onDestroy=function(){},r.Open=function(){e.prototype.Open.call(this),this.initialization()},r.Close=function(){e.prototype.Close.call(this)},r.initialization=function(){},o}(No)).prototype,"helpInstructions",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Il=e(Rl.prototype,"autoMoveInstructions",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Al=e(Rl.prototype,"waitingForUser",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ll=e(Rl.prototype,"spinner",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nl=Rl));l._RF.pop(),l._RF.push({},"b801evtUuFNXKpm4DNQWEi1","Ludo_KickedOutScreen",void 0);var xl,Wl,Vl,Kl,jl,Jl=u.ccclass,Yl=u.property;Fl=Jl("LudoKickedOutScreen"),kl=Yl({type:x}),Fl((Hl=e((zl=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"kickedOutLabel",Hl,i(t)),t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this)},r.onDestroy=function(){},r.Open=function(){e.prototype.Open.call(this),this.kickedOutLabel.string="You missed "+Xo.Instance._missTurnsToKickOut+" turns. kicked out of the game!"},r.Close=function(){e.prototype.Close.call(this)},r.initHandTween=function(){},r.update=function(e){},o}(No)).prototype,"kickedOutLabel",[kl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gl=zl));l._RF.pop(),l._RF.push({},"510bcH0LK9KeoxBGZdL5MCn","Ludo_ReconnectingScreen",void 0);var Zl,Ql,Xl,ql,$l,eu=u.ccclass,tu=u.property;xl=eu("LudoReconnectingScreen"),Wl=tu({type:P}),xl((jl=e((Kl=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"spinner",jl,i(t)),t._spinnerTween=null,t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this)},r.onDestroy=function(){},r.Open=function(){e.prototype.Open.call(this),this.startSpinner()},r.Close=function(){e.prototype.Close.call(this),this.stopSpinner()},r.startSpinner=function(){this._spinnerTween=G(this.spinner).repeatForever(G().by(1,{angle:360})).start()},r.stopSpinner=function(){var e;null==(e=this._spinnerTween)||e.stop(),this._spinnerTween=null},r.initHandTween=function(){},r.initialization=function(){this.initHandTween()},o}(No)).prototype,"spinner",[Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vl=Kl));l._RF.pop(),l._RF.push({},"44badGTvIVGxaxHEmKkfZux","Ludo_TutorialScreen",void 0);var nu,iu=u.ccclass,ou=u.property;Zl=iu("LudoTutorialScreen"),Ql=ou({type:P}),Zl(($l=e((ql=function(e){function o(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"handNode",$l,i(t)),t._showHandGesture=!0,t._handAnimationTween=null,t}t(o,e);var r=o.prototype;return r.onLoad=function(){e.prototype.onLoad.call(this)},r.start=function(){},r.onDestroy=function(){},r.ServerGameOptionsReceived=function(e){this._showHandGesture=e.show_hand_gesture},r.onSelectedLane=function(){console.log("Selected lane so closing tutorial"),this.Close()},r.Open=function(){this._showHandGesture&&(e.prototype.Open.call(this),this.initialization())},r.Close=function(){e.prototype.Close.call(this),this._handAnimationTween&&this._handAnimationTween.stop()},r.handClickAnimation=function(){var e=this,t=new H;H.fromEuler(t,0,0,15);new H;H.fromEuler(t,0,0,15),this._handAnimationTween=G(this.handNode).call((function(){e.handNode.eulerAngles=w.ZERO.clone()})).delay(.2).to(.3,{rotation:t},{easing:"backOut"}).delay(.7).union().repeatForever(),this._handAnimationTween.start()},r.initialization=function(){this.handClickAnimation()},o}(No)).prototype,"handNode",[Ql],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xl=ql));l._RF.pop(),l._RF.push({},"4dcaa5V7pVOaJ3COa3U4RDw","Ludo_WaitingScreen",void 0);var ru,au=u.ccclass;u.property,au("LudoWaitingScreen")(nu=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.onLoad=function(){e.prototype.onLoad.call(this)},i.onDestroy=function(){},i.Open=function(){e.prototype.Open.call(this)},i.Close=function(){e.prototype.Close.call(this)},i.initialize=function(){e.prototype.initialize.call(this)},n}(No));l._RF.pop(),l._RF.push({},"79859f2JIJNtZdtajk99tGI","ILudoRoomSettings",void 0),l._RF.pop(),l._RF.push({},"52b052wwelCkqAQSO8EA9kj","TestScript",void 0);var su=u.ccclass;u.property,su("NewComponent")(ru=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.start=function(){},i.update=function(e){},n}(h));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/ludo_game', 'chunks:///ludo_game.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});