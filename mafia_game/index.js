System.register("chunks:///_virtual/Mafia_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,o,t,n,a,u,l,r,s,c,d,p,f,h,b,y;return{setters:[function(i){e=i.applyDecoratedDescriptor,o=i.inheritsLoose,t=i.initializerDefineProperty,n=i.assertThisInitialized,a=i.createClass},function(i){u=i.cclegacy,l=i._decorator,r=i.CCString,s=i.AudioClip,c=i.CCFloat,d=i.CCBoolean,p=i.AudioSource,f=i.Prefab,h=i.sys,b=i.instantiate,y=i.Component}],execute:function(){var g,A,S,C,m,E,v,P,w,I,L,D,M,z,_,k,B,T,x,F,K,R,O;u._RF.push({},"583b9vAPVFLKIWeORwwOp7K","Mafia_AudioManager",void 0);var W=l.ccclass,G=l.property,U=(g=W("MafiaAudioClipData"),A=G({type:r}),S=G({type:s}),C=G({type:c}),m=G({type:c}),E=G({type:d}),g((w=e((P=function(){function i(){t(this,"name",w,this),t(this,"audioClips",I,this),t(this,"delayBetweenClips",L,this),t(this,"volume",D,this),t(this,"loop",M,this),this.isLoopPlaying=void 0,this.lastPlayedTime=0,this.clipIndex=0}var e=i.prototype;return e.GetClip=function(){var i=this.audioClips[this.clipIndex];if(this.clipIndex=(this.clipIndex+1)%this.audioClips.length,this.CanPlay())return this.lastPlayedTime=Date.now(),i},e.CanPlay=function(){return Date.now()-this.lastPlayedTime>1e3*this.delayBetweenClips},i}()).prototype,"name",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(P.prototype,"audioClips",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(P.prototype,"delayBetweenClips",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=e(P.prototype,"volume",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=e(P.prototype,"loop",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=P))||v);i("MafiaAudioManager",(z=W("MafiaAudioManager"),_=G({type:U}),k=G({type:p}),B=G({type:f}),z(((O=function(i){function e(){for(var e,o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return e=i.call.apply(i,[this].concat(a))||this,t(e,"audioClipData",F,n(e)),t(e,"backgroundAudioSource",K,n(e)),e.localStorageAudioEnabledKey="SNLAudioEnabled",t(e,"audioSourcePrefab",R,n(e)),e.audioSources=[],e._isAudioEnabled="true",e}o(e,i);var u=e.prototype;return u.onLoad=function(){e.instance=this,this.ReadAudioEnabledFromLocalStorage()},u.onDestroy=function(){e.instance===this&&(e.instance=null)},u.start=function(){this.SetAudioEnabled(this.IsAudioEnabled)},u.playSound=function(i){if("false"!=this.IsAudioEnabled){var e=this.audioClipData.find((function(e){return e.name==i}));if(null!=e){var o=e.GetClip();if(o){if(e.isLoopPlaying)return;var t=this.getEmptyAudioSource();t.loop=e.loop,e.isLoopPlaying=e.loop,t.volume=e.volume,t.clip=o,e.loop?t.play():t.playOneShot(o)}else console.warn("Audio Clip is in use ",i)}}},u.stopSound=function(i){var e=this.audioClipData.find((function(e){return e.name==i}));e?this.audioSources.forEach((function(i){i.clip==e.audioClips[e.clipIndex]&&(e.isLoopPlaying=!1,i.stop())})):console.warn("Audio Clip not found for ",i)},u.stopAllSounds=function(){this.audioSources.forEach((function(i){i.stop()})),this.audioClipData.forEach((function(i){i.isLoopPlaying=!1}))},u.ToggleAudio=function(){"true"==this.IsAudioEnabled?this.SetAudioEnabled("false"):this.SetAudioEnabled("true")},u.SetAudioEnabled=function(i){this._isAudioEnabled=i,this.UpdateBackgroundMusic(),this.WriteAudioEnabledToLocalStorage()},u.WriteAudioEnabledToLocalStorage=function(){h.localStorage.setItem(this.localStorageAudioEnabledKey,this.IsAudioEnabled)},u.ReadAudioEnabledFromLocalStorage=function(){var i=h.localStorage.getItem(this.localStorageAudioEnabledKey);this._isAudioEnabled=null==i?"true":i},u.UpdateBackgroundMusic=function(){var i,e;"true"==this.IsAudioEnabled?null==(i=this.backgroundAudioSource)||i.play():null==(e=this.backgroundAudioSource)||e.stop()},u.printAllPlayingAudioSources=function(){this.audioSources.forEach((function(i){i.playing&&console.log("Playing audio source: ",i.playing,i.clip.name,i.uuid)}))},u.getEmptyAudioSource=function(){var i=this.audioSources.find((function(i){return!i.playing}));return null==i&&(i=this.createAudioSource()),i},u.createAudioSource=function(){var i=b(this.audioSourcePrefab).getComponent(p);return i.node.setParent(this.node),this.audioSources.push(i),console.log("==== Created new audio source: ",this.audioSources.length),i},a(e,[{key:"IsAudioEnabled",get:function(){return this._isAudioEnabled}}]),e}(y)).instance=null,F=e((x=O).prototype,"audioClipData",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=e(x.prototype,"backgroundAudioSource",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(x.prototype,"audioSourcePrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=x))||T));u._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_BasePlayerData.ts",["cc"],(function(i){var s;return{setters:[function(i){s=i.cclegacy}],execute:function(){s._RF.push({},"8b000DlStVJ5rYkCs5GQBAQ","Mafia_BasePlayerData",void 0);i("MafiaBasePlayerData",function(){function i(){this.userId=void 0,this.name=void 0,this.avatar=void 0,this.sessionId=void 0,this.playerNumber=void 0,this.type=void 0,this.isOnline=void 0,this.isConnected=void 0,this.isReplacedByBot=void 0,this.isKickedOut=void 0,this.isReady=void 0,this.score=void 0}return i.prototype.copyFrom=function(i){this.userId=i.userId,this.name=i.name,this.avatar=i.avatar,this.sessionId=i.sessionId,this.playerNumber=i.playerNumber,this.type=i.type,this.isOnline=i.isOnline,this.isConnected=i.isConnected,this.isReplacedByBot=i.isReplacedByBot,this.isKickedOut=i.isKickedOut,this.isReady=i.isReady,this.score=i.score},i}());s._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_BaseRoomSettings.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"deb605Z3CxFvIWP3DgiTvl4","Mafia_BaseRoomSettings",void 0);e("DefaultRoomSettings",{maxPlayers:8,minPlayers:2,maxClients:8,countdownTimeInSeconds:3,allowLateJoin:!0,maxReconnectionAttempts:3,reconnectionAttemptInterval:1e3,reconnectionTime:1e4,gameFPS:30,serverFPS:30,patchRate:1e3}),e("MafiaBaseRoomSettings",function(){function e(){this.maxPlayers=void 0,this.minPlayers=void 0,this.maxClients=void 0,this.countdownTimeInSeconds=void 0,this.allowLateJoin=void 0,this.maxReconnectionAttempts=void 0,this.reconnectionAttemptInterval=void 0,this.reconnectionTime=void 0,this.gameFPS=void 0,this.serverFPS=void 0,this.patchRate=void 0}return e.prototype.copyFrom=function(e){this.maxPlayers=e.maxPlayers,this.minPlayers=e.minPlayers,this.maxClients=e.maxClients,this.countdownTimeInSeconds=e.countdownTimeInSeconds,this.allowLateJoin=e.allowLateJoin,this.reconnectionTime=e.reconnectionTime,this.gameFPS=e.gameFPS,this.serverFPS=e.serverFPS,this.patchRate=e.patchRate},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_BaseRoomState.ts",["cc","./Mafia_RoomTypes.ts"],(function(t){var o,s;return{setters:[function(t){o=t.cclegacy},function(t){s=t.MafiaRoomStatus}],execute:function(){o._RF.push({},"127b1osQO9JAak5yTMMaFTV","Mafia_BaseRoomState",void 0);t("MafiaBaseRoomState",function(){function t(t,o){this.currentRoomStatus=s.WAITING_FOR_PLAYERS,this.previousRoomStatus=s.NONE,this.roomSettings=void 0,this.playersData=void 0,this.spectatorsData=void 0,this.roomSettings=t,this.playersData=o,this.spectatorsData=[]}return t.prototype.copyFrom=function(t){this.currentRoomStatus=t.currentRoomStatus,this.previousRoomStatus=t.previousRoomStatus,this.roomSettings.copyFrom(t.roomSettings)},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_CameraManger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,a,s,h,c,d,l,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.UITransform,h=e.Camera,c=e.screen,d=e.sys,l=e.view,u=e.math,g=e.Component}],execute:function(){var f,p,w,m,H,b,A,S,v,z,y,O;o._RF.push({},"150f90QrSRP7bztAHTo8GP7","Mafia_CameraManger",void 0);var R=a.ccclass,C=a.property;(0,a.executionOrder)(-1);e("MafiaCameraManger",(f=R("MafiaCameraManger"),p=C({type:s}),f(((O=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"canvasUITransform",H,r(t)),n(t,"designHeight",b,r(t)),n(t,"designWidth",A,r(t)),n(t,"defaultOrthoHeight",S,r(t)),n(t,"minOrthoHeight",v,r(t)),n(t,"maxOrthoHeight",z,r(t)),n(t,"safeAreaPadding",y,r(t)),t.designAspectRatio=void 0,t.currentAspectRatio=void 0,t.camera=null,t.windowWidth=1080,t.windowHeight=1920,t}i(t,e);var o=t.prototype;return o.onLoad=function(){t.instance=this,this.designAspectRatio=this.designWidth/this.designHeight,this.camera=this.node.getComponent(h)},o.start=function(){var e=this;this.updateScreenSize(),this.adaptCameraToScreen(),window.addEventListener("resize",(function(){e.updateScreenSize(),e.adaptCameraToScreen()}))},o.update=function(e){},o.updateScreenSize=function(){this.windowWidth=c.windowSize.width||window.innerWidth,this.windowHeight=c.windowSize.height||window.innerHeight,this.currentAspectRatio=this.windowWidth/this.windowHeight,console.log("Window Size: "+this.windowWidth+"x"+this.windowHeight+", Aspect Ratio: "+this.currentAspectRatio.toFixed(2))},o.adaptCameraToScreen=function(){if(this.camera){var e=0,t=0,i=0,n=0;if(d.os===d.OS.IOS||d.os===d.OS.ANDROID){var r=l.getVisibleSize(),o=l.getVisibleOrigin();r&&(e=o.y,t=this.windowHeight-(o.y+r.height),i=o.x,n=this.windowWidth-(o.x+r.width))}console.log("safeAreaTop",e),console.log("safeAreaBottom",t),console.log("safeAreaLeft",i),console.log("safeAreaRight",n);var a=this.windowHeight-e-t-2*this.safeAreaPadding,s=this.windowWidth-i-n-2*this.safeAreaPadding,h=s/a;console.log("windowWidth",this.windowWidth),console.log("windowHeight",this.windowHeight),console.log("Effective Size: "+s+"x"+a+", Aspect Ratio: "+h.toFixed(2));var c=this.currentAspectRatio>=1,g=this.defaultOrthoHeight;if(c)console.log("=== Landscape Mode ==="),g=this.defaultOrthoHeight*(1/this.currentAspectRatio)*1.5;else{console.log("=== Portrait Mode ===");var f=.6/Math.min(this.currentAspectRatio,.6);g=this.defaultOrthoHeight*f}g=u.clamp(g,this.minOrthoHeight,this.maxOrthoHeight),this.camera.orthoHeight=g,console.log("Camera Ortho Height: "+g.toFixed(2))}},o.getWidth=function(){return 2*this.camera.orthoHeight*this.currentAspectRatio},o.getCurrentOrthoHeight=function(){return this.camera.orthoHeight},o.refreshCameraAdaptation=function(){this.updateScreenSize(),this.adaptCameraToScreen()},t}(g)).instance=null,H=t((m=O).prototype,"canvasUITransform",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(m.prototype,"designHeight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1920}}),A=t(m.prototype,"designWidth",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),S=t(m.prototype,"defaultOrthoHeight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 820}}),v=t(m.prototype,"minOrthoHeight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 750}}),z=t(m.prototype,"maxOrthoHeight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1080}}),y=t(m.prototype,"safeAreaPadding",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),w=m))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_Clock.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_GameState.ts","./MafiaGameHandler.ts","./Mafia_GameManager.ts","./Mafia_GameMessageType.ts","./Mafia_NetworkManager.ts"],(function(t){var i,e,n,a,o,l,r,s,c,u,g,h,m,p,f,k;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,r=t.Node,s=t.Label,c=t.Vec3,u=t.tween,g=t.Component},function(t){h=t.MafiaGameState},function(t){m=t.MafiaGameHandler},function(t){p=t.MafiaGameManager},function(t){f=t.MafiaGameMessageType},function(t){k=t.MafiaNetworkManager}],execute:function(){var C,b,d,y,v,T,A,M,w,L,I,S,P,D,G;o._RF.push({},"37a7fs7sUBLAKsvnT++Ytdq","Mafia_Clock",void 0);var _=l.ccclass,N=l.property;t("MafiaClock",(C=_("MafiaClock"),b=N({type:r,tooltip:"Clock display"}),d=N({type:s,tooltip:"Timer label with button"}),y=N({type:s}),v=N({type:r}),T=N({type:r}),A=N({type:s}),C((L=i((w=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,n(i,"clockContainer",L,a(i)),n(i,"timerLabel",I,a(i)),n(i,"infoLabel",S,a(i)),n(i,"button",P,a(i)),n(i,"clock",D,a(i)),n(i,"speakingLabel",G,a(i)),i.timer=0,i.localPlayerId="",i.isClockAnimating=!1,i.initialClockContainerPosition=new c(0,0,0),i.initialClockContainerAngle=0,i.clockAnimationTween=null,i}e(i,t);var o=i.prototype;return o.initialize=function(t){this.localPlayerId=p.Instance.GetMyPlayerData().userId,this.initialClockContainerPosition=this.clockContainer.position.clone(),this.initialClockContainerAngle=this.clockContainer.angle},o.update=function(t){this.timer<=0||(this.updateTimer(t),this.updateTimerDisplay())},o.updateTimer=function(t){this.timer=Math.max(0,this.timer-t)},o.updateTimerDisplay=function(){var t=Math.floor(this.timer)+"s";this.timerLabel.string=t;var i=this.timer>5?m.Instance.villagersColor:m.Instance.spyColor;if(this.timerLabel.color=i,this.timer<=3&&this.timer>0){var e=m.Instance.getRoomState();e&&(e.currentGameState===h.WORD_DESCRIPTION||e.currentGameState===h.VOTING)&&this.animateLowTimeClock(this.clock)}},o.animateLowTimeClock=function(t){var i=this;if(!this.isClockAnimating){this.isClockAnimating=!0;var e=this.initialClockContainerPosition.clone(),n=this.initialClockContainerAngle;this.clockAnimationTween=u(t).to(.2,{position:new c(e.x,e.y+20,e.z)}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.1,{angle:n+15}).to(.1,{angle:n-15}).to(.2,{position:e,angle:n}).call((function(){i.isClockAnimating=!1})).start()}},o.setTimer=function(t){this.timer=t,this.updateTimerDisplay()},o.onServerRoomStateChange=function(t){switch(t.currentGameState){case h.WORD_DESCRIPTION:this.handleWordDescriptionState(t);break;case h.VOTING:this.handleVotingState(t);break;default:this.hideAllClocks()}},o.handleWordDescriptionState=function(t){var i=t.describingPlayerId===this.localPlayerId;if(this.setTimer(t.roomSettings.descriptionTimeLimit),this.infoLabel.string="Your turn to Speak",i)this.showActivePlayerClock(),this.button.active=!0;else{this.hideAllClocks(),this.speakingLabel.node.active=!0;var e=t.getPlayerByUserId(t.describingPlayerId),n=this.truncateName(e.name);e&&(this.speakingLabel.string=n+" is Speaking")}},o.handleVotingState=function(t){this.setTimer(t.roomSettings.votingTimeLimit),this.showActivePlayerClock(),this.infoLabel.string="Time to Vote",this.button.active=!1},o.showActivePlayerClock=function(){this.resetClockAnimation(),this.clockContainer.active=!0,this.speakingLabel.node.active=!1},o.hideAllClocks=function(){this.clockContainer.active=!1,this.speakingLabel.node.active=!1,this.resetClockAnimation()},o.resetClockAnimation=function(){this.clockAnimationTween&&this.clockAnimationTween.stop(),this.clock.angle=this.initialClockContainerAngle,this.clock.position=this.initialClockContainerPosition.clone(),this.isClockAnimating=!1},o.onButtonClick=function(){k.Instance.sendMessage(f.PLAYER_DONE_DESCRIBING,"")},o.truncateName=function(t){var i=t.split(" ")[0];return i.length>8?i.substring(0,8)+"...":i},i}(g)).prototype,"clockContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(w.prototype,"timerLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(w.prototype,"infoLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(w.prototype,"button",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(w.prototype,"clock",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(w.prototype,"speakingLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=w))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_CountDownScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts"],(function(n){var t,e,o,i,c,a,r,u,l,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,a=n._decorator,r=n.Label,u=n.tween,l=n.Vec3},function(n){s=n.MafiaMenu}],execute:function(){var d,w,p,f,h;c._RF.push({},"3dc1dnlbAFCt5Kw25yShK3d","Mafia_CountDownScreen",void 0);var y=a.ccclass,T=a.property;n("MafiaCountdownScreen",(d=y("MafiaCountdownScreen"),w=T({type:r}),d((h=t((f=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return(t=n.call.apply(n,[this].concat(c))||this)._countdownTween=null,o(t,"countdownText",h,i(t)),t}e(t,n);var c=t.prototype;return c.onLoad=function(){n.prototype.onLoad.call(this)},c.onDestroy=function(){},c.Open=function(){n.prototype.Open.call(this),this.initialization()},c.Close=function(){n.prototype.Close.call(this),null!=this._countdownTween&&this._countdownTween.stop()},c.initCountdownTween=function(){var n=this;this.countdownText.node.active=!0,this._countdownTween=u(this.countdownText.node);for(var t=function(t){n._countdownTween.call((function(){n.countdownText.string=t.toString(),n.countdownText.node.scale=l.ONE.clone().multiplyScalar(2)})).to(.4,{scale:l.ONE.clone().multiplyScalar(1)},{easing:"sineIn"}).delay(.6).start()},e=3;e>=1;e--)t(e);this._countdownTween.call((function(){n.deactivateScreen()}))},c.deactivateScreen=function(){this.countdownText.string="",this.countdownText.node.active=!1},c.initialization=function(){this.initCountdownTween(),this._countdownTween.start()},t}(s)).prototype,"countdownText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_EndRoundScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts","./MafiaGameHandler.ts","./Mafia_PlayerAvatar.ts"],(function(e){var r,t,a,i,n,l,o,s,u,p,c,d,y,f,g;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Sprite,s=e.Label,u=e.Layout,p=e.Node,c=e.Prefab,d=e.instantiate},function(e){y=e.MafiaMenu},function(e){f=e.MafiaGameHandler},function(e){g=e.MafiaPlayerAvatar}],execute:function(){var v,h,m,b,S,I,D,w,N,W,A,C,M,R,z,F,V,k,L,P,_;n._RF.push({},"623bfmdNW1Ds6bkt4iZR28n","Mafia_EndRoundScreen",void 0);var E=l.ccclass,B=l.property,H="[EndRoundScreen]";e("MafiaEndRoundScreen",(v=E("MafiaEndRoundScreen"),h=B({type:o,tooltip:"Background"}),m=B({type:s,tooltip:"Heading"}),b=B({type:u,tooltip:"Players Layout"}),S=B({type:g,tooltip:"Spy Avatar"}),I=B({type:s,tooltip:"Spy Name"}),D=B({type:p,tooltip:"Villagers Container"}),w=B({type:c,tooltip:"Avatar with name"}),N=B({type:s,tooltip:"Spy Word"}),W=B({type:s,tooltip:"Villagers Word"}),v((M=r((C=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return r=e.call.apply(e,[this].concat(n))||this,a(r,"headingBackground",M,i(r)),a(r,"heading",R,i(r)),a(r,"playersLayout",z,i(r)),a(r,"spyAvatar",F,i(r)),a(r,"spyName",V,i(r)),a(r,"villagersContainer",k,i(r)),a(r,"avatarWithName",L,i(r)),a(r,"spyWord",P,i(r)),a(r,"villagersWord",_,i(r)),r.villagers=[],r}t(r,e);var n=r.prototype;return n.Open=function(){e.prototype.Open.call(this),this.setupScreen()},n.Close=function(){e.prototype.Close.call(this)},n.setupScreen=function(){var e=f.Instance.getRoomState();if(e){var r=e.playersData.find((function(r){return r.userId===e.currentSpyUserId}));if(r){var t=!r.isDead;this.updateScreenHeader(t),this.updateSpyDisplay(),this.updateVillagersDisplay(),this.updateWords()}else console.error(H+" Cannot find spy player with ID: "+e.currentSpyUserId)}else console.error(H+" Cannot setup screen: Room state is null")},n.updateScreenHeader=function(e){var r=f.Instance;this.heading.string=e?"Villagers Failed":"Spies Failed",this.headingBackground.color=e?r.spyColor:r.villagersColor,this.playersLayout.verticalDirection=e?1:0},n.updateSpyDisplay=function(){var e=f.Instance,r=e.getRoomState();if(r){var t=r.playersData.find((function(e){return e.userId===r.currentSpyUserId}));if(t){var a=e.getPlayer(t.userId);a&&(this.spyAvatar.setAvatarFromSpriteFrame(a.playerAvatar.playerAvatar.spriteFrame),this.spyName.string=a.playerName,this.spyAvatar.ShowSkull(t.isDead))}}},n.updateVillagersDisplay=function(){var e=f.Instance.getRoomState();if(e){var r=e.currentSpyUserId,t=e.playersData.filter((function(e){return e.userId!==r})),a=this.villagers.map((function(e){return e.userId}));this.removeOldVillagers(a,t),this.addNewVillagers(a,t)}},n.removeOldVillagers=function(e,r){var t=this;this.villagers.filter((function(e){return!r.some((function(r){return r.userId===e.userId}))})).forEach((function(e){var r=t.villagers.indexOf(e);-1!==r&&(t.villagers.splice(r,1),e.node.destroy())}))},n.addNewVillagers=function(e,r){var t=this;r.filter((function(r){return!e.some((function(e){return e===r.userId}))})).forEach((function(e){t.createVillagerDisplay(e)}))},n.createVillagerDisplay=function(e){var r,t=f.Instance,a=t.getPlayer(e.userId);if(a){var i=d(this.avatarWithName),n=i.getComponent(g),l=null==(r=i.getChildByName("Name"))?void 0:r.getComponent(s);if(!n||!l)return console.error(H+" Failed to get components from villager prefab"),void i.destroy();n.setAvatarFromSpriteFrame(a.playerAvatar.playerAvatar.spriteFrame),l.string=t.TruncateName(a.playerName),n.initialize(!1,e.userId),this.villagers.push(n),this.villagersContainer.addChild(i),n.ShowSkull(e.isDead)}},n.updateWords=function(){var e=f.Instance.getRoomState();if(e){var r=e.playersData.find((function(r){return r.userId===e.currentSpyUserId})),t=e.playersData.find((function(r){return r.userId!==e.currentSpyUserId}));r&&t&&(this.spyWord.string=r.describingWord,this.villagersWord.string=t.describingWord)}},r}(y)).prototype,"headingBackground",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(C.prototype,"heading",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(C.prototype,"playersLayout",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=r(C.prototype,"spyAvatar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=r(C.prototype,"spyName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(C.prototype,"villagersContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(C.prototype,"avatarWithName",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(C.prototype,"spyWord",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(C.prototype,"villagersWord",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=C))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_FitToScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_CameraManger.ts"],(function(e){var t,i,n,r,o,a,s,c,d,u,h,l,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.CCBoolean,c=e.director,d=e.Director,u=e.UITransform,h=e.screen,l=e.Widget,p=e.Component},function(e){f=e.MafiaCameraManger}],execute:function(){var g,w,y,v,T;o._RF.push({},"57e95MMlQtJ1o1ktV5cFv8p","Mafia_FitToScreen",void 0);var S=a.ccclass,m=a.property;e("MafiaFitToScreen",(g=S("MafiaFitToScreen"),w=m({type:s}),g((T=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"updateWidgetsRecursively",T,r(t)),t}i(t,e);var o=t.prototype;return o.onEnable=function(){var e=this;c.once(d.EVENT_AFTER_UPDATE,(function(){e.refresh()}))},o.setUiTransformToScreenSize=function(){var e=this.node.getComponent(u),t=f.instance.getCurrentOrthoHeight()/f.instance.defaultOrthoHeight,i=h.windowSize.width||window.innerWidth,n=h.windowSize.height||window.innerHeight,r=f.instance.designHeight*t,o=r*i/n;console.log("windowWidth",i,"windowHeight",n),e.setContentSize(o,r)},o.refresh=function(){this.setUiTransformToScreenSize(),this.updateWidgetsRecursively&&this.updateWidgetsInHierarchy()},o.updateWidgetsInHierarchy=function(){this.updateWidgetAndDescendants(this.node)},o.updateWidgetAndDescendants=function(e){var t=this,i=e.getComponent(l);i&&this.node.uuid!=e.uuid&&i.updateAlignment(),e.children.forEach((function(e){t.updateWidgetAndDescendants(e)}))},t}(p)).prototype,"updateWidgetsRecursively",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=v))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/mafia_game",["./Mafia_NetworkConfig.ts","./Mafia_NetworkManager.ts","./Mafia_CameraManger.ts","./Mafia_FitToScreen.ts","./Mafia_MiloLayout.ts","./Mafia_PBLogger.ts","./Mafia_PbExtensions.ts","./Mafia_PbSaveSystem.ts","./Mafia_Utils.ts","./Mafia_BasePlayerData.ts","./Mafia_BaseRoomSettings.ts","./Mafia_BaseRoomState.ts","./Mafia_NetworkTypes.ts","./Mafia_PlayerTypes.ts","./Mafia_RoomTypes.ts","./MafiaGameHandler.ts","./Mafia_AudioManager.ts","./Mafia_Clock.ts","./Mafia_Player.ts","./Mafia_PlayerAvatar.ts","./Mafia_Timer.ts","./Mafia_TopInfo.ts","./Mafia_GameManager.ts","./Mafia_RoomState.ts","./Mafia_GameMessageType.ts","./Mafia_GameState.ts","./Mafia_CountDownScreen.ts","./Mafia_EndRoundScreen.ts","./Mafia_Menu.ts","./Mafia_PreparationScreen.ts","./Mafia_StartRoundScreen.ts","./Mafia_UIManager.ts","./Mafia_VotingResultsScreen.ts","./Mafia_VotingScreen.ts","./Mafia_WaitingScreen.ts","./Mafia_WordDescriptionScreen.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Mafia_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_RoomState.ts","./MiloGameSDK.ts","./Mafia_RoomTypes.ts","./Mafia_NetworkManager.ts","./Mafia_NetworkTypes.ts"],(function(e){var t,a,n,o,s,i,r,c,m,u,h,l,S,g;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){n=e.cclegacy,o=e._decorator,s=e.EventTarget,i=e.Component},function(e){r=e.MafiaRoomState},function(e){c=e.MiloGameSDK},function(e){m=e.MafiaRoomStatus},function(e){u=e.ConnectionStateChangeEvent,h=e.ServerRoomStateChangeEvent,l=e.MafiaNetworkManager},function(e){S=e.MafiaNetworkEvents,g=e.MafiaConnectionState}],execute:function(){var f,_;n._RF.push({},"20a0fJJBhpNX7tW3UyzQ2UF","Mafia_GameManager",void 0);var d=o.ccclass,C=o.executionOrder,v=e("RoomStatusChangeEvent",new s);e("MafiaGameManager",d("MafiaGameManager")(f=C(-2)(((_=function(e){function n(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._roomStatus=m.NONE,t._won=!1,t._handledGameOverCallbacks=!1,t._serverStateCopy=null,t.miloSDK=new c,t.gameStartTime=0,t}t(n,e);var o=n.prototype;return o.onLoad=function(){n._instance&&this.node.destroy(),n._instance=this,this.miloSDK.init({gameId:"mafia-game",debug:!0}),this.sendGameLoaded(),this.registerEvents()},o.onDestroy=function(){this.cleanup()},o.cleanup=function(){this.unregisterEvents(),n._instance===this&&(n._instance=null)},o.sendGameLoaded=function(){var e={timestamp:Date.now()};this.miloSDK.gameLoaded(e)},o.sendGameStarted=function(){this.gameStartTime=Date.now();var e={timestamp:this.gameStartTime};this.miloSDK.gameStarted(e)},o.sendGameEnded=function(){var e=this,t=Date.now(),a={duration:this.gameStartTime>0?t-this.gameStartTime:0,hasWinningScreen:!1};setTimeout((function(){e.miloSDK.gameEnded(a)}),2e3)},o.registerEvents=function(){u.on(S.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),h.on(S.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},o.unregisterEvents=function(){u.off(S.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),h.off(S.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this)},o.onConnectionStateChange=function(e,t){switch(t){case g.DISCONNECTED:this._roomStatus!==m.END_GAME&&l.Instance.reconnect();break;case g.KICKED_OUT:}},o.onServerRoomStateChange=function(e){this.log("ServerRoomStateChange Message: "+e.currentRoomStatus),this.log(!this._serverStateCopy),this._serverStateCopy||(this._serverStateCopy=new r,this._serverStateCopy.copyFrom(e)),e.currentRoomStatus===m.END_GAME&&(console.log("Game Over"),this.handleWon(e)),this.log("Setting room status to: ",e.currentRoomStatus),this.setRoomStatus(e.currentRoomStatus)},o.resetServerState=function(e){this._serverStateCopy||(this._serverStateCopy=new r),this._serverStateCopy.copyFrom(e)},o.handleWon=function(e){},o.setRoomStatus=function(e){if(this._roomStatus!==e){console.log("[GameManager] ==== Room Status Change ==== :",e);var t=this._roomStatus;this._roomStatus=e,this.OnRemoteGameStateChange(e),console.log("[GameManager] Emitting room status change event"),v.emit(S.ROOM_STATUS_CHANGE,t,e)}},o.GetMyPlayerData=function(){var e,t=l.Instance.CurrentRoom.sessionId;return null==(e=this._serverStateCopy)?void 0:e.playersData.find((function(e){return e.sessionId===t}))},o.GetWinnerPlayerData=function(){return null},o.OnRemoteGameStateChange=function(e){switch(console.log("RemoteGameStateChange Message: "+e),e){case m.NONE:case m.WAITING_FOR_PLAYERS:case m.COUNTDOWN:break;case m.GAME_SIMULATION:this.sendGameStarted();break;case m.END_GAME:this.sendGameEnded(),this.HandleGameOverCallbacks();break;default:console.warn("Unhandled room status: "+e)}},o.HandleGameOverCallbacks=function(){this._handledGameOverCallbacks?console.log("Already handled game over callbacks"):this._handledGameOverCallbacks=!0},a(n,null,[{key:"Instance",get:function(){return this._instance}}]),n}(i))._instance=null,f=_))||f)||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_GameMessageType.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"fdf73+b1OpLfpEGWvKuAZY9","Mafia_GameMessageType",void 0);e("MafiaGameMessageType",function(e){return e.NONE="none",e.SET_STATE="set_state",e.PLAYER_SELECT_CATEGORY="player_select_category",e.PLAYER_DONE_DESCRIBING="player_done_describing",e.PLAYER_VOTE="player_vote",e}({}));a._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_GameState.ts",["cc"],(function(R){var O;return{setters:[function(R){O=R.cclegacy}],execute:function(){O._RF.push({},"f3fd4TufRZHtKazYC085JyL","Mafia_GameState",void 0);R("MafiaGameState",function(R){return R[R.NONE=0]="NONE",R[R.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",R[R.START_ROUND=2]="START_ROUND",R[R.CATEGORY_SELECTION=3]="CATEGORY_SELECTION",R[R.PREPARATION=4]="PREPARATION",R[R.WORD_DESCRIPTION=5]="WORD_DESCRIPTION",R[R.VOTING=6]="VOTING",R[R.VOTING_RESULTS=7]="VOTING_RESULTS",R[R.END_ROUND=8]="END_ROUND",R[R.GAME_OVER=9]="GAME_OVER",R}({}));O._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_PBLogger.ts"],(function(e){var n,t,i,o,a,r,c,l,u,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Node,l=e.CCString,u=e.Component},function(e){s=e.MafiaPBLogger}],execute:function(){var p,f,h,d,y,g,M;a._RF.push({},"8c5d0A4WHpGsL9G+FTlKBPq","Mafia_Menu",void 0);var m=r.ccclass,v=r.property;e("MafiaMenu",(p=m("MafiaMenu"),f=v({type:c}),h=v({type:l}),p((g=n((y=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,i(n,"content",g,o(n)),i(n,"menuName",M,o(n)),n.isOpened=!1,n}t(n,e);var a=n.prototype;return a.onLoad=function(){null==this.content&&(this.content=this.node.getChildByName("Content"))},a.Open=function(){this.content.active=!0,this.isOpened=!0},a.Close=function(){this.content.active=!1,this.isOpened=!1},a.initialize=function(){s.info("Menu initialize called")},n}(u)).prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=n(y.prototype,"menuName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_MiloLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,a,o,s,c,r,h,T,u,p,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,c=t._decorator,r=t.Enum,h=t.Size,T=t.Node,u=t.Vec3,p=t.UITransform,_=t.Component}],execute:function(){var l,d,E,g,y,f,O,C,R,L,m,v,N,I,H;s._RF.push({},"e36ff/Ql1lCXIUDONHBv7XU","Mafia_MiloLayout",void 0);var b=c.ccclass,M=c.property,A=t("MiloLayoutType",function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.GRID=2]="GRID",t}({})),w=t("MiloLayoutAlign",function(t){return t[t.LEFT_TOP=0]="LEFT_TOP",t[t.CENTER_TOP=1]="CENTER_TOP",t[t.RIGHT_TOP=2]="RIGHT_TOP",t[t.LEFT_CENTER=3]="LEFT_CENTER",t[t.CENTER=4]="CENTER",t[t.RIGHT_CENTER=5]="RIGHT_CENTER",t[t.LEFT_BOTTOM=6]="LEFT_BOTTOM",t[t.CENTER_BOTTOM=7]="CENTER_BOTTOM",t[t.RIGHT_BOTTOM=8]="RIGHT_BOTTOM",t}({}));t("MafiaMiloLayout",(l=b("MafiaMiloLayout"),d=M({type:r(A)}),E=M({type:r(A)}),g=M({type:r(w)}),y=M({type:r(w)}),f=M({visible:function(){return this._layoutType===A.GRID}}),l((R=e((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"_layoutType",R,a(e)),n(e,"_alignment",L,a(e)),n(e,"_spacingX",m,a(e)),n(e,"_spacingY",v,a(e)),n(e,"_columns",N,a(e)),n(e,"_padding",I,a(e)),n(e,"_autoResize",H,a(e)),e._activeChildCount=0,e._layoutSize=new h(0,0),e._lastChildActiveState=[],e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.on(T.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(T.EventType.CHILD_REMOVED,this.onChildRemoved,this)},s.onDestroy=function(){this.node.off(T.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(T.EventType.CHILD_REMOVED,this.onChildRemoved,this),this.removeAllChildListeners()},s.onChildRemoved=function(t){this.removeChildListener(t),this.updateLayout()},s.removeAllChildListeners=function(){var t=this;this.node.children.forEach((function(e){t.removeChildListener(e)}))},s.removeChildListener=function(t){t.__miloLayoutActiveHandler&&(t.off(T.EventType.ACTIVE_IN_HIERARCHY_CHANGED,t.__miloLayoutActiveHandler),t.__miloLayoutActiveHandler=null)},s.start=function(){this._lastChildActiveState=this.node.children.map((function(t){return t.active})),this.updateLayout(),this.addChildActiveListeners()},s.addChildActiveListeners=function(){var t=this;this.node.children.forEach((function(e){t.addChildActiveListener(e)}))},s.addChildActiveListener=function(t){var e=this;t.off(T.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this.onChildActiveChanged,this);var i=function(){e.scheduleOnce((function(){e.updateLayout()}),0)};t.__miloLayoutActiveHandler=i,t.on(T.EventType.ACTIVE_IN_HIERARCHY_CHANGED,i)},s.onChildActiveChanged=function(t){},s.onEnable=function(){this.updateLayout()},s.getAlignmentOffset=function(t){var e,i=new u,n=(null==(e=this.node.getComponent(p))?void 0:e.contentSize)||new h(0,0);switch(console.log("getAlignmentOffset",t,n),this._alignment){case w.LEFT_TOP:case w.LEFT_CENTER:case w.LEFT_BOTTOM:i.x=this._padding;break;case w.CENTER_TOP:case w.CENTER:case w.CENTER_BOTTOM:i.x=(n.width-t.width)/2;break;case w.RIGHT_TOP:case w.RIGHT_CENTER:case w.RIGHT_BOTTOM:i.x=n.width-t.width-this._padding}switch(this._alignment){case w.LEFT_TOP:case w.CENTER_TOP:case w.RIGHT_TOP:i.y=-this._padding;break;case w.LEFT_CENTER:case w.CENTER:case w.RIGHT_CENTER:i.y=-(n.height-t.height)/2;break;case w.LEFT_BOTTOM:case w.CENTER_BOTTOM:case w.RIGHT_BOTTOM:i.y=-n.height+t.height+this._padding}return i},s.updateLayout=function(){if(this.node){var t=this.node.children.filter((function(t){return t.active}));if(this._activeChildCount=t.length,0!==this._activeChildCount)switch(this._layoutType){case A.HORIZONTAL:this.updateHorizontalLayout(t);break;case A.VERTICAL:this.updateVerticalLayout(t);break;case A.GRID:this.updateGridLayout(t)}}},s.updateHorizontalLayout=function(t){var e=this,i=2*this._padding,n=0;t.forEach((function(a,o){var s=a.getComponent(p);s&&(i+=s.width,o<t.length-1&&(i+=e._spacingX),n=Math.max(n,s.height))}));var a=new h(i,n+2*this._padding),o=this.getAlignmentOffset(a),s=o.x;if(t.forEach((function(t){var i=t.getComponent(p);if(i){var a=i.height,c=i.width,r=o.y;switch(e._alignment){case w.LEFT_TOP:case w.CENTER_TOP:case w.RIGHT_TOP:r=o.y-e._padding;break;case w.LEFT_CENTER:case w.CENTER:case w.RIGHT_CENTER:r=o.y-(n-a)/2;break;case w.LEFT_BOTTOM:case w.CENTER_BOTTOM:case w.RIGHT_BOTTOM:r=o.y-n+a}t.position=new u(s+c/2,r-a/2,0),s+=c+e._spacingX}})),this._layoutSize=a,this._autoResize){var c=this.node.getComponent(p);c&&c.setContentSize(a)}},s.updateVerticalLayout=function(t){var e=this,i=2*this._padding,n=0;t.forEach((function(a,o){var s=a.getComponent(p);s&&(i+=s.height,o<t.length-1&&(i+=e._spacingY),n=Math.max(n,s.width))}));var a=new h(n+2*this._padding,i),o=this.getAlignmentOffset(a),s=o.y;if(t.forEach((function(t){var i=t.getComponent(p);if(i){var a=i.height,c=i.width,r=o.x;switch(e._alignment){case w.LEFT_TOP:case w.LEFT_CENTER:case w.LEFT_BOTTOM:r=o.x+e._padding;break;case w.CENTER_TOP:case w.CENTER:case w.CENTER_BOTTOM:r=o.x+(n-c)/2+e._padding;break;case w.RIGHT_TOP:case w.RIGHT_CENTER:case w.RIGHT_BOTTOM:r=o.x+n-c+e._padding}t.position=new u(r+c/2,s-a/2,0),s-=a+e._spacingY}})),this._layoutSize=a,this._autoResize){var c=this.node.getComponent(p);c&&c.setContentSize(a)}},s.updateGridLayout=function(t){if(!(this._columns<=0)){var e=Math.ceil(t.length/this._columns),i=0,n=0;t.forEach((function(t){var e=t.getComponent(p);e&&(i=Math.max(i,e.width),n=Math.max(n,e.height))}));var a=2*this._padding+i*this._columns+this._spacingX*(this._columns-1),o=2*this._padding+n*e+this._spacingY*(e-1),s=new h(a,o),c=this.getAlignmentOffset(s);console.log("[MiloLayout] Total size: ",s),console.log("[MiloLayout] Start pos: ",c);for(var r=0;r<e;r++){var T=Math.min(this._columns,t.length-r*this._columns),_=T*i+(T-1)*this._spacingX,l=0;switch(this._alignment){case w.CENTER_TOP:case w.CENTER:case w.CENTER_BOTTOM:l=(this._columns*i+(this._columns-1)*this._spacingX-_)/2;break;case w.RIGHT_TOP:case w.RIGHT_CENTER:case w.RIGHT_BOTTOM:l=this._columns*i+(this._columns-1)*this._spacingX-_}for(var d=0;d<T;d++){var E=r*this._columns+d;if(E>=t.length)break;var g=t[E],y=g.getComponent(p);if(y){var f=y.width,O=y.height,C=c.x+this._padding+d*(i+this._spacingX)+l,R=c.y-this._padding-r*(n+this._spacingY),L=C,m=R;switch(this._alignment){case w.LEFT_TOP:case w.LEFT_CENTER:case w.LEFT_BOTTOM:L=C;break;case w.CENTER_TOP:case w.CENTER:case w.CENTER_BOTTOM:L=C+(i-f)/2;break;case w.RIGHT_TOP:case w.RIGHT_CENTER:case w.RIGHT_BOTTOM:L=C+i-f}switch(this._alignment){case w.LEFT_TOP:case w.CENTER_TOP:case w.RIGHT_TOP:m=R;break;case w.LEFT_CENTER:case w.CENTER:case w.RIGHT_CENTER:m=R-(n-O)/2;break;case w.LEFT_BOTTOM:case w.CENTER_BOTTOM:case w.RIGHT_BOTTOM:m=R-n+O}g.position=new u(L+f/2,m-O/2,0)}}}if(this._layoutSize=s,this._autoResize){var v=this.node.getComponent(p);v&&v.setContentSize(s)}}},s.update=function(t){if(this.node&&this.node.children.length>0){var e=this.node.children.map((function(t){return t.active})),i=!1;if(this._lastChildActiveState.length!==e.length)i=!0;else for(var n=0;n<e.length;n++)if(this._lastChildActiveState[n]!==e[n]){i=!0;break}i&&(this._lastChildActiveState=e,this.updateLayout())}},s.onChildAdded=function(t){this.addChildActiveListener(t),this.updateLayout()},o(e,[{key:"layoutType",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this.updateLayout()}},{key:"alignment",get:function(){return this._alignment},set:function(t){this._alignment=t,this.updateLayout()}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX=t,this.updateLayout()}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY=t,this.updateLayout()}},{key:"columns",get:function(){return this._columns},set:function(t){this._columns=t,this.updateLayout()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this.updateLayout()}},{key:"autoResize",get:function(){return this._autoResize},set:function(t){this._autoResize=t,this.updateLayout()}}]),e}(_)).prototype,"_layoutType",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.HORIZONTAL}}),e(C.prototype,"layoutType",[E],Object.getOwnPropertyDescriptor(C.prototype,"layoutType"),C.prototype),L=e(C.prototype,"_alignment",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.LEFT_TOP}}),e(C.prototype,"alignment",[y],Object.getOwnPropertyDescriptor(C.prototype,"alignment"),C.prototype),m=e(C.prototype,"_spacingX",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(C.prototype,"spacingX",[M],Object.getOwnPropertyDescriptor(C.prototype,"spacingX"),C.prototype),v=e(C.prototype,"_spacingY",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(C.prototype,"spacingY",[M],Object.getOwnPropertyDescriptor(C.prototype,"spacingY"),C.prototype),N=e(C.prototype,"_columns",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),e(C.prototype,"columns",[f],Object.getOwnPropertyDescriptor(C.prototype,"columns"),C.prototype),I=e(C.prototype,"_padding",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(C.prototype,"padding",[M],Object.getOwnPropertyDescriptor(C.prototype,"padding"),C.prototype),H=e(C.prototype,"_autoResize",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(C.prototype,"autoResize",[M],Object.getOwnPropertyDescriptor(C.prototype,"autoResize"),C.prototype),O=C))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_NetworkConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_PBLogger.ts"],(function(e){var r,t,i,o,n,a,s,u,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.sys,u=e.Component},function(e){f=e.MafiaPBLogger}],execute:function(){var l,c,p,g,m,d,h,b,v,y,P,S,I,w,C;n._RF.push({},"75bbeEbPABFnrzgARe30U1N","Mafia_NetworkConfig",void 0);var N=a.ccclass,L=a.property;e("MafiaNetworkConfig",(l=N("MafiaNetworkConfig"),c=L({tooltip:"Server host address"}),p=L({tooltip:"Server port number"}),g=L({tooltip:"Use SSL for connections"}),m=L({tooltip:"Player identifier"}),d=L({tooltip:"Room identifier"}),h=L({tooltip:"Name of the game"}),l((y=r((v=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r=e.call.apply(e,[this].concat(n))||this,i(r,"serverHost",y,o(r)),i(r,"serverPort",P,o(r)),i(r,"useSSL",S,o(r)),i(r,"userId",I,o(r)),i(r,"roomId",w,o(r)),i(r,"gameName",C,o(r)),r}t(r,e);var n=r.prototype;return n.initNetworkConfig=function(){if(s.isBrowser){var e=new URLSearchParams(window.location.search),r="true"===e.get("debug");f.debug("Initializing network config (debug="+r+")"),r?this.parseQueryParams(e):this.parseInjectedConfig(),f.debug("Final network config:",{serverHost:this.serverHost,serverPort:this.serverPort,useSSL:this.useSSL,userId:this.userId,roomId:this.roomId,gameName:this.gameName})}},n.parseQueryParams=function(e){var r=this;f.debug("Parsing config from query parameters"),this.updateConfigFromQueryParam(e,"userId",(function(e){return r.userId=e})),this.updateConfigFromQueryParam(e,"roomId",(function(e){return r.roomId=e})),this.updateConfigFromQueryParam(e,"apiUrl",(function(e){return r.serverHost=e})),this.updateConfigFromQueryParam(e,"apiPort",(function(e){var t=parseInt(e);isNaN(t)||(r.serverPort=t)})),this.updateConfigFromQueryParam(e,"useSSL",(function(e){return r.useSSL="true"===e}))},n.parseInjectedConfig=function(){f.debug("Parsing config from injected GameConfig");try{var e=window.GameConfig;if(!e)return void f.debug("No injected GameConfig found");var r="string"==typeof e?JSON.parse(e):e;this.applyConfig(r)}catch(e){f.debug("Failed to parse injected GameConfig:",e)}},n.applyConfig=function(e){var r,t,i,o,n;e&&(this.userId=null!=(r=e.userId)?r:this.userId,this.roomId=null!=(t=e.roomId)?t:this.roomId,this.serverHost=null!=(i=e.apiUrl)?i:this.serverHost,this.serverPort=Number(null!=(o=e.apiPort)?o:this.serverPort),this.useSSL=null!=(n=e.useSSL)?n:this.useSSL)},n.updateConfigFromQueryParam=function(e,r,t){var i=e.get(r);null!=i&&t(i)},r}(u)).prototype,"serverHost",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"localhost"}}),P=r(v.prototype,"serverPort",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),S=r(v.prototype,"useSSL",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=r(v.prototype,"userId",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=r(v.prototype,"roomId",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"testroom1"}}),C=r(v.prototype,"gameName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Pictionary"}}),b=v))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./Mafia_NetworkTypes.ts","./Mafia_PlayerTypes.ts","./Mafia_PbSaveSystem.ts","./Mafia_NetworkConfig.ts","./Mafia_PBLogger.ts","./colyseus.js"],(function(t){var n,e,o,i,r,a,s,c,h,u,l,f,g,m,d,p,C,v,_,k,w;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.extends,a=t.createClass,s=t.asyncToGenerator,c=t.regeneratorRuntime},function(t){h=t.cclegacy,u=t._decorator,l=t.EventTarget,f=t.CCBoolean,g=t.Component},null,function(t){m=t.MafiaConnectionState,d=t.MafiaNetworkEvents,p=t.MafiaServerMessageType},function(t){C=t.MafiaPlayerType},function(t){v=t.MafiaPbSaveSystem},function(t){_=t.MafiaNetworkConfig},function(t){k=t.MafiaPBLogger},function(t){w=t.default}],execute:function(){var y,S,E,N,R,D,I,M;h._RF.push({},"3be38Y+E+RBhLFuL1FxpRfp","Mafia_NetworkManager",void 0);var T=u.ccclass,b=u.property,x={roomId:"testroom1",reconnectionToken:"eyJ"},O=t("ConnectionStateChangeEvent",new l),P=t("ServerRoomStateChangeEvent",new l),A=t("ServerMessageEvent",new l);t("MafiaNetworkManager",(y=T("MafiaNetworkManager"),S=b({type:f,tooltip:"Enable development mode for additional logging"}),E=b({type:_,tooltip:"Network configuration settings"}),y(((M=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,o(n,"isDevMode",D,i(n)),o(n,"networkConfig",I,i(n)),n._client=void 0,n._room=void 0,n._currentConnectionState=m.INITIALIZING,n._reconnectionData=r({},x),n}e(n,t);var h=n.prototype;return h.onLoad=function(){n._instance&&(this.log("NetworkManager instance already exists. Destroying duplicate."),this.node.destroy()),n._instance=this,this.networkConfig.initNetworkConfig(),this.isDevMode||k.setProductionMode(!0)},h.start=function(){this.initializeClient(),k.info("============ Initializing client ========="),k.info("============ Connecting to room ========="),this.connect(this.networkConfig.roomId,this.networkConfig.userId)},h.onDestroy=function(){this.cleanup()},h.cleanup=function(){this._room&&(this.leaveRoom(),this._room=null),this._client&&(this._client=null),this._currentConnectionState=m.INITIALIZING,this._reconnectionData=r({},x),n._instance===this&&(n._instance=null)},h.initializeClient=function(){var t=this.networkConfig.useSSL?"wss":"ws",n="";n=0==this.networkConfig.serverPort?t+"://"+this.networkConfig.serverHost:t+"://"+this.networkConfig.serverHost+":"+this.networkConfig.serverPort,this.log("Initializing client with endpoint: "+n),this._client=new w.Client(n)},h.shouldRejoin=function(){return!this.isDevMode&&(this._reconnectionData=v.LoadData(this.networkConfig.gameName),!!(this._reconnectionData&&this._reconnectionData.roomId&&this._reconnectionData.reconnectionToken)&&this._reconnectionData.roomId===this.networkConfig.roomId)},h.connect=function(){var t=s(c().mark((function t(n,e){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k.info("============ Connecting to room from connect function ========="),this.updateConnectionState(m.CONNECTING),!this.shouldRejoin()){t.next=7;break}return this.log("Rejoining room",n),t.next=6,this.rejoin();case 6:return t.abrupt("return");case 7:return t.prev=7,o=this.createPlayerData(e),this.log("Joining with options ",{player:o}),t.next=12,this._client.joinById(n,{player:o});case 12:this._room=t.sent,this.initAfterJoin(n),t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(7),this.handleConnectionError(t.t0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[7,16]])})));return function(n,e){return t.apply(this,arguments)}}(),h.initAfterJoin=function(t){this.updateConnectionState(m.JOINED_ROOM),this.log("Joined room "+t+" with sessionId: "+this._room.sessionId),this.initializeRoomCallbacks(),this.saveReconnectionData()},h.createAndJoinRoom=function(){var t=s(c().mark((function t(n,e){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.log("Creating room",n),this.updateConnectionState(m.CONNECTING),t.prev=2,o=this.createPlayerData(e),t.next=6,this._client.create("PictionaryRoom",{roomId:n,player:o,roomSettings:{maxClients:10}});case 6:this._room=t.sent,this.initAfterJoin(n),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),this.handleConnectionError(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,this,[[2,10]])})));return function(n,e){return t.apply(this,arguments)}}(),h.createPlayerData=function(t){return{userId:t,name:t,avatar:"randomProfilePicture",type:C.HUMAN}},h.initializeRoomCallbacks=function(){var t=this;console.log("============ Initializing room callbacks ========="),this._room?(this._room.onStateChange((function(t){P.emit(d.SERVER_ROOM_STATE_CHANGE,t)})),this._room.onLeave((function(n){4001===n?t.updateConnectionState(m.KICKED_OUT):t.updateConnectionState(m.DISCONNECTED)})),this._room.onMessage(p.KICKED_OUT,(function(){t.updateConnectionState(m.KICKED_OUT)})),this._room.onMessage("*",(function(t,n){A.emit(d.SERVER_MESSAGE,t,n)}))):this.log("Cannot initialize callbacks: Room is not defined")},h.updateConnectionState=function(t){if(this._currentConnectionState!==t){var n=this._currentConnectionState;this._currentConnectionState=t,this.log("Connection state changed: "+m[n]+" -> "+m[t]),O.emit(d.CONNECTION_STATE_CHANGE,n,t)}},h.reconnect=function(){var t=s(c().mark((function t(n,e,o){var i,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=1),void 0===e&&(e=10),void 0===o&&(o=2e3),this._currentConnectionState===m.DISCONNECTED||this._currentConnectionState===m.RECONNECTING){t.next=6;break}return this.log("Cannot reconnect: Current state is "+m[this._currentConnectionState]),t.abrupt("return");case 6:return this._room&&this._room.state&&(i=this._room.state).roomSettings&&i.roomSettings.maxReconnectionAttempts&&(e=i.roomSettings.maxReconnectionAttempts),this.updateConnectionState(m.RECONNECTING),this.log("Reconnect attempt "+n+"/"+e),t.prev=9,t.next=12,this.delay(o);case 12:if(this._room&&this._room.reconnectionToken){t.next=14;break}throw new Error("Reconnection token not available");case 14:return t.next=16,this._client.reconnect(this._room.reconnectionToken);case 16:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(m.JOINED_ROOM),this.log("Reconnected successfully."),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(9),this.handleReconnectionError(t.t0,n,e,o);case 27:case"end":return t.stop()}}),t,this,[[9,24]])})));return function(n,e,o){return t.apply(this,arguments)}}(),h.rejoin=function(){var t=s(c().mark((function t(n,e,o){var i,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=1),void 0===e&&(e=10),void 0===o&&(o=2e3),this.log("Rejoin attempt "+n+"/"+e),t.prev=4,t.next=7,this.delay(o);case 7:if(this._reconnectionData&&this._reconnectionData.reconnectionToken){t.next=9;break}throw new Error("Reconnection data not available");case 9:return i=this._reconnectionData.roomId+":"+this._reconnectionData.reconnectionToken,k.info("Using formatted reconnection token: ",i),t.next=13,this._client.reconnect(i);case 13:r=t.sent,this._room=r,this.saveReconnectionData(),this.initializeRoomCallbacks(),this.updateConnectionState(m.JOINED_ROOM),this.log("Rejoined successfully."),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(4),this.handleReconnectionError(t.t0,n,e,o,"reJoin");case 24:case"end":return t.stop()}}),t,this,[[4,21]])})));return function(n,e,o){return t.apply(this,arguments)}}(),h.delay=function(){var t=s(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,n)})));case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),h.handleConnectionError=function(t){var n=(null==t?void 0:t.message)||"Unknown error";this.log("Error connecting to room:",n),this.updateConnectionState(m.DISCONNECTED)},h.handleReconnectionError=function(t,n,e,o,i){void 0===i&&(i="reconnect");var r=(null==t?void 0:t.message)||"Unknown error";this.log(i+" attempt "+n+" failed:",r),n<e||-1===e?"reconnect"===i?this.reconnect(n+1,e,o):this.rejoin(n+1,e,o):(this.log("Max reconnection attempts reached. Please check your network or contact support."),this.updateConnectionState(m.DISCONNECTED))},h.saveReconnectionData=function(){if(k.info("============ Saving reconnection data ========="),this._room&&this._room.reconnectionToken){var t=this._room.reconnectionToken;t.includes(":")&&(t=t.split(":")[1]),k.info("saving Reconnection token: ",t),this._reconnectionData={roomId:this.networkConfig.roomId,reconnectionToken:t},v.SaveData(this.networkConfig.gameName,this._reconnectionData),k.info("Reconnection data saved")}else this.log("Cannot save reconnection data: Room or reconnection token not available")},h.leaveRoom=function(){var t=this;this._room?(this.log("Leaving room"),this._room.leave(!0).then((function(){return t.log("Left room successfully")})).catch((function(n){return t.log("Error leaving room:",(null==n?void 0:n.message)||"Unknown error")}))):this.log("Cannot leave room: Room is not defined")},h.getMySessionId=function(){return this._room.sessionId},h.sendMessage=function(t,n){this._room?(this.isDevMode&&this.log("Sending message:",t,n),this._room.send(t,n)):this.log("Cannot send message: Room is not defined")},h.log=function(t){if(this.isDevMode){for(var n=arguments.length,e=new Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];e.length>0?k.info.apply(k,["[NetworkManager] "+t].concat(e)):k.info("[NetworkManager] "+t)}},a(n,[{key:"CurrentRoom",get:function(){return this._room}},{key:"CurrentConnectionState",get:function(){return this._currentConnectionState}}],[{key:"Instance",get:function(){if(!this._instance)throw new Error("NetworkManager instance is not initialized.");return this._instance}}]),n}(g))._instance=null,D=n((R=M).prototype,"isDevMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=n(R.prototype,"networkConfig",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=R))||N));h._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_NetworkTypes.ts",["cc"],(function(E){var N;return{setters:[function(E){N=E.cclegacy}],execute:function(){N._RF.push({},"917450yHbdDfoiHLt9WC9RD","Mafia_NetworkTypes",void 0);E("MafiaNetworkEvents",function(E){return E[E.SERVER_ROOM_STATE_CHANGE=0]="SERVER_ROOM_STATE_CHANGE",E[E.CONNECTION_STATE_CHANGE=1]="CONNECTION_STATE_CHANGE",E[E.ROOM_STATUS_CHANGE=2]="ROOM_STATUS_CHANGE",E[E.GAME_STATE_CHANGE=3]="GAME_STATE_CHANGE",E[E.SERVER_MESSAGE=4]="SERVER_MESSAGE",E}({})),E("MafiaConnectionState",function(E){return E[E.INITIALIZING=0]="INITIALIZING",E[E.CONNECTING=1]="CONNECTING",E[E.CONNECTED=2]="CONNECTED",E[E.LOBBY=3]="LOBBY",E[E.JOINED_ROOM=4]="JOINED_ROOM",E[E.DISCONNECTED=5]="DISCONNECTED",E[E.RECONNECTING=6]="RECONNECTING",E[E.KICKED_OUT=7]="KICKED_OUT",E}({})),E("MafiaServerMessageType",function(E){return E.NONE="none",E.KICKED_OUT="kicked_out",E.PLAYER_CAMEBACK="player_cameback",E.PLAYER_JOINED="player_joined",E}({}));N._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_PbExtensions.ts",["cc","./Mafia_PBLogger.ts"],(function(){var t,n,e,i;return{setters:[function(i){t=i.cclegacy,n=i.Vec3,e=i.Component},function(t){i=t.MafiaPBLogger}],execute:function(){t._RF.push({},"148f4rScJ9CCpYq02Y6pLaL","Mafia_PbExtensions",void 0),n.prototype.clampMagnitude=function(t,n){if(!(t>n)){var e=this.length();return e>n?(this.normalize(),this.multiplyScalar(n)):e<t&&(this.normalize(),this.multiplyScalar(t)),this}console.error("min should be less than max")},e.prototype.log=function(){for(var t=this.constructor.name,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];i.info.apply(i,[t+" "].concat(e))},t._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_PBLogger.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"1f240GvJhZCS7g77Mtiwwuo","Mafia_PBLogger",void 0);var r=e("LogLevel",function(e){return e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e}({})),o=e("MafiaPBLogger",function(){function e(){}return e.debug=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];this.log(r.Debug,e,o)},e.info=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];this.log(r.Info,e,o)},e.warning=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];this.log(r.Warning,e,o)},e.error=function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];this.log(r.Error,e,o)},e.log=function(e,n,o){if(e>=this.currentLevel){var t,i=r[e]+": "+n;if((t=console).log.apply(t,[i].concat(o)),this.isProduction&&window.ReactNativeWebView)try{var a={type:"log",level:r[e],message:i,params:o};window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(a))}catch(e){console.error("Failed to send log to ReactNativeWebView:",e)}}},e.setLevel=function(e){this.currentLevel=e},e.setProductionMode=function(e){this.isProduction=e},e}());o.currentLevel=r.Debug,o.isProduction=!1,n._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_PbSaveSystem.ts",["cc","./Mafia_PBLogger.ts"],(function(a){var e,t,o,n;return{setters:[function(a){e=a.cclegacy,t=a._decorator,o=a.sys},function(a){n=a.MafiaPBLogger}],execute:function(){var r;e._RF.push({},"d2fa7MJJdNKspLZrCg4jToe","Mafia_PbSaveSystem",void 0);var c=t.ccclass;a("MafiaPbSaveSystem",c("MafiaPbSaveSystem")(r=function(){function a(){}return a.SaveData=function(a,e){n.info("============ Saving data in pb save system ========="),o.localStorage.setItem(a,JSON.stringify(e))},a.LoadData=function(a){return JSON.parse(o.localStorage.getItem(a))},a.RemoveData=function(a){o.localStorage.removeItem(a)},a.ClearAllData=function(){o.localStorage.clear()},a}())||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_GameState.ts","./Mafia_GameMessageType.ts","./Mafia_PlayerAvatar.ts","./MafiaGameHandler.ts","./Mafia_NetworkManager.ts"],(function(e){var t,i,a,n,r,o,s,l,u,c,d,p,h,f,m,y,v,I,g,S,b,P,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.CCInteger,l=e.Label,u=e.Sprite,c=e.Button,d=e.Node,p=e.Prefab,h=e.Color,f=e.instantiate,m=e.UITransform,y=e.Size,v=e.tween,I=e.Component},function(e){g=e.MafiaGameState},function(e){S=e.MafiaGameMessageType},function(e){b=e.MafiaPlayerAvatar},function(e){P=e.MafiaGameHandler},function(e){C=e.MafiaNetworkManager}],execute:function(){var w,D,R,L,T,M,N,B,A,E,z,F,G,V,k,U,_,x,O,W,Y,Z,H,j,q,J,K,X,Q,$,ee,te,ie,ae,ne,re,oe;r._RF.push({},"40162PXqm9DSbxUCrdBOLNu","Mafia_Player",void 0);var se=o.ccclass,le=o.property,ue=e("PlayerState",function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.IDLE=1]="IDLE",e[e.CATEGORY_SELECTION=2]="CATEGORY_SELECTION",e[e.DESCRIBING=3]="DESCRIBING",e[e.VOTING=4]="VOTING",e[e.END_GAME=5]="END_GAME",e}({}));e("MafiaPlayer",(w=se("MafiaPlayer"),D=le({type:s,tooltip:"Player's index in the game"}),R=le({type:l,tooltip:"Label to display player's name"}),L=le({type:b,tooltip:"Player Avatar"}),T=le({type:u,tooltip:"Sprite for player's description timer"}),M=le({type:c,tooltip:"Button to vote for a player"}),N=le({type:c,tooltip:"Button to display that player is selected for vote"}),B=le({type:d,tooltip:"Container for votes"}),A=le({type:d,tooltip:"Container for votes"}),E=le({type:p,tooltip:"Player Avatar Prefab"}),z=le({type:d,tooltip:"Sprite for player speaking animation"}),F=le({type:d}),G=le({type:d,tooltip:"Sprite for player speaking animation"}),V=le({type:d}),k=le({type:d,tooltip:"Sprite for player Tie status"}),U=le({type:d}),_=le({type:d}),x=le({type:d}),w((Y=t((W=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).userId="",t.playerName="",a(t,"index",Y,n(t)),a(t,"nameLabel",Z,n(t)),a(t,"playerAvatar",H,n(t)),a(t,"descriptionTimerSprite",j,n(t)),a(t,"voteButton",q,n(t)),a(t,"votedButton",J,n(t)),a(t,"votesContainerLeft",K,n(t)),a(t,"votesContainerRight",X,n(t)),a(t,"playerAvatarPrefab",Q,n(t)),a(t,"micSpriteLeft",$,n(t)),a(t,"micLeftFill",ee,n(t)),a(t,"micSpriteRight",te,n(t)),a(t,"micRightFill",ie,n(t)),a(t,"tieSprite",ae,n(t)),a(t,"skull",ne,n(t)),a(t,"addSymbol",re,n(t)),a(t,"avatar",oe,n(t)),t.playerState=ue.UNINITIALIZED,t.isLocal=!1,t.isInitialized=!1,t.isProfileInitialized=!1,t.roomSettings=null,t.profileImageUrl="",t.timer=0,t.rank=0,t.hasGuessedAnswer=!1,t.isDead=!1,t.voters=[],t.oddColor=new h(15,43,77,255),t.evenColor=new h(0,0,0,0),t.correctGuessColor=new h(0,255,0,125),t.currentPlayerColor=new h(255,215,0,125),t.localPlayerColor=new h(255,215,0,255),t.micSprite=null,t.micFill=null,t.votesContainer=null,t}i(t,e);var r=t.prototype;return r.onEnable=function(){this.updateBgColor()},r.onDisable=function(){},r.update=function(e){this.playerState===ue.DESCRIBING&&this.updateTimer(e)},r.IsDead=function(){return this.isDead},r.initialize=function(e,t,i){if(this.validateRoomState(e)){this.index=t,this.addSymbol.active=!1,this.avatar.active=!0,console.log("[Player] Initializing Player: "+this.index);var a=e.getPlayerByIndex(t);a?(i?(this.micSprite=this.micSpriteLeft,this.micFill=this.micLeftFill,this.votesContainer=this.votesContainerLeft):(this.micSprite=this.micSpriteRight,this.micFill=this.micRightFill,this.votesContainer=this.votesContainerRight),this.micSprite.active=!1,this.votesContainer.active=!1,this.loadProfile(a),this.setupPlayerData(a,e),this.updatePlayerState(e),this.sendReactNativeMessage({message:"player_initialized",data:a})):console.error("[Player] No profile data found for player index "+this.index)}},r.setupPlayerData=function(e,t){this.userId=e.userId,this.playerName=e.name,this.roomSettings=t.roomSettings,this.setScore(e.score),e.sessionId===C.Instance.CurrentRoom.sessionId&&(this.isLocal=!0,this.nameLabel.string="You",this.highlightLocalPlayer()),this.nameLabel.node.active=!0,this.isInitialized=!0,this.playerState=ue.IDLE},r.loadProfile=function(e){!this.isProfileInitialized&&e&&(console.log("[Player] Loading profile for player: "+e.name),this.nameLabel.string=P.Instance.TruncateName(e.name),this.profileImageUrl=e.avatar,this.playerAvatar.initialize(!0,e.userId),this.loadProfileImage(),this.isProfileInitialized=!0,this.isDead=e.isDead,e.isDead?this.skull.active=!0:this.skull.active=!1)},r.loadProfileImage=function(){this.profileImageUrl?this.playerAvatar.setAvatarFromUrl(this.profileImageUrl):console.warn("[Player] No profile image URL provided")},r.onServerRoomStateChange=function(e){this.validateRoomState(e)&&(this.updatePlayerData(e),this.updatePlayerState(e))},r.updatePlayerData=function(e){var t=e.getPlayerByIndex(this.index);t&&this.setScore(t.score)},r.updatePlayerState=function(e){if(this.playerState!==ue.UNINITIALIZED)switch(this.handleDeadStatus(e),e.currentGameState){case g.WORD_DESCRIPTION:this.handleWordDescriptionState(e);break;case g.VOTING:this.handleVotingState(e);break;default:this.setStateIdle()}},r.handleWordDescriptionState=function(e){if(this.votesContainer.active=!1,this.handleTieStatus(e),e.describingPlayerId===this.userId){this.isLocal&&this.unmuteMic(),this.playerState=ue.DESCRIBING,this.micSprite.active=!0,this.startMicFillAnimation(),P.Instance.miloSDK.vibratePreset("heavy");var t=e.getPlayerByUserId(this.userId);t&&(this.setTimer(t.descriptionTimer),console.log("[Player] Player "+this.userId+" description timer: "+this.timer))}else this.setStateIdle()},r.handleVotingState=function(e){this.handleTieStatus(e),this.setTimer(0),this.setStateIdle();var t=this.getLocalPlayerData(e);if(t){var i=this.shouldShowVoteButton(e,t),a=this.shouldShowVotedButton(e,t);this.voteButton.node.active=i,this.votedButton.node.active=a,t.votedSpyUserId&&this.updateVotesDisplay(e)}},r.handleDeadStatus=function(e){var t=e.getPlayerByUserId(this.userId);this.isDead=t.isDead,t.isDead?this.skull.active=!0:this.skull.active=!1},r.handleTieStatus=function(e){var t=this;e.tieBreakRound>0&&e.tiedPlayerIds.some((function(e){return e===t.userId}))?this.tieSprite.active=!0:this.tieSprite.active=!1},r.shouldShowVoteButton=function(e,t){var i=this;return console.log("should show vote button",this.isDead),this.userId!==t.userId&&(!t.isDead&&!t.votedSpyUserId&&(!this.isDead&&!(e.tieBreakRound>0&&!e.tiedPlayerIds.some((function(e){return e===i.userId})))))},r.shouldShowVotedButton=function(e,t){return!this.shouldShowVoteButton(e,t)&&t.votedSpyUserId===this.userId},r.setStateIdle=function(){this.playerState=ue.IDLE,this.voteButton.node.active=!1,this.votedButton.node.active=!1,this.nameLabel.node.active=!0,this.micSprite.active=!1,this.votesContainer.active=!1,this.isLocal&&this.muteMic(),this.setTimer(0),this.clearVotesContainer()},r.resetState=function(){this.hasGuessedAnswer=!1,this.setStateIdle(),this.updateBgColor()},r.onVoteButtonClick=function(){var e={userId:this.userId};try{C.Instance.sendMessage(S.PLAYER_VOTE,e),this.voteButton.node.active=!1}catch(e){console.error("[Player] Failed to send vote message: "+e)}},r.updateVotesDisplay=function(e){var t=this;this.votesContainer.active=!0;var i=e.playersData.filter((function(e){return e.votedSpyUserId===t.userId})),a=this.voters.map((function(e){return e.userId})),n=a.filter((function(e){return!i.some((function(t){return t.userId===e}))})),r=i.filter((function(e){return!a.some((function(t){return t===e.userId}))}));this.removeVoters(n),this.addVoters(r)},r.removeVoters=function(e){var t=this;e.forEach((function(e){var i=t.voters.findIndex((function(t){return t.userId===e}));-1!==i&&(t.voters[i].node.destroy(),t.voters.splice(i,1))}))},r.addVoters=function(e){var t=this;e.forEach((function(e){var i=f(t.playerAvatarPrefab),a=i.getComponent(b);i.getComponent(m).setContentSize(new y(50,50)),a.initialize(!1,e.userId);var n=P.Instance.players.find((function(t){return t.userId===e.userId}));n&&a.setAvatarFromSpriteFrame(n.playerAvatar.playerAvatar.spriteFrame),t.votesContainer.addChild(i),t.voters.push(a)}))},r.clearVotesContainer=function(){this.votesContainer.children.forEach((function(e){e.destroy()})),this.voters=[]},r.updateTimer=function(e){var t=Math.max(0,this.timer-e);this.setTimer(t)},r.setTimer=function(e){if(this.timer=e,this.roomSettings&&this.descriptionTimerSprite){this.descriptionTimerSprite.fillRange=this.timer/this.roomSettings.descriptionTimeLimit;var t=this.descriptionTimerSprite.fillRange>.3?P.Instance.villagersColor:P.Instance.spyColor;this.descriptionTimerSprite.color=t}},r.onReconnection=function(e){if(this.validateRoomState(e)){var t=e.getPlayerByIndex(this.index);t&&(this.loadProfile(t),this.setScore(t.score)),this.updatePlayerState(e),this.updateBgColor()}},r.onSetState=function(e){this.updatePlayerState(e)},r.handleTurnSpecificMessages=function(e){if(e.inputPayload.inputType!==S.NONE)switch(e.inputPayload.inputType){case S.SET_STATE:this.onSetState(e)}},r.handleWordsList=function(e){console.log("[Player] Received words list",e.inputPayload)},r.startMicFillAnimation=function(){if(this.micFill){var e=this.micFill.getComponent(u);e?(this.stopMicFillAnimation(),this.createMicFillFluctuationTween(e)):console.warn("[Player] MicFill sprite component not found")}else console.warn("[Player] MicFill node not found")},r.stopMicFillAnimation=function(){if(this.micFill){var e=this.micFill.getComponent(u);e&&(v(e).stop(),e.fillRange=0)}},r.createMicFillFluctuationTween=function(e){v(e).to(.3,{fillRange:.9},{easing:"sineInOut"}).to(.3,{fillRange:.1},{easing:"sineInOut"}).union().repeatForever().start()},r.getLocalPlayerData=function(e){var t=C.Instance.CurrentRoom.sessionId;return null==e?void 0:e.playersData.find((function(e){return e.sessionId===t}))},r.validateRoomState=function(e){return!!e||(console.error("[Player] Invalid room state"),!1)},r.muteMic=function(){this.sendReactNativeMessage({event:"muteMic",data:!0})},r.unmuteMic=function(){this.sendReactNativeMessage({event:"muteMic",data:!1})},r.sendReactNativeMessage=function(e){window.ReactNativeWebView&&(console.log("Sending message to React Native:",e),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify(e)))},r.setScore=function(e){},r.setRank=function(e){this.rank=e,this.updateBgColor()},r.setGuessedAnswer=function(e){this.hasGuessedAnswer=e,this.updateBgColor()},r.highlightLocalPlayer=function(){this.nameLabel&&(this.nameLabel.color=this.localPlayerColor)},r.updateBgColor=function(){},r.setPlayerNumber=function(e){this.index=e},r.openProfile=function(){this.userId?console.log("Opening profile for user: "+this.userId):console.warn("[Player] Cannot open profile: No user ID available")},t}(I)).prototype,"index",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=t(W.prototype,"nameLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(W.prototype,"playerAvatar",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(W.prototype,"descriptionTimerSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(W.prototype,"voteButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(W.prototype,"votedButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(W.prototype,"votesContainerLeft",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(W.prototype,"votesContainerRight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(W.prototype,"playerAvatarPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(W.prototype,"micSpriteLeft",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(W.prototype,"micLeftFill",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(W.prototype,"micSpriteRight",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(W.prototype,"micRightFill",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(W.prototype,"tieSprite",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(W.prototype,"skull",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(W.prototype,"addSymbol",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(W.prototype,"avatar",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=W))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_PlayerAvatar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,r,i,n,o,l,s,u,c,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.Node,u=e.assetManager,c=e.SpriteFrame,p=e.Texture2D,f=e.Component}],execute:function(){var v,y,h,d,m,g,A,w,b;n._RF.push({},"f0449qYRJRD2qYGuhFrYnAx","Mafia_PlayerAvatar",void 0);var T=o.ccclass,S=o.property;e("MafiaPlayerAvatar",(v=T("MafiaPlayerAvatar"),y=S({type:l,tooltip:"Player Avatar"}),h=S({type:l,tooltip:"Player Avatar Outline"}),d=S({type:s,tooltip:"Skull"}),v((A=t((g=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(t,"playerAvatar",A,i(t)),r(t,"outline",w,i(t)),r(t,"skull",b,i(t)),t.enableOnClick=!1,t.userId="",t}a(t,e);var n=t.prototype;return n.initialize=function(e,t){this.enableOnClick=e,this.userId=t},n.onEnable=function(){this.registerTouchEvents()},n.onDisable=function(){this.unregisterTouchEvents()},n.start=function(){},n.update=function(e){},n.registerTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.on(s.EventType.TOUCH_START,this.handleTouchStart,this)},n.unregisterTouchEvents=function(){this.playerAvatar&&this.playerAvatar.node&&this.playerAvatar.node.off(s.EventType.TOUCH_START,this.handleTouchStart,this)},n.handleTouchStart=function(){this.enableOnClick},n.setOutline=function(e){this.outline&&(this.outline.enabled=e)},n.setAvatarFromUrl=function(e){var t=this.getFromCache(e);t?this.createSpriteFrameFromTexture(t):this.loadRemoteImage(e)},n.setAvatarFromSpriteFrame=function(e){this.playerAvatar&&(this.playerAvatar.spriteFrame=e)},n.getFromCache=function(e){var t=u.assets.get(e);return t&&t.isValid&&"function"==typeof t.getHash?t:null},n.createSpriteFrameFromTexture=function(e){if(e&&e.isValid&&"function"==typeof e.getHash)if(this.playerAvatar){var t=new c;t.texture=e,this.playerAvatar.spriteFrame=t}else console.warn("[MafiaPlayerAvatar] PlayerAvatar component is null");else console.warn("[MafiaPlayerAvatar] Invalid texture provided")},n.loadRemoteImage=function(e){var t=this;u.loadRemote(e,{ext:".png"},(function(a,r){if(a)return console.error("[Player] Failed to load profile image: "+JSON.stringify(a)),void(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_avatar_load_failed",data:{userId:t.userId,url:e,errorName:a.name,errorMessage:a.message,errorStack:a.stack}})));try{var i=new c,n=new p;n.image=r,n.isValid&&"function"==typeof n.getHash?(i.texture=n,t.playerAvatar?t.playerAvatar.spriteFrame=i:console.warn("[MafiaPlayerAvatar] PlayerAvatar component is null")):console.warn("[MafiaPlayerAvatar] Invalid texture created from imageAsset")}catch(a){console.error("[Player] Error creating sprite frame: "+a),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({message:"player_sprite_frame_creation_failed",data:{userId:t.userId,url:e,error:a}}))}}))},n.ShowSkull=function(e){this.skull&&(this.skull.active=e)},t}(f)).prototype,"playerAvatar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"outline",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"skull",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_PlayerTypes.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4d199WiL2xLT6KTu/5loLPp","Mafia_PlayerTypes",void 0);e("MafiaPlayerType",function(e){return e[e.HUMAN=0]="HUMAN",e[e.BOT=1]="BOT",e[e.SPECTATOR=2]="SPECTATOR",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_PreparationScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts","./MafiaGameHandler.ts","./Mafia_AudioManager.ts","./Mafia_NetworkManager.ts"],(function(t){var e,i,o,n,r,a,l,s,c,u,p,y,d,f,h,w,C,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,s=t.Label,c=t.Sprite,u=t.CCFloat,p=t.Color,y=t.Vec3,d=t.UIOpacity,f=t.tween},function(t){h=t.MafiaMenu},function(t){w=t.MafiaGameHandler},function(t){C=t.MafiaAudioManager},function(t){g=t.MafiaNetworkManager}],execute:function(){var b,S,m,v,I,M,T,L,P,_,z,A,R,W,B,D,E,V,k;r._RF.push({},"4952cIc/PlMopoNID/uP+1K","Mafia_PreparationScreen",void 0);var G=a.ccclass,N=a.property,O="[PreparationScreen]";t("MafiaPreparationScreen",(b=G("MafiaPreparationScreen"),S=N({type:l,tooltip:"Container for the word display"}),m=N({type:l,tooltip:"Container for instructions"}),v=N({type:s,tooltip:"Word label"}),I=N({type:c,tooltip:"Background for word"}),M=N({type:s,tooltip:"Role label"}),T=N({type:u,tooltip:"Time to display the word"}),L=N({type:p,tooltip:"Color for villager UI"}),P=N({type:p,tooltip:"Color for spy UI"}),b((A=e((z=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"wordContainer",A,n(e)),o(e,"instructionContainer",R,n(e)),o(e,"word",W,n(e)),o(e,"wordBgSprite",B,n(e)),o(e,"youAreLabel",D,n(e)),o(e,"wordTimeLimit",E,n(e)),o(e,"villagerColor",V,n(e)),o(e,"spyColor",k,n(e)),e.VILLAGER_TEXT="You are a Villager!",e.SPY_TEXT="You are the Spy!",e}i(e,t);var r=e.prototype;return r.Open=function(){t.prototype.Open.call(this),this.setupScreen()},r.setupScreen=function(){this.updateRoleDisplay(),this.showWordThenInstructions()},r.updateRoleDisplay=function(){var t=w.Instance.getRoomState();if(t){var e=g.Instance.getMySessionId(),i=t.getPlayerBySessionId(e);if(i){var o=i.userId===t.currentSpyUserId;this.word.string=i.describingWord,o?(console.log(O+" Playing SpyWord sound"),C.instance.playSound("SpyWord"),this.applySpyStyles()):this.applyVillagerStyles()}else console.error(O+" Cannot find player data for session ID: "+e)}else console.error(O+" Cannot setup screen: Room state is null")},r.applySpyStyles=function(){this.wordBgSprite.color=this.spyColor,this.youAreLabel.string=this.SPY_TEXT,this.word.color=this.spyColor},r.applyVillagerStyles=function(){this.wordBgSprite.color=this.villagerColor,this.youAreLabel.string=this.VILLAGER_TEXT,this.word.color=this.villagerColor},r.showWordThenInstructions=function(){this.instructionContainer.active=!1,this.wordContainer.active=!0,this.animateWordContainer(),this.scheduleOnce(this.transitionToInstructions,this.wordTimeLimit)},r.animateWordContainer=function(){this.wordContainer.scale=new y(1.2,1.2,1);var t=this.wordContainer.getComponent(d);t||(t=this.wordContainer.addComponent(d)),t.opacity=0,f(this.wordContainer).to(.2,{scale:new y(1,1,1)}).start(),f(t).to(.2,{opacity:255}).start()},r.transitionToInstructions=function(){this.wordContainer.active=!1,this.instructionContainer.active=!0,this.animateInstructionsContainer()},r.animateInstructionsContainer=function(){this.instructionContainer.scale=new y(1.2,1.2,1);var t=this.instructionContainer.getComponent(d);t||(t=this.instructionContainer.addComponent(d)),t.opacity=0,f(this.instructionContainer).to(.2,{scale:new y(1,1,1)}).start(),f(t).to(.2,{opacity:255}).start()},e}(h)).prototype,"wordContainer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"instructionContainer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(z.prototype,"word",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(z.prototype,"wordBgSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(z.prototype,"youAreLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(z.prototype,"wordTimeLimit",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),V=e(z.prototype,"villagerColor",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0,0,1)}}),k=e(z.prototype,"spyColor",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,0,0,1)}}),_=z))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_RoomState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_BasePlayerData.ts","./Mafia_BaseRoomSettings.ts","./Mafia_BaseRoomState.ts","./Mafia_GameState.ts"],(function(t){var i,e,r,o,n,a;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){r=t.MafiaBasePlayerData},function(t){o=t.MafiaBaseRoomSettings},function(t){n=t.MafiaBaseRoomState},function(t){a=t.MafiaGameState}],execute:function(){e._RF.push({},"80979N80XBKYK0mMy1KuHAh","Mafia_RoomState",void 0);var s=t("PlayerRoundScore",function(){function t(){this.roundNumber=0,this.score=0,this.survived=!0}return t.prototype.copyFrom=function(t){this.roundNumber=t.roundNumber,this.score=t.score,this.survived=t.survived},t}()),u=t("MafiaPlayerData",function(t){function e(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this).isDead=!1,i.votedSpyUserId="",i.selectedCategory="",i.describingWord="",i.descriptionTimer=0,i.roundScores=[],i}return i(e,t),e.prototype.copyFrom=function(i){t.prototype.copyFrom.call(this,i),this.isDead=i.isDead,this.votedSpyUserId=i.votedSpyUserId,this.selectedCategory=i.selectedCategory,this.describingWord=i.describingWord,this.descriptionTimer=i.descriptionTimer,this.roundScores=i.roundScores.map((function(t){var i=new s;return i.copyFrom(t),i}))},e}(r)),c=t("MafiaRoomSettings",function(t){function e(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this).maxRounds=void 0,i.startRoundTimeLimit=void 0,i.categorySelectionTimeLimit=void 0,i.preparationTimeLimit=void 0,i.descriptionTimeLimit=void 0,i.votingTimeLimit=void 0,i.votingResultsTimeLimit=void 0,i.endRoundTimeLimit=void 0,i.rounds=void 0,i}return i(e,t),e.prototype.copyFrom=function(i){t.prototype.copyFrom.call(this,i),this.maxRounds=i.maxRounds,this.startRoundTimeLimit=i.startRoundTimeLimit,this.categorySelectionTimeLimit=i.categorySelectionTimeLimit,this.preparationTimeLimit=i.preparationTimeLimit,this.descriptionTimeLimit=i.descriptionTimeLimit,this.votingTimeLimit=i.votingTimeLimit,this.votingResultsTimeLimit=i.votingResultsTimeLimit,this.endRoundTimeLimit=i.endRoundTimeLimit,this.rounds=i.rounds},e}(o)),d=t("MafiaInputPayload",function(){function t(){this.inputType=void 0,this.inputValue=void 0}return t.prototype.copyFrom=function(t){this.inputType=t.inputType,this.inputValue=t.inputValue},t}());t("MafiaRoomState",function(t){function e(){var i;return(i=t.call(this,new c,[])||this).inputPayload=new d,i.currentGameState=a.NONE,i.previousGameState=a.NONE,i.describingPlayerId="",i.category="",i.tiedPlayerIds=[],i.tieBreakRound=0,i.serverTick=0,i.currentRound=1,i.currentSpyUserId="",i}i(e,t);var o=e.prototype;return o.copyFrom=function(i){t.prototype.copyFrom.call(this,i),this.playersData=i.playersData.map((function(t){var i=new u;return i.copyFrom(t),i})),this.spectatorsData=i.spectatorsData.map((function(t){var i=new r;return i.copyFrom(t),i})),this.currentRoomStatus=i.currentRoomStatus,this.previousRoomStatus=i.previousRoomStatus,this.currentGameState=i.currentGameState,this.previousGameState=i.previousGameState,this.roomSettings.copyFrom(i.roomSettings),this.inputPayload.copyFrom(i.inputPayload),this.category=i.category,this.describingPlayerId=i.describingPlayerId,this.tiedPlayerIds=i.tiedPlayerIds.map((function(t){return t})),this.tieBreakRound=i.tieBreakRound,this.serverTick=i.serverTick,this.currentRound=i.currentRound,this.currentSpyUserId=i.currentSpyUserId},o.getPlayerByUserId=function(t){return this.playersData.find((function(i){return i.userId===t}))||null},o.getOnlinePlayersCount=function(){return this.playersData.filter((function(t){return t.isOnline})).length},o.getPlayerByIndex=function(t){return this.playersData.find((function(i){return i.playerNumber===t}))||null},o.getPlayerBySessionId=function(t){return this.playersData.find((function(i){return i.sessionId===t}))||null},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_RoomTypes.ts",["cc"],(function(t){var _;return{setters:[function(t){_=t.cclegacy}],execute:function(){_._RF.push({},"a3a72gjPcRAvIYOfAxJummA","Mafia_RoomTypes",void 0);t("MafiaRoomStatus",function(t){return t[t.NONE=0]="NONE",t[t.WAITING_FOR_PLAYERS=1]="WAITING_FOR_PLAYERS",t[t.COUNTDOWN=2]="COUNTDOWN",t[t.GAME_SIMULATION=3]="GAME_SIMULATION",t[t.END_GAME=4]="END_GAME",t[t.KICKED_OUT=5]="KICKED_OUT",t}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_StartRoundScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts","./MafiaGameHandler.ts"],(function(e){var t,n,a,o,r,i,u,s,l,c,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,i=e._decorator,u=e.Label,s=e.Vec3,l=e.tween},function(e){c=e.MafiaMenu},function(e){d=e.MafiaGameHandler}],execute:function(){var p,f,h,L,A;r._RF.push({},"28432gn1jZNmoVOMCSvOamH","Mafia_StartRoundScreen",void 0);var S=i.ccclass,I=i.property;e("MafiaStartRoundScreen",(p=S("MafiaStartRoundScreen"),f=I({type:u,tooltip:"Label displaying the current round number"}),p((A=t((L=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(t,"roundCountLabel",A,o(t)),t.roundTween=null,t.INITIAL_SCALE=2,t.FINAL_SCALE=1,t.ANIMATION_DURATION=.4,t}n(t,e);var r=t.prototype;return r.Open=function(){e.prototype.Open.call(this),this.updateRoundCount()},r.Close=function(){this.stopActiveTween(),e.prototype.Close.call(this)},r.updateRoundCount=function(){var e=d.Instance.getRoomState();if(e){var t=e.currentRound;this.stopActiveTween(),this.resetLabelScale(),this.updateLabelText(t),this.animateLabel()}else console.error("[StartRoundScreen] Cannot update round count: Room state is null")},r.stopActiveTween=function(){this.roundTween&&(this.roundTween.stop(),this.roundTween=null)},r.resetLabelScale=function(){var e=new s(this.INITIAL_SCALE,this.INITIAL_SCALE,1);this.roundCountLabel.node.setScale(e)},r.updateLabelText=function(e){this.roundCountLabel.string="Round "+e},r.animateLabel=function(){var e=new s(this.FINAL_SCALE,this.FINAL_SCALE,1);this.roundTween=l(this.roundCountLabel.node).to(this.ANIMATION_DURATION,{scale:e},{easing:"sineIn"}).delay(1).start()},t}(c)).prototype,"roundCountLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=L))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,n,r,a,l,s,o,u;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,l=i._decorator,s=i.Label,o=i.Sprite,u=i.Component}],execute:function(){var m,p,c,h,T,f,d;a._RF.push({},"21004HVzaNBZ7tMvv7xOesz","Mafia_Timer",void 0);var b=l.ccclass,g=l.property;i("MafiaTimer",(m=b("MafiaTimer"),p=g(s),c=g(o),m((f=e((T=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return e=i.call.apply(i,[this].concat(a))||this,n(e,"timeUiLabel",f,r(e)),n(e,"timerFillSprite",d,r(e)),e.elapsedTime=0,e.maxTime=0,e.isRunning=!1,e.onTimerEndCallback=null,e}t(e,i);var a=e.prototype;return a.update=function(i){this.isRunning&&(this.elapsedTime-=i,this.elapsedTime<=0&&(this.elapsedTime=0,this.stopTimer(),this.onTimerEndCallback&&this.onTimerEndCallback()),this.updateTimeLabel(),this.updateFillSprite())},a.startTimer=function(){this.isRunning||(this.isRunning=!0)},a.stopTimer=function(){this.isRunning&&(this.isRunning=!1)},a.reset=function(){this.elapsedTime=0,this.updateTimeLabel()},a.setStartTime=function(i){console.log("[Timer] Setting start time to:",i),this.elapsedTime=i,this.maxTime=i,this.updateTimeLabel(),this.updateFillSprite()},a.setOnTimerEndCallback=function(i){this.onTimerEndCallback=i},a.updateTimeLabel=function(){var i=Math.floor(this.elapsedTime);this.timeUiLabel.string=""+i},a.updateFillSprite=function(){if(this.timerFillSprite){var i=this.maxTime>0?this.elapsedTime/this.maxTime:0;this.timerFillSprite.fillRange=i}},a.formatTime=function(i){return i<10?"0"+i:""+i},a.formatMilliseconds=function(i){return i<10?"00"+i:i<100?"0"+i:""+i},e}(u)).prototype,"timeUiLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=e(T.prototype,"timerFillSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=T))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_TopInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_GameManager.ts","./Mafia_GameState.ts"],(function(e){var t,i,r,a,o,n,l,p,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,l=e.Label,p=e.Node,c=e.Component},function(e){u=e.MafiaGameManager},function(e){s=e.MafiaGameState}],execute:function(){var f,d,y,g,b,I,m,h,v,S,D,M,G;o._RF.push({},"07b70sAjVpJwaiP6JfloUn9","Mafia_TopInfo",void 0);var P=n.ccclass,_=n.property;e("MafiaTopInfo",(f=P("MafiaTopInfo"),d=_({type:l,tooltip:"Label for the top info"}),y=_({type:p,tooltip:"Villager info node"}),g=_({type:p,tooltip:"Spy info node"}),b=_({type:l,tooltip:"Villager word description"}),I=_({type:l,tooltip:"Spy word description"}),f((v=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"gameStateLabel",v,a(t)),r(t,"villagerInfoNode",S,a(t)),r(t,"spyInfoNode",D,a(t)),r(t,"villagerWordDescription",M,a(t)),r(t,"spyWordDescription",G,a(t)),t.localPlayerId="",t}i(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},o.initialize=function(e){this.localPlayerId=u.Instance.GetMyPlayerData().userId},o.onServerRoomStateChange=function(e){this.updateGameStateLabel(e.currentGameState),e.currentGameState===s.WORD_DESCRIPTION&&this.updateRoleInfo(e)},o.updateGameStateLabel=function(e){var t,i=((t={})[s.WORD_DESCRIPTION]="Describe",t[s.VOTING]="Voting",t[s.GAME_OVER]="Game Over",t);this.gameStateLabel.string=i[e]||"Describe"},o.updateRoleInfo=function(e){var t=e.currentSpyUserId===this.localPlayerId;this.villagerInfoNode.active=!t,this.spyInfoNode.active=t;var i=this.getPlayerFromState(e,this.localPlayerId),r=t?this.spyWordDescription:this.villagerWordDescription;i&&r&&(r.string="Word: "+i.describingWord)},o.getPlayerFromState=function(e,t){return e.playersData.find((function(e){return e.userId===t}))},t}(c)).prototype,"gameStateLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(h.prototype,"villagerInfoNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(h.prototype,"spyInfoNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(h.prototype,"villagerWordDescription",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(h.prototype,"spyWordDescription",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=h))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts","./Mafia_GameState.ts","./Mafia_GameManager.ts","./MafiaGameHandler.ts","./Mafia_NetworkManager.ts","./Mafia_NetworkTypes.ts","./Mafia_RoomTypes.ts"],(function(e){var n,t,a,o,i,s,r,l,u,c,h,g,f,S,M,d,C,p,m,E,O;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,r=e.Camera,l=e.Node,u=e.Color,c=e.Sprite,h=e.tween,g=e.Component},function(e){f=e.MafiaMenu},function(e){S=e.MafiaGameState},function(e){M=e.RoomStatusChangeEvent},function(e){d=e.GameStateChangeEvent},function(e){C=e.ConnectionStateChangeEvent,p=e.ServerMessageEvent},function(e){m=e.MafiaNetworkEvents,E=e.MafiaConnectionState},function(e){O=e.MafiaRoomStatus}],execute:function(){var N,R,_,A,I,T,G,v,w,y;i._RF.push({},"a805dDOrVBG5KVSZZ4CAGEg","Mafia_UIManager",void 0);var b=s.ccclass,U=s.property;e("MafiaUIManager",(N=b("MafiaUIManager"),R=U({type:r}),_=U({type:[f]}),A=U({type:l}),N(((y=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,a(n,"uiCamera",G,o(n)),a(n,"menus",v,o(n)),a(n,"flashNode",w,o(n)),n.showMuteButton=!0,n.showResultScreen=!0,n.showFAQ=!0,n}t(n,e);var i=n.prototype;return i.onLoad=function(){n.instance=this,C.on(m.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),M.on(m.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),p.on(m.SERVER_MESSAGE,this.onServerMessage,this),d.on(m.GAME_STATE_CHANGE,this.onGameStateChange,this)},i.onDestroy=function(){this.cleanup()},i.cleanup=function(){C.off(m.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),M.off(m.ROOM_STATUS_CHANGE,this.onRoomStatusChange,this),p.off(m.SERVER_MESSAGE,this.onServerMessage,this),d.off(m.GAME_STATE_CHANGE,this.onGameStateChange,this),n.instance===this&&(n.instance=null)},i.start=function(){this.OpenMenu("InGameMenu")},i.onCameraOrthoSizeChange=function(e){console.log("[UIManager] Camera ortho size changed: ",e),this.uiCamera.orthoHeight=e},i.OpenHowToPlay=function(){this.OpenMenu("HowToPlay")},i.OpenMenu=function(e){for(var n=0;n<this.menus.length;n++)this.menus[n].menuName==e&&this.menus[n].Open()},i.CloseMenu=function(e){for(var n=0;n<this.menus.length;n++)this.menus[n].menuName==e&&this.menus[n].Close()},i.GetMenu=function(e){for(var n=0;n<this.menus.length;n++)if(this.menus[n].menuName==e)return this.menus[n];return null},i.CloseAllMenus=function(){for(var e=0;e<this.menus.length;e++)this.menus[e].Close()},i.onConnectionStateChange=function(e,n){switch(console.log("[UIManager] Connection state changed: ",n),n){case E.CONNECTING:this.CloseAllMenus(),this.OpenMenu("InGameMenu")}},i.onGameStateChange=function(e){switch(e){case S.START_ROUND:this.handleStartRoundState();break;case S.CATEGORY_SELECTION:this.handleCategorySelectionState();break;case S.PREPARATION:this.handlePreparationState();break;case S.WORD_DESCRIPTION:this.handleWordDescriptionState();break;case S.VOTING:this.handleVotingState();break;case S.VOTING_RESULTS:this.handleVotingResultsState();break;case S.END_ROUND:this.handleEndRoundState()}},i.handleStartRoundState=function(){console.log("[UIManager] Handling start round state"),this.CloseAllMenus(),this.OpenMenu("StartRoundScreen")},i.handleEndRoundState=function(){console.log("[UIManager] Handling end round state"),this.CloseAllMenus(),this.OpenMenu("EndRoundScreen")},i.handleCategorySelectionState=function(){console.log("[UIManager] Handling category selection state"),this.CloseAllMenus(),this.OpenMenu("CategorySelectionScreen")},i.handlePreparationState=function(){console.log("[UIManager] Handling preparation state"),this.CloseMenu("CategorySelectionScreen"),this.OpenMenu("PreparationScreen")},i.handleWordDescriptionState=function(){console.log("[UIManager] Handling word description state"),this.CloseMenu("PreparationScreen"),this.CloseMenu("VotingResultsScreen"),this.OpenMenu("WordDescriptionScreen")},i.handleVotingState=function(){console.log("[UIManager] Handling voting state"),this.CloseMenu("WordDescriptionScreen"),this.OpenMenu("VotingScreen")},i.handleVotingResultsState=function(){console.log("[UIManager] Handling voting results state"),this.CloseMenu("VotingScreen"),this.OpenMenu("VotingResultsScreen")},i.onServerMessage=function(e,n){},i.onRoomStatusChange=function(e,n){var t=this;switch(console.log("[UIManager] Room status changed: ",n),n){case O.WAITING_FOR_PLAYERS:console.log("Opening waiting screen"),this.OpenMenu("WaitingScreen");break;case O.COUNTDOWN:console.log("Opening countdown screen"),this.CloseAllMenus(),this.OpenMenu("CountDownScreen");break;case O.GAME_SIMULATION:this.scheduleOnce((function(){t.CloseMenu("CountdownScreen"),t.OpenMenu("InGameMenu")}),1);break;case O.END_GAME:break;default:console.warn("[UIManager] Unhandled RoomStatus: "+n)}},i.playFlashEffect=function(e){var n=this;void 0===e&&(e=new u(197,8,8)),this.flashNode.active=!0;var t=this.flashNode.getComponent(c);t?(t.color=new u(e.r,e.g,e.b,0),h(t).to(.2,{color:new u(e.r,e.g,e.b,255)}).delay(.05).to(.3,{color:new u(e.r,e.g,e.b,0)}).call((function(){n.flashNode.active=!1})).start()):console.error("No Sprite component found on flashNode")},n}(g)).instance=null,G=n((T=y).prototype,"uiCamera",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(T.prototype,"menus",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=n(T.prototype,"flashNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=T))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e9fc6hX28NAMo5e+sZM6ukk","Mafia_Utils",void 0);t("MafiaUtils",function(){function t(){}return t.roundNumber=function(t,n){void 0===n&&(n=2);var u=Math.pow(10,n);return Math.round((t+Number.EPSILON)*u)/u},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_VotingResultsScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts","./Mafia_PlayerAvatar.ts","./MafiaGameHandler.ts","./Mafia_UIManager.ts","./Mafia_AudioManager.ts","./Mafia_NetworkManager.ts"],(function(e){var t,n,a,i,r,o,l,s,u,c,p,y,f,d,v,g,h,m,b,S,w,I,C,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,u=e.Sprite,c=e.Prefab,p=e.Label,y=e.Node,f=e.Animation,d=e.Size,v=e.Vec3,g=e.UIOpacity,h=e.tween,m=e.Color},function(e){b=e.MafiaMenu},function(e){S=e.MafiaPlayerAvatar},function(e){w=e.MafiaGameHandler},function(e){I=e.MafiaUIManager},function(e){C=e.MafiaAudioManager},function(e){M=e.MafiaNetworkManager}],execute:function(){var R,k,P,A,V,z,_,N,E,O,T,B,D,H,U,F,G,L,x,Y,j,K,Q,W,Z,q,J;l._RF.push({},"87d25szwANAQpYk8OoLCrSo","Mafia_VotingResultsScreen",void 0);var X=s.ccclass,$=s.property,ee="[VotingResultsScreen]";e("MafiaVotingResultsScreen",(R=X("MafiaVotingResultsScreen"),k=$({type:u,tooltip:"Background"}),P=$({type:c,tooltip:"Voting Results Item Prefab"}),A=$({type:S,tooltip:"Voted Player Avatar"}),V=$({type:p,tooltip:"Voted Player Name"}),z=$({type:p,tooltip:"Player Role"}),_=$({type:p,tooltip:"Heading"}),N=$({type:y,tooltip:"Tie Sprite"}),E=$({type:y}),O=$({type:y}),T=$({type:u}),B=$({type:u}),D=$({type:f}),R((F=t((U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"background",F,i(t)),a(t,"votingResultsItemPrefab",G,i(t)),a(t,"votedPlayerAvatar",L,i(t)),a(t,"votedPlayerName",x,i(t)),a(t,"playerRole",Y,i(t)),a(t,"votedHeading",j,i(t)),a(t,"tieSprite",K,i(t)),a(t,"votedContainer",Q,i(t)),a(t,"skullContainer",W,i(t)),a(t,"skullBG",Z,i(t)),a(t,"skull",q,i(t)),a(t,"tieAnimation",J,i(t)),t.VOTE_RESULT_DISPLAY_TIME=2,t.VOTER_AVATAR_SIZE=new d(70,70),t}n(t,e);var l=t.prototype;return l.Open=function(){e.prototype.Open.call(this),this.setupScreen()},l.setupScreen=function(){var e=w.Instance,t=e.getRoomState();if(t){if(t.tieBreakRound>0)return C.instance.playSound("Tie"),this.tieSprite.active=!0,this.tieAnimation.play(),void(this.votedContainer.active=!1);this.tieSprite.active=!1,this.votedContainer.active=!0;var n=this.getMostVotedPlayerId(),a=e.getPlayer(n);a?this.showEliminationResult(a.playerName,n):console.error(ee+" Cannot find player with ID: "+n)}else console.error(ee+" Cannot setup screen: Room state is null")},l.animateSkull=function(){var e=r(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.skullContainer.active=!0,(t=this.skullBG.getComponent(g))||(t=this.skullBG.addComponent(g)),t.opacity=0,this.skull.node.scale=new v(4,4,1),(n=this.skull.getComponent(g))||(n=this.skull.addComponent(g)),n.opacity=0,e.next=10,new Promise((function(e){a.scheduleOnce((function(){e(null)}),.5)}));case 10:h(t).to(.2,{opacity:125}).start(),this.scheduleOnce((function(){h(a.skull.node).to(.15,{scale:new v(.9,.9,1)}).to(.1,{scale:new v(1,1,1)}).start(),h(n).to(.15,{opacity:255}).start()}),.1);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.animateVotedContainer=function(){this.votedContainer.scale=new v(1.2,1.2,1);var e=this.votedContainer.getComponent(g);e||(e=this.votedContainer.addComponent(g)),e.opacity=0,h(this.votedContainer).to(.2,{scale:new v(1,1,1)}).start(),h(e).to(.2,{opacity:255}).start()},l.showEliminationResult=function(e,t){var n=w.Instance.getRoomState(),a=M.Instance.getMySessionId(),i=n.getPlayerBySessionId(a);if(n){var r=w.Instance.getPlayer(t);r&&(this.votedPlayerAvatar.setAvatarFromSpriteFrame(r.playerAvatar.playerAvatar.spriteFrame),this.votedPlayerName.string=r.playerName,this.votedPlayerName.color=m.BLACK),this.votedContainer.active=!0,this.tieSprite.active=!1,this.animateVotedContainer(),this.votedHeading.string=e+" got out!",this.votedPlayerName.color=m.WHITE,n.currentSpyUserId===t?(this.applySpyStyles(),i&&i.userId!==t&&I.instance.playFlashEffect(new m(0,255,0,255)),C.instance.playSound("Yaay")):(this.applyVillagerStyles(),i&&i.userId!==t&&I.instance.playFlashEffect(new m(255,0,0,255)),C.instance.playSound("OhNo")),this.animateSkull()}},l.applySpyStyles=function(){var e=w.Instance;this.playerRole.color=e.spyColor,this.background.color=e.spyColor,this.playerRole.string="Spy"},l.applyVillagerStyles=function(){var e=w.Instance;this.playerRole.color=e.villagersColor,this.background.color=e.villagersColor,this.playerRole.string="Villager"},l.getMostVotedPlayerId=function(){var e=w.Instance.getRoomState();if(!e||!e.playersData||0===e.playersData.length)return console.error(ee+" Invalid room state data"),"";var t=this.countVotes(e.playersData),n="",a=0;return Object.keys(t).forEach((function(e){var i=t[e];i>a&&(a=i,n=e)})),n},l.countVotes=function(e){var t={};return e.forEach((function(e){e.votedSpyUserId&&(t[e.votedSpyUserId]=(t[e.votedSpyUserId]||0)+1)})),t},t}(b)).prototype,"background",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(U.prototype,"votingResultsItemPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(U.prototype,"votedPlayerAvatar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(U.prototype,"votedPlayerName",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"playerRole",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"votedHeading",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(U.prototype,"tieSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"votedContainer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(U.prototype,"skullContainer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"skullBG",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"skull",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(U.prototype,"tieAnimation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=U))||H));l._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_VotingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts"],(function(n){var t,e,i,o,a,r,c,s,f,l,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,c=n.Node,s=n.Vec3,f=n.UIOpacity,l=n.tween},function(n){p=n.MafiaMenu}],execute:function(){var u,h,y,C,v;a._RF.push({},"5c988B1YEtKMrDLkvStEf29","Mafia_VotingScreen",void 0);var g=r.ccclass,M=r.property;n("MafiaVotingScreen",(u=g("MafiaVotingScreen"),h=M({type:c}),u((v=t((C=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"infoContainer",v,o(t)),t}e(t,n);var a=t.prototype;return a.Open=function(){var t=this;n.prototype.Open.call(this),this.infoContainer.active=!0,this.animateInfoContainer(),this.scheduleOnce((function(){t.Close()}),3)},a.animateInfoContainer=function(){this.infoContainer.scale=new s(1.2,1.2,1);var n=this.infoContainer.getComponent(f);n||(n=this.infoContainer.addComponent(f)),n.opacity=0,l(this.infoContainer).to(.2,{scale:new s(1,1,1)}).start(),l(n).to(.2,{opacity:255}).start()},t}(p)).prototype,"infoContainer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_WaitingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts"],(function(e){var n,i,t,a;return{setters:[function(e){n=e.inheritsLoose},function(e){i=e.cclegacy,t=e._decorator},function(e){a=e.MafiaMenu}],execute:function(){var r;i._RF.push({},"16b50I2dNVB9Z0Y9XMNdt/e","Mafia_WaitingScreen",void 0);var c=t.ccclass;t.property,e("MafiaWaitingScreen",c("MafiaWaitingScreen")(r=function(e){function i(){return e.apply(this,arguments)||this}return n(i,e),i}(a))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/Mafia_WordDescriptionScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Menu.ts"],(function(e){var r,n,i,c;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator},function(e){c=e.MafiaMenu}],execute:function(){var t;n._RF.push({},"b9dd67SajxB973UHAenpXcV","Mafia_WordDescriptionScreen",void 0);var o=i.ccclass;i.property,e("MafiaWordDescriptionScreen",o("MafiaWordDescriptionScreen")(t=function(e){function n(){return e.apply(this,arguments)||this}return r(n,e),n}(c))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/MafiaGameHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mafia_Timer.ts","./Mafia_GameMessageType.ts","./Mafia_Player.ts","./Mafia_RoomState.ts","./Mafia_GameState.ts","./Mafia_Clock.ts","./Mafia_TopInfo.ts","./MiloGameSDK.ts","./Mafia_PBLogger.ts","./Mafia_NetworkManager.ts","./Mafia_NetworkTypes.ts","./Mafia_RoomTypes.ts"],(function(e){var t,n,o,i,a,r,s,l,c,u,f,h,m,g,S,p,d,E,y,R,C,G,T,v,I,M,_,w,N,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,s=e._decorator,l=e.EventTarget,c=e.Node,u=e.Color,f=e.game,h=e.Game,m=e.Tween,g=e.Component},function(e){S=e.MafiaTimer},function(e){p=e.MafiaGameMessageType},function(e){d=e.MafiaPlayer},function(e){E=e.MafiaRoomState},function(e){y=e.MafiaGameState},function(e){R=e.MafiaClock},function(e){C=e.MafiaTopInfo},function(e){G=e.MiloGameSDK},function(e){T=e.MafiaPBLogger},function(e){v=e.ConnectionStateChangeEvent,I=e.ServerRoomStateChangeEvent,M=e.ServerMessageEvent,_=e.MafiaNetworkManager},function(e){w=e.MafiaNetworkEvents,N=e.MafiaConnectionState},function(e){b=e.MafiaRoomStatus}],execute:function(){var z,A,O,k,P,D,H,L,V,F,B,W,x,U,J,K,q,j,X;r._RF.push({},"87cedknW3FJRbtrrFF3SX9G","MafiaGameHandler",void 0);var Q=s.ccclass,Y=s.property,Z=s.executionOrder,$="[MafiaGameHandler]",ee=e("GameStateChangeEvent",new l);e("MafiaGameHandler",(z=Q("MafiaGameHandler"),A=Z(-1),O=Y({type:c,tooltip:"Container node for player instances"}),k=Y({type:C,tooltip:"Reference to top info component"}),P=Y({type:R,tooltip:"Reference to game timer component"}),D=Y({type:S,tooltip:"Reference to game timer component"}),H=Y({type:u,tooltip:"Color for the spy"}),L=Y({type:u,tooltip:"Color for the villagers"}),V=Y({type:[d]}),z(F=A(((X=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"playersContainer",W,i(t)),o(t,"topInfo",x,i(t)),o(t,"clock",U,i(t)),o(t,"timer",J,i(t)),o(t,"spyColor",K,i(t)),o(t,"villagersColor",q,i(t)),o(t,"players",j,i(t)),t.miloSDK=new G,t.currentRoomState=null,t.roomSettings=null,t.myPlayerNumber=-1,t.hasReconnected=!1,t.localPlayerId="",t}n(t,e);var r=t.prototype;return r.onLoad=function(){t._instance&&this.node.destroy(),t._instance=this,this.validateRequiredComponents(),this.registerEventListeners()},r.onDestroy=function(){this.cleanup()},r.cleanup=function(){this.unregisterNetworkEvents(),this.unregisterGameEvents(),this.unregisterOnBrowserClose(),t._instance===this&&(t._instance=null)},r.initialize=function(e){this.roomSettings=e,this.logInfo("Initialized with room settings",e)},r.validateRequiredComponents=function(){0===this.players.length&&this.logError("No players UI assigned"),this.playersContainer||this.logError("Players container not assigned"),this.timer||this.logError("Timer component not assigned")},r.registerEventListeners=function(){this.registerNetworkEvents(),this.registerGameEvents(),this.registerOnBrowserClose()},r.unregisterEventListeners=function(){this.unregisterNetworkEvents(),this.unregisterGameEvents(),this.unregisterOnBrowserClose()},r.registerNetworkEvents=function(){v.on(w.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),I.on(w.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),M.on(w.SERVER_MESSAGE,this.onServerMessage,this)},r.unregisterNetworkEvents=function(){v.off(w.CONNECTION_STATE_CHANGE,this.onConnectionStateChange,this),I.off(w.SERVER_ROOM_STATE_CHANGE,this.onServerRoomStateChange,this),M.off(w.SERVER_MESSAGE,this.onServerMessage,this)},r.registerGameEvents=function(){f.on(h.EVENT_HIDE,this.onGameHide,this),f.on(h.EVENT_SHOW,this.onGameShow,this),f.on(h.EVENT_RESTART,this.onGameRestart,this),f.on(h.EVENT_CLOSE,this.onGameClose,this)},r.unregisterGameEvents=function(){f.off(h.EVENT_HIDE,this.onGameHide,this),f.off(h.EVENT_SHOW,this.onGameShow,this),f.off(h.EVENT_RESTART,this.onGameRestart,this),f.off(h.EVENT_CLOSE,this.onGameClose,this)},r.registerOnBrowserClose=function(){window.addEventListener("beforeunload",this.onGameClose.bind(this))},r.unregisterOnBrowserClose=function(){window.removeEventListener("beforeunload",this.onGameClose.bind(this))},r.onServerMessage=function(e,t){this.logInfo("Server message received:",{type:e,message:t}),this.logInfo("Unhandled server message type:",e)},r.onServerRoomStateChange=function(e){this.currentRoomState?(this.currentRoomState.copyFrom(e),this.currentRoomState.currentRoomStatus!==b.END_GAME?this.hasReconnected?this.handleReconnection(this.currentRoomState):(this.handleRoomStateUpdate(this.currentRoomState),this.notifyComponentsOfStateChange(this.currentRoomState)):this.handleEndGameState()):this.initializeRoomState(e)},r.onConnectionStateChange=function(e,t){t===N.DISCONNECTED?this.onGameDisconnect():e===N.RECONNECTING&&t===N.JOINED_ROOM&&(this.hasReconnected=!0,this.onGameReconnect())},r.onGameHide=function(){this.logInfo("Game hidden"),m.stopAll()},r.onGameShow=function(){this.logInfo("Game shown")},r.onGameRestart=function(){this.logInfo("Game restarted")},r.onGameClose=function(){this.logInfo("Game closed")},r.onGameDisconnect=function(){this.logInfo("Game disconnected")},r.onGameReconnect=function(){this.logInfo("Game reconnected")},r.initializeRoomState=function(e){e?(this.currentRoomState=new E,this.currentRoomState.copyFrom(e),this.initializeGameComponents(this.currentRoomState),this.currentRoomState.currentGameState!==y.NONE&&(this.logInfo("Joined game in progress with state:",this.currentRoomState.currentGameState),this.sendReconnectionStateToAllPlayers(this.currentRoomState))):this.logError("Attempted to initialize with null room state")},r.initializeGameComponents=function(e){this.assignMyPlayerNumber(e),this.initializePlayers(e),this.initializeTopInfo(e),this.initializeClock(e)},r.handleEndGameState=function(){this.logInfo("Game Over - State Change:",this.currentRoomState)},r.handleReconnection=function(e){this.logInfo("Reconnection State Change:",e),this.sendReconnectionStateToAllPlayers(e),this.hasReconnected=!1},r.handleRoomStateUpdate=function(e){this.logInfo("Game State Change:",e.currentGameState),e.inputPayload.inputType===p.SET_STATE&&this.handleSetState(e)},r.handleSetState=function(e){this.logInfo("Handling SET STATE"),this.timer.reset(),this.timer.stopTimer(),this.logInfo("Game State Change:",e.currentGameState),ee.emit(w.GAME_STATE_CHANGE,e.currentGameState)},r.notifyComponentsOfStateChange=function(e){this.sendRoomStateToAllPlayers(e),this.sendRoomStateToTopInfo(e),this.sendRoomStateToClock(e)},r.initializePlayers=function(e){var t=this;this.logInfo("Initializing "+e.playersData.length+" players");var n=e.playersData.findIndex((function(e){return e.sessionId===_.Instance.CurrentRoom.sessionId})),o=0;-1!==n&&(this.players[o].initialize(e,n,!0),o++);e.playersData.forEach((function(i,a){a!==n&&(t.players[o].initialize(e,a,o%2==0),o++)}))},r.updatePlayerScores=function(){var e=this;this.currentRoomState&&[].concat(this.currentRoomState.playersData).sort((function(e,t){return t.score-e.score})).forEach((function(t,n){var o=e.players.find((function(e){return e.userId===t.userId}));o&&o.node&&(o.setScore(t.score),o.setRank(n+1),o.node.setSiblingIndex(n))}))},r.getPlayer=function(e){if(e)return this.players.find((function(t){return t.userId===e}));this.logWarning("Attempted to get player with empty ID")},r.assignMyPlayerNumber=function(e){var t=this;e.playersData.forEach((function(e,n){e.sessionId===_.Instance.CurrentRoom.sessionId&&(t.myPlayerNumber=n,t.localPlayerId=e.userId)}))},r.getPlayerName=function(e){var t;return(null==(t=this.players.find((function(t){return t.userId===e})))?void 0:t.playerName)||e},r.initializeTopInfo=function(e){this.topInfo.initialize(e)},r.initializeClock=function(e){this.clock.initialize(e)},r.sendRoomStateToAllPlayers=function(e){this.players.forEach((function(t){t.onServerRoomStateChange(e)}))},r.sendRoomStateToTopInfo=function(e){this.topInfo.onServerRoomStateChange(e)},r.sendRoomStateToClock=function(e){this.clock.onServerRoomStateChange(e)},r.sendReconnectionStateToAllPlayers=function(e){this.logInfo("Reconnection state sent to all players"),this.players.forEach((function(t){t.onReconnection(e)}))},r.getRoomState=function(){return this.currentRoomState},r.isMyTurn=function(){return!1},r.allPlayersFinished=function(){return!1},r.anyPlayerFinished=function(){return!1},r.sendChatMessageToServer=function(e){},r.logInfo=function(e,t){T.info($+" "+e,t)},r.logError=function(e,t){T.error($+" "+e,t)},r.logWarning=function(e,t){T.warning($+" "+e,t)},r.logDebug=function(e,t){T.debug($+" "+e,t)},r.log=function(e,t,n){void 0===n&&(n="info");var o=$+" "+e;switch(n){case"error":T.error(o,t);break;case"warn":T.warning(o,t);break;case"debug":T.debug(o,t);break;default:T.info(o,t)}},r.TruncateName=function(e,t){return void 0===t&&(t=8),e?e.length>t?e.substring(0,t)+"..":e:""},a(t,null,[{key:"Instance",get:function(){if(!this._instance)throw T.error($+" instance not initialized"),new Error("MafiaGameHandler instance not initialized");return this._instance}}]),t}(g))._instance=null,W=t((B=X).prototype,"playersContainer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(B.prototype,"topInfo",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"clock",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(B.prototype,"timer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(B.prototype,"spyColor",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(255,0,0,255)}}),q=t(B.prototype,"villagersColor",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,0,255,255)}}),j=t(B.prototype,"players",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=B))||F)||F));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/mafia_game', 'chunks:///_virtual/mafia_game'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});